##########################################################################
# Exotic Decisions
##########################################################################


# Upgrade Rad-Bloom Transplant Deposit
decision_radiotrophic_upgrade_radblooms = {
	icon = decision_radiotrophic
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			energy =  500
			sr_rad_bloom = 500
		}
	}
		
	prerequisites = { "tech_upgrade_rad_blooms" }
	
	potential = {
		from = { 
			has_trait = trait_pc_irradiated_preference 
			has_technology = tech_upgrade_rad_blooms
		}
		is_planet_class = pc_irradiated
		has_deposit = d_rad_blooms_transplant
	}

	effect = {
		custom_tooltip = decision_radiotrophic_upgrade_radblooms_effects
		hidden_effect = {
			remove_deposit = d_rad_blooms_transplant
			add_deposit = d_rad_blooms_transplant_upgrade
		}
	}   

    ai_weight = {
        weight = 10000
    }
}

# Add Tectonic Drilling Deposit
decision_pd_tectonic_drilling = {
	icon = decision_pd_tectonic_drilling
	resources = {
		category = decisions
		cost = {
			energy =  2000
			rare_crystals = 50
		}
	}
		
	prerequisites = { "tech_ash_tectonic_drillers" }

	allow = {
		space_owner = {
			has_technology = tech_ash_tectonic_drillers
		}
		is_colony = no
	}

	potential = {
		exists = space_owner
		exists = from
		space_owner = { 
			is_same_value = from 
			has_origin = origin_pd_ash_tectonic_drillers
		}
		is_star = no
		is_artificial = no
		is_ringworld = no
		habitable_planet = yes	
		NOR = {		
			is_planet_class = pc_ash
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_pd_arcology = yes
			is_pd_hive_world = yes
			is_pd_hive_arcology = yes
			is_pd_machine = yes
			is_planet_class = pc_gas_giant
			is_pd_robot_arcology = yes
			has_deposit = d_pd_tectonic_fissure
		}
	}

	effect = {
		add_deposit = d_pd_tectonic_fissure
		hidden_effect = {
			add_planet_devastation = 0.5
			add_deposit = d_active_volcano
			add_deposit = d_active_volcano
			add_deposit = d_active_volcano
		}
	}     

    ai_weight = {
        weight = 10000
    }
}

# Add Tectonic Drilling Deposit
decision_pd_tectonic_drilling_planetside = {
	icon = decision_pd_tectonic_drilling
	owned_planets_only = yes
	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			energy =  2000
			rare_crystals = 50
		}
	}

	allow = {
		owner = {
			has_technology = tech_ash_tectonic_drillers
		}
	}

	potential = {
		owner = { 
			has_origin = origin_pd_ash_tectonic_drillers
		}
		is_star = no
		is_artificial = no
		is_ringworld = no
		NOT = { 
			OR = {	
				is_planet_class = pc_relic		
				is_planet_class = pc_ash
				is_planet_class = pc_city
				is_pd_arcology = yes
				is_pd_hive_world = yes
				is_pd_hive_arcology = yes
				is_pd_machine = yes
				is_pd_robot_arcology = yes
				is_planet_class = pc_relic
				is_planet_class = pc_gas_giant
				has_deposit = d_pd_tectonic_fissure
			}
		}
	}

	effect = {
		add_deposit = d_pd_tectonic_fissure
		hidden_effect = {
			add_planet_devastation = 0.5
			add_deposit = d_active_volcano
			add_deposit = d_active_volcano
			add_deposit = d_active_volcano
		}
	}     

    ai_weight = {
        weight = 10000
    }
}

# Remove Tectonic Drilling Deposit, other races
decision_pd_remove_tectonic_drilling = {
	owned_planets_only = yes

	enactment_time = 360
		
	#prerequisites = { "tech_terrestrial_sculpting" }

	icon = decision_pd_tectonic_drilling
	resources = {
		category = decisions
		cost = {
			energy =  1000
		}
	}

	potential = {
		owner = {
			NOT = { has_origin = origin_pd_ash_tectonic_drillers }
		}
		has_deposit = d_pd_tectonic_fissure
	}

	effect = {
		remove_deposit = d_pd_tectonic_fissure
	}     

    ai_weight = {
        weight = 10000
    }
}

# Rogue World Habitats
decision_pd_rogue_better_habs = {
	owned_planets_only = yes

	enactment_time = 720
		
	#prerequisites = { "tech_terrestrial_sculpting" }

	icon = decision_pd_rogue_better_habs
	resources = {
		category = decisions
		cost = {
			alloys = 1000
			sr_dark_matter = 200
		}
	}

	potential = {
		is_planet_class = pc_habitat
		owner = { has_origin = origin_pd_rogue_voidfarers }
		NOT = { has_modifier = rogue_void_architecture }
		star = {
			OR = {
				is_star_class = sc_black_hole
				is_star_class = sc_neutron_star
				is_star_class = sc_pulsar
			}
		}
	}

	effect = {
		add_modifier = {
			modifier = rogue_void_architecture
			days = -1
		}
	}     

    ai_weight = {
        weight = 10000
    }
}

# Rogue World Habitats
decision_pd_rogue_better_habs = {
	owned_planets_only = yes

	enactment_time = 720
		
	#prerequisites = { "tech_terrestrial_sculpting" }

	icon = decision_pd_rogue_better_habs
	resources = {
		category = decisions
		cost = {
			alloys = 1000
			sr_dark_matter = 200
		}
	}

	potential = {
		is_planet_class = pc_habitat
		owner = { has_origin = origin_pd_rogue_voidfarers }
		NOT = { has_modifier = rogue_void_architecture }
		star = {
			OR = {
				is_star_class = sc_black_hole
				is_star_class = sc_neutron_star
				is_star_class = sc_pulsar
			}
		}
	}

	effect = {
		add_modifier = {
			modifier = rogue_void_architecture
			days = -1
		}
	}     

    ai_weight = {
        weight = 10000
    }
}

# Rogue Collapse Start
decision_pd_rogue_collapse_star = {
	#owned_planets_only = yes

	#enactment_time = 720
		
	#prerequisites = { "tech_terrestrial_sculpting" } #TODO
		
	prerequisites = { "tech_rogue_star_collapsing" }

	icon = decision_pd_rogue_better_habs
	resources = {
		category = decisions
		cost = { 
			trigger = { is_planet_class = pc_m_giant_star }
			influence = 50
			sr_dark_matter = 1000
		}
		cost = { 
			trigger = { 
				OR = {
					is_planet_class = pc_a_star
					is_planet_class = pc_b_star
					is_planet_class = pc_f_star
				}
			}
			influence = 50
			sr_dark_matter = 2000
		}
		cost = { 
			trigger = { 
				OR = {
					is_planet_class = pc_g_star
					is_planet_class = pc_k_star
				}
			}
			influence = 50
			sr_dark_matter = 3000
		}
		cost = { 
			trigger = { 
				OR = {
					is_planet_class = pc_m_star
					is_planet_class = pc_t_star
				}
			}
			influence = 50
			sr_dark_matter = 4000
		}
		cost = { 
			trigger = { 
				OR = {
					is_planet_class = pc_pulsar
					is_planet_class = pc_neutron_star
				}
			}
			influence = 50
			sr_dark_matter = 5000
		}
	}

	potential = {
		from = { 
			has_origin = origin_pd_rogue_voidfarers 
		}
		is_star = yes
		NOT = { is_planet_class = pc_black_hole }
		NOT = { has_planet_flag = pd_incoming_black_hole }
	}

	allow = {
		from = { has_technology = tech_rogue_star_collapsing }
		space_owner = { is_at_war = no }
		#is_planet_class = pc_m_giant_star
		OR = {
			space_owner = { has_policy_flag = purge_allowed }
			AND = {
				solar_system = { NOT = { any_system_planet = { is_colony = yes } }
				space_owner = { NOT = { has_policy_flag = purge_allowed } }
				}
			}
		}	
	}

	effect = {
		custom_tooltip = decision_pd_rogue_collapse_star_effects
		hidden_effect = { 
			add_modifier = {
				modifier = pdroguestarcollapse
			}
			planet_event = { id = pdexotic.29 days = 90 } 
			set_timed_planet_flag = { flag = pd_incoming_black_hole days = 90 }
		}
	}     

    ai_weight = {
        weight = 100
    }
}