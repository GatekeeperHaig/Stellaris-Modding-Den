namespace = direct_build_CGMutexpCompPatch
planet_event = {
	id = direct_build_CGMutexpCompPatch.1
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		from = {
			or = {
				has_building = building_power_plant_5_direct_build
				has_building = new_building_dark_matter_power_plant_direct_build
				has_building = building_mining_network_5_direct_build
				has_building = new_building_autonomous_fabricators_direct_build
				has_building = building_hydroponics_farm_5_direct_build
				has_building = new_building_agri_processing_complex_direct_build
				has_building = building_engineering_facility_4_direct_build
				has_building = building_physics_lab_4_direct_build
				has_building = building_biolab_4_direct_build
			}
		}
	}
	immediate = {
		from = {
			switch = {
				trigger = has_building
				building_power_plant_5_direct_build = { remove_building = yes set_building = building_power_plant_5 }
				new_building_dark_matter_power_plant_direct_build = { remove_building = yes set_building = new_building_dark_matter_power_plant }
				building_mining_network_5_direct_build = { remove_building = yes set_building = building_mining_network_5 }
				new_building_autonomous_fabricators_direct_build = { remove_building = yes set_building = new_building_autonomous_fabricators }
				building_hydroponics_farm_5_direct_build = { remove_building = yes set_building = building_hydroponics_farm_5 }
				new_building_agri_processing_complex_direct_build = { remove_building = yes set_building = new_building_agri_processing_complex }
				building_engineering_facility_4_direct_build = { remove_building = yes set_building = building_engineering_facility_4 }
				building_physics_lab_4_direct_build = { remove_building = yes set_building = building_physics_lab_4 }
				building_biolab_4_direct_build = { remove_building = yes set_building = building_biolab_4 }
			}
		}
	}
}
planet_event = {
	id = direct_build_CGMutexpCompPatch.3
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_tile = {
			limit = { has_building = yes }
			switch = {
				trigger = has_building
				building_power_plant_5_direct_build = { remove_building = yes set_building = building_power_plant_5 }
				new_building_dark_matter_power_plant_direct_build = { remove_building = yes set_building = new_building_dark_matter_power_plant }
				building_mining_network_5_direct_build = { remove_building = yes set_building = building_mining_network_5 }
				new_building_autonomous_fabricators_direct_build = { remove_building = yes set_building = new_building_autonomous_fabricators }
				building_hydroponics_farm_5_direct_build = { remove_building = yes set_building = building_hydroponics_farm_5 }
				new_building_agri_processing_complex_direct_build = { remove_building = yes set_building = new_building_agri_processing_complex }
				building_engineering_facility_4_direct_build = { remove_building = yes set_building = building_engineering_facility_4 }
				building_physics_lab_4_direct_build = { remove_building = yes set_building = building_physics_lab_4 }
				building_biolab_4_direct_build = { remove_building = yes set_building = building_biolab_4 }
			}
		}
	}
}
country_event = {
	id = direct_build_CGMutexpCompPatch.2
	hide_window = yes
	fire_only_once = yes
	immediate = {
		every_playable_country = {
			every_owned_planet = { planet_event = { id = direct_build_CGMutexpCompPatch.3 } }
		}
	}
}
