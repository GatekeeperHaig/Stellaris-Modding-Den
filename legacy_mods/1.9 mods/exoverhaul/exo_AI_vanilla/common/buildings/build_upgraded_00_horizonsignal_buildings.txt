#This file was created by script!
#Instead of editing it, you should change the origin files or the script and rerun the script!
#Python files that can be directly used for a rerun (storing all parameters from the last run) should be in the main directory
@b0time = 120
@b0cost = 30
@b0effect = 1
@b0upkeep = 0.5

@b1time = 210
@b1cost = 60
@b1effect = 2
@b1upkeep = 1

@b2time = 180
@b2cost = 90
@b2effect = 3
@b2upkeep = 1.5

@b3time = 180
@b3cost = 120
@b3effect = 4
@b3upkeep = 2

@b4time = 180
@b4cost = 150
@b4effect = 5
@b4upkeep = 2.5

@b5time = 180
@b5cost = 180
@b5effect = 8
@b5upkeep = 3

@feupkeep = 4
@feproduction = 12

@science1 = 1
@science2 = 2
@science3 = 3
@science4 = 4
@science5 = 6

#
#	THE WORM-IN-WAITING
#

building_akx_worm_1 = {
	base_buildtime = @b3time
	is_listed = yes
	planet_unique = yes
	
	cost = {
		minerals = @b3cost
	}
	
	potential = {
		#planet = { is_capital = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_power_hub_absence"
			planet = {
				NOR = {
					has_building = "building_power_hub_1"
					has_building_power_hub_2 = yes
				}
			}
		}
	}
	
	planet_modifier = {
		tile_resource_energy_mult = 0.25
		pop_happiness = -0.05
	}
	
	produced_resources = {
		energy = 6
	}
	
	prerequisites = {
		"tech_akx_worm_1"
	}
	
	ai_allow = {
		NOR = {
			has_resource = {
				type = sr_betharian
				amount > 0
			}
			has_resource = {
				type = sr_alien_pets
				amount > 0
			}
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 10
			tile = {
				has_resource = {
					type = energy
					amount = 1
				}
			}
		}
		modifier = {
			factor = 25
			tile = {
				has_resource = {
					type = energy
					amount = 2
				}
			}
		}
		modifier = {
			factor = 100
			tile = {
				has_resource = {
					type = energy
					amount > 2
				}
			}
		}
		modifier = {
			factor = 0.5
			tile = {
				OR = {
					has_energy = no
					AND = {
						owner_is_not_machine_or_is_servitor = yes
						has_high_food = yes
					}
				}
			}
		}
		modifier = {
			factor = 0.25
			tile = {
				has_slave_pop = yes
				has_prole_or_stapled_pop = yes
				AND = {
					has_non_sapient_robot = yes
					exists = owner
					owner = {
						NOT = {
							has_global_flag = "ex_robots_active"
						}
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				has_energy_bonus_pop = yes
			}
		}
		modifier = {
			factor = 1.25
			AND = {
				owner = {
					has_global_flag = ex_planets_enhanced_active
				}
				tile = {
					any_neighboring_tile = {
						has_building = "building_sr_engos_2"
					}
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				any_neighboring_tile = {
					has_hyperstorage_building = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				any_neighboring_tile = {
					has_capital_building = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				OR = {
					AND = {
						has_robot_pop = yes
						exists = owner
						owner = {
							has_global_flag = "ex_robots_active"
						}
					}
					has_free_sapient_robot = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				owner = {
					has_authority = auth_machine_intelligence
				}
			}
		}
		modifier = {
			factor = 1.25
			planet = {
				has_modifier = "strong_magnetic_field"
			}
		}
		modifier = {
			factor = 5
			planet = {
				has_modifier = "hazardous_weather"
			}
		}
	}
}

building_akx_worm_2 = {
	base_buildtime = @b3time
	is_listed = yes
	planet_unique = yes
	
	cost = {
		minerals = @b3cost
	}
	
	potential = {
		#planet = { is_capital = yes }
	}
	
	allow = {
	}
	
	produced_resources = {
		society_research = 8
	}
	
	planet_modifier = {
		pop_government_ethic_attraction = 0.05
		pop_happiness = 0.05
	}
	
	required_resources = {
		energy = @b3upkeep
	}
	
	prerequisites = {
		"tech_akx_worm_2"
	}
	
	ai_allow = {
		NOR = {
			has_resource = {
				type = sr_betharian
				amount > 0
			}
			has_resource = {
				type = sr_alien_pets
				amount > 0
			}
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 1000
			owner = {
				NOT = {
					has_ethic = ethic_gestalt_consciousness
				}
			}
		}
		modifier = {
			factor = 0.5
			owner = {
				has_ethic = ethic_gestalt_consciousness
			}
		}
		modifier = {
			factor = 0.5
			tile = {
				OR = {
					has_society = no
					AND = {
						owner_is_not_machine_or_is_servitor = yes
						has_high_food = yes
					}
				}
			}
		}
		modifier = {
			factor = 0
			tile = {
				OR = {
					has_slave_pop = yes
					has_prole_or_stapled_pop = yes
					has_non_sapient_robot = yes
				}
			}
		}
		modifier = {
			factor = 2.5
			tile = {
				any_neighboring_tile = {
					has_polytechnic_building = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				OR = {
					has_research_bonus_pop = yes
					has_free_sapient_robot = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				AND = {
					exists = pop
					pop = {
						has_trait = "trait_natural_sociologists"
					}
				}
			}
		}
		modifier = {
			factor = 2.5
			planet = {
				OR = {
					has_modifier = "dangerous_wildlife"
					has_modifier = "titanic_life"
				}
			}
		}
		modifier = {
			factor = 1.25
			planet = {
				OR = {
					has_modifier = "atmospheric_hallucinogen"
					has_modifier = "atmospheric_hallucinogen_good"
				}
			}
		}
	}
}

building_akx_worm_3 = {
	base_buildtime = @b5time
	is_listed = yes
	empire_unique = yes
	
	cost = {
		minerals = @b3cost
	}
	
	potential = {
	}
	
	allow = {
		planet = { is_capital = yes }
	}
	
	produced_resources = {
		physics_research = 10
	}
	
	planet_modifier = {
	}
	
	required_resources = {
		energy = @b5upkeep
	}
	
	prerequisites = {
		"tech_akx_worm_3"
	}
	
	ai_allow = {
		NOR = {
			has_resource = {
				type = sr_betharian
				amount > 0
			}
			has_resource = {
				type = sr_alien_pets
				amount > 0
			}
		}
	}
	
	ai_weight = {
		weight = 10000
		modifier = {
			factor = 25
			tile = {
				has_physics = yes
			}
		}
		modifier = {
			factor = 0.5
			tile = {
				OR = {
					has_physics = no
					AND = {
						owner_is_not_machine_or_is_servitor = yes
						has_high_food = yes
					}
				}
			}
		}
		modifier = {
			factor = 0
			tile = {
				OR = {
					has_slave_pop = yes
					has_prole_or_stapled_pop = yes
					has_non_sapient_robot = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				OR = {
					has_research_bonus_pop = yes
					has_free_sapient_robot = yes
				}
			}
		}
		modifier = {
			factor = 1.25
			tile = {
				AND = {
					exists = pop
					pop = {
						has_trait = "trait_natural_physicists"
					}
				}
			}
		}
		modifier = {
			factor = 2.5
			planet = {
				has_modifier = "wild_storms"
			}
		}
	}
}

building_worm_mine = {
	is_listed = no
	
	allow = {
		always = no
	}
	
	produced_resources = {
		minerals = @feproduction
	}
	
	required_resources = {
		energy = @b3upkeep
	}
	ai_replace = no
	event_building = yes
	
	ai_weight = {
	}
}

building_worm_farm = {
	is_listed = no
	
	allow = {
		always = no
	}
	
	produced_resources = {
		food = @feproduction
	}
	
	required_resources = {
		energy = @b3upkeep
	}
	ai_replace = no
	event_building = yes
	
	ai_weight = {
	}
}
