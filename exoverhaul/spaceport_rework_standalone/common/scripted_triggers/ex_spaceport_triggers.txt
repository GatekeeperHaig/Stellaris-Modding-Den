is_machine_or_synth = {
	OR = {	
		has_authority = auth_machine_intelligence
		has_country_flag = synthetic_age
	}
}	

pop_requires_food = {
	AND = {
		exists = pop
		pop = {
			NOR = {
				is_robot_pop = yes
				is_being_purged = yes	
				AND = {
					is_robot_pop = no
					is_enslaved = yes
					has_slavery_type = { type = slavery_matrix }
				}	
			}	
		}				
	}
}

has_kinetic_spaceport = {
	OR = {
		has_spaceport_module = economic_spaceport_kinetic
		has_spaceport_module = stardock_spaceport_kinetic
		has_spaceport_module = defensive_spaceport_kinetic					
	}
}	

has_energy_spaceport = {
	OR = {
		has_spaceport_module = economic_spaceport_energy
		has_spaceport_module = stardock_spaceport_energy
		has_spaceport_module = defensive_spaceport_energy				
	}
}	

has_explosive_spaceport = {
	OR = {
		has_spaceport_module = economic_spaceport_explosives
		has_spaceport_module = stardock_spaceport_explosives
		has_spaceport_module = defensive_spaceport_explosives		
	}
}	

has_no_spaceport_level_flag = {
	NOR = { 
		has_planet_flag = ex_spaceport_1
		has_planet_flag = ex_spaceport_2
		has_planet_flag = ex_spaceport_3
		has_planet_flag = ex_spaceport_4
		has_planet_flag = ex_spaceport_5
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}	

no_spaceport_level_flag_2_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_2
		has_planet_flag = ex_spaceport_3
		has_planet_flag = ex_spaceport_4
		has_planet_flag = ex_spaceport_5
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}

no_spaceport_level_flag_3_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_3
		has_planet_flag = ex_spaceport_4
		has_planet_flag = ex_spaceport_5
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}		

no_spaceport_level_flag_4_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_4
		has_planet_flag = ex_spaceport_5
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}		

no_spaceport_level_flag_5_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_5
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}		

no_spaceport_level_flag_6_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}		

no_spaceport_level_flag_7_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}		

no_spaceport_level_flag_8_and_higher = {
	NOR = { 
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
	}
}		

no_spaceport_level_flag_9 = {
	NOT = { 
		has_planet_flag = ex_spaceport_9
	}
}		

is_automation_enabled = {
	AND = {
		NOR = {
			has_planet_flag = spaceport_automation_disable_local			
			owner = { has_policy_flag = spaceport_automation_disabled }
		}		
		OR = {		
			AND = {
				sector_controlled = yes
				owner = { has_policy_flag = sector_automation }
			}	
			AND = {
				sector_controlled = no
				OR = {
					owner = { has_policy_flag = core_automation }
					AND = {
						owner = { has_policy_flag = core_edicts }
						has_automation_edict_flag = yes
					}	
				}
			}	
		}		
	}	
}	

has_automation_edict_flag = {
	OR = {
		has_planet_flag = spaceport_automation_economic_specialized				
		has_planet_flag = spaceport_automation_economic_mixed
		has_planet_flag = spaceport_automation_stardock_specialized
		has_planet_flag = spaceport_automation_defensive_specialized
		has_planet_flag = spaceport_automation_defensive_mixed
	}
}	

has_spaceport_level_flag = {
	OR = {
		has_planet_flag = ex_spaceport_1
		has_planet_flag = ex_spaceport_2
		has_planet_flag = ex_spaceport_3
		has_planet_flag = ex_spaceport_4
		has_planet_flag = ex_spaceport_5
		has_planet_flag = ex_spaceport_6
		has_planet_flag = ex_spaceport_7
		has_planet_flag = ex_spaceport_8
		has_planet_flag = ex_spaceport_9
		has_planet_flag = economic_spaceport_1_modifier
		has_planet_flag = economic_spaceport_2_modifier
		has_planet_flag = economic_spaceport_3_modifier
		has_planet_flag = economic_spaceport_4_modifier
		has_planet_flag = economic_spaceport_5_modifier
		has_planet_flag = economic_spaceport_6_modifier
		has_planet_flag = economic_spaceport_7_modifier
		has_planet_flag = economic_spaceport_8_modifier
		has_planet_flag = economic_spaceport_9_modifier
		has_planet_flag = stardock_spaceport_1_modifier
		has_planet_flag = stardock_spaceport_2_modifier
		has_planet_flag = stardock_spaceport_3_modifier
		has_planet_flag = stardock_spaceport_4_modifier
		has_planet_flag = stardock_spaceport_5_modifier
		has_planet_flag = stardock_spaceport_6_modifier
		has_planet_flag = stardock_spaceport_7_modifier
		has_planet_flag = stardock_spaceport_8_modifier
		has_planet_flag = stardock_spaceport_9_modifier
		has_planet_flag = defensive_spaceport_1_modifier
		has_planet_flag = defensive_spaceport_2_modifier
		has_planet_flag = defensive_spaceport_3_modifier
		has_planet_flag = defensive_spaceport_4_modifier
		has_planet_flag = defensive_spaceport_5_modifier
		has_planet_flag = defensive_spaceport_6_modifier
		has_planet_flag = defensive_spaceport_7_modifier
		has_planet_flag = defensive_spaceport_8_modifier
		has_planet_flag = defensive_spaceport_9_modifier
	}
}

has_economic_spaceport = {
	OR = {
		has_spaceport_module = economic_spaceport_kinetic
		has_spaceport_module = economic_spaceport_energy
		has_spaceport_module = economic_spaceport_explosives								
	}
}	

has_stardock_spaceport = {
	OR = {
		has_spaceport_module = stardock_spaceport_kinetic
		has_spaceport_module = stardock_spaceport_energy
		has_spaceport_module = stardock_spaceport_explosives								
	}
}
has_defensive_spaceport = {
	OR = {
		has_spaceport_module = defensive_spaceport_kinetic
		has_spaceport_module = defensive_spaceport_energy
		has_spaceport_module = defensive_spaceport_explosives								
	}
}	

can_build_economic_module = {
	OR = {
		can_build_spaceport_module = solar_power_network_1
		can_build_spaceport_module = solar_power_network_2
		can_build_spaceport_module = robotics_facility
		can_build_spaceport_module = hydroponic_farms_2
		can_build_spaceport_module = orbital_lab_complex_1
		can_build_spaceport_module = orbital_lab_complex_2
		can_build_spaceport_module = orbital_refinery_1
		can_build_spaceport_module = orbital_refinery_2
		can_build_spaceport_module = commercial_terminal
		can_build_spaceport_module = micro_gravity_manufactories
		can_build_spaceport_module = cryogenic_storage_facility
		can_build_spaceport_module = robotics_facility		
	}
}	

can_build_defensive_module = {
	OR = {
		can_build_spaceport_module = spaceport_kinetic_weapon_1
		can_build_spaceport_module = spaceport_kinetic_weapon_2
		can_build_spaceport_module = spaceport_kinetic_weapon_3
		can_build_spaceport_module = spaceport_kinetic_weapon_3
		can_build_spaceport_module = spaceport_energy_weapon_2
		can_build_spaceport_module = spaceport_energy_weapon_3
		can_build_spaceport_module = spaceport_explosive_weapon_1
		can_build_spaceport_module = spaceport_explosive_weapon_2
		can_build_spaceport_module = spaceport_explosive_weapon_3
		can_build_spaceport_module = spaceport_disruptor_1
		can_build_spaceport_module = spaceport_disruptor_2
		can_build_spaceport_module = spaceport_disruptor_3
		can_build_spaceport_module = spaceport_plasma_1
		can_build_spaceport_module = spaceport_plasma_2
		can_build_spaceport_module = spaceport_plasma_3
		can_build_spaceport_module = spaceport_swarmer_missile_1
		can_build_spaceport_module = spaceport_swarmer_missile_2
		can_build_spaceport_module = spaceport_swarmer_missile_3
		can_build_spaceport_module = spaceport_kinetic_artillery_1
		can_build_spaceport_module = spaceport_kinetic_artillery_2
		can_build_spaceport_module = spaceport_kinetic_artillery_3
		can_build_spaceport_module = spaceport_fighter_strike_craft_1
		can_build_spaceport_module = spaceport_fighter_strike_craft_2
		can_build_spaceport_module = spaceport_fighter_strike_craft_3
		can_build_spaceport_module = spaceport_interceptor_strike_craft_1
		can_build_spaceport_module = spaceport_interceptor_strike_craft_2
		can_build_spaceport_module = spaceport_interceptor_strike_craft_3		
	}
}	

can_build_stardock_module = {
	OR = {
		can_build_spaceport_module = civilian_assembly_yards
		can_build_spaceport_module = corvette_assembly_yards
		can_build_spaceport_module = destroyer_assembly_yards 
		can_build_spaceport_module = cruiser_assembly_yards
		can_build_spaceport_module = battleship_assembly_yards
		can_build_spaceport_module = dreadnought_assembly_yard 
		can_build_spaceport_module = engineering_bay
		can_build_spaceport_module = orbital_fleet_support
		can_build_spaceport_module = advanced_weapons_manufactory
	}
}	

### triggers used in spaceport events

has_mass_drivers = {
	OR = {	
		has_technology = "tech_mass_drivers_1"
		has_technology = "tech_mass_drivers_2"
		has_technology = "tech_mass_drivers_3"
		has_technology = "tech_mass_drivers_4"
		has_technology = "tech_mass_drivers_5"			
	}
}

has_lasers = {
	OR = {
		has_technology = "tech_lasers_1"
		has_technology = "tech_lasers_2"
		has_technology = "tech_lasers_3"
		has_technology = "tech_lasers_4"
		has_technology = "tech_lasers_5"
	}
}

has_missiles = {	
	OR = {
		has_technology = "tech_missiles_1"
		has_technology = "tech_missiles_2"
		has_technology = "tech_missiles_3"
		has_technology = "tech_missiles_4"
		has_technology = "tech_missiles_5"
	}
}	

tier_1_kinetics = {
	AND = {	
		has_technology = "tech_mass_drivers_1"
		NOT = {
			has_technology = "tech_mass_drivers_2"
			has_technology = "tech_mass_drivers_3"
			has_technology = "tech_mass_drivers_4"
			has_technology = "tech_mass_drivers_5"
		}	
	}
}

tier_2_kinetics = {
	AND = {	
		has_technology = "tech_mass_drivers_2"
		NOT = {
			has_technology = "tech_mass_drivers_3"
			has_technology = "tech_mass_drivers_4"
			has_technology = "tech_mass_drivers_5"
		}	
	}
}

tier_3_kinetics = {
	AND = {	
		has_technology = "tech_mass_drivers_3"
		NOT = {
			has_technology = "tech_mass_drivers_4"
			has_technology = "tech_mass_drivers_5"
		}	
	}
}

tier_4_kinetics = {
	AND = {	
		has_technology = "tech_mass_drivers_4"
		NOT = {	has_technology = "tech_mass_drivers_5" }	
	}
}

tier_5_kinetics = {	has_technology = "tech_mass_drivers_5" }

tier_1_energy = {
	AND = {
		has_technology = "tech_lasers_1"
		NOT = {		
			has_technology = "tech_lasers_2"
			has_technology = "tech_lasers_3"
			has_technology = "tech_lasers_4"
			has_technology = "tech_lasers_5"
		}	
	}
}

tier_2_energy = {
	AND = {
		has_technology = "tech_lasers_2"
		NOT = {		
			has_technology = "tech_lasers_3"
			has_technology = "tech_lasers_4"
			has_technology = "tech_lasers_5"
		}	
	}
}

tier_3_energy = {
	AND = {
		has_technology = "tech_lasers_3"
		NOT = {		
			has_technology = "tech_lasers_4"
			has_technology = "tech_lasers_5"
		}	
	}
}

tier_4_energy = {
	AND = {
		has_technology = "tech_lasers_4"
		NOT = {	has_technology = "tech_lasers_5" }	
	}
}

tier_5_energy = { has_technology = "tech_lasers_5" }	
	
tier_1_explosives = {	
	AND = {
		has_technology = "tech_missiles_1"
		NOT = {
			has_technology = "tech_missiles_2"
			has_technology = "tech_missiles_3"
			has_technology = "tech_missiles_4"
			has_technology = "tech_missiles_5"
		}	
	}
}	

tier_2_explosives = {	
	AND = {
		has_technology = "tech_missiles_2"
		NOT = {
			has_technology = "tech_missiles_3"
			has_technology = "tech_missiles_4"
			has_technology = "tech_missiles_5"
		}	
	}
}	

tier_3_explosives = {	
	AND = {
		has_technology = "tech_missiles_3"
		NOT = {
			has_technology = "tech_missiles_4"
			has_technology = "tech_missiles_5"
		}	
	}
}	

tier_4_explosives = {	
	AND = {
		has_technology = "tech_missiles_4"
		NOT = {	has_technology = "tech_missiles_5" }	
	}
}	

tier_5_explosives = { has_technology = "tech_missiles_5" }	

tier_1_plasma = {	
	AND = {
		has_technology = "tech_plasma_1"
		NOT = {
			has_technology = "tech_plasma_2"
			has_technology = "tech_plasma_3"
		}	
	}
}

tier_2_plasma = {	
	AND = {
		has_technology = "tech_plasma_2"
		NOT = {
			has_technology = "tech_plasma_3"
		}	
	}
}

tier_3_plasma = {	
	has_technology = "tech_plasma_3"	
}

tier_1_disruptors = {	
	AND = {
		has_technology = "tech_disruptors_1"
		NOT = {
			has_technology = "tech_disruptors_2"
			has_technology = "tech_disruptors_3"
		}	
	}
}

tier_2_disruptors = {	
	AND = {
		has_technology = "tech_disruptors_2"
		NOT = {
			has_technology = "tech_disruptors_3"
		}	
	}
}

tier_3_disruptors = {	
	has_technology = "tech_disruptors_3"	
}

tier_1_swarmer_missiles = {	
	AND = {
		has_technology = "tech_swarmer_missiles_1"
		NOT = {
			has_technology = "tech_swarmer_missiles_2"			
		}	
	}
}

tier_2_swarmer_missiles = {	
	has_technology = "tech_swarmer_missiles_2"
}


tier_1_kinetic_artillery = {	
	AND = {
		has_technology = "tech_kinetic_artillery_1"
		NOT = {
			has_technology = "tech_kinetic_artillery_2"
		}	
	}
}

tier_2_kinetic_artillery = {	
	has_technology = "tech_kinetic_artillery_2"	
}

tier_1_strike_craft = {	
	AND = {
		has_technology = "tech_strike_craft_1"
		NOT = {
			has_technology = "tech_strike_craft_2"
			has_technology = "tech_strike_craft_3"
		}	
	}
}

tier_2_strike_craft = {	
	AND = {
		has_technology = "tech_strike_craft_2"
		NOT = {
			has_technology = "tech_strike_craft_3"
		}	
	}
}

tier_3_strike_craft = {	
	has_technology = "tech_strike_craft_3"	
}

tier_1_shields = {
	AND = {	
		has_technology = "tech_shields_1"
		NOT = {
			has_technology = "tech_shields_2"
			has_technology = "tech_shields_3"
			has_technology = "tech_shields_4"
			has_technology = "tech_shields_5"
			has_technology = "tech_psionic_shield"
			has_technology = "tech_enigmatic_deflector" 
		}	
	}
}

tier_2_shields = {
	AND = {	
		has_technology = "tech_shields_2"
		NOT = {
			has_technology = "tech_shields_3"
			has_technology = "tech_shields_4"
			has_technology = "tech_shields_5"
			has_technology = "tech_psionic_shield"
			has_technology = "tech_enigmatic_deflector" 
		}	
	}
}

tier_3_shields = {
	AND = {	
		has_technology = "tech_shields_3"
		NOT = {
			has_technology = "tech_shields_4"
			has_technology = "tech_shields_5"
			has_technology = "tech_psionic_shield"
			has_technology = "tech_enigmatic_deflector"
		}	
	}
}

tier_4_shields = {
	AND = {	
		has_technology = "tech_shields_4"
		NOT = {	
			has_technology = "tech_shields_5" 
			has_technology = "tech_psionic_shield"
			has_technology = "tech_enigmatic_deflector"
		}	
	}
}

tier_5_shields = {
	AND = {	
		has_technology = "tech_shields_5"
		NOT = {				
			has_technology = "tech_psionic_shield"
			has_technology = "tech_enigmatic_deflector"
		}	
	}
}

tier_6_shields = { 
	OR = {
		has_technology = "tech_psionic_shield"
		has_technology = "tech_enigmatic_deflector" 
	}
}	

no_shield_tech = { 
	NOT = {
		has_technology = "tech_shields_1"
		has_technology = "tech_shields_2"			
		has_technology = "tech_shields_3"
		has_technology = "tech_shields_4"
		has_technology = "tech_shields_5"
	}	
}	