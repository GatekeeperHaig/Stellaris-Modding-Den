namespace = custom_difficulty
#main menu
country_event = {
	id = custom_difficulty.0
	is_triggered_only = yes
	title = custom_difficulty.0.name
	picture = GFX_evt_towel
	desc = {
		trigger = {
			fail_text = {
				text = custom_difficulty.0.desc
				has_global_flag = custom_difficulty_locked
			}
			success_text = {
				text = custom_difficulty.0.locked.desc
				has_global_flag = custom_difficulty_locked
			}
		}
	}
	option = {
		name = custom_difficulty.predefined_difficulties
		hidden_effect = {
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_ai.name
		hidden_effect = {
			country_event = { id = custom_difficulty.1000 }
		}
	}
	option = {
		name = custom_difficulty_ai_yearly.name
		hidden_effect = {
			country_event = { id = custom_difficulty.2000 }
		}
	}
	option = {
		name = custom_difficulty_fe.name
		hidden_effect = {
			country_event = { id = custom_difficulty.3000 }
		}
	}
	option = {
		name = custom_difficulty_leviathan.name
		hidden_effect = {
			country_event = { id = custom_difficulty.4000 }
		}
	}
	option = {
		name = custom_difficulty_player.name
		hidden_effect = {
			country_event = { id = custom_difficulty.5000 }
		}
	}
	option = {
		name = custom_difficulty.0.lock.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.60 }
		}
	}
	option = {
		name = close_custom_difficulty.name
		hidden_effect = {
			country_event = { id = custom_difficulty.40 }
		}
	}
}
#default menu
country_event = {
	id = custom_difficulty.1
	is_triggered_only = yes
	title = custom_difficulty.1.name
	picture = GFX_evt_towel
	desc = {
		trigger = {
			success_text = {
				text = custom_difficulty.0.locked.desc
				has_global_flag = custom_difficulty_locked
			}
			text = custom_difficulty.current_bonuses
			success_text = {
				text = custom_difficulty_easy.name
				has_global_flag = custom_difficulty_easy
			}
			success_text = {
				text = custom_difficulty_ensign.name
				has_global_flag = custom_difficulty_ensign
			}
			success_text = {
				text = custom_difficulty_captain.name
				has_global_flag = custom_difficulty_captain
			}
			success_text = {
				text = custom_difficulty_commodore.name
				has_global_flag = custom_difficulty_commodore
			}
			success_text = {
				text = custom_difficulty_admiral.name
				has_global_flag = custom_difficulty_admiral
			}
			success_text = {
				text = custom_difficulty_grand_admiral.name
				has_global_flag = custom_difficulty_grand_admiral
			}
			success_text = {
				text = custom_difficulty_scaling.name
				has_global_flag = custom_difficulty_scaling
			}
			success_text = {
				text = custom_difficulty_advanced_configuration_player.name
				has_global_flag = custom_difficulty_advanced_configuration_player
			}
			success_text = {
				text = custom_difficulty_advanced_configuration.name
				has_global_flag = custom_difficulty_advanced_configuration
			}
			success_text = {
				text = custom_difficulty_advanced_configuration_yearly.name
				has_global_flag = custom_difficulty_advanced_configuration_yearly
			}
			success_text = {
				text = custom_difficulty_advanced_configuration_crisis.name
				has_global_flag = custom_difficulty_advanced_configuration_crisis
			}
			fails_text = {
				text = custom_difficulty_choose
				has_global_flag = custom_difficulty_locked
			}
		}
	}
	option = {
		name = custom_difficulty_easy.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.101 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_ensign.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.102 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_captain.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.103 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_commodore.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.104 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_admiral.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.105 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_grand_admiral.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.106 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_scaling.name
		trigger = {
			not = { has_global_flag = custom_difficulty_locked }
		}
		hidden_effect = {
			country_event = { id = custom_difficulty.107 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty.back
		hidden_effect = {
			country_event = { id = custom_difficulty.0 }
		}
	}
	option = {
		name = close_custom_difficulty.name
		hidden_effect = {
			country_event = { id = custom_difficulty.40 }
		}
	}
}
#game start init
country_event = {
	id = custom_difficulty.10
	fire_only_once = yes
	hide_window = yes
	trigger = {
		is_ai = no
		not = { has_global_flag = custom_difficulty_active }
	}
	immediate = {
		set_global_flag = custom_difficulty_active
		random_planet = { save_global_event_target_as = custom_difficulty_var_storage }
		#easy
		if = {
			limit = { is_difficulty = 0 }
			country_event = { id = custom_difficulty.101 }
		}
		country_event = { id = custom_difficulty.40 }
		#ensign
		if = {
			limit = { is_difficulty = 2 }
			country_event = { id = custom_difficulty.102 }
		}
		country_event = { id = custom_difficulty.40 }
		#captain
		if = {
			limit = { is_difficulty = 3 }
			country_event = { id = custom_difficulty.103 }
		}
		country_event = { id = custom_difficulty.40 }
		#commodore
		if = {
			limit = { is_difficulty = 4 }
			country_event = { id = custom_difficulty.104 }
		}
		country_event = { id = custom_difficulty.40 }
		#admiral
		if = {
			limit = { is_difficulty = 5 }
			country_event = { id = custom_difficulty.105 }
		}
		country_event = { id = custom_difficulty.40 }
		#grand_admiral
		if = {
			limit = { is_difficulty = 6 }
			country_event = { id = custom_difficulty.106 }
		}
		country_event = { id = custom_difficulty.40 }
		#scaling
		if = {
			limit = { is_difficulty = 1 }
			country_event = { id = custom_difficulty.107 }
		}
		country_event = { id = custom_difficulty.40 }
	}
}
#reset event
country_event = {
	id = custom_difficulty.10
	hide_window = yes
	trigger = {
		is_ai = no
		not = { has_global_flag = custom_difficulty_active }
	}
	immediate = {
		set_global_flag = custom_difficulty_active
		random_planet = { save_global_event_target_as = custom_difficulty_var_storage }
		#easy
		if = {
			limit = { is_difficulty = 0 }
			country_event = { id = custom_difficulty.101 }
		}
		country_event = { id = custom_difficulty.40 }
		#ensign
		if = {
			limit = { is_difficulty = 2 }
			country_event = { id = custom_difficulty.102 }
		}
		country_event = { id = custom_difficulty.40 }
		#captain
		if = {
			limit = { is_difficulty = 3 }
			country_event = { id = custom_difficulty.103 }
		}
		country_event = { id = custom_difficulty.40 }
		#commodore
		if = {
			limit = { is_difficulty = 4 }
			country_event = { id = custom_difficulty.104 }
		}
		country_event = { id = custom_difficulty.40 }
		#admiral
		if = {
			limit = { is_difficulty = 5 }
			country_event = { id = custom_difficulty.105 }
		}
		country_event = { id = custom_difficulty.40 }
		#grand_admiral
		if = {
			limit = { is_difficulty = 6 }
			country_event = { id = custom_difficulty.106 }
		}
		country_event = { id = custom_difficulty.40 }
		#scaling
		if = {
			limit = { is_difficulty = 1 }
			country_event = { id = custom_difficulty.107 }
		}
		country_event = { id = custom_difficulty.40 }
	}
	is_triggered_only = yes
}
#reset confirmation
country_event = {
	name = custom_difficulty.21
	is_triggered_only = yes
	title = custom_difficulty_reset_conf.name
	title = custom_difficulty_reset.desc
	picture = GFX_evt_towel
	option = {
		name = OK
		hidden_effect = {
			country_event = { id = custom_difficulty.22 }
			country_event = { id = custom_difficulty.20 }
			country_event = { id = custom_difficulty.1 }
		}
	}
	option = {
		name = custom_difficulty_cancel
		hidden_effect = {
			country_event = { id = custom_difficulty.1 }
		}
	}
}
#lock confirmation
country_event = {
	id = custom_difficulty.60
	is_triggered_only = yes
	title = custom_difficulty.0.lock.name
	desc = custom_difficulty.0.lock.desc
	picture = GFX_evt_towel
	option = {
		name = OK
		hidden_effect = {
			set_global_flag = custom_difficulty_locked
			country_event = { id = custom_difficulty.40 }
		}
	}
	option = {
		name = custom_difficulty_cancel
		hidden_effect = {
			country_event = { id = custom_difficulty.0 }
		}
	}
}
#all flags
country_event = {
	id = custom_difficulty.22
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		remove_global_flag = custom_difficulty_easy
		remove_global_flag = custom_difficulty_advanced_configuration_player
		remove_global_flag = custom_difficulty_scaling
		remove_global_flag = custom_difficulty_advanced_configuration_scaling
		remove_global_flag = custom_difficulty_advanced_configuration_other
		remove_global_flag = custom_difficulty_ensign
		remove_global_flag = custom_difficulty_captain
		remove_global_flag = custom_difficulty_commodore
		remove_global_flag = custom_difficulty_admiral
		remove_global_flag = custom_difficulty_grand_admiral
	}
}
#player flags
country_event = {
	id = custom_difficulty.25
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		remove_global_flag = custom_difficulty_easy
		remove_global_flag = custom_difficulty_advanced_configuration_player
		remove_global_flag = custom_difficulty_scaling
		remove_global_flag = custom_difficulty_advanced_configuration_scaling
		remove_global_flag = custom_difficulty_advanced_configuration_other
		remove_global_flag = custom_difficulty_ensign
		remove_global_flag = custom_difficulty_captain
		remove_global_flag = custom_difficulty_commodore
		remove_global_flag = custom_difficulty_admiral
		remove_global_flag = custom_difficulty_grand_admiral
	}
}
#scaling flags
country_event = {
	id = custom_difficulty.24
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		remove_global_flag = custom_difficulty_scaling
		remove_global_flag = custom_difficulty_advanced_configuration_scaling
	}
}
#other flags
country_event = {
	id = custom_difficulty.23
	is_triggered_only = yes
	hide_window = yes
	immediate = {
		remove_global_flag = custom_difficulty_advanced_configuration_other
		remove_global_flag = custom_difficulty_ensign
		remove_global_flag = custom_difficulty_captain
		remove_global_flag = custom_difficulty_commodore
		remove_global_flag = custom_difficulty_admiral
		remove_global_flag = custom_difficulty_grand_admiral
	}
}
