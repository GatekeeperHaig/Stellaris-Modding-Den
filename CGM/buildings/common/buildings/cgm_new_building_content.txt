 #This file was created by script!
 #Instead of editing it, you should change the origin files or the script and rerun the script!
 #Python files that can be directly used for a rerun (storing all parameters from the last run) should be in the main directory
 #### Structure of this file
 # 1. planet unique buildings and unity
 # 2. non-restricted resource buildings
 # 3. tile restricted resource buildings
 ###planet unique buildings
 #resource buildings
building_agricultural_processor_1_hidden_tree_root = {
	potential = { always = no }
	planet_unique = yes
	icon = building_agricultural_processor_1
}
building_agricultural_processor_1 = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	is_listed = yes
	base_buildtime = 180
	cost = { minerals = @planet_unique_cost_1 }
	required_resources = { energy = 2 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		agricultural_processor_conditions = yes
		NAND = {
			owner = { has_technology = "tech_agricultural_processing_2" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_agricultural_processing_1" }
	upgrades = { building_agricultural_processor_2 }
	 #resource output and modifiers
	produced_resources = { food = 2 }
	planet_modifier = { tile_resource_food_mult = 0.10 }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = yes
		planet_unique_prerequisite = yes
		OR = {
			has_resource = { type = food amount = 1 }
			has_deposit = no
		}
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
	}
}
building_agricultural_processor_2_direct_build = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	base_buildtime = 315
	cost = { minerals = 350 }
	required_resources = { energy = 3 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		agricultural_processor_conditions = yes
		NOT = { has_building = building_agricultural_processor_2 }
		direct_build_enabled = yes
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_agricultural_processing_2" }
	 #resource output and modifiers
	produced_resources = { food = 4 }
	planet_modifier = { tile_resource_food_mult = 0.20 }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = yes
		planet_unique_prerequisite = yes
		OR = {
			has_resource = { type = food amount = 1 }
			has_deposit = no
		}
	}
	show_tech_unlock_if = { always = no }
	icon = building_agricultural_processor_2
	upgrades = { building_agricultural_processor_1_hidden_tree_root }
}
building_agricultural_processor_2 = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	is_listed = no
	base_buildtime = 180
	cost = { minerals = @planet_unique_cost_2 }
	required_resources = { energy = 3 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	show_tech_unlock_if = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		is_machine_empire = no
	}
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		agricultural_processor_conditions = yes
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_agricultural_processing_2" }
	 #resource output and modifiers
	produced_resources = { food = 4 }
	planet_modifier = { tile_resource_food_mult = 0.20 }
	 #ai restrictions and weights
	ai_allow = { food_buildings_limitation = no }
	upgrades = { building_agricultural_processor_1_hidden_tree_root }
}
building_hyperstorage_facility_1_hidden_tree_root = {
	potential = { always = no }
	planet_unique = yes
	icon = building_hyperstorage_facility_1
}
building_hyperstorage_facility_1 = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	is_listed = yes
	base_buildtime = 180
	cost = { minerals = @planet_unique_cost_1 }
	 #required_resources = { energy = 2 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NAND = {
			owner = { has_technology = "tech_hyperstorage_2" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hyperstorage_1" }
	upgrades = { building_hyperstorage_facility_2 }
	 #resource output and modifiers
	adjacency_bonus = {
		tile_building_resource_minerals_add = @hyperstorage_t1_adjacency_bonus
		tile_building_resource_food_add = @hyperstorage_t1_adjacency_bonus
		tile_building_resource_energy_add = @hyperstorage_t1_adjacency_bonus
	}
	produced_resource_trigger = {
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { minerals = 2 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { minerals = 4 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { energy = 4 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			resources = { energy = 2 minerals = 2 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			NOR = {
				has_country_flag = is_food_starved
				has_country_flag = is_minerals_starved
				has_country_flag = is_energy_starved
			}
			resources = { food = 1 minerals = 1 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_food_starved
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { food = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			NOR = { has_country_flag = is_food_starved has_country_flag = is_energy_starved }
			resources = { minerals = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { food = 2 minerals = 2 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { food = 2 energy = 2 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_food_starved }
			resources = { minerals = 2 energy = 2 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			resources = {
				food = 2
				minerals = 1
				energy = 1
			}
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		hyperstorage_ai_allow = yes
	}
	ai_weight = { weight = 20 }
}
building_hyperstorage_facility_2_direct_build = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	base_buildtime = 315
	cost = { minerals = 350 }
	 #required_resources = { energy = 4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_hyperstorage_facility_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_hyperstorage_3" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_hyperstorage_2" }
	upgrades = { building_hyperstorage_facility_3 }
	 #resource output and modifiers
	adjacency_bonus = {
		tile_building_resource_minerals_add = @hyperstorage_t2_adjacency_bonus
		tile_building_resource_food_add = @hyperstorage_t2_adjacency_bonus
		tile_building_resource_energy_add = @hyperstorage_t2_adjacency_bonus
	}
	produced_resource_trigger = {
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { minerals = 3 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { minerals = 6 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { energy = 6 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			resources = { energy = 3 minerals = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			NOR = {
				has_country_flag = is_food_starved
				has_country_flag = is_minerals_starved
				has_country_flag = is_energy_starved
			}
			resources = { food = 1.5 minerals = 1.5 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_food_starved
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { food = 6 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			NOR = { has_country_flag = is_food_starved has_country_flag = is_energy_starved }
			resources = { minerals = 6 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { food = 3 minerals = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { food = 3 energy = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_food_starved }
			resources = { minerals = 3 energy = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			resources = {
				food = 3
				minerals = 1.5
				energy = 1.5
			}
		}
	}
	 #ai restrictions and weights
	ai_weight = { weight = 20 }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		hyperstorage_ai_allow = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_hyperstorage_facility_2
}
building_hyperstorage_facility_2 = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	is_listed = no
	base_buildtime = 180
	cost = { minerals = @planet_unique_cost_2 }
	 #required_resources = { energy = 4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_hyperstorage_2" }
	upgrades = { building_hyperstorage_facility_3 }
	 #resource output and modifiers
	adjacency_bonus = {
		tile_building_resource_minerals_add = @hyperstorage_t2_adjacency_bonus
		tile_building_resource_food_add = @hyperstorage_t2_adjacency_bonus
		tile_building_resource_energy_add = @hyperstorage_t2_adjacency_bonus
	}
	produced_resource_trigger = {
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { minerals = 3 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { minerals = 6 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { energy = 6 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			resources = { energy = 3 minerals = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			NOR = {
				has_country_flag = is_food_starved
				has_country_flag = is_minerals_starved
				has_country_flag = is_energy_starved
			}
			resources = { food = 1.5 minerals = 1.5 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_food_starved
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { food = 6 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			NOR = { has_country_flag = is_food_starved has_country_flag = is_energy_starved }
			resources = { minerals = 6 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { food = 3 minerals = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { food = 3 energy = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_food_starved }
			resources = { minerals = 3 energy = 3 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			resources = {
				food = 3
				minerals = 1.5
				energy = 1.5
			}
		}
	}
	 #ai restrictions and weights
	ai_weight = { weight = 20 }
}
building_hyperstorage_facility_3_direct_build = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	base_buildtime = 450
	cost = { minerals = 600 }
	 #required_resources = { energy = 4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_hyperstorage_facility_3 }
		direct_build_enabled = yes
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_hyperstorage_3" }
	 #resource output and modifiers
	adjacency_bonus = {
		tile_building_resource_minerals_add = @hyperstorage_t3_adjacency_bonus
		tile_building_resource_food_add = @hyperstorage_t3_adjacency_bonus
		tile_building_resource_energy_add = @hyperstorage_t3_adjacency_bonus
	}
	produced_resource_trigger = {
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { minerals = 4 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { minerals = 8 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { energy = 8 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			resources = { energy = 4 minerals = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			NOR = {
				has_country_flag = is_food_starved
				has_country_flag = is_minerals_starved
				has_country_flag = is_energy_starved
			}
			resources = { food = 2 minerals = 2 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_food_starved
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { food = 8 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			NOR = { has_country_flag = is_food_starved has_country_flag = is_energy_starved }
			resources = { minerals = 8 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { food = 4 minerals = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { food = 4 energy = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_food_starved }
			resources = { minerals = 4 energy = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			resources = {
				food = 4
				minerals = 2
				energy = 2
			}
		}
	}
	 #ai restrictions and weights
	ai_weight = { weight = 20 }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		hyperstorage_ai_allow = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_hyperstorage_facility_3
	upgrades = { building_hyperstorage_facility_1_hidden_tree_root }
}
building_hyperstorage_facility_3 = {
	 #building defines
	tags = { planet_unique_building }
	planet_unique = yes
	is_listed = no
	base_buildtime = 180
	cost = { minerals = @planet_unique_cost_3 }
	 #required_resources = { energy = 4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_hyperstorage_3" }
	 #resource output and modifiers
	adjacency_bonus = {
		tile_building_resource_minerals_add = @hyperstorage_t3_adjacency_bonus
		tile_building_resource_food_add = @hyperstorage_t3_adjacency_bonus
		tile_building_resource_energy_add = @hyperstorage_t3_adjacency_bonus
	}
	produced_resource_trigger = {
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { minerals = 4 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { minerals = 8 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { energy = 8 }
		}
		modifier = {
			OR = { is_machine_empire = yes is_synth_empire = yes }
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			resources = { energy = 4 minerals = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			NOR = {
				has_country_flag = is_food_starved
				has_country_flag = is_minerals_starved
				has_country_flag = is_energy_starved
			}
			resources = { food = 2 minerals = 2 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_food_starved
			NOR = { has_country_flag = is_minerals_starved has_country_flag = is_energy_starved }
			resources = { food = 8 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			NOR = { has_country_flag = is_food_starved has_country_flag = is_energy_starved }
			resources = { minerals = 8 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_energy_starved }
			resources = { food = 4 minerals = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_food_starved
			NOT = { has_country_flag = is_minerals_starved }
			resources = { food = 4 energy = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			NOT = { has_country_flag = is_food_starved }
			resources = { minerals = 4 energy = 4 }
		}
		modifier = {
			is_machine_empire = no
			is_synth_empire = no
			has_country_flag = is_energy_starved
			has_country_flag = is_minerals_starved
			has_country_flag = is_food_starved
			resources = {
				food = 4
				minerals = 2
				energy = 2
			}
		}
	}
	 #ai restrictions and weights
	ai_weight = { weight = 20 }
	upgrades = { building_hyperstorage_facility_1_hidden_tree_root }
}
 ### Non-restricted Resource Buildings
building_economic_district_1 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @non_restricted_t1_time
	cost = { minerals = @non_restricted_t1_cost }
	required_resources = { minerals = @economic_district_upkeep_1 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_2" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = energy amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	show_tech_unlock_if = { new_building_content_enabled = yes }
	allow = { requires_capital_0_or_hab = yes }
	prerequisites = { "tech_power_plant_1" }
	upgrades = { building_economic_district_2 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t1_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_economic_district_2_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 120 }
	required_resources = { minerals = @economic_district_upkeep_2 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_economic_district_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_3" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = energy amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_economic_district_3 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t2_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_economic_district_2
}
building_economic_district_2 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t2_time
	cost = { minerals = @non_restricted_t2_cost }
	required_resources = { minerals = @economic_district_upkeep_2 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_economic_district_3 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t2_output }
}
building_economic_district_3_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 240 }
	required_resources = { minerals = @economic_district_upkeep_3 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_economic_district_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_4" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = energy amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_economic_district_4 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t3_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_economic_district_3
}
building_economic_district_3 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t3_time
	cost = { minerals = @non_restricted_t3_cost }
	required_resources = { minerals = @economic_district_upkeep_3 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_economic_district_4 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t3_output }
}
building_economic_district_4_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 400 }
	required_resources = { minerals = @economic_district_upkeep_4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_economic_district_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_5" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = energy amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_economic_district_5 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t4_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_economic_district_4
}
building_economic_district_4 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t4_time
	cost = { minerals = @non_restricted_t4_cost }
	required_resources = { minerals = @economic_district_upkeep_4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_economic_district_5 }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t4_output }
}
building_economic_district_5_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 600 }
	required_resources = { minerals = @economic_district_upkeep_5 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_economic_district_5 }
		direct_build_enabled = yes
		OR = {
			tile = {
				NOT = {
					has_resource = { type = energy amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_energy_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_economic_district_5
}
building_economic_district_5 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t5_time
	cost = { minerals = @non_restricted_t5_cost }
	required_resources = { minerals = @economic_district_upkeep_5 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	 #resource output and modifiers
	produced_resources = { energy = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_energy_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
}
building_manufacturing_complex_1 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @non_restricted_t1_time
	cost = { minerals = @non_restricted_t1_cost }
	required_resources = { energy = @manufacturing_complex_upkeep_1 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_2" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_factory } }
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = minerals amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_industry" }
	upgrades = { building_manufacturing_complex_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t1_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
}
building_manufacturing_complex_2_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 120 }
	required_resources = { energy = @manufacturing_complex_upkeep_2 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_manufacturing_complex_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_3" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = minerals amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_manufacturing_complex_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t2_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_manufacturing_complex_2
}
building_manufacturing_complex_2 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t2_time
	cost = { minerals = @non_restricted_t2_cost }
	required_resources = { energy = @manufacturing_complex_upkeep_2 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_manufacturing_complex_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t2_output }
}
building_manufacturing_complex_3_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 240 }
	required_resources = { energy = @manufacturing_complex_upkeep_3 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_manufacturing_complex_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_4" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = minerals amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_manufacturing_complex_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t3_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_manufacturing_complex_3
}
building_manufacturing_complex_3 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t3_time
	cost = { minerals = @non_restricted_t3_cost }
	required_resources = { energy = @manufacturing_complex_upkeep_3 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_manufacturing_complex_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t3_output }
}
building_manufacturing_complex_4_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 400 }
	required_resources = { energy = @manufacturing_complex_upkeep_4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_manufacturing_complex_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_5" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = minerals amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_manufacturing_complex_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t4_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_manufacturing_complex_4
}
building_manufacturing_complex_4 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t4_time
	cost = { minerals = @non_restricted_t4_cost }
	required_resources = { energy = @manufacturing_complex_upkeep_4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_manufacturing_complex_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t4_output }
}
building_manufacturing_complex_5_direct_build = {
	 #building defines
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 600 }
	required_resources = { energy = @manufacturing_complex_upkeep_5 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_manufacturing_complex_5 }
		direct_build_enabled = yes
		OR = {
			tile = {
				NOT = {
					has_resource = { type = minerals amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_mining_network_5" }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_minerals_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_manufacturing_complex_5
}
building_manufacturing_complex_5 = {
	 #building defines
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t5_time
	cost = { minerals = @non_restricted_t5_cost }
	required_resources = { energy = @manufacturing_complex_upkeep_5 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_mining_network_5" }
	 #resource output and modifiers
	produced_resources = { minerals = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_minerals_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
}
building_hydroponic_farm_1 = {
	 #building defines
	icon = "building_hydroponics_farm_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @non_restricted_t1_time
	cost = { minerals = @non_restricted_t1_cost }
	required_resources = { energy = @hydroponic_farm_upkeep_1 minerals = @hydroponic_farm_upkeep_1 }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
		NAND = {
			owner = { has_technology = "tech_hydroponics" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_farm } }
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = food amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_0_or_hab = yes }
	prerequisites = { "tech_eco_simulation" }
	upgrades = { building_hydroponic_farm_2 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t1_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_deposit = no
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
	}
}
building_hydroponic_farm_2_direct_build = {
	 #building defines
	icon = "building_hydroponics_farm_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 120 }
	required_resources = { energy = @hydroponic_farm_upkeep_2 minerals = @hydroponic_farm_upkeep_2 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
		NOT = { has_building = building_hydroponic_farm_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_gene_crops" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = food amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_hydroponic_farm_3 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t2_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_deposit = no
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_hydroponic_farm_2 = {
	 #building defines
	icon = "building_hydroponics_farm_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t2_time
	cost = { minerals = @non_restricted_t2_cost }
	required_resources = { energy = @hydroponic_farm_upkeep_2 minerals = @hydroponic_farm_upkeep_2 }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_hydroponic_farm_3 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t2_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = { food_buildings_limitation = no }
}
building_hydroponic_farm_3_direct_build = {
	 #building defines
	icon = "building_hydroponics_farm_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 240 }
	required_resources = { energy = @hydroponic_farm_upkeep_3 minerals = @hydroponic_farm_upkeep_3 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
		NOT = { has_building = building_hydroponic_farm_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_nano_vitality_crops" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = food amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_hydroponic_farm_4 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t3_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_deposit = no
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_hydroponic_farm_3 = {
	 #building defines
	icon = "building_hydroponics_farm_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t3_time
	cost = { minerals = @non_restricted_t3_cost }
	required_resources = { energy = @hydroponic_farm_upkeep_3 minerals = @hydroponic_farm_upkeep_3 }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_hydroponic_farm_4 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t3_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = { food_buildings_limitation = no }
}
building_hydroponic_farm_4_direct_build = {
	 #building defines
	icon = "building_hydroponics_farm_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 400 }
	required_resources = { energy = @hydroponic_farm_upkeep_4 minerals = @hydroponic_farm_upkeep_4 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
		NOT = { has_building = building_hydroponic_farm_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_superior_agriculture" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = food amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_hydroponic_farm_5 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t4_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_deposit = no
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_hydroponic_farm_4 = {
	 #building defines
	icon = "building_hydroponics_farm_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t4_time
	cost = { minerals = @non_restricted_t4_cost }
	required_resources = { energy = @hydroponic_farm_upkeep_4 minerals = @hydroponic_farm_upkeep_4 }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_hydroponic_farm_5 }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t4_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = { food_buildings_limitation = no }
}
building_hydroponic_farm_5_direct_build = {
	 #building defines
	icon = "building_hydroponics_farm_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 600 }
	required_resources = { energy = @hydroponic_farm_upkeep_5 minerals = @hydroponic_farm_upkeep_5 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
		NOT = { has_building = building_hydroponic_farm_5 }
		direct_build_enabled = yes
		OR = {
			tile = {
				NOT = {
					has_resource = { type = food amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t5_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_food_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_deposit = no
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_hydroponic_farm_5 = {
	 #building defines
	icon = "building_hydroponics_farm_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t5_time
	cost = { minerals = @non_restricted_t5_cost }
	required_resources = { energy = @hydroponic_farm_upkeep_5 minerals = @hydroponic_farm_upkeep_5 }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	destroy_if = { food_buildings_destroy_conditions = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		hydroponic_compound_conditions = yes
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	 #resource output and modifiers
	produced_resources = { food = @non_restricted_t5_output }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_food_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	 #ai restrictions and weights
	ai_allow = { food_buildings_limitation = no }
}
building_sociological_campus_1 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @non_restricted_t1_time
	cost = { minerals = @non_restricted_t1_cost }
	required_resources = { energy = @sociological_campus_upkeep_1 minerals = @sociological_campus_upkeep_1 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NAND = {
			owner = { has_technology = "tech_biolab_1" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = society_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	show_tech_unlock_if = { new_building_content_enabled = yes }
	allow = { requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_sociological_campus_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t1_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
		modifier = {
			factor = 0
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 10 }
					}
					has_monthly_income = { resource = energy value < 25 }
					has_monthly_income = { resource = minerals value < 25 }
				}
			}
		}
		modifier = {
			factor = 0.5
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 25 }
					}
					has_monthly_income = { resource = energy value < 50 }
					has_monthly_income = { resource = minerals value < 50 }
				}
			}
		}
		modifier = {
			factor = 0.75
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 50 }
					}
					has_monthly_income = { resource = energy value < 100 }
					has_monthly_income = { resource = minerals value < 100 }
				}
			}
		}
	}
}
building_sociological_campus_2_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 120 }
	required_resources = { energy = @sociological_campus_upkeep_2 minerals = @sociological_campus_upkeep_2 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_sociological_campus_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_2" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = society_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_sociological_campus_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t2_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_sociological_campus_2
}
building_sociological_campus_2 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t2_time
	cost = { minerals = @non_restricted_t2_cost }
	required_resources = { energy = @sociological_campus_upkeep_2 minerals = @sociological_campus_upkeep_2 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_sociological_campus_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t2_output }
}
building_sociological_campus_3_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 240 }
	required_resources = { energy = @sociological_campus_upkeep_3 minerals = @sociological_campus_upkeep_3 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_sociological_campus_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_3" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = society_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_sociological_campus_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t3_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_sociological_campus_3
}
building_sociological_campus_3 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t3_time
	cost = { minerals = @non_restricted_t3_cost }
	required_resources = { energy = @sociological_campus_upkeep_3 minerals = @sociological_campus_upkeep_3 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_sociological_campus_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t3_output }
}
building_sociological_campus_4_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 400 }
	required_resources = { energy = @sociological_campus_upkeep_4 minerals = @sociological_campus_upkeep_4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_sociological_campus_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_4" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = society_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_sociological_campus_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t4_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_sociological_campus_4
}
building_sociological_campus_4 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t4_time
	cost = { minerals = @non_restricted_t4_cost }
	required_resources = { energy = @sociological_campus_upkeep_4 minerals = @sociological_campus_upkeep_4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_sociological_campus_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t4_output }
}
building_sociological_campus_5_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 600 }
	required_resources = { energy = @sociological_campus_upkeep_5 minerals = @sociological_campus_upkeep_5 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_sociological_campus_5 }
		direct_build_enabled = yes
		OR = {
			tile = {
				NOT = {
					has_resource = { type = society_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_society_research_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_sociological_campus_5
}
building_sociological_campus_5 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t5_time
	cost = { minerals = @non_restricted_t5_cost }
	required_resources = { energy = @sociological_campus_upkeep_5 minerals = @sociological_campus_upkeep_5 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	 #resource output and modifiers
	produced_resources = { society_research = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_society_research_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
}
building_physics_campus_1 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @non_restricted_t1_time
	cost = { minerals = @non_restricted_t1_cost }
	required_resources = { energy = @physics_campus_upkeep_1 minerals = @physics_campus_upkeep_1 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_1" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = physics_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_physics_campus_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t1_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
		modifier = {
			factor = 0
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 10 }
					}
					has_monthly_income = { resource = energy value < 25 }
					has_monthly_income = { resource = minerals value < 25 }
				}
			}
		}
		modifier = {
			factor = 0.5
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 25 }
					}
					has_monthly_income = { resource = energy value < 50 }
					has_monthly_income = { resource = minerals value < 50 }
				}
			}
		}
		modifier = {
			factor = 0.75
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 50 }
					}
					has_monthly_income = { resource = energy value < 100 }
					has_monthly_income = { resource = minerals value < 100 }
				}
			}
		}
	}
}
building_physics_campus_2_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 120 }
	required_resources = { energy = @physics_campus_upkeep_2 minerals = @physics_campus_upkeep_2 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_physics_campus_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_2" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = physics_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_campus_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t2_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_physics_campus_2
}
building_physics_campus_2 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t2_time
	cost = { minerals = @non_restricted_t2_cost }
	required_resources = { energy = @physics_campus_upkeep_2 minerals = @physics_campus_upkeep_2 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_campus_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t2_output }
}
building_physics_campus_3_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 240 }
	required_resources = { energy = @physics_campus_upkeep_3 minerals = @physics_campus_upkeep_3 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_physics_campus_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_3" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = physics_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_campus_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t3_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_physics_campus_3
}
building_physics_campus_3 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t3_time
	cost = { minerals = @non_restricted_t3_cost }
	required_resources = { energy = @physics_campus_upkeep_3 minerals = @physics_campus_upkeep_3 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_campus_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t3_output }
}
building_physics_campus_4_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 400 }
	required_resources = { energy = @physics_campus_upkeep_4 minerals = @physics_campus_upkeep_4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_physics_campus_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_4" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = physics_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_campus_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t4_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_physics_campus_4
}
building_physics_campus_4 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t4_time
	cost = { minerals = @non_restricted_t4_cost }
	required_resources = { energy = @physics_campus_upkeep_4 minerals = @physics_campus_upkeep_4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_campus_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t4_output }
}
building_physics_campus_5_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 600 }
	required_resources = { energy = @physics_campus_upkeep_5 minerals = @physics_campus_upkeep_5 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_physics_campus_5 }
		direct_build_enabled = yes
		OR = {
			tile = {
				NOT = {
					has_resource = { type = physics_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_physics_research_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_physics_campus_5
}
building_physics_campus_5 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t5_time
	cost = { minerals = @non_restricted_t5_cost }
	required_resources = { energy = @physics_campus_upkeep_5 minerals = @physics_campus_upkeep_5 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	 #resource output and modifiers
	produced_resources = { physics_research = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_physics_research_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
}
building_engineering_campus_1 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @non_restricted_t1_time
	cost = { minerals = @non_restricted_t1_cost }
	required_resources = { energy = @engineering_campus_upkeep_1 minerals = @engineering_campus_upkeep_1 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_1" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = engineering_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_engineering_campus_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t1_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
		modifier = {
			factor = 0
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 10 }
					}
					has_monthly_income = { resource = energy value < 25 }
					has_monthly_income = { resource = minerals value < 25 }
				}
			}
		}
		modifier = {
			factor = 0.5
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 25 }
					}
					has_monthly_income = { resource = energy value < 50 }
					has_monthly_income = { resource = minerals value < 50 }
				}
			}
		}
		modifier = {
			factor = 0.75
			from.owner = {
				OR = {
					AND = {
						OR = { is_machine_empire = no is_servitor = yes }
						has_monthly_income = { resource = food value < 50 }
					}
					has_monthly_income = { resource = energy value < 100 }
					has_monthly_income = { resource = minerals value < 100 }
				}
			}
		}
	}
}
building_engineering_campus_2_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 120 }
	required_resources = { energy = @engineering_campus_upkeep_2 minerals = @engineering_campus_upkeep_2 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_engineering_campus_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_2" }
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = engineering_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_campus_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t2_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_engineering_campus_2
}
building_engineering_campus_2 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t2_time
	cost = { minerals = @non_restricted_t2_cost }
	required_resources = { energy = @engineering_campus_upkeep_2 minerals = @engineering_campus_upkeep_2 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_campus_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t2_output }
}
building_engineering_campus_3_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 240 }
	required_resources = { energy = @engineering_campus_upkeep_3 minerals = @engineering_campus_upkeep_3 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_engineering_campus_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_3" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = engineering_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_campus_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t3_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_engineering_campus_3
}
building_engineering_campus_3 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t3_time
	cost = { minerals = @non_restricted_t3_cost }
	required_resources = { energy = @engineering_campus_upkeep_3 minerals = @engineering_campus_upkeep_3 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_campus_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t3_output }
}
building_engineering_campus_4_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 400 }
	required_resources = { energy = @engineering_campus_upkeep_4 minerals = @engineering_campus_upkeep_4 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_engineering_campus_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_4" }
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
		OR = {
			tile = {
				NOT = {
					has_resource = { type = engineering_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_campus_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t4_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_engineering_campus_4
}
building_engineering_campus_4 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t4_time
	cost = { minerals = @non_restricted_t4_cost }
	required_resources = { energy = @engineering_campus_upkeep_4 minerals = @engineering_campus_upkeep_4 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_campus_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t4_output }
}
building_engineering_campus_5_direct_build = {
	 #building defines
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 600 }
	required_resources = { energy = @engineering_campus_upkeep_5 minerals = @engineering_campus_upkeep_5 }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		NOT = { has_building = building_engineering_campus_5 }
		direct_build_enabled = yes
		OR = {
			tile = {
				NOT = {
					has_resource = { type = engineering_research amount > 0 }
				}
			}
			planet_is_artificial = yes
		}
	}
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_engineering_research_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		has_no_deposit_or_allow_on_food = yes
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
	icon = building_engineering_campus_5
}
building_engineering_campus_5 = {
	 #building defines
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @non_restricted_t5_time
	cost = { minerals = @non_restricted_t5_cost }
	required_resources = { energy = @engineering_campus_upkeep_5 minerals = @engineering_campus_upkeep_5 }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes planet_is_not_virtual = yes }
	allow = { requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	 #resource output and modifiers
	produced_resources = { engineering_research = @non_restricted_t5_output }
	triggered_planet_modifier = {
		key = "capital_3_tile_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { tile_resource_engineering_research_mult = @non_restricted_t5_capital_tile_resource_mult }
	}
}
 ### Tile Restricted Resource Buildings
building_mining_complex_1_1 = {
	icon = "building_mining_network_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
		NAND = {
			owner = { has_technology = "tech_mining_network_2" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_factory } }
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_0 = yes }
	prerequisites = { "tech_basic_industry" }
	upgrades = { building_mining_complex_2_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
}
building_mining_complex_2_1_direct_build = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_3" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_2_1 = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
}
building_mining_complex_3_1_direct_build = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_4" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_3_1 = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
}
building_mining_complex_4_1_direct_build = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_5" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_4_1 = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
}
building_mining_complex_5_1_direct_build = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_5_1 = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_mining_complex_1_2 = {
	icon = "building_mining_network_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
		NAND = {
			owner = { has_technology = "tech_mining_network_2" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_factory } }
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_0 = yes }
	prerequisites = { "tech_basic_industry" }
	upgrades = { building_mining_complex_2_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
}
building_mining_complex_2_2_direct_build = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_3" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_2_2 = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
}
building_mining_complex_3_2_direct_build = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_4" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_3_2 = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
}
building_mining_complex_4_2_direct_build = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_5" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_4_2 = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
}
building_mining_complex_5_2_direct_build = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_5_2 = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_mining_complex_1_3 = {
	icon = "building_mining_network_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
		NAND = {
			owner = { has_technology = "tech_mining_network_2" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_factory } }
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_0 = yes }
	prerequisites = { "tech_basic_industry" }
	upgrades = { building_mining_complex_2_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
}
building_mining_complex_2_3_direct_build = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_3" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_2_3 = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
}
building_mining_complex_3_3_direct_build = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_4" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_3_3 = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
}
building_mining_complex_4_3_direct_build = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_5" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_4_3 = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
}
building_mining_complex_5_3_direct_build = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_5_3 = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_mining_complex_1_4 = {
	icon = "building_mining_network_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
		NAND = {
			owner = { has_technology = "tech_mining_network_2" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_factory } }
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_0 = yes }
	prerequisites = { "tech_basic_industry" }
	upgrades = { building_mining_complex_2_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
}
building_mining_complex_2_4_direct_build = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_3" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_2_4 = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
}
building_mining_complex_3_4_direct_build = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_4" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_3_4 = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
}
building_mining_complex_4_4_direct_build = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_5" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_4_4 = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_4 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
}
building_mining_complex_5_4_direct_build = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_5_4 = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_mining_complex_1_5 = {
	icon = "building_mining_network_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
		NAND = {
			owner = { has_technology = "tech_mining_network_2" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_factory } }
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_0 = yes }
	prerequisites = { "tech_basic_industry" }
	upgrades = { building_mining_complex_2_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t1_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
}
building_mining_complex_2_5_direct_build = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_3" }
			requires_minerals_tile = yes
			requires_capital_1 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_2_5 = {
	icon = "building_mining_network_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_2" }
	upgrades = { building_mining_complex_3_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t2_static_resource_add }
}
building_mining_complex_3_5_direct_build = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_4" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_3_5 = {
	icon = "building_mining_network_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_1 = yes }
	prerequisites = { "tech_mining_network_3" }
	upgrades = { building_mining_complex_4_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t3_static_resource_add }
}
building_mining_complex_4_5_direct_build = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_mining_network_5" }
			requires_minerals_tile = yes
			requires_capital_2 = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_4_5 = {
	icon = "building_mining_network_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_4" }
	upgrades = { building_mining_complex_5_5 }
	 #resource output and modifiers
	produced_resources = { minerals = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t4_static_resource_add }
}
building_mining_complex_5_5_direct_build = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
		NOT = { has_building = building_mining_complex_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_mining_complex_5_5 = {
	icon = "building_mining_network_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_minerals = yes
		planet_is_artificial = no
	}
	allow = { requires_minerals_tile = yes requires_capital_2 = yes }
	prerequisites = { "tech_mining_network_5" }
	produced_resources = { minerals = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_minerals_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_farming_complex_1_1 = {
	icon = "building_farming_complex_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
		NAND = {
			owner = { has_technology = "tech_hydroponics" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_farm } }
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_eco_simulation" }
	upgrades = { building_farming_complex_2_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t1_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
}
building_farming_complex_2_1_direct_build = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_gene_crops" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_2_1 = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_3_1_direct_build = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_nano_vitality_crops" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_3_1 = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_4_1_direct_build = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_superior_agriculture" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_4_1 = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_1 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_5_1_direct_build = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_5_1 = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes food_tech_potential = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_1_2 = {
	icon = "building_farming_complex_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
		NAND = {
			owner = { has_technology = "tech_hydroponics" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_farm } }
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_eco_simulation" }
	upgrades = { building_farming_complex_2_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t1_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
}
building_farming_complex_2_2_direct_build = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_gene_crops" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_2_2 = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_3_2_direct_build = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_nano_vitality_crops" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_3_2 = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_4_2_direct_build = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_superior_agriculture" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_4_2 = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_2 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_5_2_direct_build = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_5_2 = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_1_3 = {
	icon = "building_farming_complex_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
		NAND = {
			owner = { has_technology = "tech_hydroponics" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_farm } }
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_eco_simulation" }
	upgrades = { building_farming_complex_2_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t1_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
}
building_farming_complex_2_3_direct_build = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_gene_crops" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_2_3 = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_3_3_direct_build = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_nano_vitality_crops" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_3_3 = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_4_3_direct_build = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_superior_agriculture" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_4_3 = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_3 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_5_3_direct_build = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_5_3 = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_1_4 = {
	icon = "building_farming_complex_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
		NAND = {
			owner = { has_technology = "tech_hydroponics" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_farm } }
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_eco_simulation" }
	upgrades = { building_farming_complex_2_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t1_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
}
building_farming_complex_2_4_direct_build = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_gene_crops" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_2_4 = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_3_4_direct_build = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_nano_vitality_crops" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_3_4 = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_4_4_direct_build = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_superior_agriculture" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_4_4 = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_4 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_5_4_direct_build = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_5_4 = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_1_5 = {
	icon = "building_farming_complex_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
		NAND = {
			owner = { has_technology = "tech_hydroponics" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
			NOT = { tile = { has_building = building_primitive_farm } }
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_eco_simulation" }
	upgrades = { building_farming_complex_2_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t1_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t1_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
}
building_farming_complex_2_5_direct_build = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_gene_crops" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_2_5 = {
	icon = "building_farming_complex_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_hydroponics" }
	upgrades = { building_farming_complex_3_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t2_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_3_5_direct_build = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_nano_vitality_crops" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_3_5 = {
	icon = "building_farming_complex_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_gene_crops" }
	upgrades = { building_farming_complex_4_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t3_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_4_5_direct_build = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_superior_agriculture" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_4_5 = {
	icon = "building_farming_complex_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_nano_vitality_crops" }
	upgrades = { building_farming_complex_5_5 }
	 #resource output and modifiers
	produced_resources = { food = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t4_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	ai_allow = { food_buildings_limitation = no }
}
building_farming_complex_5_5_direct_build = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
		NOT = { has_building = building_farming_complex_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_farming_complex_5_5 = {
	icon = "building_farming_complex_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	destroy_if = { food_buildings_destroy_conditions = yes }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		farming_complex_conditions = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_superior_agriculture" }
	produced_resources = { food = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_food_add = @tile_restricted_t5_static_resource_add }
	produced_resource_trigger = {
		modifier = {
			has_valid_civic = civic_agrarian_idyll
			resources = { unity = 1 }
		}
		modifier = {
			has_swapped_tradition = tr_adaptability_finish
			resources = { minerals = 1 }
		}
	}
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_food_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = { food_buildings_limitation = no }
}
building_isotope_refinery_1_1 = {
	icon = "building_power_plant_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_2" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_power_plant_1" }
	upgrades = { building_isotope_refinery_2_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_isotope_refinery_2_1_direct_build = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
		NOT = { has_building = building_isotope_refinery_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_3" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_2_1 = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_isotope_refinery_3_1_direct_build = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
		NOT = { has_building = building_isotope_refinery_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_4" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_3_1 = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_isotope_refinery_4_1_direct_build = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
		NOT = { has_building = building_isotope_refinery_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_5" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_4_1 = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_isotope_refinery_5_1_direct_build = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
		NOT = { has_building = building_isotope_refinery_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_5_1 = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_0_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_isotope_refinery_1_2 = {
	icon = "building_power_plant_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_2" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_power_plant_1" }
	upgrades = { building_isotope_refinery_2_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_isotope_refinery_2_2_direct_build = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
		NOT = { has_building = building_isotope_refinery_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_3" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_2_2 = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_isotope_refinery_3_2_direct_build = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
		NOT = { has_building = building_isotope_refinery_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_4" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_3_2 = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_isotope_refinery_4_2_direct_build = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
		NOT = { has_building = building_isotope_refinery_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_5" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_4_2 = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_isotope_refinery_5_2_direct_build = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
		NOT = { has_building = building_isotope_refinery_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_5_2 = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_isotope_refinery_1_3 = {
	icon = "building_power_plant_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_2" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_power_plant_1" }
	upgrades = { building_isotope_refinery_2_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_isotope_refinery_2_3_direct_build = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
		NOT = { has_building = building_isotope_refinery_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_3" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_2_3 = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_isotope_refinery_3_3_direct_build = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
		NOT = { has_building = building_isotope_refinery_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_4" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_3_3 = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_isotope_refinery_4_3_direct_build = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
		NOT = { has_building = building_isotope_refinery_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_5" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_4_3 = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_isotope_refinery_5_3_direct_build = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
		NOT = { has_building = building_isotope_refinery_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_5_3 = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_isotope_refinery_1_4 = {
	icon = "building_power_plant_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_2" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_power_plant_1" }
	upgrades = { building_isotope_refinery_2_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_isotope_refinery_2_4_direct_build = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
		NOT = { has_building = building_isotope_refinery_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_3" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_2_4 = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_isotope_refinery_3_4_direct_build = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
		NOT = { has_building = building_isotope_refinery_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_4" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_3_4 = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_isotope_refinery_4_4_direct_build = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
		NOT = { has_building = building_isotope_refinery_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_5" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_4_4 = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_isotope_refinery_5_4_direct_build = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
		NOT = { has_building = building_isotope_refinery_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_5_4 = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_isotope_refinery_1_5 = {
	icon = "building_power_plant_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_2" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_power_plant_1" }
	upgrades = { building_isotope_refinery_2_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_isotope_refinery_2_5_direct_build = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
		NOT = { has_building = building_isotope_refinery_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_3" }
			requires_energy_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_2_5 = {
	icon = "building_power_plant_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_2" }
	upgrades = { building_isotope_refinery_3_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_isotope_refinery_3_5_direct_build = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
		NOT = { has_building = building_isotope_refinery_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_4" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_3_5 = {
	icon = "building_power_plant_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_power_plant_3" }
	upgrades = { building_isotope_refinery_4_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_isotope_refinery_4_5_direct_build = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
		NOT = { has_building = building_isotope_refinery_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_power_plant_5" }
			requires_energy_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_4_5 = {
	icon = "building_power_plant_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_4" }
	upgrades = { building_isotope_refinery_5_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_isotope_refinery_5_5_direct_build = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
		NOT = { has_building = building_isotope_refinery_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_isotope_refinery_5_5 = {
	icon = "building_power_plant_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_energy = yes
	}
	allow = { requires_energy_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_power_plant_5" }
	produced_resources = { energy = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_biofuel_refinery_1_1 = {
	icon = "building_biofuel_refinery_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_2" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_1" }
	upgrades = { building_biofuel_refinery_2_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_biofuel_refinery_2_1_direct_build = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		NOT = { has_building = building_biofuel_refinery_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_3" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_2_1 = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_biofuel_refinery_3_1_direct_build = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		NOT = { has_building = building_biofuel_refinery_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_4" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_3_1 = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_biofuel_refinery_4_1_direct_build = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		NOT = { has_building = building_biofuel_refinery_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_5" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_4_1 = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_1 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_biofuel_refinery_5_1_direct_build = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
		NOT = { has_building = building_biofuel_refinery_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_5_1 = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_biofuel_refinery_1_2 = {
	icon = "building_biofuel_refinery_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_2" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_1" }
	upgrades = { building_biofuel_refinery_2_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_biofuel_refinery_2_2_direct_build = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		NOT = { has_building = building_biofuel_refinery_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_3" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_2_2 = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_biofuel_refinery_3_2_direct_build = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		NOT = { has_building = building_biofuel_refinery_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_4" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_3_2 = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_biofuel_refinery_4_2_direct_build = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		NOT = { has_building = building_biofuel_refinery_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_5" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_4_2 = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_2 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_biofuel_refinery_5_2_direct_build = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
		NOT = { has_building = building_biofuel_refinery_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_5_2 = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_biofuel_refinery_1_3 = {
	icon = "building_biofuel_refinery_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_2" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_1" }
	upgrades = { building_biofuel_refinery_2_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_biofuel_refinery_2_3_direct_build = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		NOT = { has_building = building_biofuel_refinery_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_3" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_2_3 = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_biofuel_refinery_3_3_direct_build = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		NOT = { has_building = building_biofuel_refinery_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_4" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_3_3 = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_biofuel_refinery_4_3_direct_build = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		NOT = { has_building = building_biofuel_refinery_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_5" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_4_3 = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_3 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_biofuel_refinery_5_3_direct_build = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
		NOT = { has_building = building_biofuel_refinery_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_5_3 = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_biofuel_refinery_1_4 = {
	icon = "building_biofuel_refinery_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_2" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_1" }
	upgrades = { building_biofuel_refinery_2_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_biofuel_refinery_2_4_direct_build = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		NOT = { has_building = building_biofuel_refinery_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_3" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_2_4 = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_biofuel_refinery_3_4_direct_build = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		NOT = { has_building = building_biofuel_refinery_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_4" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_3_4 = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_biofuel_refinery_4_4_direct_build = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		NOT = { has_building = building_biofuel_refinery_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_5" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_4_4 = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_4 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_biofuel_refinery_5_4_direct_build = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
		NOT = { has_building = building_biofuel_refinery_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_5_4 = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_biofuel_refinery_1_5 = {
	icon = "building_biofuel_refinery_1"
	tags = { standard_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	 #required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_2" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_1" }
	upgrades = { building_biofuel_refinery_2_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t1_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
}
building_biofuel_refinery_2_5_direct_build = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		NOT = { has_building = building_biofuel_refinery_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_3" }
			requires_food_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_2_5 = {
	icon = "building_biofuel_refinery_2"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	 #required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_2" }
	upgrades = { building_biofuel_refinery_3_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t2_static_resource_add }
}
building_biofuel_refinery_3_5_direct_build = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		NOT = { has_building = building_biofuel_refinery_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_4" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_3_5 = {
	icon = "building_biofuel_refinery_3"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	 #required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_3" }
	upgrades = { building_biofuel_refinery_4_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t3_static_resource_add }
}
building_biofuel_refinery_4_5_direct_build = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		NOT = { has_building = building_biofuel_refinery_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biofuel_refining_5" }
			requires_food_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_4_5 = {
	icon = "building_biofuel_refinery_4"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	 #required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_4" }
	upgrades = { building_biofuel_refinery_5_5 }
	 #resource output and modifiers
	produced_resources = { energy = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t4_static_resource_add }
}
building_biofuel_refinery_5_5_direct_build = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
		NOT = { has_building = building_biofuel_refinery_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_ai_allow = no
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_biofuel_refinery_5_5 = {
	icon = "building_biofuel_refinery_5"
	tags = { standard_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	 #required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_food = yes
	}
	allow = { requires_food_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biofuel_refining_5" }
	produced_resources = { energy = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_energy_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_energy_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_society_lab_1_1 = {
	icon = "building_biolab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
		NAND = {
			owner = { has_technology = "tech_biolab_1" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_society_lab_2_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
	}
}
building_society_lab_2_1_direct_build = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
		NOT = { has_building = building_society_lab_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_2" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_2_1 = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
}
building_society_lab_3_1_direct_build = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
		NOT = { has_building = building_society_lab_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_3" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_3_1 = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
}
building_society_lab_4_1_direct_build = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
		NOT = { has_building = building_society_lab_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_4" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_4_1 = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_1 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
}
building_society_lab_5_1_direct_build = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
		NOT = { has_building = building_society_lab_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_5_1 = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_society_lab_1_2 = {
	icon = "building_biolab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
		NAND = {
			owner = { has_technology = "tech_biolab_1" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_society_lab_2_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
	}
}
building_society_lab_2_2_direct_build = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
		NOT = { has_building = building_society_lab_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_2" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_2_2 = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
}
building_society_lab_3_2_direct_build = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
		NOT = { has_building = building_society_lab_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_3" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_3_2 = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
}
building_society_lab_4_2_direct_build = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
		NOT = { has_building = building_society_lab_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_4" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_4_2 = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_2 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
}
building_society_lab_5_2_direct_build = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
		NOT = { has_building = building_society_lab_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_5_2 = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_society_lab_1_3 = {
	icon = "building_biolab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
		NAND = {
			owner = { has_technology = "tech_biolab_1" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_society_lab_2_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
	}
}
building_society_lab_2_3_direct_build = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
		NOT = { has_building = building_society_lab_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_2" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_2_3 = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
}
building_society_lab_3_3_direct_build = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
		NOT = { has_building = building_society_lab_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_3" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_3_3 = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
}
building_society_lab_4_3_direct_build = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
		NOT = { has_building = building_society_lab_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_4" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_4_3 = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_3 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
}
building_society_lab_5_3_direct_build = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
		NOT = { has_building = building_society_lab_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_5_3 = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_society_lab_1_4 = {
	icon = "building_biolab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
		NAND = {
			owner = { has_technology = "tech_biolab_1" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_society_lab_2_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
	}
}
building_society_lab_2_4_direct_build = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
		NOT = { has_building = building_society_lab_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_2" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_2_4 = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
}
building_society_lab_3_4_direct_build = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
		NOT = { has_building = building_society_lab_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_3" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_3_4 = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
}
building_society_lab_4_4_direct_build = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
		NOT = { has_building = building_society_lab_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_4" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_4_4 = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_4 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
}
building_society_lab_5_4_direct_build = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
		NOT = { has_building = building_society_lab_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_5_4 = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_society_lab_1_5 = {
	icon = "building_biolab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
		NAND = {
			owner = { has_technology = "tech_biolab_1" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_society_lab_2_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t1_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t1_static_resource_add }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
	}
}
building_society_lab_2_5_direct_build = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
		NOT = { has_building = building_society_lab_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_2" }
			requires_society_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_2_5 = {
	icon = "building_biolab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_1" }
	upgrades = { building_society_lab_3_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t2_static_resource_add }
}
building_society_lab_3_5_direct_build = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
		NOT = { has_building = building_society_lab_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_3" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_3_5 = {
	icon = "building_biolab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_biolab_2" }
	upgrades = { building_society_lab_4_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t3_static_resource_add }
}
building_society_lab_4_5_direct_build = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
		NOT = { has_building = building_society_lab_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_biolab_4" }
			requires_society_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_4_5 = {
	icon = "building_biolab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_3" }
	upgrades = { building_society_lab_5_5 }
	 #resource output and modifiers
	produced_resources = { society_research = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t4_static_resource_add }
}
building_society_lab_5_5_direct_build = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
		NOT = { has_building = building_society_lab_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_society_lab_5_5 = {
	icon = "building_biolab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_society = yes
	}
	allow = { requires_society_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_biolab_4" }
	produced_resources = { society_research = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_society_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_physics_lab_1_1 = {
	icon = "building_physics_lab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_1" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_physics_lab_2_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
	}
}
building_physics_lab_2_1_direct_build = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
		NOT = { has_building = building_physics_lab_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_2" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_2_1 = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
}
building_physics_lab_3_1_direct_build = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
		NOT = { has_building = building_physics_lab_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_3" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_3_1 = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
}
building_physics_lab_4_1_direct_build = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
		NOT = { has_building = building_physics_lab_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_4" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_4_1 = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_1 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
}
building_physics_lab_5_1_direct_build = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
		NOT = { has_building = building_physics_lab_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_5_1 = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_physics_lab_1_2 = {
	icon = "building_physics_lab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_1" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_physics_lab_2_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
	}
}
building_physics_lab_2_2_direct_build = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
		NOT = { has_building = building_physics_lab_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_2" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_2_2 = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
}
building_physics_lab_3_2_direct_build = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
		NOT = { has_building = building_physics_lab_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_3" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_3_2 = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
}
building_physics_lab_4_2_direct_build = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
		NOT = { has_building = building_physics_lab_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_4" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_4_2 = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_2 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
}
building_physics_lab_5_2_direct_build = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
		NOT = { has_building = building_physics_lab_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_5_2 = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_physics_lab_1_3 = {
	icon = "building_physics_lab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_1" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_physics_lab_2_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
	}
}
building_physics_lab_2_3_direct_build = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
		NOT = { has_building = building_physics_lab_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_2" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_2_3 = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
}
building_physics_lab_3_3_direct_build = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
		NOT = { has_building = building_physics_lab_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_3" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_3_3 = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
}
building_physics_lab_4_3_direct_build = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
		NOT = { has_building = building_physics_lab_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_4" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_4_3 = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_3 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
}
building_physics_lab_5_3_direct_build = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
		NOT = { has_building = building_physics_lab_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_5_3 = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_physics_lab_1_4 = {
	icon = "building_physics_lab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_1" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_physics_lab_2_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
	}
}
building_physics_lab_2_4_direct_build = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
		NOT = { has_building = building_physics_lab_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_2" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_2_4 = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
}
building_physics_lab_3_4_direct_build = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
		NOT = { has_building = building_physics_lab_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_3" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_3_4 = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
}
building_physics_lab_4_4_direct_build = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
		NOT = { has_building = building_physics_lab_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_4" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_4_4 = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_4 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
}
building_physics_lab_5_4_direct_build = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
		NOT = { has_building = building_physics_lab_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_5_4 = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_physics_lab_1_5 = {
	icon = "building_physics_lab_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_1" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_physics_lab_2_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t1_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
	}
}
building_physics_lab_2_5_direct_build = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
		NOT = { has_building = building_physics_lab_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_2" }
			requires_physics_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_2_5 = {
	icon = "building_physics_lab_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_1" }
	upgrades = { building_physics_lab_3_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t2_static_resource_add }
}
building_physics_lab_3_5_direct_build = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
		NOT = { has_building = building_physics_lab_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_3" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_3_5 = {
	icon = "building_physics_lab_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_physics_lab_2" }
	upgrades = { building_physics_lab_4_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t3_static_resource_add }
}
building_physics_lab_4_5_direct_build = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
		NOT = { has_building = building_physics_lab_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_physics_lab_4" }
			requires_physics_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_4_5 = {
	icon = "building_physics_lab_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_3" }
	upgrades = { building_physics_lab_5_5 }
	 #resource output and modifiers
	produced_resources = { physics_research = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t4_static_resource_add }
}
building_physics_lab_5_5_direct_build = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
		NOT = { has_building = building_physics_lab_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_physics_lab_5_5 = {
	icon = "building_physics_lab_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_physics = yes
	}
	allow = { requires_physics_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_physics_lab_4" }
	produced_resources = { physics_research = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_physics_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_engineering_lab_1_1 = {
	icon = "building_engineering_facility_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_1" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_engineering_lab_2_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t1_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 2
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
}
building_engineering_lab_2_1_direct_build = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
		NOT = { has_building = building_engineering_lab_2_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_2" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_2_1 = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
}
building_engineering_lab_3_1_direct_build = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
		NOT = { has_building = building_engineering_lab_3_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_3" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_3_1 = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
}
building_engineering_lab_4_1_direct_build = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
		NOT = { has_building = building_engineering_lab_4_1 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_4" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_4_1 = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_1 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
}
building_engineering_lab_5_1_direct_build = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
		NOT = { has_building = building_engineering_lab_5_1 }
		direct_build_enabled = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_5_1 = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_1_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_1_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_engineering_lab_1_2 = {
	icon = "building_engineering_facility_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_1" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_engineering_lab_2_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t1_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 10
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
}
building_engineering_lab_2_2_direct_build = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
		NOT = { has_building = building_engineering_lab_2_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_2" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_2_2 = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
}
building_engineering_lab_3_2_direct_build = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
		NOT = { has_building = building_engineering_lab_3_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_3" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_3_2 = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
}
building_engineering_lab_4_2_direct_build = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
		NOT = { has_building = building_engineering_lab_4_2 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_4" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_4_2 = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_2 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
}
building_engineering_lab_5_2_direct_build = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
		NOT = { has_building = building_engineering_lab_5_2 }
		direct_build_enabled = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_5_2 = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_2_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_2_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_engineering_lab_1_3 = {
	icon = "building_engineering_facility_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_1" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_engineering_lab_2_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t1_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
}
building_engineering_lab_2_3_direct_build = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
		NOT = { has_building = building_engineering_lab_2_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_2" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_2_3 = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
}
building_engineering_lab_3_3_direct_build = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
		NOT = { has_building = building_engineering_lab_3_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_3" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_3_3 = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
}
building_engineering_lab_4_3_direct_build = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
		NOT = { has_building = building_engineering_lab_4_3 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_4" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_4_3 = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_3 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
}
building_engineering_lab_5_3_direct_build = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
		NOT = { has_building = building_engineering_lab_5_3 }
		direct_build_enabled = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_5_3 = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_3_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_3_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_engineering_lab_1_4 = {
	icon = "building_engineering_facility_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_1" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_engineering_lab_2_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t1_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
}
building_engineering_lab_2_4_direct_build = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
		NOT = { has_building = building_engineering_lab_2_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_2" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_2_4 = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
}
building_engineering_lab_3_4_direct_build = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
		NOT = { has_building = building_engineering_lab_3_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_3" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_3_4 = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
}
building_engineering_lab_4_4_direct_build = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
		NOT = { has_building = building_engineering_lab_4_4 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_4" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_4_4 = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_4 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
}
building_engineering_lab_5_4_direct_build = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
		NOT = { has_building = building_engineering_lab_5_4 }
		direct_build_enabled = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_5_4 = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_4_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_4_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
building_engineering_lab_1_5 = {
	icon = "building_engineering_facility_1"
	tags = { research_resource_building }
	is_listed = yes
	base_buildtime = @tile_restricted_t1_time
	cost = { minerals = @tile_restricted_t1_cost }
	required_resources = { energy = @tile_restricted_t1_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_1" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_0_or_hab = yes }
	prerequisites = { "tech_basic_science_lab_1" }
	upgrades = { building_engineering_lab_2_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t1_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t1_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
}
building_engineering_lab_2_5_direct_build = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	base_buildtime = 345
	cost = { minerals = 90 }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
		NOT = { has_building = building_engineering_lab_2_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_2" }
			requires_engineering_research_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_2_5 = {
	icon = "building_engineering_facility_2"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t2_time
	cost = { minerals = @tile_restricted_t2_cost }
	required_resources = { energy = @tile_restricted_t2_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_1" }
	upgrades = { building_engineering_lab_3_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t2_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t2_static_resource_add }
}
building_engineering_lab_3_5_direct_build = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	base_buildtime = 480
	cost = { minerals = 180 }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
		NOT = { has_building = building_engineering_lab_3_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_3" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_3_5 = {
	icon = "building_engineering_facility_3"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t3_time
	cost = { minerals = @tile_restricted_t3_cost }
	required_resources = { energy = @tile_restricted_t3_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_1_or_hab = yes }
	prerequisites = { "tech_engineering_lab_2" }
	upgrades = { building_engineering_lab_4_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t3_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t3_static_resource_add }
}
building_engineering_lab_4_5_direct_build = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	base_buildtime = 615
	cost = { minerals = 300 }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
		NOT = { has_building = building_engineering_lab_4_5 }
		direct_build_enabled = yes
		NAND = {
			owner = { has_technology = "tech_engineering_lab_4" }
			requires_engineering_research_tile = yes
			requires_capital_2_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_4_5 = {
	icon = "building_engineering_facility_4"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t4_time
	cost = { minerals = @tile_restricted_t4_cost }
	required_resources = { energy = @tile_restricted_t4_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_3" }
	upgrades = { building_engineering_lab_5_5 }
	 #resource output and modifiers
	produced_resources = { engineering_research = @tile_restricted_t4_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t4_static_resource_add }
}
building_engineering_lab_5_5_direct_build = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	base_buildtime = 750
	cost = { minerals = 450 }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
		NOT = { has_building = building_engineering_lab_5_5 }
		direct_build_enabled = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_engineering_lab_5_5 = {
	icon = "building_engineering_facility_5"
	tags = { research_resource_building }
	is_listed = no
	base_buildtime = @tile_restricted_t5_time
	cost = { minerals = @tile_restricted_t5_cost }
	required_resources = { energy = @tile_restricted_t5_upkeep }
	show_tech_unlock_if = { always = no }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		planet_is_not_virtual = yes
		conditions_tile_restricted_5_engineering = yes
	}
	allow = { requires_engineering_research_tile = yes requires_capital_2_or_hab = yes }
	prerequisites = { "tech_engineering_lab_4" }
	produced_resources = { engineering_research = @tile_restricted_t5_5_output }
	planet_modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_static_resource_add }
	triggered_planet_modifier = {
		key = "capital_3_resource_bonus_modifier"
		potential = { planet = { has_capital_3 = yes } }
		modifier = { static_planet_resource_engineering_research_add = @tile_restricted_t5_triggered_planet_modifier }
	}
}
 ### Megastructure Tile-Restricted Buildings
building_energy_matter_converter_1_1 = {
	icon = "building_energy_matter_converter_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_1 = yes
		NAND = {
			conditions_megastructure_restricted_t2_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_2_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t1_1_adjacency_bonus }
}
building_energy_matter_converter_2_1_direct_build = {
	icon = "building_energy_matter_converter_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_1 = yes
		NOT = { has_building = building_energy_matter_converter_2_1 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_3_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t2_1_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_matter_converter_2_1 = {
	icon = "building_energy_matter_converter_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_1 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_3_1 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t2_1_adjacency_bonus }
}
building_energy_matter_converter_3_1_direct_build = {
	icon = "building_energy_matter_converter_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_1 = yes
		NOT = { has_building = building_energy_matter_converter_3_1 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t3_1_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_matter_converter_3_1 = {
	icon = "building_energy_matter_converter_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_1 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t3_1_adjacency_bonus }
}
building_energy_matter_converter_1_2 = {
	icon = "building_energy_matter_converter_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_2 = yes
		NAND = {
			conditions_megastructure_restricted_t2_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_2_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t1_2_adjacency_bonus }
}
building_energy_matter_converter_2_2_direct_build = {
	icon = "building_energy_matter_converter_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_2 = yes
		NOT = { has_building = building_energy_matter_converter_2_2 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_3_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t2_2_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_matter_converter_2_2 = {
	icon = "building_energy_matter_converter_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_2 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_3_2 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t2_2_adjacency_bonus }
}
building_energy_matter_converter_3_2_direct_build = {
	icon = "building_energy_matter_converter_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_2 = yes
		NOT = { has_building = building_energy_matter_converter_3_2 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t3_2_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_matter_converter_3_2 = {
	icon = "building_energy_matter_converter_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_2 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t3_2_adjacency_bonus }
}
building_energy_matter_converter_1_3 = {
	icon = "building_energy_matter_converter_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_3 = yes
		NAND = {
			conditions_megastructure_restricted_t2_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_2_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = minerals value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = minerals value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = minerals value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = minerals value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = minerals value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = minerals value < 250 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t1_3_adjacency_bonus }
}
building_energy_matter_converter_2_3_direct_build = {
	icon = "building_energy_matter_converter_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_3 = yes
		NOT = { has_building = building_energy_matter_converter_2_3 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_3_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t2_3_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_matter_converter_2_3 = {
	icon = "building_energy_matter_converter_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_3 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_matter_converter_3_3 }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t2_3_adjacency_bonus }
}
building_energy_matter_converter_3_3_direct_build = {
	icon = "building_energy_matter_converter_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_3 = yes
		NOT = { has_building = building_energy_matter_converter_3_3 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t3_3_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_matter_converter_3_3 = {
	icon = "building_energy_matter_converter_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_3 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { minerals = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_minerals_add = @megastructure_unique_t3_3_adjacency_bonus }
}
building_energy_conduit_1_1 = {
	icon = "building_energy_conduit_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	 #required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_1 = yes
		NAND = {
			conditions_megastructure_restricted_t2_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_2_1 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	 #ai restrictions and weights
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t1_1_adjacency_bonus }
}
building_energy_conduit_2_1_direct_build = {
	icon = "building_energy_conduit_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	 #required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_1 = yes
		NOT = { has_building = building_energy_conduit_2_1 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_3_1 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t2_1_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_conduit_2_1 = {
	icon = "building_energy_conduit_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	 #required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_1 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_3_1 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t2_1_adjacency_bonus }
}
building_energy_conduit_3_1_direct_build = {
	icon = "building_energy_conduit_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	 #required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_1 = yes
		NOT = { has_building = building_energy_conduit_3_1 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t3_1_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_conduit_3_1 = {
	icon = "building_energy_conduit_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	 #required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_1 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t3_1_adjacency_bonus }
}
building_energy_conduit_1_2 = {
	icon = "building_energy_conduit_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	 #required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_2 = yes
		NAND = {
			conditions_megastructure_restricted_t2_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_2_2 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t1_2_adjacency_bonus }
}
building_energy_conduit_2_2_direct_build = {
	icon = "building_energy_conduit_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	 #required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_2 = yes
		NOT = { has_building = building_energy_conduit_2_2 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_3_2 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t2_2_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_conduit_2_2 = {
	icon = "building_energy_conduit_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	 #required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_2 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_3_2 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t2_2_adjacency_bonus }
}
building_energy_conduit_3_2_direct_build = {
	icon = "building_energy_conduit_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	 #required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_2 = yes
		NOT = { has_building = building_energy_conduit_3_2 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t3_2_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_conduit_3_2 = {
	icon = "building_energy_conduit_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	 #required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_2 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t3_2_adjacency_bonus }
}
building_energy_conduit_1_3 = {
	icon = "building_energy_conduit_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	 #required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_3 = yes
		NAND = {
			conditions_megastructure_restricted_t2_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_2_3 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	 #ai restrictions and weights
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = energy value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = energy value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = energy value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = energy value < 50 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = energy value < 100 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = energy value < 250 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t1_3_adjacency_bonus }
}
building_energy_conduit_2_3_direct_build = {
	icon = "building_energy_conduit_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	 #required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_3 = yes
		NOT = { has_building = building_energy_conduit_2_3 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_3_3 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t2_3_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_conduit_2_3 = {
	icon = "building_energy_conduit_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	 #required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_3 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_energy_conduit_3_3 }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t2_3_adjacency_bonus }
}
building_energy_conduit_3_3_direct_build = {
	icon = "building_energy_conduit_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	 #required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_3 = yes
		NOT = { has_building = building_energy_conduit_3_3 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t3_3_adjacency_bonus }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_energy_conduit_3_3 = {
	icon = "building_energy_conduit_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	 #required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_3 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { energy = @megastructure_unique_output }
	adjacency_bonus = { tile_building_resource_energy_add = @megastructure_unique_t3_3_adjacency_bonus }
}
building_food_replicator_1_1 = {
	icon = "building_food_replicator_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_1 = yes
		owner_is_machine_empire = no
		NAND = {
			conditions_megastructure_restricted_t2_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_2_1 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t1_1_adjacency_bonus }
}
building_food_replicator_2_1_direct_build = {
	icon = "building_food_replicator_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_1 = yes
		owner_is_machine_empire = no
		NOT = { has_building = building_food_replicator_2_1 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_3_1 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t2_1_adjacency_bonus }
	show_tech_unlock_if = { always = no }
}
building_food_replicator_2_1 = {
	icon = "building_food_replicator_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_1 = yes
		owner_is_machine_empire = no
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_3_1 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = { food_buildings_limitation = no }
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t2_1_adjacency_bonus }
}
building_food_replicator_3_1_direct_build = {
	icon = "building_food_replicator_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_1 = yes
		owner_is_machine_empire = no
		NOT = { has_building = building_food_replicator_3_1 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t3_1_adjacency_bonus }
	show_tech_unlock_if = { always = no }
}
building_food_replicator_3_1 = {
	icon = "building_food_replicator_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_1 = yes
		owner_is_machine_empire = no
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = { food_buildings_limitation = no }
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t3_1_adjacency_bonus }
}
building_food_replicator_1_2 = {
	icon = "building_food_replicator_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_2 = yes
		owner_is_machine_empire = no
		NAND = {
			conditions_megastructure_restricted_t2_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_2_2 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 50
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t1_2_adjacency_bonus }
}
building_food_replicator_2_2_direct_build = {
	icon = "building_food_replicator_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_2 = yes
		owner_is_machine_empire = no
		NOT = { has_building = building_food_replicator_2_2 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_3_2 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t2_2_adjacency_bonus }
	show_tech_unlock_if = { always = no }
}
building_food_replicator_2_2 = {
	icon = "building_food_replicator_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_2 = yes
		owner_is_machine_empire = no
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_3_2 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = { food_buildings_limitation = no }
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t2_2_adjacency_bonus }
}
building_food_replicator_3_2_direct_build = {
	icon = "building_food_replicator_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_2 = yes
		owner_is_machine_empire = no
		NOT = { has_building = building_food_replicator_3_2 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t3_2_adjacency_bonus }
	show_tech_unlock_if = { always = no }
}
building_food_replicator_3_2 = {
	icon = "building_food_replicator_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_2 = yes
		owner_is_machine_empire = no
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = { food_buildings_limitation = no }
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t3_2_adjacency_bonus }
}
building_food_replicator_1_3 = {
	icon = "building_food_replicator_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_3 = yes
		owner_is_machine_empire = no
		NAND = {
			conditions_megastructure_restricted_t2_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_2_3 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 100
		modifier = {
			factor = 1000
			from.owner = {
				has_monthly_income = { resource = food value < 1 }
			}
		}
		modifier = {
			factor = 100
			from.owner = {
				has_monthly_income = { resource = food value < 5 }
			}
		}
		modifier = {
			factor = 10
			from.owner = {
				has_monthly_income = { resource = food value < 10 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = food value < 25 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = food value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = food value < 100 }
			}
		}
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t1_3_adjacency_bonus }
}
building_food_replicator_2_3_direct_build = {
	icon = "building_food_replicator_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_3 = yes
		owner_is_machine_empire = no
		NOT = { has_building = building_food_replicator_2_3 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_3_3 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t2_3_adjacency_bonus }
	show_tech_unlock_if = { always = no }
}
building_food_replicator_2_3 = {
	icon = "building_food_replicator_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_3 = yes
		owner_is_machine_empire = no
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_food_replicator_3_3 }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = { food_buildings_limitation = no }
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t2_3_adjacency_bonus }
}
building_food_replicator_3_3_direct_build = {
	icon = "building_food_replicator_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_3 = yes
		owner_is_machine_empire = no
		NOT = { has_building = building_food_replicator_3_3 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		food_buildings_limitation = no
		planet_unique_prerequisite = yes
	}
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t3_3_adjacency_bonus }
	show_tech_unlock_if = { always = no }
}
building_food_replicator_3_3 = {
	icon = "building_food_replicator_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_3 = yes
		owner_is_machine_empire = no
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = { food = @megastructure_unique_output }
	ai_allow = { food_buildings_limitation = no }
	adjacency_bonus = { tile_building_resource_food_add = @megastructure_unique_t3_3_adjacency_bonus }
}
building_computational_array_1_1 = {
	icon = "building_computational_array_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_1 = yes
		NAND = {
			conditions_megastructure_restricted_t2_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_2_1 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t1_1_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t1_1_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t1_1_adjacency_bonus
	}
}
building_computational_array_2_1_direct_build = {
	icon = "building_computational_array_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_1 = yes
		NOT = { has_building = building_computational_array_2_1 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_1 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_3_1 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t2_1_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t2_1_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t2_1_adjacency_bonus
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_computational_array_2_1 = {
	icon = "building_computational_array_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_1 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_3_1 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t2_1_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t2_1_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t2_1_adjacency_bonus
	}
}
building_computational_array_3_1_direct_build = {
	icon = "building_computational_array_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_1 = yes
		NOT = { has_building = building_computational_array_3_1 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t3_1_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t3_1_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t3_1_adjacency_bonus
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_computational_array_3_1 = {
	icon = "building_computational_array_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_1 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t3_1_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t3_1_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t3_1_adjacency_bonus
	}
}
building_computational_array_1_2 = {
	icon = "building_computational_array_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_2 = yes
		NAND = {
			conditions_megastructure_restricted_t2_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_2_2 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t1_2_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t1_2_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t1_2_adjacency_bonus
	}
}
building_computational_array_2_2_direct_build = {
	icon = "building_computational_array_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_2 = yes
		NOT = { has_building = building_computational_array_2_2 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_2 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_3_2 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t2_2_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t2_2_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t2_2_adjacency_bonus
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_computational_array_2_2 = {
	icon = "building_computational_array_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_2 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_3_2 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t2_2_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t2_2_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t2_2_adjacency_bonus
	}
}
building_computational_array_3_2_direct_build = {
	icon = "building_computational_array_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_2 = yes
		NOT = { has_building = building_computational_array_3_2 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t3_2_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t3_2_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t3_2_adjacency_bonus
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_computational_array_3_2 = {
	icon = "building_computational_array_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_2 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t3_2_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t3_2_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t3_2_adjacency_bonus
	}
}
building_computational_array_1_3 = {
	icon = "building_computational_array_1"
	tags = { special_resource_building }
	is_listed = yes
	base_buildtime = @megastructure_unique_t1_time
	cost = { minerals = @megastructure_unique_t1_cost }
	required_resources = { energy = @megastructure_unique_t1_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t1_3 = yes
		NAND = {
			conditions_megastructure_restricted_t2_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_2_3 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t1_3_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t1_3_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t1_3_adjacency_bonus
	}
	 #ai restrictions and weights
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	ai_weight = {
		weight = 25
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = society_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = society_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = society_research value < 100 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = physics_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = physics_research value < 100 }
			}
		}
		modifier = {
			factor = 5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 10 }
			}
		}
		modifier = {
			factor = 2.5
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 50 }
			}
		}
		modifier = {
			factor = 1.25
			from.owner = {
				has_monthly_income = { resource = engineering_research value < 100 }
			}
		}
	}
}
building_computational_array_2_3_direct_build = {
	icon = "building_computational_array_2"
	tags = { special_resource_building }
	base_buildtime = 315
	cost = { minerals = 180 }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t2_3 = yes
		NOT = { has_building = building_computational_array_2_3 }
		direct_build_enabled = yes
		NAND = {
			conditions_megastructure_restricted_t3_3 = yes
			requires_megastructure_node_tile = yes
			requires_capital_1_or_hab = yes
			NOT = { owner = { has_country_flag = display_low_tier_flag } }
			has_global_flag = direct_build_enabled
		}
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_3_3 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t2_3_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t2_3_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t2_3_adjacency_bonus
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_computational_array_2_3 = {
	icon = "building_computational_array_2"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t2_time
	cost = { minerals = @megastructure_unique_t2_cost }
	required_resources = { energy = @megastructure_unique_t2_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t2_3 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	upgrades = { building_computational_array_3_3 }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t2_3_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t2_3_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t2_3_adjacency_bonus
	}
}
building_computational_array_3_3_direct_build = {
	icon = "building_computational_array_3"
	tags = { special_resource_building }
	base_buildtime = 450
	cost = { minerals = 360 }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	 #requirements and upgrade
	potential = {
		new_building_content_enabled = yes
		conditions_megastructure_restricted_t3_3 = yes
		NOT = { has_building = building_computational_array_3_3 }
		direct_build_enabled = yes
	}
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t3_3_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t3_3_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t3_3_adjacency_bonus
	}
	ai_allow = {
		NOT = { owner = { has_country_flag = cgm_disable_vanilla_building_AI } }
		planet_unique_prerequisite = yes
	}
	show_tech_unlock_if = { always = no }
}
building_computational_array_3_3 = {
	icon = "building_computational_array_3"
	tags = { special_resource_building }
	is_listed = no
	base_buildtime = @megastructure_unique_t3_time
	cost = { minerals = @megastructure_unique_t3_cost }
	required_resources = { energy = @megastructure_unique_t3_upkeep }
	show_tech_unlock_if = { new_building_content_enabled = yes }
	 #requirements and upgrade
	potential = { new_building_content_enabled = yes conditions_megastructure_restricted_t3_3 = yes }
	allow = { requires_megastructure_node_tile = yes requires_capital_1_or_hab = yes }
	 #resource output and modifiers
	produced_resources = {
		society_research = @computational_array_output
		physics_research = @computational_array_output
		engineering_research = @computational_array_output
	}
	adjacency_bonus = {
		tile_building_resource_society_research_add = @megastructure_unique_t3_3_adjacency_bonus
		tile_building_resource_physics_research_add = @megastructure_unique_t3_3_adjacency_bonus
		tile_building_resource_engineering_research_add = @megastructure_unique_t3_3_adjacency_bonus
	}
}
