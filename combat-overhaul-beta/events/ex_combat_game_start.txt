namespace = ex_combat_game_start

event = {
	id = ex_combat_game_start.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = { is_country_type = default	}	
			if = { 
				limit = { 
					NOR = { 
						has_country_flag = component_armor_pref
						has_country_flag = component_shield_pref
						has_country_flag = component_cloak_pref_1
						has_country_flag = component_cloak_pref_2
						has_country_flag = component_cloak_pref_3							
						has_country_flag = component_marauder_pref_1
						has_country_flag = component_marauder_pref_2
						has_country_flag = component_marauder_pref_3
						has_country_flag = component_integrity_pref_1
						has_country_flag = component_integrity_pref_2
						has_country_flag = component_integrity_pref_3					
					}	
				}	
				random_list = { 
					25 = { set_country_flag = component_armor_pref = { factor = 1.5 is_high_armor_personality = yes } modifier = { factor = 0.25 is_low_armor_personality = yes } }
					25 = { set_country_flag = component_shield_pref = { factor = 0.25 is_high_armor_personality = yes } modifier = { factor = 1.5 is_low_armor_personality = yes } }					
					50 = { } 
				}	
			}	
			if = { 
				limit = { 
					NOR = { 
						has_country_flag = component_armor_pref
						has_country_flag = component_shield_pref
						has_country_flag = component_cloak_pref_1
						has_country_flag = component_cloak_pref_2
						has_country_flag = component_cloak_pref_3							
						has_country_flag = component_marauder_pref_1
						has_country_flag = component_marauder_pref_2
						has_country_flag = component_marauder_pref_3
						has_country_flag = component_integrity_pref_1
						has_country_flag = component_integrity_pref_2
						has_country_flag = component_integrity_pref_3					
					}	
				}	
				random_list = { 
					20 = { set_country_flag = component_cloak_pref_1 modifier = { factor = 0.5 is_high_armor_personality = yes } modifier = { factor = 0.5 is_low_armor_personality = yes } }
					10 = { set_country_flag = component_cloak_pref_2 modifier = { factor = 0.25 is_high_armor_personality = yes } modifier = { factor = 0.25 is_low_armor_personality = yes } }
					5  = { set_country_flag = component_cloak_pref_3 modifier = { factor = 0.125 is_high_armor_personality = yes } modifier = { factor = 0.125 is_low_armor_personality = yes } }
					65 = { } 
				}	
			}				
			
			if = { #marauder (+dmg): highest priority on BB and cruiser
				limit = { 
					NOR = { 
						has_country_flag = component_armor_pref
						has_country_flag = component_shield_pref
						has_country_flag = component_cloak_pref_1
						has_country_flag = component_cloak_pref_2
						has_country_flag = component_cloak_pref_3							
						has_country_flag = component_marauder_pref_1
						has_country_flag = component_marauder_pref_2
						has_country_flag = component_marauder_pref_3
						has_country_flag = component_integrity_pref_1
						has_country_flag = component_integrity_pref_2
						has_country_flag = component_integrity_pref_3					
					}	
				}	
				random_list = { 
					20 = { set_country_flag = component_marauder_pref_1 modifier = { factor = 0.5 is_high_armor_personality = yes } modifier = { factor = 0.5 is_low_armor_personality = yes } }
					10 = { set_country_flag = component_marauder_pref_2 modifier = { factor = 0.25 is_high_armor_personality = yes } modifier = { factor = 0.25 is_low_armor_personality = yes } }
					5  = { set_country_flag = component_marauder_pref_3 modifier = { factor = 0.125 is_high_armor_personality = yes } modifier = { factor = 0.125 is_low_armor_personality = yes } }
					65 = { } 
				}	
			}	
			if = { #integrity (+hull): highest priority on destroyer and dreadnought
				limit = { 
					NOR = { 
						has_country_flag = component_armor_pref
						has_country_flag = component_shield_pref
						has_country_flag = component_cloak_pref_1
						has_country_flag = component_cloak_pref_2
						has_country_flag = component_cloak_pref_3							
						has_country_flag = component_marauder_pref_1
						has_country_flag = component_marauder_pref_2
						has_country_flag = component_marauder_pref_3
						has_country_flag = component_integrity_pref_1
						has_country_flag = component_integrity_pref_2
						has_country_flag = component_integrity_pref_3					
					}	
				}		
				random_list = { 
					20 = { set_country_flag = component_integrity_pref_1 modifier = { factor = 0.5 is_high_armor_personality = yes } modifier = { factor = 0.5 is_low_armor_personality = yes } }
					10 = { set_country_flag = component_integrity_pref_2 modifier = { factor = 0.25 is_high_armor_personality = yes } modifier = { factor = 0.25 is_low_armor_personality = yes } }
					5  = { set_country_flag = component_integrity_pref_3 modifier = { factor = 0.125 is_high_armor_personality = yes } modifier = { factor = 0.125 is_low_armor_personality = yes } }
					65 = { } 
				}	
			}	
		}
	}
}