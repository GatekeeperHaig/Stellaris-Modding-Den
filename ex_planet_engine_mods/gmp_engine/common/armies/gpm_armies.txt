#Defensive armies can't transport of the planet
#Garrison armies are created by pops
#maintenance is directly scripted here. 0.25 translates to 0.25 monthly cost (excluding other upkeep modifiers)

# Normal
gpm_precursor_mech_army = {
	damage = 2.0
	morale_damage = 2.0
	collateral_damage = 3.0
	war_exhaustion = 0.25
	health = 3
	has_morale = no
	time = 360
	maintenance = 4.0
	has_species = no
	icon_frame = 1
	
	cost = {
		minerals = 250
	}
	

	potential = {
		planet = {
			has_modifier = "Precursor_Mechs"
		}
		owner = {
			NOT = { has_authority = auth_machine_intelligence }
		}
	}

	
	allow = {
		custom_tooltip = {
			text = precursor_mech_army_trigger_tooltip
			planet = {
				has_modifier = "Precursor_Mechs"
			}
		}
	}
}
gpm_precursor_bunker_army = {
	defensive = yes
	is_building_spawned = yes
	damage = 2
	health = 3
	morale = 3
	collateral_damage = 0.0
	war_exhaustion = 0.0 # No WE from defense armies
	icon_frame = 1
	has_species = yes
	
	potential = {
		planet = {
			has_modifier = "Precursor_Bunker_Grid"
			has_building = gpm_building_stronghold
		}
		owner = {
			NOT = { has_authority = auth_machine_intelligence }
		}
	}
	
	allow = {
		custom_tooltip = {
			text = precursor_bunker_army_trigger_tooltip
			planet = {
				has_modifier = "Precursor_Bunker_Grid"
				has_building = gpm_building_stronghold
			}
		}
	}
}
gpm_giant_arachnid_army = {
	damage = 2
	morale_damage = 4.0
	collateral_damage = 2.0
	war_exhaustion = 0.10
	health = 2.0
	has_morale = no
	time = 180
	maintenance = 3.0
	icon_frame = 8
	has_species = no
	
	cost = {
		minerals = 100
	}
	
	potential = {
		planet = {
			has_modifier = "Arachnophobia"
		}
		owner = {
			NOT = { has_authority = auth_machine_intelligence }
		}
	}
	
	allow = {
		custom_tooltip = {
			text = giant_arachnid_army_trigger_tooltip
			planet = {
				has_modifier = "Arachnophobia"
			}
			owner = {
				AND = {
					check_variable = {
						which = "gpm_giant_arachnid_count" 
						value < 5
					}
					NOT = {
						check_variable = {
							which = "gpm_giant_arachnid_count_queued" 
							value = 5
						}
					}
				}
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "gpm_giant_arachnid_count" 
				value = 1
			}
			change_variable = {
				which = "gpm_giant_arachnid_count_queued" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "gpm_giant_arachnid_count" 
				value = -1
			}
			change_variable = {
				which = "gpm_giant_arachnid_count_queued" 
				value = -1
			}
		}
	}
}

# Machine Empires
gpm_precursor_mech_army_machine = {
	damage = 2.0
	morale_damage = 2.0
	collateral_damage = 3.0
	war_exhaustion = 0.25
	health = 3
	has_morale = no
	time = 360
	maintenance = 4.0
	has_species = no
	icon_frame = 1
	
	cost = {
		minerals = 250
	}
	
	potential = {
		planet = {
			has_modifier = "Precursor_Mechs"
		}
		owner = {
			has_authority = auth_machine_intelligence
		}
	}

	
	allow = {
		custom_tooltip = {
			text = precursor_mech_army_machine_trigger_tooltip
			planet = {
				has_modifier = "Precursor_Mechs"
			}
		}
	}
}
gpm_precursor_bunker_army_machine = {
	defensive = yes
	is_building_spawned = yes
	damage = 2
	health = 3
	morale = 3
	collateral_damage = 0.0
	war_exhaustion = 0.0 # No WE from defense armies
	icon_frame = 1
	has_species = yes
	
	potential = {
		planet = {
			has_modifier = "Precursor_Bunker_Grid"
			has_building = gpm_building_stronghold
		}
		owner = {
			has_authority = auth_machine_intelligence
		}
	}
	
	allow = {
		custom_tooltip = {
			text = precursor_bunker_army_machine_trigger_tooltip
			planet = {
				has_modifier = "Precursor_Bunker_Grid"
				has_building = gpm_building_stronghold
			}
		}
	}
}
gpm_giant_arachnid_army_machine = {
	damage = 2
	morale_damage = 4.0
	collateral_damage = 2.0
	war_exhaustion = 0.10
	health = 2.0
	has_morale = no
	time = 180
	maintenance = 3.0
	icon_frame = 8
	has_species = no
	
	cost = {
		minerals = 100
	}
	
	potential = {
		planet = {
			has_modifier = "Arachnophobia"
		}
		owner = {
			has_authority = auth_machine_intelligence
		}
	}
	
	allow = {
		custom_tooltip = {
			text = giant_arachnid_army_machine_trigger_tooltip
			planet = {
				has_modifier = "Arachnophobia"
			}
			owner = {
				AND = {
					check_variable = {
						which = "gpm_giant_arachnid_count" 
						value < 5
					}
					NOT = {
						check_variable = {
							which = "gpm_giant_arachnid_count_queued" 
							value = 5
						}
					}
				}
			}
		}
	}
	on_queued = {
		owner = {
			change_variable = {
				which = "gpm_giant_arachnid_count" 
				value = 1
			}
			change_variable = {
				which = "gpm_giant_arachnid_count_queued" 
				value = 1
			}
		}
	}
	
	on_unqueued = {
		owner = {
			change_variable = {
				which = "gpm_giant_arachnid_count" 
				value = -1
			}
			change_variable = {
				which = "gpm_giant_arachnid_count_queued" 
				value = -1
			}
		}
	}
}