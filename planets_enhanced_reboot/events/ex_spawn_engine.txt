namespace = spawn_engine

event = { 
	id = spawn_engine.1
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	
	#This event fires only once.
		
	immediate = {		
		unique_planetary_resource_spawn = yes	
		every_planet = { 
			if = {
				limit = { is_colonizable = yes }
				planet_event = { id = spawn_engine.2 }
			}	
			if = {
				limit = { is_colonizable = no }
				planet_event = { id = spawn_engine.3 }
			}
		}
	}
}

planet_event = { 
	id = spawn_engine.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = { 
		set_variable = { which = sr_count value = 0 }
		count_strategic_resources = yes
		roll_planetary_resource_loop = yes
		modifier_spawn_table = yes
	}	
}

planet_event = { 
	id = spawn_engine.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { has_orbital_strategic_resource = yes }
			flag_resource_station_types = yes 			
			resource_cleanup_table = yes
			orbital_deposit_respawn = yes
			remove_resource_station_types_flags = yes
		}
		orbital_resource_spawn = yes			
	}	
}		


