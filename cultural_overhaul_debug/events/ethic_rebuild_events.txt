namespace = observation

# Societal Shift towards Individualist
country_event = {
	id = observation.0001
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_fanatic_capitalism }
		capital_scope = {
			has_observation_outpost = yes
			observation_outpost = { has_mission = native_indoctrination }
			observation_outpost_owner = { 
				OR = {
					has_ethic = ethic_fanatic_capitalism
					has_ethic = ethic_capitalism
				}
			}
			any_owned_pop = {
				has_ethic = ethic_capitalism
			}		
			OR = {
				root = { NOT = { has_ethic = ethic_capitalism } }
				count_pops = {
					limit = { has_ethic = ethic_capitalism }
					count > 1
				}				
			}				
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		shift_ethic = "ethic_capitalism"
		capital_scope = {
			observation_outpost_owner = { country_event = { id = observation.0002 } }
		}
	}
}

country_event = {
	id = observation.0002
	title = "observation.0002.name"
	desc = "observation.0002.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_primitive_civilization
	location = from
	
	is_triggered_only = yes
	
	option = {
		name = "observation.0002.a"
	}
}



# Societal Shift towards Collectivism
country_event = {
	id = observation.1001
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_fanatic_socialism }
		capital_scope = {
			has_observation_outpost = yes
			observation_outpost = { has_mission = native_indoctrination }
			observation_outpost_owner = { 
				OR = {
					has_ethic = ethic_fanatic_socialism
					has_ethic = ethic_socialism
				}
			}
			any_owned_pop = {
				has_ethic = ethic_socialism
			}		
			OR = {
				root = { NOT = { has_ethic = ethic_socialism } }
				count_pops = {
					limit = { has_ethic = ethic_socialism }
					count > 1
				}				
			}				
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		shift_ethic = "ethic_socialism"
		capital_scope = {
			observation_outpost_owner = { country_event = { id = observation.1002 } }
		}
	}
}

country_event = {
	id = observation.1002
	title = "observation.0002.name"
	desc = "observation.1002.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_primitive_civilization
	location = from
	
	is_triggered_only = yes
	
	option = {
		name = "observation.0002.a"
	}
}




# Societal Shift towards Elitism
country_event = {
	id = observation.2001
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_fanatic_elitist }
		capital_scope = {
			has_observation_outpost = yes
			observation_outpost = { has_mission = native_indoctrination }
			observation_outpost_owner = { 
				OR = {
					has_ethic = ethic_fanatic_elitist
					has_ethic = ethic_elitist
				}
			}
			any_owned_pop = {
				has_ethic = ethic_elitist
			}		
			OR = {
				root = { NOT = { has_ethic = ethic_elitist } }
				count_pops = {
					limit = { has_ethic = ethic_elitist }
					count > 1
				}				
			}				
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		shift_ethic = "ethic_elitist"
		capital_scope = {
			observation_outpost_owner = { country_event = { id = observation.2002 } }
		}
	}
}

country_event = {
	id = observation.2002
	title = "observation.0002.name"
	desc = "observation.2002.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_primitive_civilization
	location = from
	
	is_triggered_only = yes
	
	option = {
		name = "observation.0002.a"
	}
}


# Societal Shift towards Egalitarian
country_event = {
	id = observation.3001
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_fanatic_pluralist }
		capital_scope = {
			has_observation_outpost = yes
			observation_outpost = { has_mission = native_indoctrination }
			observation_outpost_owner = { 
				OR = {
					has_ethic = ethic_fanatic_pluralist
					has_ethic = ethic_pluralist
				}
			}
			any_owned_pop = {
				has_ethic = ethic_pluralist
			}		
			OR = {
				root = { NOT = { has_ethic = ethic_pluralist } }
				count_pops = {
					limit = { has_ethic = ethic_pluralist }
					count > 1
				}				
			}				
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		shift_ethic = "ethic_pluralist"
		capital_scope = {
			observation_outpost_owner = { country_event = { id = observation.3002 } }
		}
	}
}

country_event = {
	id = observation.3002
	title = "observation.0002.name"
	desc = "observation.3002.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_primitive_civilization
	location = from
	
	is_triggered_only = yes
	
	option = {
		name = "observation.0002.a"
	}
}



# Societal Shift towards Ecologism
country_event = {
	id = observation.4001
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_fanatic_green }
		capital_scope = {
			has_observation_outpost = yes
			observation_outpost = { has_mission = native_indoctrination }
			observation_outpost_owner = { 
				OR = {
					has_ethic = ethic_fanatic_green
					has_ethic = ethic_green
				}
			}
			any_owned_pop = {
				has_ethic = ethic_green
			}		
			OR = {
				root = { NOT = { has_ethic = ethic_green } }
				count_pops = {
					limit = { has_ethic = ethic_green }
					count > 1
				}				
			}				
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		shift_ethic = "ethic_green"
		capital_scope = {
			observation_outpost_owner = { country_event = { id = observation.4002 } }
		}
	}
}

country_event = {
	id = observation.4002
	title = "observation.0002.name"
	desc = "observation.4002.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_primitive_civilization
	location = from
	
	is_triggered_only = yes
	
	option = {
		name = "observation.0002.a"
	}
}




# Societal Shift towards Industrialism
country_event = {
	id = observation.5001
	hide_window = yes
	
	trigger = {
		is_country_type = primitive
		NOT = { has_ethic = ethic_fanatic_industrial }
		capital_scope = {
			has_observation_outpost = yes
			observation_outpost = { has_mission = native_indoctrination }
			observation_outpost_owner = { 
				OR = {
					has_ethic = ethic_fanatic_industrial
					has_ethic = ethic_industrial
				}
			}
			any_owned_pop = {
				has_ethic = ethic_industrial
			}		
			OR = {
				root = { NOT = { has_ethic = ethic_industrial } }
				count_pops = {
					limit = { has_ethic = ethic_industrial }
					count > 1
				}				
			}				
		}
	}
	
	mean_time_to_happen = {
		months = 12
	}
	
	immediate = {
		shift_ethic = "ethic_industrial"
		capital_scope = {
			observation_outpost_owner = { country_event = { id = observation.5002 } }
		}
	}
}

country_event = {
	id = observation.5002
	title = "observation.0002.name"
	desc = "observation.5002.desc"
	picture = GFX_evt_medieval_alien_civilization
	show_sound = event_primitive_civilization
	location = from
	
	is_triggered_only = yes
	
	option = {
		name = "observation.0002.a"
	}
}


namespace = pds_active

# Root = Planet being bombarded for a day.
# From = Fleet performing the delicate bombardment.
planet_event = {
	id = pds_active.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		
	Root = {
		random_pop = {
			limit = {is_growing = yes}
			kill_pop = yes
		}
	}		
	
	# occupied planets shall not use any defense system
	if = { 
	
	     limit = { Root = { is_occupied_flag = no } }
	# Assign target of Planetary Defense System (if no target is assigned)
		if = { 
			limit = {
				NOT = { From.owner = { any_owned_ship = { fleet = { is_same_value = From } has_ship_flag = pds_target } } }
			}
			From = { random_owned_ship = { set_ship_flag = pds_target } }
			set_variable = {
				which = main_flack_reload
				value = 10
			}
		}
	
	if = { limit = { any_tile = { has_building = "building_global_pds_1" is_ruined = no  } } # has_grown_pop = yes <- AI does not properly place pops...its better not used
	
		
		if = { limit = { check_variable = { which = main_flack_reload value < 1 } }
			set_variable = {
				which = main_flack_reload
				value = 10
			}
			# Planetary Defense System targets one ship in order to increase ship losses in enemy fleet, however there is a chance that another ship gets hit or no ship gets hit at all
			random_list = {
			# Random ship in the fleet gets hit
			10 = {
				From = { 
					random_owned_ship = {
						random_list = {
							25 = { reduce_hp = 200  }
							25 = { reduce_hp = 300  }
							25 = { reduce_hp = 400  }
							25 = { reduce_hp = 500 }
						}
						create_ambient_object = { type = explosion_particle_object location = this use_3d_location = yes duration = 20 scale = 1 }
					}
				}
			}
			# Targeted ship gets hit
			80 = { 
				From = { 
					random_owned_ship = { 
						limit = {has_ship_flag = pds_target} 
						reduce_hp_percent = 2 
						random_list = {
							25 = { reduce_hp = 300 }
							25 = { reduce_hp = 400 }
							25 = { reduce_hp = 500 }
							25 = { reduce_hp = 600 }
						}
						create_ambient_object = { type = explosion_particle_object location = this use_3d_location = yes duration = 20 scale = 2 }
					}
				}
			}
			# no ship gets hit
			10 = { }
		}
		else = {change_variable = { which = main_flack_reload  value = -1  }}
		}
	}
	
	
		
		
		
	}
  }
}







namespace = unity_patrons

country_event = {
	id = unity_patrons.1
	hide_window = yes
	is_triggered_only = yes
	location = ROOT 
	
	trigger = {
		has_valid_civic = civic_free_haven
	}	

	immediate = { 
	
		add_modifier = {
			modifier = "unity_patrons"
			days = 3650
		}
	
	}
	
}

namespace = purity_chosen

planet_event = {
	id = purity_chosen.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			has_tradition = tr_purity_chosen_ones
		}
		FROMFROM = {
			is_robot_pop = no
			NOT = {
				is_same_species = owner_species
			}
		}
		is_controlled_by = FROM
	}
	
	immediate = {
		FROM = {
			add_monthly_resource_mult = {
				resource = unity
				value = 1
				min = 5
				max = 25
			}
		}
	}
}



namespace = ethic_rebuild_clear_blocker

planet_event = {
	id = ethic_rebuild_clear_blocker.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		exists = owner
		owner = { has_valid_civic = civic_environmentalist }
	}

	immediate = {
	
		
       if = {
          limit = {
            FROM = {
            has_blocker = "tb_mountain_range"
            }
          }
		 random_list = {
			2 = {
				this = {
                owner = { add_minerals = 25 add_engineering_research = 15 }
		        }
			}
		 }				
        }
		
       if = {
          limit = {
            FROM = {
            has_blocker = "tb_active_volcano"
            }
          }
		  random_list = {
			2 = {
				this = {
                owner = { add_minerals = 25 add_engineering_research = 25 add_energy = 20 }
		        }
			}
		  }				
        }	

       if = {
          limit = {
            FROM = {
            has_blocker = "tb_dangerous_wildlife"
            }
          }
		  random_list = {
			2 = {
				this = {
                owner = { add_society_research = 35 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_dense_jungle"
            }
          }
		  random_list = {
			2 = {
				this = {
                owner = { add_food = 25 add_society_research = 20 }
		        }
			}
		  }				
        }	


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_quicksand_basin"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 15 add_engineering_research = 15 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_noxious_swamp"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_food = 20 add_society_research = 15 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_massive_glacier"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 20 add_engineering_research = 10 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_toxic_kelp"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_food = 15 add_energy = 15 add_society_research = 15 }
		        }
			}
		  }				
        }	

       if = {
          limit = {
            FROM = {
            has_blocker = "tb_deep_sinkhole"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 15 add_energy = 10 add_engineering_research = 10 }
		        }
			}
		  }				
        }	

       if = {
          limit = {
            FROM = {
            has_blocker = "tb_radioactive_wasteland"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 15 add_society_research = 15 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_city_ruins"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 50 add_society_research = 25 add_engineering_research = 50 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_infestation"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_society_research = 20 }
		        }
			}
		  }				
        }	


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_quarantine_zone"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_society_research = 15 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_bombarded_land"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 10, add_engineering_research = 25 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_ancient_ruins"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 20 add_engineering_research = 30 add_society_research = 50 }
		        }
			}
		  }				
        }


       if = {
          limit = {
            FROM = {
            has_blocker = "tb_bomb_crater"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 10 add_engineering_research = 25 add_physics_research = 25 }
		        }
			}
		  }				
        }

       if = {
          limit = {
            FROM = {
            has_blocker = "tb_crater"
            }
          }
		  random_list = {
			1 = {
				this = {
                owner = { add_minerals = 30 add_engineering_research = 20 add_physics_research = 30 }
		        }
			}
		  }				
        }		
		
	}
}



namespace = set_my_flag

event = {
	id = set_my_flag.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
			set_global_flag = ethic_rebuild_installed
	}
}


namespace = ethic_rebuild_minerals_back

planet_event = {
	id = ethic_rebuild_minerals_back.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
	     exists = owner
         owner = { has_valid_civic = civic_environmentalist } 
	}

	immediate = {
	
           This = {
              owner = {
                 add_minerals = 30
              }
            }
		
	}
}

namespace = new_babylon

planet_event = {
	id = new_babylon.1
	
	title = new_babylon.name
	desc = new_babylon.desc
	picture = GFX_evt_new_babylon
	show_sound = event_celebration
	is_triggered_only = yes
	location = ROOT 

	immediate = { 
	
	change_planet_size = 10
	
		add_modifier = {
			modifier = "new_babylon"
			days = -1
		}
	set_name = "New Babylon" 
    set_planet_flag = new_babylon_planet 	
		
	owner = {	
    set_country_flag = new_babylon_established
	}
	
	}
	
}


namespace = increase_planetsize

planet_event = {
	id = increase_planetsize.1
	hide_window = yes
	is_triggered_only = yes
	location = ROOT 

	immediate = { 
	
	change_planet_size = 1
	
		add_modifier = {
			modifier = "pragmatic_development_1"
			days = -1
		}
		
    set_planet_flag = planet_size_increased_1
	
	}
	
}


planet_event = {
	id = increase_planetsize.2
	hide_window = yes
	is_triggered_only = yes
	location = ROOT 

	immediate = { 
	
	change_planet_size = 1
		add_modifier = {
			modifier = "pragmatic_development_2"
			days = -1
		}
    set_planet_flag = planet_size_increased_2
	
	}
	
}


planet_event = {
	id = increase_planetsize.3
	hide_window = yes
	is_triggered_only = yes
	location = ROOT 

	immediate = { 
	
	change_planet_size = 1
    set_planet_flag = planet_size_increased_3
	
	}
	
}


namespace = starter_tech

event = {
	id = starter_tech.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
					NOT = { has_country_flag = flag_startertech_set }
					is_country_type = default
			}
			
			if = {
				limit = {
					has_civic = civic_machine_cult
				}
				give_technology = { tech = tech_robotic_workers }
			}
			
			if = {
				limit = {
					has_civic = civic_xenologist
				}
				give_technology = { tech = tech_alien_life_studies  tech = tech_genome_mapping }
			}			
			
			

			if = {
				limit = {
					has_civic = civic_exploration
				}
				give_technology = { tech = tech_automated_exploration }
			}			
			
					
			
				
			        set_country_flag = flag_startertech_set
		}	
	}
}

namespace = voice_planet

planet_event = {
	id = voice_planet.1	
	hide_window = yes
	is_triggered_only = yes
	location = ROOT 

	immediate = {

			if = {
				limit = {
					has_modifier = "migrating_forests"
				}
				remove_modifier = "migrating_forests"
			}	
			
			if = {
				limit = {
					has_modifier = "dangerous_wildlife"
				}
				remove_modifier = "dangerous_wildlife"
			}				
					
	
			if = {
				limit = {
					has_modifier = "hazardous_weather"
				}
				remove_modifier = "hazardous_weather"
			}

			if = {
				limit = {
					has_modifier = "unstable_tectonics"
				}
				remove_modifier = "unstable_tectonics"
			}

			if = {
				limit = {
					has_modifier = "weak_magnetic_field"
				}
				remove_modifier = "weak_magnetic_field"
			}

			if = {
				limit = {
					has_modifier = "tidal_locked"
				}
				remove_modifier = "tidal_locked"
			}

			if = {
				limit = {
					has_modifier = "wild_storms"
				}
				remove_modifier = "wild_storms"
			}

			if = {
				limit = {
					has_modifier = "bleak_planet"
				}
				remove_modifier = "bleak_planet"
			}

			if = {
				limit = {
					has_modifier = "irradiated_planet"
				}
				remove_modifier = "irradiated_planet"
			}
			
			if = {
				limit = {
					has_modifier = "extreme_storms"
				}
				remove_modifier = "extreme_storms"
			}	

			if = {
				limit = {
					has_modifier = "nuclear_wasteland"
				}
				remove_modifier = "nuclear_wasteland"
			}	

			if = {
				limit = {
					has_modifier = "damaged_ecology"
				}
				remove_modifier = "damaged_ecology"
			}			

			if = {
				limit = {
					has_modifier = "wasteland_radiation"
				}
				remove_modifier = "wasteland_radiation"
			}

			if = {
				limit = {
					has_modifier = "irradiated_wasteland"
				}
				remove_modifier = "irradiated_wasteland"
			}	

			if = {
				limit = {
					has_modifier = "nuclear_devastation"
				}
				remove_modifier = "nuclear_devastation"
			}				
				
			if = {
				limit = {
					has_modifier = "abandoned_terraforming"
				}
				remove_modifier = "abandoned_terraforming"
			}	

			if = {
				limit = {
					has_modifier = "hostile_environment"
				}
				remove_modifier = "hostile_environment"
			}	

			if = {
				limit = {
					has_modifier = "unbalanced_ecosystem"
				}
				remove_modifier = "unbalanced_ecosystem"
			}

			if = {
				limit = {
					has_modifier = "acid_jungles"
				}
				remove_modifier = "acid_jungles"
			}			
	
	}
	
}


namespace = add_modifier_1

planet_event = {
	id = add_modifier_1.1
	hide_window = yes
	is_triggered_only = yes
	location = ROOT 

	immediate = { 
		add_modifier = {
			modifier = "irradiated_planet"
			days = -1
		}		
	}
	
	immediate = { 
		add_modifier = {
			modifier = "bleak_planet"
			days = -1
		}		
	}

	immediate = { 
		add_modifier = {
			modifier = "wild_storms"
			days = -1
		}		
	}

	immediate = { 
		add_modifier = {
			modifier = "weak_magnetic_field"
			days = -1
		}		
	}

	immediate = { 
		add_modifier = {
			modifier = "unstable_tectonics"
			days = -1
		}		
	}	
	
	immediate = { 
		add_modifier = {
			modifier = "tidal_locked"
			days = -1
		}		
	}	
}


