generate_asteroidal_planetoid = {
	random_list = { 
		95 = { 
			if = { 
				limit = { 
					is_asteroid = yes
					NOR = { 
						is_planet_class = pc_ice_asteroid
						is_planet_class = pc_crystal_asteroid
					}
				}		
				change_pc = pc_asteroidal_planetoid	
				if = { 
					limit = { planet_size = 6 } 
					set_variable = { which = planet_size_var value = 6 } 
				}
				else = { set_variable = { which = planet_size_var value = 5 } }
				set_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_energy_ultra_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_energy_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_regular_rock value = 0 } 
				every_tile = { 
					random_list = { 
						10 = { 
							set_blocker = tb_pc_asteroidal_mineral_ultra_rich_rock change_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value = 1 } 
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}
						}
						10 = { 
							set_blocker = tb_pc_asteroidal_energy_ultra_rich_rock change_variable = { which = tb_pc_asteroidal_energy_ultra_rich_rock value = 1 }
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}					
						}
						20 = { 
							set_blocker = tb_pc_asteroidal_mineral_rich_rock change_variable = { which = tb_pc_asteroidal_mineral_rich_rock value = 1 }
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}					
						}
						20 = { 
							set_blocker = tb_pc_asteroidal_energy_rich_rock change_variable = { which = tb_pc_asteroidal_energy_rich_rock value = 1 }
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}	
						}
						40 = { 
							set_blocker = tb_pc_asteroidal_regular_rock change_variable = { which = tb_pc_asteroidal_regular_rock value = 1 }
							modifier = { 
								add = 20
								prev = { 
									OR = { 
										check_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value > 0 } 
										check_variable = { which = tb_pc_asteroidal_mineral_rich_rock value > 0 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_ultra_rich_rock value = 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_rich_rock value = 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_regular_rock value < 2 } 						
									}
								}	
							}	
							modifier = { 
								add = 40
								prev = { 
									OR = { 
										check_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value > 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_rich_rock value > 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_ultra_rich_rock value > 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_rich_rock value > 1 } 
									}	
								}	
							}
						}					
					}
				}
				random_tile = { 
					limit = { has_blocker = tb_pc_asteroidal_mineral_regular_rock }
					remove_blocker = yes
				}
			}
			else_if = { 
				limit = { 
					is_planet_class_pc_dwarf_planet_asteroid = yes
				}		
				change_pc = pc_dwarf_planetoid	
				if = { 
					limit = { planet_size = 8 } 
					set_variable = { which = planet_size_var value = 8 } 
				}
				else = { set_variable = { which = planet_size_var value = 7 } }
				set_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_energy_ultra_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_energy_rich_rock value = 0 } 
				set_variable = { which = tb_pc_asteroidal_mineral_regular_rock value = 0 } 
				every_tile = { 
					random_list = { 
						10 = { 
							set_blocker = tb_pc_asteroidal_mineral_ultra_rich_rock change_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value = 1 } 
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}
						}
						10 = { 
							set_blocker = tb_pc_asteroidal_energy_ultra_rich_rock change_variable = { which = tb_pc_asteroidal_energy_ultra_rich_rock value = 1 }
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}					
						}
						20 = { 
							set_blocker = tb_pc_asteroidal_mineral_rich_rock change_variable = { which = tb_pc_asteroidal_mineral_rich_rock value = 1 }
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}					
						}
						20 = { 
							set_blocker = tb_pc_asteroidal_energy_rich_rock change_variable = { which = tb_pc_asteroidal_energy_rich_rock value = 1 }
							modifier = { 
								factor = 0
								NOT = { prev = { any_tile = { has_blocker = tb_pc_asteroidal_regular_rock } } }
							}	
						}
						40 = { 
							set_blocker = tb_pc_asteroidal_regular_rock change_variable = { which = tb_pc_asteroidal_regular_rock value = 1 }
							modifier = { 
								add = 20
								prev = { 
									OR = { 
										check_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value > 0 } 
										check_variable = { which = tb_pc_asteroidal_mineral_rich_rock value > 0 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_ultra_rich_rock value = 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_rich_rock value = 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_regular_rock value < 2 } 						
									}
								}	
							}	
							modifier = { 
								add = 40
								prev = { 
									OR = { 
										check_variable = { which = tb_pc_asteroidal_mineral_ultra_rich_rock value > 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_rich_rock value > 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_ultra_rich_rock value > 1 } 
										check_variable = { which = tb_pc_asteroidal_mineral_energy_rich_rock value > 1 } 
									}	
								}	
							}
						}					
					}
				}
				random_tile = { 
					limit = { has_blocker = tb_pc_asteroidal_mineral_regular_rock }
					remove_blocker = yes
				}
			}
			else_if = { 
				limit = { is_planet_class = pc_ice_asteroid }
				change_pc = pc_ice_asteroidal_planetoid	
				if = { 
					limit = { planet_size = 6 } 
					set_variable = { which = planet_size_var value = 6 } 
				}
				else = { set_variable = { which = planet_size_var value = 5 } }
				set_variable = { which = tb_pc_asteroidal_primordial_ice value = 0 } 
				every_tile = { 
					set_blocker = tb_pc_asteroidal_primordial_ice
				}
				random_tile = { remove_blocker = yes }
			}		
		}	
		5 = { 
			change_pc = pc_crystal_asteroidal_planetoid	
			if = { 
				limit = { planet_size = 6 } 
				set_variable = { which = planet_size_var value = 6 } 
			}
			else = { set_variable = { which = planet_size_var value = 5 } }
			set_variable = { which = tb_pc_asteroidal_anomaleous_crystal_formation_1 value = 0 } 
			set_variable = { which = tb_pc_asteroidal_anomaleous_crystal_formation_2 value = 0 } 
			set_variable = { which = tb_pc_asteroidal_regular_crystal_formation value = 0 } 
			every_tile = { 
				random_list = { 
					20 = { set_blocker = tb_pc_asteroidal_anomaleous_crystal_formation_1 change_variable = { which = tb_pc_asteroidal_anomaleous_crystal_formation_1 value = 1 } }
					20 = { set_blocker = tb_pc_asteroidal_anomaleous_crystal_formation_2 change_variable = { which = tb_pc_asteroidal_anomaleous_crystal_formation_2 value = 1 } }
					60 = { set_blocker = tb_pc_asteroidal_regular_crystal_formation change_variable = { which = tb_pc_asteroidal_regular_crystal_formation value = 1 } }					
				}
			}
			random_tile = { 
				limit = { has_blocker = tb_pc_asteroidal_regular_crystal_formation }
				remove_blocker = yes
			}		
		}			
	}	
}	

prescripted_asteroid_size_readjustment = {
	if = {
		limit = { is_planet_class = pc_dwarf_planet_asteroid }
		random_list = {
			50 = { set_planet_size = 8 }
			50 = { set_planet_size = 7 }
		}
		
	}
	else_if = {
		limit = { is_planet_class = pc_large_asteroid_moon }
		random_list = {
			30 = { set_planet_size = 6 }
			70 = { set_planet_size = 5 }
		}	
		
	}
	else_if = {
		limit = { is_planet_class = pc_small_asteroid_moon }
		random_list = {
			50 = { set_planet_size = 4 }
			50 = { set_planet_size = 3 }
		}	
	}
	else_if = {
		limit = { is_planet_class = pc_asteroid }
		random_list = {
			5 = { set_planet_size = 6  }
			10 = { set_planet_size = 5  }
			20 = { set_planet_size = 4 }
			35 = { set_planet_size = 3 }
			30 = { set_planet_size = 2 }
		}	
	}
	else_if = {
		limit = { is_planet_class = pc_ice_asteroid }
		random_list = {
			5 = { set_planet_size = 6  }
			10 = { set_planet_size = 5  }
			20 = { set_planet_size = 4 }
			35 = { set_planet_size = 3 }
			30 = { set_planet_size = 2 }
		}	
	}
	else_if = {
		limit = { is_planet_class = pc_crystal_asteroid }
		random_list = {
			30 = { set_planet_size = 6 }
			70 = { set_planet_size = 5 }
		}	
		
	}
	else_if = {
		limit = { is_planet_class = pc_crystal_asteroid_2 }
		random_list = {
			30 = { set_planet_size = 6 }
			70 = { set_planet_size = 5 }
		}	
		
	}
	else_if = { 
		limit = { is_asteroid = yes is_colonizable = yes is_colony = no } 
		random_list = {
			5 = { 
				set_planet_size = 6 
				random_list = {
					70 = { change_pc = pc_asteroid }
					30 = { change_pc = pc_ice_asteroid }
				}	
				
			}
			10 = { 
				set_planet_size = 5 
				random_list = {
					70 = { change_pc = pc_asteroid }
					30 = { change_pc = pc_ice_asteroid }
				}					
				
			}
			85 = { }				
		}    		
	}	
}