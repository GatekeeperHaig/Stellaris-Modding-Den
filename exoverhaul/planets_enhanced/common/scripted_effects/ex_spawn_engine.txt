modifier_enabled = { 
	set_timed_planet_flag = { flag = modifier_enabled days = 1 }
}

orbital_sr_enabled = {
	set_timed_planet_flag = { flag = orbital_sr_enabled days = 1 }
}
	
planetary_sr_enabled = {
	set_timed_planet_flag = { flag = planetary_sr_enabled days = 1 }
}

unique_planetary_sr_enabled = {
	set_timed_planet_flag = { flag = unique_planetary_sr_enabled days = 1 }
}		

unique_orbital_sr_enabled = {
	set_timed_planet_flag = { flag = unique_orbital_sr_enabled days = 1 }
}

flag_resource_station_types = {
	every_planet = { 
		limit = { has_orbital_strategic_resource = yes }
		if = { limit = { has_deposit_for = shipclass_mining_station } set_planet_flag = mining_station_resource }
		if = { limit = { has_deposit_for = shipclass_research_station } set_planet_flag = research_station_resource }
	}
}	

resource_cleanup_table = {
	if = {
		limit = { has_resource = { type = sr_pitharan amount > 0 } }
		orbital_deposit_tile = { clear_deposits = yes }
	}	
	if = {
		limit = { has_resource = { type = sr_engos amount > 0 } } 
		orbital_deposit_tile = { clear_deposits = yes }
	}
	if = {
		limit = { has_resource = { type = sr_satramene amount > 0 } } 		
		orbital_deposit_tile = { clear_deposits = yes }
	}				
}	

orbital_deposit_respawn = {
	if = { 
		limit = { 
			has_planet_flag = mining_station_resource
			has_orbital_strategic_resource = no
		} 
		random_list = { 
			50 = { orbital_deposit_tile = { add_deposit = d_vast_mineral_deposit } }
			50 = { orbital_deposit_tile = { add_deposit = d_vast_energy_deposit } }
		}			
	} 	
	if = { 
		limit = { 
			has_planet_flag = research_station_resource
			has_orbital_strategic_resource = no
		} 
		random_list = { 
			33.3 = { orbital_deposit_tile = { add_deposit = d_vast_society_deposit } }
			33.3 = { orbital_deposit_tile = { add_deposit = d_vast_physics_deposit } }
			33.3 = { orbital_deposit_tile = { add_deposit = d_vast_engineering_deposit } }		
		}	
	} 
}

remove_resource_station_types_flags = {
	if = { limit = { has_planet_flag = mining_station_resource } remove_planet_flag = mining_station_resource }
	if = { limit = { has_planet_flag = research_station_resource } remove_planet_flag = research_station_resource }
}

count_strategic_resources = {
	if = { limit = { has_resource = { type = sr_ex_unique_1 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }
	if = { limit = { has_resource = { type = sr_ex_unique_2 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }
	if = { limit = { has_resource = { type = sr_ex_unique_3 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }
	if = { limit = { has_resource = { type = sr_ex_unique_4 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_unique_5 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_unique_6 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_1 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_2 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_3 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_4 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_5 amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_archeological_remains amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_pitharan amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_engos amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_satramene amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_betharian amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_alien_pets amount = 1 } } change_variable = { which = "sr_count" value = 1 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_1 amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_2 amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_3 amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_4 amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_5 amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_archeological_remains amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_pitharan amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_engos amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_satramene amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_betharian amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_alien_pets amount = 2 } } change_variable = { which = "sr_count" value = 2 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_1 amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_2 amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_3 amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_4 amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_5 amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_archeological_remains amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_pitharan amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_engos amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_ex_satramene amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_betharian amount = 3 } } change_variable = { which = "sr_count" value = 3 } }			
	if = { limit = { has_resource = { type = sr_alien_pets amount = 3 } } change_variable = { which = "sr_count" value = 3 } }				
	if = { limit = { has_resource = { type = sr_ex_planetary_1 amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_2 amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_3 amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_4 amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_planetary_5 amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_archeological_remains amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_pitharan amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_engos amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_ex_satramene amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_betharian amount = 4 } } change_variable = { which = "sr_count" value = 4 } }			
	if = { limit = { has_resource = { type = sr_alien_pets amount = 4 } } change_variable = { which = "sr_count" value = 4 } }				
}	

has_free_planetary_tile = {
	any_tile = {
		has_building = no
		has_deposit = no
		has_blocker = no			
	}
}	