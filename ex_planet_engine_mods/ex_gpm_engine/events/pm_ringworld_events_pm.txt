namespace = ringworld

### Ringworld Finish
event = {
	id = ringworld.78870
	hide_window = yes	
	is_triggered_only = yes
	
	trigger = { from = { is_ringworld = yes } } #to make sure this fires only when ringworlds are constructed
	
	immediate = {
		fromfrom = {
			every_system_planet = {
				if = {
					limit = {
						NOT = {	has_planet_flag = new_ringworld_flag }
						is_planet_class = pc_ringworld_habitable
					}
					else = { set_planet_flag = is_constructed_ringworld_part }
					remove_planet_flag = is_constructed_ringworld_part		
					set_planet_flag = new_ringworld_flag
					ex_gpm_spawn_engine = yes
				}
				if = { 
					limit = { prev = { has_star_flag = cybrex } } #this checks fromfrom, i.e. solar system
					if = { 
						limit = { NOT = { has_planet_flag = "pm_is_precursor_world_colour" } }
						set_name = "color_precursor"
					}
				}					
			}
		}
	}
}