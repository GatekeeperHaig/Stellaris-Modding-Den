check_colonized_planet_types = {
	if = { limit = { is_planet_class = pc_continental } set_planet_flag = pc_continental break = yes }
	if = { limit = { is_planet_class = pc_tropical } set_planet_flag = pc_tropical break = yes }
	if = { limit = { is_planet_class = pc_ocean } set_planet_flag = pc_ocean break = yes }
	if = { limit = { is_planet_class = pc_desert } set_planet_flag = pc_desert break = yes }
	if = { limit = { is_planet_class = pc_arid } set_planet_flag = pc_arid break = yes }
	if = { limit = { is_planet_class = pc_savannah } set_planet_flag = pc_savannah break = yes }
	if = { limit = { is_planet_class = pc_alpine } set_planet_flag = pc_alpine break = yes }
	if = { limit = { is_planet_class = pc_tundra } set_planet_flag = pc_tundra break = yes }
	if = { limit = { is_planet_class = pc_arctic } set_planet_flag = pc_actic break = yes }
	if = { limit = { is_planet_class = pc_nuked } set_planet_flag = pc_nuked break = yes }
	if = { limit = { is_planet_class = pc_gaia } set_planet_flag = pc_gaia break = yes }
}	

colonized_planet_flag_cleanup = {
	if = { limit = { has_planet_flag = pc_continental } remove_planet_flag = pc_continental break = yes }
	if = { limit = { has_planet_flag = pc_tropical } remove_planet_flag = pc_tropical break = yes }
	if = { limit = { has_planet_flag = pc_ocean } remove_planet_flag = pc_ocean break = yes }
	if = { limit = { has_planet_flag = pc_desert } remove_planet_flag = pc_desert break = yes }
	if = { limit = { has_planet_flag = pc_arid } remove_planet_flag = pc_arid break = yes }
	if = { limit = { has_planet_flag = pc_savannah } remove_planet_flag = pc_savannah break = yes }
	if = { limit = { has_planet_flag = pc_alpine } remove_planet_flag = pc_alpine break = yes }
	if = { limit = { has_planet_flag = pc_tundra } remove_planet_flag = pc_tundra break = yes }
	if = { limit = { has_planet_flag = pc_arctic } remove_planet_flag = pc_actic break = yes }
	if = { limit = { has_planet_flag = pc_nuked } remove_planet_flag = pc_nuked break = yes }
	if = { limit = { has_planet_flag = pc_gaia } remove_planet_flag = pc_gaia break = yes }	
}	

ex_new_worlds_add_planet_pref_traits = {
	every_country = { 
		if = {
			limit = {
				any_owned_planet = { 
					any_owned_pop = { 
						OR = {
							AND = {
								has_trait = "trait_pc_continental_preference"
								NOT = { has_trait = "trait_pc_nw_continental_preference" }
							}	
							AND = {
								has_trait = "trait_pc_tropical_preference"
								NOT = { has_trait = "trait_pc_nw_tropical_preference" }
							}
							AND = {
								has_trait = "trait_pc_ocean_preference"
								NOT = { has_trait = "trait_pc_nw_ocean_preference" }
							}
							AND = {
								has_trait = "trait_pc_desert_preference"
								NOT = { has_trait = "trait_pc_nw_desert_preference" }
							}
							AND = {
								has_trait = "trait_pc_arid_preference"
								NOT = { has_trait = "trait_pc_nw_arid_preference" }
							}
							AND = {
								has_trait = "trait_pc_savannah_preference"
								NOT = { has_trait = "trait_pc_nw_savannah_preference" }
							}
							AND = {
								has_trait = "trait_pc_arctic_preference"
								NOT = { has_trait = "trait_pc_nw_arctic_preference" }
							}
							AND = {
								has_trait = "trait_pc_alpine_preference"
								NOT = { has_trait = "trait_pc_nw_alpine_preference" }
							}
							AND = {
								has_trait = "trait_pc_tundra_preference"
								NOT = { has_trait = "trait_pc_nw_tundra_preference" }
							}
							AND = {
								has_trait = "trait_pc_nuked_preference"
								NOT = { has_trait = "trait_pc_nw_nuked_preference" }
							}
						}	
					}	
				} 
			}
			else = { break = yes }	
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_continental_preference"
							NOT = { has_trait = "trait_pc_nw_continental_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_continental_preference"
							NOT = { has_trait = "trait_pc_nw_continental_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_continental_preference"
							NOT = { has_trait = "trait_pc_nw_continental_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_continental_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_tropical_preference"
							NOT = { has_trait = "trait_pc_nw_tropical_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_tropical_preference"
							NOT = { has_trait = "trait_pc_nw_tropical_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_tropical_preference"
							NOT = { has_trait = "trait_pc_nw_tropical_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_tropical_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}		
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_ocean_preference"
							NOT = { has_trait = "trait_pc_nw_ocean_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_ocean_preference"
							NOT = { has_trait = "trait_pc_nw_ocean_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_ocean_preference"
							NOT = { has_trait = "trait_pc_nw_ocean_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_ocean_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_desert_preference"
							NOT = { has_trait = "trait_pc_nw_desert_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_desert_preference"
							NOT = { has_trait = "trait_pc_nw_desert_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_desert_preference"
							NOT = { has_trait = "trait_pc_nw_desert_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_desert_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_arid_preference"
							NOT = { has_trait = "trait_pc_nw_arid_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_arid_preference"
							NOT = { has_trait = "trait_pc_nw_arid_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_arid_preference"
							NOT = { has_trait = "trait_pc_nw_arid_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_arid_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}		
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_savannah_preference"
							NOT = { has_trait = "trait_pc_nw_savannah_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_savannah_preference"
							NOT = { has_trait = "trait_pc_nw_savannah_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_savannah_preference"
							NOT = { has_trait = "trait_pc_nw_savannah_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_savannah_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}		
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_tundra_preference"
							NOT = { has_trait = "trait_pc_nw_tundra_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_tundra_preference"
							NOT = { has_trait = "trait_pc_nw_tundra_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_tundra_preference"
							NOT = { has_trait = "trait_pc_nw_tundra_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_tundra_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_arctic_preference"
							NOT = { has_trait = "trait_pc_nw_arctic_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_arctic_preference"
							NOT = { has_trait = "trait_pc_nw_arctic_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_arctic_preference"
							NOT = { has_trait = "trait_pc_nw_arctic_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_arctic_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_alpine_preference"
							NOT = { has_trait = "trait_pc_nw_alpine_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_alpine_preference"
							NOT = { has_trait = "trait_pc_nw_alpine_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_alpine_preference"
							NOT = { has_trait = "trait_pc_nw_alpine_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_alpine_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}
			if = {
				limit = { 
					any_owned_planet = { 
						any_owned_pop = { 
							has_trait = "trait_pc_nuked_preference"
							NOT = { has_trait = "trait_pc_nw_nuked_preference" }
						}	
					} 
				}
				random_owned_planet = {
					limit = { 
						any_owned_pop = { 
							has_trait = "trait_pc_nuked_preference"
							NOT = { has_trait = "trait_pc_nw_nuked_preference" }
						}	
					}	
					random_owned_pop = {
						limit = { 
							has_trait = "trait_pc_nuked_preference"
							NOT = { has_trait = "trait_pc_nw_nuked_preference" }
						}			
						create_species = { 
							is_mod = no 
							name = this 
							plural = this 
							class = this 
							portrait = this 
							homeworld = this 
							traits = this 
							traits = { trait = trait_pc_nw_nuked_preference } 
						}
						prevprev = { 	
							every_owned_pop = {
								limit = { is_same_species = prev }
								change_species = last_created
							}
						}	
					}
				}			
			}		
		}
	}	
	ex_new_worlds_add_planet_pref_traits = yes
}	

#ex_new_worlds_replace_planet_pref_traits = {
#	if = { limit = { has_trait = "trait_pc_continental_preference" } modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_nw_continental_preference } } change_species = last_created  
#	if = { limit = { has_trait = "trait_pc_tropical_preference" } modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_nw_tropical_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_ocean_preference" } modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_nw_ocean_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_desert_preference" } modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_nw_desert_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_arid_preference" } modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_nw_arid_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_savannah_preference" } modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_nw_savannah_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_tundra_preference" } modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_nw_tundra_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_alpine_preference" } modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_nw_alpine_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_arctic_preference" } modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_nw_arctic_preference } } change_species = last_created 
#	if = { limit = { has_trait = "trait_pc_nuked_preference" } modify_species = { species = this remove_trait = trait_pc_nuked_preference add_trait = trait_pc_nw_nuked_preference } } change_species = last_created 			
#}	

ex_new_worlds_update_planet_pref_traits = {
	if = {
		limit = { 
			NOR = { 
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
				is_planet_class = pc_ai
				is_planet_class = pc_machine
				is_planet_class = pc_habitat
				is_planet_class = pc_ringworld_habitable
			}
		}
		else = { break = yes }
		if = { 
			limit = { 
				has_planet_flag = pc_continental 
				NOT = { is_planet_class = pc_continental }
				any_pop = { has_trait = "trait_pc_continental_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_continental_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_continental_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}				
		} 
		if = { 
			limit = { 
				has_planet_flag = pc_tropical 
				NOT = { is_planet_class = pc_tropical }
				any_pop = { has_trait = "trait_pc_tropical_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tropical_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tropical_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}
		}	
		if = { 
			limit = { 
				has_planet_flag = pc_ocean 
				NOT = { is_planet_class = pc_ocean }
				any_pop = { has_trait = "trait_pc_ocean_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_ocean_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_ocean_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}		
		}	
		if = { 
			limit = { 
				has_planet_flag = pc_desert 
				NOT = { is_planet_class = pc_desert }
				any_pop = { has_trait = "trait_pc_desert_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_desert_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_desert_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}	
		}	
		if = { 
			limit = { 
				has_planet_flag = pc_arid 
				NOT = { is_planet_class = pc_arid }
				any_pop = { has_trait = "trait_pc_arid_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arid_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arid_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}	
		}
		if = { 
			limit = { 
				has_planet_flag = pc_savannah 
				NOT = { is_planet_class = pc_savannah }
				any_pop = { has_trait = "trait_pc_savannah_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_savannah_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_savannah_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}	
		}	
		if = { 
			limit = { 
				has_planet_flag = pc_arctic 
				NOT = { is_planet_class = pc_arctic }
				any_pop = { has_trait = "trait_pc_arctic_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_arctic_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_arctic_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}	
		}	
		if = { 
			limit = { 
				has_planet_flag = pc_tundra 
				NOT = { is_planet_class = pc_tundra }
				any_pop = { has_trait = "trait_pc_tundra_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_tundra_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_tundra_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}	
		}	
		if = { 
			limit = { 
				has_planet_flag = pc_alpine 
				NOT = { is_planet_class = pc_alpine }
				any_pop = { has_trait = "trait_pc_alpine_preference" }
			}
			if = { 
				limit = { is_planet_class = pc_lush }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_lush_preference }	
					break = yes
				}
			}	
			if = { 
				limit = { is_planet_class = pc_retinal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_retinal_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_marginal }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_marginal_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_marginal_dry }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_marginal_dry_preference }	
					break = yes
				}
			}										
			if = { 
				limit = { is_planet_class = pc_marginal_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_marginal_cold_preference }	
					break = yes
				}
			}				
			if = { 
				limit = { is_planet_class = pc_geocrystalline }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_geocrystalline_preference }	
					break = yes
				}
			}							
			if = { 
				limit = { is_planet_class = pc_greenhouse_cold }
				every_owned_pop = {
					limit = { 
						has_trait = "trait_pc_alpine_preference"
					}
					modify_species = { species = this remove_trait = trait_pc_alpine_preference add_trait = trait_pc_greenhouse_cold_preference }	
					break = yes
				}
			}					
		}	
	}
}	