building_bio_medical = {
	base_buildtime = 210
	planet_unique = yes
	
	cost = {
		minerals = 100
		energy = 50
	}
	
	required_resources = {
		energy = 2
	}
	
	produced_resources = {
		society_research = 4
	}
	
	planet_modifier = {
		pop_environment_tolerance = 0.05
	}
	
	potential = {
		planet = {
			any_tile = { has_biodiversity = yes	}			
		}
	}
	
	allow = {
		custom_tooltip_fail = {
			text = "requirement_biodiversity"
			tile = { has_adjacent_biodiversity = yes }
		}
	}
	
	destroy_if = {
		tile = { not = { has_adjacent_biodiversity = yes }}
	}
	
	on_queued = {
		tile = {
			every_neighboring_tile = {
				limit = {
					OR = {
						has_blocker = "tb_ancient_forest"
						has_blocker = "tb_alpine_forest"
					}
					has_building_construction = no
				}
				remove_blocker = yes
				set_blocker = "tb_ancient_forest_locked"
			}
			every_neighboring_tile = {
				limit = {
					OR = {
						has_blocker = "tb_dense_jungle"
						has_blocker = "tb_jungle_riches"
					}
					has_building_construction = no
				}
				remove_blocker = yes
				set_blocker = "tb_dense_jungle_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_dangerous_wildlife"
					has_building_construction = no
				}
				remove_blocker = yes
				set_blocker = "tb_dangerous_wildlife_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_noxious_swamp"
					has_building_construction = no
				}
				remove_blocker = yes
				set_blocker = "tb_noxious_swamp_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_toxic_kelp"
					has_building_construction = no
				}
				remove_blocker = yes
				set_blocker = "tb_toxic_kelp_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_wild_crops"
					has_building_construction = no
				}
				remove_blocker = yes
				set_blocker = "tb_wild_crops_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_biodiversity = yes
					has_building_construction = no
				}
				clear_deposits = yes
			}			
		}
	}
	
	prerequisites = {
		"tech_frontier_health"
	}
	
	ai_weight = {
		weight = 1
	}
}

building_forestry = {
	base_buildtime = 180
	planet_unique = yes

	cost = {
		minerals = 25
		energy = 10
	}
	
	required_resources = {
		energy = 1
	}

	produced_resources = {
		minerals = 1
		society_research = 3
	}
	
	planet_modifier = {
		pop_environment_tolerance = 0.05
	}
	
	potential = {
		planet = {
			any_tile = { has_jungle_or_forest = yes	}
			owner = {
				or = {
					has_ethic = ethic_pacifist
					has_ethic = ethic_fanatic_pacifist
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
	}
	
	allow = {
		custom_tooltip_fail = {
			text = "requirement_adjacent_forest_or_jungle"
			tile = {
				any_neighboring_tile = {
					has_building_construction = no
					has_jungle_or_forest = yes
				}
			}
		}
	}
	
	destroy_if = {
		tile = {
			not = {
				any_neighboring_tile = {
					has_jungle_or_forest = yes
				}
			}
		}
	}
	
	on_queued = {
		tile = {
			every_neighboring_tile = {
				limit = {
					OR = {
						has_blocker = "tb_ancient_forest"
						has_blocker = "tb_alpine_forest"
					}
					has_building_construction = no
				}
				remove_blocker = yes
				clear_deposits = yes
				set_blocker = "tb_ancient_forest_locked"
			}
			every_neighboring_tile = {
				limit = {
					OR = {
						has_blocker = "tb_dense_jungle"
						has_blocker = "tb_jungle_riches"
					}
					has_building_construction = no
				}
				remove_blocker = yes
				clear_deposits = yes
				set_blocker = "tb_dense_jungle_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_dense_jungle_locked"
				}
				clear_deposits = yes
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_ancient_forest_locked"
				}
				clear_deposits = yes
			}			
		}
	}
	
	ai_replace = no
}

building_ice_rig = {
	base_buildtime = 270
	planet_unique = yes
	
	cost = {
		minerals = 100
		energy = 100
	}
	
	produced_resources = {
		energy = 2
		engineering_research = 2
		physics_research = 2
	}
	
	potential = {
		planet = {
			any_tile = { has_icecap_or_glacier = yes }
		}
	}
	
	allow = {
		custom_tooltip_fail = {
			text = "requirement_adjacent_icecap_or_glacier"
			tile = {
				any_neighboring_tile = {
					has_building_construction = no
					has_icecap_or_glacier = yes
				}
			}
		}
	}
	
	destroy_if = {
		tile = {
			not = {
				any_neighboring_tile = {
					has_icecap_or_glacier = yes
				}
			}
		}	
	}
	
	upgrades = {
		building_ice_rig_2
	}
	
	on_queued = {
		tile = {
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_massive_glacier"
					has_building_construction = no
				}
				remove_blocker = yes
				clear_deposits = yes
				set_blocker = "tb_massive_glacier_locked"
			}		
		}
	}
}

building_geothermal_tap = {
	base_buildtime = 360
	planet_unique = yes
	
	cost = {
		minerals = 150
		energy = 100
	}
	
	produced_resources = {
		energy = 5
		engineering_research = 2
	}
	
	potential = {
		planet = {
			any_tile = {
				OR = {
					has_blocker = "tb_alpha_volcano_chain"
					has_blocker = "tb_active_volcano"
					has_blocker = "tb_active_volcano_locked"
				}			
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			text = "requirement_volcano"
			tile = {
				any_neighboring_tile = {
					AND = {
						OR = {
							has_blocker = "tb_alpha_volcano_chain"
							has_blocker = "tb_active_volcano"
							has_blocker = "tb_active_volcano_locked"
						}
						has_building_construction = no
					}
				}
			}
		}
	}
	
	destroy_if = {
		tile = {
			not = {
				any_neighboring_tile = {
					OR = {
						has_blocker = "tb_alpha_volcano_chain"
						has_blocker = "tb_active_volcano"
						has_blocker = "tb_active_volcano_locked"
					}
				}
			}
		}	
	}
	
	on_queued = {
		tile = {
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_active_volcano"
					has_building_construction = no
				}
				remove_blocker = yes
				clear_deposits = yes
				set_blocker = "tb_active_volcano_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_active_volcano_locked"
				}
				clear_deposits = yes
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_alpha_volcano_chain"
				}
				clear_deposits = yes
			}			
		}
	}
	
	prerequisites = {
		"tech_tb_volcano"
	}
	
	ai_weight = {
		weight = 2
	}
}

building_mountain_quarry = {
	base_buildtime = 360
	planet_unique = yes
	
	cost = {
		minerals = 75
		energy = 25
	}
	
	required_resources = {
		energy = 1
	}
	
	produced_resources = {
		minerals = 1
		engineering_research = 1
	}
	
	adjacency_bonus = {
		tile_building_resource_minerals_add = 1
	}
	
	potential = {
		planet = {
			any_tile = {
				has_mountains = yes			
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			text = "requirement_mountains"
			tile = {
				any_neighboring_tile = {
					has_mountains = yes
					has_building_construction = no
				}
			}
		}
	}
	
	destroy_if = {
		tile = {
			not = {
				any_neighboring_tile = {
					has_mountains = yes
				}
			}
		}	
	}
	
	on_queued = {
		tile = {
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_mountain_range"
					has_building_construction = no
				}
				remove_blocker = yes
				clear_deposits = yes
				set_blocker = "tb_mountain_range_locked"
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_mountain_range_locked"
				}
				clear_deposits = yes
			}
			every_neighboring_tile = {
				limit = {
					has_blocker = "tb_alpha_mountain_range"
				}
				clear_deposits = yes
			}			
		}
	}
	
	ai_weight = {
		weight = 2
	}
}