generate_pd_unique_start_deposits_and_blockers = {
	clear_deposits = yes
	switch = {
		trigger = is_planet_class
		pc_crystal = {
			# 3 + 3 energy		
			add_deposit = d_hot_springs
			add_deposit = d_rushing_waterfalls
			add_deposit = d_tempestous_mountain
			if = {
				limit = {
					owner = {
						is_machine_empire = yes
					}
				}
				add_deposit = d_rushing_waterfalls
			}
			if = {
				limit = {
					owner = {
						has_valid_civic = civic_machine_servitor
					}
				}
				add_deposit = d_hot_springs
			}
			# 3 + 3 mining
			add_deposit = d_veiny_cliffs
			add_deposit = d_prosperous_mesa
			add_deposit = d_rich_mountain
			# 4 + 3 farming
			add_deposit = d_rugged_woods
			add_deposit = d_fertile_lands
			if = {
				limit = {
					owner = {
						is_machine_empire = no
					}
				}
				add_deposit = d_rugged_woods
				if = {
					limit = {
						owner = {
							is_lithoid_empire = yes
						}
					}
					add_deposit = d_rich_mountain
				}
				else = {
					add_deposit = d_black_soil
				}
			}
			add_deposit = d_crystal_guild
			set_planet_size = 20
			if = {
				limit = {
					not = {
						has_modifier = crystal
					}
				}
				add_modifier = {
					modifier = crystal
					days = -1
				}
			}
		}
		pc_floating = {
			# 3 + 3 energy		
			add_deposit = d_floating_energy_island
			add_deposit = d_floating_energy_island
			add_deposit = d_floating_energy_island
			if = {
				limit = {
					owner = {
						is_machine_empire = yes
					}
				}
				add_deposit = d_floating_energy_island
			}
			if = {
				limit = {
					owner = {
						has_valid_civic = civic_machine_servitor
					}
				}
				add_deposit = d_floating_energy_island
			}
			# 3 + 3 mining
			add_deposit = d_floating_mineral_island
			add_deposit = d_floating_mineral_island
			add_deposit = d_floating_mineral_island
			# 4 + 3 farming
			add_deposit = d_floating_food_island
			if = {
				limit = {
					owner = {
						is_machine_empire = no
					}
				}
				add_deposit = d_floating_food_island
				if = {
					limit = {
						owner = {
							is_lithoid_empire = yes
						}
					}
					add_deposit = d_floating_mineral_island
				}
				else = {
					add_deposit = d_floating_food_island
				}
			}
			add_deposit = d_eludium_islands
			set_planet_size = 20
			if = {
				limit = {
					not = {
						has_modifier = floating
					}
				}
				add_modifier = {
					modifier = floating
					days = -1
				}
			}
			remove_all_districts = yes
			remove_all_buildings = yes
			generate_start_buildings_and_districts = yes
		}
		pc_graveyard = {
			# 3 + 3 energy		
			add_deposit = d_arid_highlands
			add_deposit = d_searing_desert
			add_deposit = d_geothermal_vent
			if = {
				limit = {
					owner = {
						is_machine_empire = yes
					}
				}
				add_deposit = d_searing_desert
			}
			if = {
				limit = {
					owner = {
						has_valid_civic = civic_machine_servitor
					}
				}
				add_deposit = d_arid_highlands
			}
			# 3 + 3 mining
			add_deposit = d_veiny_cliffs
			add_deposit = d_prosperous_mesa
			add_deposit = d_rich_mountain
			# 4 + 3 farming
			add_deposit = d_bountiful_plains
			add_deposit = d_great_river
			if = {
				limit = {
					owner = {
						is_machine_empire = no
					}
				}
				add_deposit = d_bountiful_plains
				if = {
					limit = {
						owner = {
							is_lithoid_empire = yes
						}
					}
					add_deposit = d_rich_mountain
				}
				else = {
					add_deposit = d_black_soil
				}
			}
			add_deposit = d_graveyard_well
			set_planet_size = 23
			if = {
				limit = {
					not = {
						has_modifier = graveyard
					}
				}
				add_modifier = {
					modifier = graveyard
					days = -1
				}
			}
		}
		pc_technoorganic = {
			# 3 + 3 energy		
			add_deposit = d_hot_springs
			add_deposit = d_rushing_waterfalls
			add_deposit = d_tempestous_mountain
			if = {
				limit = {
					owner = {
						is_machine_empire = yes
					}
				}
				add_deposit = d_rushing_waterfalls
			}
			if = {
				limit = {
					owner = {
						has_valid_civic = civic_machine_servitor
					}
				}
				add_deposit = d_hot_springs
			}
			# 3 + 3 mining
			add_deposit = d_veiny_cliffs
			add_deposit = d_prosperous_mesa
			add_deposit = d_rich_mountain
			# 4 + 3 farming
			add_deposit = d_green_hills
			add_deposit = d_fertile_lands
			if = {
				limit = {
					owner = {
						is_machine_empire = no
					}
				}
				add_deposit = d_rugged_woods
				if = {
					limit = {
						owner = {
							is_lithoid_empire = yes
						}
					}
					add_deposit = d_rich_mountain
				}
				else = {
					add_deposit = d_black_soil
				}
			}
			add_deposit = d_subsurface_assembly
			set_planet_size = 20
			if = {
				limit = {
					not = {
						has_modifier = technoorganic
					}
				}
				add_modifier = {
					modifier = technoorganic
					days = -1
				}
			}
			if = {
				limit = {
					owner = {
						has_origin = origin_techno_world
					}
				}
				add_deposit = d_home04
				if = {
					limit = {
						NOT = {
							has_building = building_techno_04_clone_vat
						}
					}
					add_building = building_techno_04_clone_vat
					add_building = building_techno_04_clone_vat
				}
			}
		}
		pc_archive = {
			if = {
				limit = {
					owner = {
						is_machine_empire = yes
					}
				}
				remove_district = district_nexus
				remove_district = district_nexus
				remove_district = district_nexus
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_mining
				remove_district = district_mining
				remove_district = district_farming
				remove_district = district_farming
				remove_district = district_industrial
				remove_district = district_industrial
				remove_district = district_industrial
				add_district = district_archive_housing
				add_district = district_archive_housing
				add_district = district_archive_energy
				add_district = district_archive_energy
				add_district = district_archive_energy
				add_district = district_archive_science
				add_district = district_archive_industrial
				add_district = district_archive_industrial
				add_district = district_archive_industrial
				remove_building = building_research_lab_1
				remove_deposit = d_machine_empire_ruins
				remove_deposit = d_strip_mine
				add_building = building_resource_silo
				set_planet_size = 10
				if = {
					limit = {
						owner = {
							has_origin = origin_archive_world
						}
					}
					owner = {
						add_relic = r_pdarchive
					}
				}
			}
			else = {
				remove_district = district_city
				remove_district = district_city
				remove_district = district_city
				remove_district = district_city
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_generator
				remove_district = district_mining
				remove_district = district_mining
				remove_district = district_farming
				remove_district = district_farming
				remove_district = district_industrial
				remove_district = district_industrial
				remove_district = district_industrial
				remove_deposit = d_decrepit_dwellings
				remove_deposit = d_failing_infrastructure
				remove_deposit = d_failing_infrastructure
				add_district = district_archive_housing
				add_district = district_archive_housing
				add_district = district_archive_energy
				add_district = district_archive_energy
				add_district = district_archive_energy
				add_district = district_archive_energy
				add_district = district_archive_science
				add_district = district_archive_industrial
				add_district = district_archive_industrial
				add_district = district_archive_industrial
				remove_building = building_research_lab_1
				add_building = building_holo_theatres
				add_deposit = d_remaining_stores
				set_planet_size = 10
				if = {
					limit = {
						owner = {
							has_origin = origin_archive_world
						}
					}
					owner = {
						add_relic = r_pdarchive
					}
				}
			}
		}
	}
}



pd_unique_generate_start_pops = {
	if = {
		limit = {
			owner = {
				OR = {
					has_valid_civic = civic_machine_servitor
					has_valid_civic = civic_machine_assimilator
				}
			}
		}

		if = {
			limit = {
				owner = { has_valid_civic = civic_machine_servitor }
			}
			last_created_species = {
				if = {
					limit = {
						ROOT = { 
							OR = {
								is_planet_class = pc_floating 
								is_planet_class = pc_crystal 
								is_planet_class = pc_technoorganic
								is_planet_class = pc_graveyard
							}	
						}
					}
					modify_species = {
						species = this
						ideal_planet_class = home_planet
					}
				}
				set_citizenship_type = {
					country = root.owner
					type = citizenship_limited
				}
				set_living_standard = {
					country = root.owner
					type = living_standard_organic_trophy
				}
			}
			while = {
				count = 5
				random_owned_pop = {
					limit = { is_robot_pop = no	}
					kill_pop = yes
				}
			}
			while = {
				count = 5
				create_pop = {
					species = last_created_species
					ethos = random
				}
				last_created_pop = {
					clear_ethos = yes
				}
			}
		}

		if = {
			limit = {
				owner = { has_valid_civic = civic_machine_assimilator }
			}
			last_created_species = {
				if = {
					limit = {
						ROOT = {
							OR = {
								is_planet_class = pc_floating 
								is_planet_class = pc_crystal 
								is_planet_class = pc_technoorganic
								is_planet_class = pc_graveyard
							}
						}
					}
					modify_species = {
						species = this
						ideal_planet_class = home_planet
					}
				}
				set_citizenship_type = {
					country = root.owner
					type = citizenship_full_machine
				}
				set_living_standard = {
					country = root.owner
					type = living_standard_hive_mind
				}
			}
			while = {
				count = 10
				random_owned_pop = {
					limit = { is_robot_pop = no	}
					kill_pop = yes
				}
			}
			while = {
				count = 10
				create_pop = {
					species = last_created_species
					ethos = random
				}
				last_created_pop = {
					clear_ethos = yes
				}
			}
		}
	}
}