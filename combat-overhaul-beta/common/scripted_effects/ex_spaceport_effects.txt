update_spaceport_modifiers = { 
	switch = {
		trigger = has_spaceport_module
		economic_spaceport_kinetic = { update_economic_modifier = yes } 
		economic_spaceport_energy = { update_economic_modifier = yes }
		economic_spaceport_explosives = { update_economic_modifier = yes }	
		stardock_spaceport_kinetic = { update_stardock_modifier = yes }
		stardock_spaceport_energy = { update_stardock_modifier = yes }
		stardock_spaceport_explosives = { update_stardock_modifier = yes }
		defensive_spaceport_kinetic = { update_defensive_modifier = yes }
		defensive_spaceport_energy = { update_defensive_modifier = yes }
		defensive_spaceport_explosives = { update_defensive_modifier = yes }		
	}	
}	

update_economic_modifier = {
	if = { limit = { has_planet_flag = economic_spaceport_1_modifier } remove_modifier = economic_spaceport_1 remove_planet_flag = economic_spaceport_1_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_2_modifier } remove_modifier = economic_spaceport_2 remove_planet_flag = economic_spaceport_2_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_3_modifier } remove_modifier = economic_spaceport_3 remove_planet_flag = economic_spaceport_3_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_4_modifier } remove_modifier = economic_spaceport_4 remove_planet_flag = economic_spaceport_4_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_5_modifier } remove_modifier = economic_spaceport_5 remove_planet_flag = economic_spaceport_5_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_6_modifier } remove_modifier = economic_spaceport_6 remove_planet_flag = economic_spaceport_6_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_7_modifier } remove_modifier = economic_spaceport_7 remove_planet_flag = economic_spaceport_7_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_8_modifier } remove_modifier = economic_spaceport_8 remove_planet_flag = economic_spaceport_8_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_9_modifier } remove_modifier = economic_spaceport_9 remove_planet_flag = economic_spaceport_9_modifier }
	switch = {
		trigger = has_planet_flag 
		ex_spaceport_9 = { remove_modifier = economic_spaceport_8 add_modifier = { modifier = economic_spaceport_9 days = -1 } set_planet_flag = economic_spaceport_9_modifier } 
		ex_spaceport_8 = { remove_modifier = economic_spaceport_7 add_modifier = { modifier = economic_spaceport_8 days = -1 } set_planet_flag = economic_spaceport_8_modifier } 
		ex_spaceport_7 = { remove_modifier = economic_spaceport_6 add_modifier = { modifier = economic_spaceport_7 days = -1 } set_planet_flag = economic_spaceport_7_modifier } 
		ex_spaceport_6 = { remove_modifier = economic_spaceport_5 add_modifier = { modifier = economic_spaceport_6 days = -1 } set_planet_flag = economic_spaceport_6_modifier } 
		ex_spaceport_5 = { remove_modifier = economic_spaceport_4 add_modifier = { modifier = economic_spaceport_5 days = -1 } set_planet_flag = economic_spaceport_5_modifier } 
		ex_spaceport_4 = { remove_modifier = economic_spaceport_3 add_modifier = { modifier = economic_spaceport_4 days = -1 } set_planet_flag = economic_spaceport_4_modifier } 
		ex_spaceport_3 = { remove_modifier = economic_spaceport_2 add_modifier = { modifier = economic_spaceport_3 days = -1 } set_planet_flag = economic_spaceport_3_modifier } 
		ex_spaceport_2 = { remove_modifier = economic_spaceport_1 add_modifier = { modifier = economic_spaceport_2 days = -1 } set_planet_flag = economic_spaceport_2_modifier } 
		ex_spaceport_1 = { add_modifier = { modifier = economic_spaceport_1 days = -1 } set_planet_flag = economic_spaceport_1_modifier } 
	}
}		

update_stardock_modifier = {
	if = { limit = { has_planet_flag = stardock_spaceport_1_modifier } remove_modifier = stardock_spaceport_1 remove_planet_flag = stardock_spaceport_1_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_2_modifier } remove_modifier = stardock_spaceport_2 remove_planet_flag = stardock_spaceport_2_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_3_modifier } remove_modifier = stardock_spaceport_3 remove_planet_flag = stardock_spaceport_3_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_4_modifier } remove_modifier = stardock_spaceport_4 remove_planet_flag = stardock_spaceport_4_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_5_modifier } remove_modifier = stardock_spaceport_5 remove_planet_flag = stardock_spaceport_5_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_6_modifier } remove_modifier = stardock_spaceport_6 remove_planet_flag = stardock_spaceport_6_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_7_modifier } remove_modifier = stardock_spaceport_7 remove_planet_flag = stardock_spaceport_7_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_8_modifier } remove_modifier = stardock_spaceport_8 remove_planet_flag = stardock_spaceport_8_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_9_modifier } remove_modifier = stardock_spaceport_9 remove_planet_flag = stardock_spaceport_9_modifier }
	switch = {
		trigger = has_planet_flag 
		ex_spaceport_9 = { remove_modifier = stardock_spaceport_8 add_modifier = { modifier = stardock_spaceport_9 days = -1 } set_planet_flag = stardock_spaceport_9_modifier } 
		ex_spaceport_8 = { remove_modifier = stardock_spaceport_7 add_modifier = { modifier = stardock_spaceport_8 days = -1 } set_planet_flag = stardock_spaceport_8_modifier } 
		ex_spaceport_7 = { remove_modifier = stardock_spaceport_6 add_modifier = { modifier = stardock_spaceport_7 days = -1 } set_planet_flag = stardock_spaceport_7_modifier } 
		ex_spaceport_6 = { remove_modifier = stardock_spaceport_5 add_modifier = { modifier = stardock_spaceport_6 days = -1 } set_planet_flag = stardock_spaceport_6_modifier } 
		ex_spaceport_5 = { remove_modifier = stardock_spaceport_4 add_modifier = { modifier = stardock_spaceport_5 days = -1 } set_planet_flag = stardock_spaceport_5_modifier } 
		ex_spaceport_4 = { remove_modifier = stardock_spaceport_3 add_modifier = { modifier = stardock_spaceport_4 days = -1 } set_planet_flag = stardock_spaceport_4_modifier } 
		ex_spaceport_3 = { remove_modifier = stardock_spaceport_2 add_modifier = { modifier = stardock_spaceport_3 days = -1 } set_planet_flag = stardock_spaceport_3_modifier } 
		ex_spaceport_2 = { remove_modifier = stardock_spaceport_1 add_modifier = { modifier = stardock_spaceport_2 days = -1 } set_planet_flag = stardock_spaceport_2_modifier } 
		ex_spaceport_1 = { add_modifier = { modifier = stardock_spaceport_1 days = -1 } set_planet_flag = stardock_spaceport_1_modifier } 
	}
}		

update_defensive_modifier = {
	if = { limit = { has_planet_flag = defensive_spaceport_1_modifier } remove_planet_flag = defensive_spaceport_1_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_2_modifier } remove_planet_flag = defensive_spaceport_2_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_3_modifier } remove_planet_flag = defensive_spaceport_3_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_4_modifier } remove_planet_flag = defensive_spaceport_4_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_5_modifier } remove_planet_flag = defensive_spaceport_5_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_6_modifier } remove_planet_flag = defensive_spaceport_6_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_7_modifier } remove_planet_flag = defensive_spaceport_7_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_8_modifier } remove_planet_flag = defensive_spaceport_8_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_9_modifier } remove_planet_flag = defensive_spaceport_9_modifier }
	switch = {
		trigger = has_planet_flag 
		ex_spaceport_9 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_8 add_modifier = { modifier = defensive_spaceport_9 days = -1 } } } set_planet_flag = defensive_spaceport_9_modifier }
		ex_spaceport_8 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_7 add_modifier = { modifier = defensive_spaceport_8 days = -1 } } } set_planet_flag = defensive_spaceport_8_modifier }
		ex_spaceport_7 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_6 add_modifier = { modifier = defensive_spaceport_7 days = -1 } } } set_planet_flag = defensive_spaceport_7_modifier }
		ex_spaceport_6 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_5 add_modifier = { modifier = defensive_spaceport_6 days = -1 } } } set_planet_flag = defensive_spaceport_6_modifier }
		ex_spaceport_5 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_4 add_modifier = { modifier = defensive_spaceport_5 days = -1 } } } set_planet_flag = defensive_spaceport_5_modifier }
		ex_spaceport_4 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_3 add_modifier = { modifier = defensive_spaceport_4 days = -1 } } } set_planet_flag = defensive_spaceport_4_modifier }  
		ex_spaceport_3 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_2 add_modifier = { modifier = defensive_spaceport_3 days = -1 } } } set_planet_flag = defensive_spaceport_3_modifier }  
		ex_spaceport_2 = { spaceport = { random_owned_ship = { remove_modifier = defensive_spaceport_1 add_modifier = { modifier = defensive_spaceport_2 days = -1 } } } set_planet_flag = defensive_spaceport_2_modifier }  
		ex_spaceport_1 = { spaceport = { random_owned_ship = { add_modifier = { modifier = defensive_spaceport_1 days = -1 } } } set_planet_flag = defensive_spaceport_1_modifier } 
	}
}	

check_base_weapon = {
	if = { limit = { has_kinetic_spaceport = yes } set_planet_flag = ex_spaceport_rebuild_kinetic }	
	if = { limit = { has_energy_spaceport = yes } set_planet_flag = ex_spaceport_rebuild_energy }	
	if = { limit = { has_explosives_spaceport = yes } set_planet_flag = ex_spaceport_rebuild_explosives }
}

rebuild_spaceport_economic = {
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_kinetic }				
		create_spaceport = {
			owner = root.owner
			initial_module = economic_spaceport_kinetic
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_kinetic
	}
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_energy }				
		create_spaceport = {
			owner = root.owner
			initial_module = economic_spaceport_energy
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_energy
	}			
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_explosives }				
		create_spaceport = {
			owner = root.owner
			initial_module = economic_spaceport_explosives
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_explosives
	}	
}

rebuild_spaceport_stardock = {
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_kinetic }				
		create_spaceport = {
			owner = root.owner
			initial_module = stardock_spaceport_kinetic
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_kinetic
	}
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_energy }				
		create_spaceport = {
			owner = root.owner
			initial_module = stardock_spaceport_energy
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_energy
	}			
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_explosives }				
		create_spaceport = {
			owner = root.owner
			initial_module = stardock_spaceport_explosives
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_explosives
	}	
}

rebuild_spaceport_defensive = {
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_kinetic }				
		create_spaceport = {
			owner = root.owner
			initial_module = defensive_spaceport_kinetic
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_kinetic
	}
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_energy }				
		create_spaceport = {
			owner = root.owner
			initial_module = defensive_spaceport_energy
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_energy
	}			
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_explosives }				
		create_spaceport = {
			owner = root.owner
			initial_module = defensive_spaceport_explosives
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_explosives
	}	
}
		
set_level = {
	switch = {
		trigger = has_planet_flag
		ex_spaceport_1 = { set_spaceport_level = 1 }
		ex_spaceport_2 = { set_spaceport_level = 2 }
		ex_spaceport_3 = { set_spaceport_level = 3 }
		ex_spaceport_4 = { set_spaceport_level = 4 }
		ex_spaceport_5 = { set_spaceport_level = 5 }
		ex_spaceport_6 = { set_spaceport_level = 6 }
		ex_spaceport_7 = { set_spaceport_level = 7 }
		ex_spaceport_8 = { set_spaceport_level = 8 }
		ex_spaceport_9 = { set_spaceport_level = 9 }
	}
}	

set_base_weapon = {
	switch = {
		trigger = has_spaceport_module
		economic_spaceport_kinetic = { set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" } }
		stardock_spaceport_kinetic = { set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" } }
		defensive_spaceport_kinetic = { set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" } }
		economic_spaceport_energy = { set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" } }
		stardock_spaceport_energy = { set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" } }
		defensive_spaceport_energy = { set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" } }	
		economic_spaceport_explosives = { set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" } }
		stardock_spaceport_explosives = { set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" } }
		defensive_spaceport_explosives = { set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" } }	
	}
}	

flag_module_slots = {
	switch = {
		trigger = is_spaceport_module_slot_free
		1 = { set_planet_flag = slot_1_free }
		2 = { set_planet_flag = slot_2_free }
		3 = { set_planet_flag = slot_3_free }
		4 = { set_planet_flag = slot_4_free }
		5 = { set_planet_flag = slot_5_free }
		6 = { set_planet_flag = slot_6_free }
		7 = { set_planet_flag = slot_7_free }
		8 = { set_planet_flag = slot_8_free }
		9 = { set_planet_flag = slot_9_free }
	}
}	

check_module_slots = {
	if = { limit = { has_planet_flag = slot_1_free NOT = { is_spaceport_module_slot_free = 1 } } remove_planet_flag = slot_1_free }
	if = { limit = { has_planet_flag = slot_2_free NOT = { is_spaceport_module_slot_free = 2 } } remove_planet_flag = slot_2_free }
	if = { limit = { has_planet_flag = slot_3_free NOT = { is_spaceport_module_slot_free = 3 } } remove_planet_flag = slot_3_free }
	if = { limit = { has_planet_flag = slot_4_free NOT = { is_spaceport_module_slot_free = 4 } } remove_planet_flag = slot_4_free }
	if = { limit = { has_planet_flag = slot_5_free NOT = { is_spaceport_module_slot_free = 5 } } remove_planet_flag = slot_5_free }
	if = { limit = { has_planet_flag = slot_6_free NOT = { is_spaceport_module_slot_free = 6 } } remove_planet_flag = slot_6_free }
	if = { limit = { has_planet_flag = slot_7_free NOT = { is_spaceport_module_slot_free = 7 } } remove_planet_flag = slot_7_free }
	if = { limit = { has_planet_flag = slot_8_free NOT = { is_spaceport_module_slot_free = 8 } } remove_planet_flag = slot_8_free }
	if = { limit = { has_planet_flag = slot_9_free NOT = { is_spaceport_module_slot_free = 9 } } remove_planet_flag = slot_9_free }
}	

clear_slot_flag = {
	if = { limit = { has_planet_flag = slot_1_free } remove_planet_flag = slot_1_free }
	if = { limit = { has_planet_flag = slot_2_free } remove_planet_flag = slot_2_free }
	if = { limit = { has_planet_flag = slot_3_free } remove_planet_flag = slot_3_free }
	if = { limit = { has_planet_flag = slot_4_free } remove_planet_flag = slot_4_free }
	if = { limit = { has_planet_flag = slot_5_free } remove_planet_flag = slot_5_free }
	if = { limit = { has_planet_flag = slot_6_free } remove_planet_flag = slot_6_free }
	if = { limit = { has_planet_flag = slot_7_free } remove_planet_flag = slot_7_free }
	if = { limit = { has_planet_flag = slot_8_free } remove_planet_flag = slot_8_free }
	if = { limit = { has_planet_flag = slot_9_free } remove_planet_flag = slot_9_free }	
}

flag_modules = {
	switch = {
		trigger = has_spaceport_module
		##economic modules
		solar_power_network_1 = { set_planet_flag = solar_power_network_1 }
		solar_power_network_2 = { set_planet_flag =  solar_power_network_2 }
		robotics_facility = { set_planet_flag = robotics_facility }
		hydroponic_farms_2 = { set_planet_flag = hydroponic_farms_2 }
		orbital_lab_complex_1 = { set_planet_flag = orbital_lab_complex_1 }
		orbital_lab_complex_2 = { set_planet_flag = orbital_lab_complex_2 } 
		orbital_refinery_1 = { set_planet_flag = orbital_refinery_1 }
		orbital_refinery_2 = { set_planet_flag = orbital_refinery_2 }
		commercial_terminal = { set_planet_flag = commercial_terminal } 
		micro_gravity_manufactories = { set_planet_flag = micro_gravity_manufactories }
		cryogenic_storage_facility = { set_planet_flag = cryogenic_storage_facility }
		robotics_facility = { set_planet_flag = robotics_facility }
		##stardock modules
		civilian_assembly_yard = { set_planet_flag = civilian_assembly_yard }
		corvette_assembly_yard = { set_planet_flag = corvette_assembly_yard }
		destroyer_assembly_yard = { set_planet_flag = destroyer_assembly_yard } 
		cruiser_assembly_yard = { set_planet_flag = cruiser_assembly_yard }
		battleship_assembly_yard = { set_planet_flag = battleship_assembly_yard }
		dreadnought_assembly_yard = { set_planet_flag = dreadnought_assembly_yard } 
		engineering_bay = { set_planet_flag = engineering_bay }
		orbital_fleet_support = { set_planet_flag = orbital_fleet_support }
		advanced_weapons_manufactory = { set_planet_flag = advanced_weapons_manufactory }
		##defensive modules
		spaceport_kinetic_weapon_1 = { set_planet_flag = spaceport_kinetic_weapon_1 }
		spaceport_kinetic_weapon_2 = { set_planet_flag = spaceport_kinetic_weapon_2 }
		spaceport_kinetic_weapon_3 = { set_planet_flag = spaceport_kinetic_weapon_3 }
		spaceport_energy_weapon_1 = { set_planet_flag = spaceport_kinetic_weapon_3 }
		spaceport_energy_weapon_2 = { set_planet_flag = spaceport_energy_weapon_2 }
		spaceport_energy_weapon_3 = { set_planet_flag = spaceport_energy_weapon_3 }
		spaceport_explosive_weapon_1 = { set_planet_flag = spaceport_explosive_weapon_1 }
		spaceport_explosive_weapon_2 = { set_planet_flag = spaceport_explosive_weapon_2 }
		spaceport_explosive_weapon_3 = { set_planet_flag = spaceport_explosive_weapon_3 }
		spaceport_disruptor_1 = { set_planet_flag = spaceport_disruptor_1 }
		spaceport_disruptor_2 = { set_planet_flag = spaceport_disruptor_2 }
		spaceport_disruptor_3 = { set_planet_flag = spaceport_disruptor_3 }
		spaceport_plasma_1 = { set_planet_flag = spaceport_plasma_1 }
		spaceport_plasma_2 = { set_planet_flag = spaceport_plasma_2 }
		spaceport_plasma_3 = { set_planet_flag = spaceport_plasma_3 }
		spaceport_swarmer_missile_1 = { set_planet_flag = spaceport_swarmer_missile_1 }
		spaceport_swarmer_missile_2 = { set_planet_flag = spaceport_swarmer_missile_2 }
		spaceport_swarmer_missile_3 = { set_planet_flag = spaceport_swarmer_missile_3 }
		spaceport_kinetic_artillery_1 = { set_planet_flag = spaceport_kinetic_artillery_1 }
		spaceport_kinetic_artillery_2 = { set_planet_flag = spaceport_kinetic_artillery_2 }
		spaceport_kinetic_artillery_3 = { set_planet_flag = spaceport_kinetic_artillery_3 }
		spaceport_fighter_strike_craft_1 = { set_planet_flag = spaceport_fighter_strike_craft_1 }
		spaceport_fighter_strike_craft_2 = { set_planet_flag = spaceport_fighter_strike_craft_2 }
		spaceport_fighter_strike_craft_3 = { set_planet_flag = spaceport_fighter_strike_craft_3 }
		spaceport_interceptor_strike_craft_1 = { set_planet_flag = spaceport_interceptor_strike_craft_1 }
		spaceport_interceptor_strike_craft_2 = { set_planet_flag = spaceport_interceptor_strike_craft_2 }
		spaceport_interceptor_strike_craft_3 = { set_planet_flag = spaceport_interceptor_strike_craft_3 }
	}	
}
		
check_module_flags = {
	if = { limit = { has_planet_flag = solar_power_network_1 NOT = { has_spaceport_module = solar_power_network_1 } } remove_planet_flag = solar_power_network_1 }
	if = { limit = { has_planet_flag = solar_power_network_2 NOT = { has_spaceport_module =   solar_power_network_2 } } remove_planet_flag = solar_power_network_2 }
	if = { limit = { has_planet_flag = robotics_facility NOT = { has_spaceport_module =  robotics_facility } } remove_planet_flag = robotics_facility }
	if = { limit = { has_planet_flag = hydroponic_farms_2 NOT = { has_spaceport_module =  hydroponic_farms_2 } } remove_planet_flag = hydroponic_farms_2 }
	if = { limit = { has_planet_flag = orbital_lab_complex_1 NOT = { has_spaceport_module =  orbital_lab_complex_1 } } remove_planet_flag = orbital_lab_complex_1 }
	if = { limit = { has_planet_flag = orbital_lab_complex_2 NOT = { has_spaceport_module =  orbital_lab_complex_2 } } remove_planet_flag = orbital_lab_complex_2 }
	if = { limit = { has_planet_flag = orbital_refinery_1 NOT = { has_spaceport_module =  orbital_refinery_1 } } remove_planet_flag = orbital_refinery_1 }
	if = { limit = { has_planet_flag = orbital_refinery_2 NOT = { has_spaceport_module =  orbital_refinery_2 } } remove_planet_flag = orbital_refinery_2 }
	if = { limit = { has_planet_flag = commercial_terminal NOT = { has_spaceport_module =  commercial_terminal } } remove_planet_flag = commercial_terminal }
	if = { limit = { has_planet_flag = micro_gravity_manufactories NOT = { has_spaceport_module =  micro_gravity_manufactories } } remove_planet_flag = micro_gravity_manufactories }
	if = { limit = { has_planet_flag = cryogenic_storage_facility NOT = { has_spaceport_module =  cryogenic_storage_facility } } remove_planet_flag = cryogenic_storage_facility }
	if = { limit = { has_planet_flag = robotics_facility NOT = { has_spaceport_module =  robotics_facility } } remove_planet_flag = robotics_facility }
	##stardock modules
	if = { limit = { has_planet_flag = civilian_assembly_yard NOT = { has_spaceport_module =  civilian_assembly_yard } } remove_planet_flag = civilian_assembly_yard }
	if = { limit = { has_planet_flag = corvette_assembly_yard NOT = { has_spaceport_module =  corvette_assembly_yard } } remove_planet_flag = corvette_assembly_yard }
	if = { limit = { has_planet_flag = destroyer_assembly_yard NOT = { has_spaceport_module =  destroyer_assembly_yard } } remove_planet_flag = destroyer_assembly_yard }
	if = { limit = { has_planet_flag = cruiser_assembly_yard NOT = { has_spaceport_module =  cruiser_assembly_yard } } remove_planet_flag = cruiser_assembly_yard }
	if = { limit = { has_planet_flag = battleship_assembly_yard NOT = { has_spaceport_module =  battleship_assembly_yard } } remove_planet_flag = battleship_assembly_yard }
	if = { limit = { has_planet_flag = dreadnought_assembly_yard NOT = { has_spaceport_module =  dreadnought_assembly_yard } } remove_planet_flag = dreadnought_assembly_yard  }
	if = { limit = { has_planet_flag = engineering_bay NOT = { has_spaceport_module =  engineering_bay } } remove_planet_flag = engineering_bay }
	if = { limit = { has_planet_flag = orbital_fleet_support NOT = { has_spaceport_module =  orbital_fleet_support } } remove_planet_flag = orbital_fleet_support }
	if = { limit = { has_planet_flag = advanced_weapons_manufactory NOT = { has_spaceport_module =  advanced_weapons_manufactory } } remove_planet_flag = advanced_weapons_manufactory }
	##defensive modules
	if = { limit = { has_planet_flag = spaceport_kinetic_weapon_1 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_1 } } remove_planet_flag = spaceport_kinetic_weapon_1 }
	if = { limit = { has_planet_flag = spaceport_kinetic_weapon_2 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_2 } } remove_planet_flag = spaceport_kinetic_weapon_2 }
	if = { limit = { has_planet_flag = spaceport_kinetic_weapon_3 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_3 } } remove_planet_flag = spaceport_kinetic_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_energy_weapon_1 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_3 } } remove_planet_flag = spaceport_kinetic_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_energy_weapon_2 NOT = { has_spaceport_module =  spaceport_energy_weapon_2 } } remove_planet_flag = spaceport_energy_weapon_2 }
	if = { limit = { has_planet_flag = spaceport_energy_weapon_3 NOT = { has_spaceport_module =  spaceport_energy_weapon_3 } } remove_planet_flag = spaceport_energy_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_explosive_weapon_1 NOT = { has_spaceport_module =  spaceport_explosive_weapon_1 } } remove_planet_flag = spaceport_explosive_weapon_1 }
	if = { limit = { has_planet_flag = spaceport_explosive_weapon_2 NOT = { has_spaceport_module =  spaceport_explosive_weapon_2 } } remove_planet_flag = spaceport_explosive_weapon_2 }
	if = { limit = { has_planet_flag = spaceport_explosive_weapon_3 NOT = { has_spaceport_module =  spaceport_explosive_weapon_3 } } remove_planet_flag = spaceport_explosive_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_disruptor_1 NOT = { has_spaceport_module =  spaceport_disruptor_1 } } remove_planet_flag = spaceport_disruptor_1 }
	if = { limit = { has_planet_flag = spaceport_disruptor_2 NOT = { has_spaceport_module =  spaceport_disruptor_2 } } remove_planet_flag = spaceport_disruptor_2 }
	if = { limit = { has_planet_flag = spaceport_disruptor_3 NOT = { has_spaceport_module =  spaceport_disruptor_3 } } remove_planet_flag = spaceport_disruptor_3 }
	if = { limit = { has_planet_flag = spaceport_plasma_1 NOT = { has_spaceport_module =  spaceport_plasma_1 } } remove_planet_flag = spaceport_plasma_1 }
	if = { limit = { has_planet_flag = spaceport_plasma_2 NOT = { has_spaceport_module =  spaceport_plasma_2 } } remove_planet_flag = spaceport_plasma_2 }
	if = { limit = { has_planet_flag = spaceport_plasma_3 NOT = { has_spaceport_module =  spaceport_plasma_3 } } remove_planet_flag = spaceport_plasma_3 }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_1 NOT = { has_spaceport_module =  spaceport_swarmer_missile_1 } } remove_planet_flag = spaceport_swarmer_missile_1 }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_2 NOT = { has_spaceport_module =  spaceport_swarmer_missile_2 } } remove_planet_flag = spaceport_swarmer_missile_2 }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_3 NOT = { has_spaceport_module =  spaceport_swarmer_missile_3 } } remove_planet_flag = spaceport_swarmer_missile_3 }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_1 NOT = { has_spaceport_module =  spaceport_kinetic_artillery_1 } } remove_planet_flag = spaceport_kinetic_artillery_1 }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_2 NOT = { has_spaceport_module =  spaceport_kinetic_artillery_2 } } remove_planet_flag = spaceport_kinetic_artillery_2 }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_3 NOT = { has_spaceport_module =  spaceport_kinetic_artillery_3 } } remove_planet_flag = spaceport_kinetic_artillery_3 }
	if = { limit = { has_planet_flag = spaceport_fighter_strike_craft_1 NOT = { has_spaceport_module =  spaceport_fighter_strike_craft_1 } } remove_planet_flag = spaceport_fighter_strike_craft_1 }
	if = { limit = { has_planet_flag = spaceport_fighter_strike_craft_2 NOT = { has_spaceport_module =  spaceport_fighter_strike_craft_2 } } remove_planet_flag = spaceport_fighter_strike_craft_2 }
	if = { limit = { has_planet_flag = spaceport_fighter_strike_craft_3 NOT = { has_spaceport_module =  spaceport_fighter_strike_craft_3 } } remove_planet_flag = spaceport_fighter_strike_craft_3 }
	if = { limit = { has_planet_flag = spaceport_interceptor_strike_craft_1 NOT = { has_spaceport_module =  spaceport_interceptor_strike_craft_1 } } remove_planet_flag = spaceport_interceptor_strike_craft_1 }
	if = { limit = { has_planet_flag = spaceport_interceptor_strike_craft_2 NOT = { has_spaceport_module =  spaceport_interceptor_strike_craft_2 } } remove_planet_flag = spaceport_interceptor_strike_craft_2 }
	if = { limit = { has_planet_flag = spaceport_interceptor_strike_craft_3 NOT = { has_spaceport_module =  spaceport_interceptor_strike_craft_3 } } remove_planet_flag = spaceport_interceptor_strike_craft_3 }		
}

remove_spaceport_flags_and_modifiers = {
	if = { limit = { has_planet_flag = ex_spaceport_1 }	remove_planet_flag = ex_spaceport_1	}
	if = { limit = { has_planet_flag = ex_spaceport_2 }	remove_planet_flag = ex_spaceport_2 }
	if = { limit = { has_planet_flag = ex_spaceport_3 }	remove_planet_flag = ex_spaceport_3 }
	if = { limit = { has_planet_flag = ex_spaceport_4 }	remove_planet_flag = ex_spaceport_4 }
	if = { limit = { has_planet_flag = ex_spaceport_5 } remove_planet_flag = ex_spaceport_5 }
	if = { limit = { has_planet_flag = ex_spaceport_6 } remove_planet_flag = ex_spaceport_6 }
	if = { limit = { has_planet_flag = ex_spaceport_7 } remove_planet_flag = ex_spaceport_7 }
	if = { limit = { has_planet_flag = ex_spaceport_8 } remove_planet_flag = ex_spaceport_8 }
	if = { limit = { has_planet_flag = ex_spaceport_9 } remove_planet_flag = ex_spaceport_9 }
	if = { limit = { has_planet_flag = economic_spaceport_1_modifier } remove_modifier = economic_spaceport_1 remove_planet_flag = economic_spaceport_1_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_2_modifier } remove_modifier = economic_spaceport_2 remove_planet_flag = economic_spaceport_2_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_3_modifier } remove_modifier = economic_spaceport_3 remove_planet_flag = economic_spaceport_3_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_4_modifier } remove_modifier = economic_spaceport_4 remove_planet_flag = economic_spaceport_4_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_5_modifier } remove_modifier = economic_spaceport_5 remove_planet_flag = economic_spaceport_5_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_6_modifier } remove_modifier = economic_spaceport_6 remove_planet_flag = economic_spaceport_6_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_7_modifier } remove_modifier = economic_spaceport_7 remove_planet_flag = economic_spaceport_7_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_8_modifier } remove_modifier = economic_spaceport_8 remove_planet_flag = economic_spaceport_8_modifier }
	if = { limit = { has_planet_flag = economic_spaceport_9_modifier } remove_modifier = economic_spaceport_9 remove_planet_flag = economic_spaceport_9_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_1_modifier } remove_modifier = stardock_spaceport_1 remove_planet_flag = stardock_spaceport_1_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_2_modifier } remove_modifier = stardock_spaceport_2 remove_planet_flag = stardock_spaceport_2_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_3_modifier } remove_modifier = stardock_spaceport_3 remove_planet_flag = stardock_spaceport_3_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_4_modifier } remove_modifier = stardock_spaceport_4 remove_planet_flag = stardock_spaceport_4_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_5_modifier } remove_modifier = stardock_spaceport_5 remove_planet_flag = stardock_spaceport_5_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_6_modifier } remove_modifier = stardock_spaceport_6 remove_planet_flag = stardock_spaceport_6_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_7_modifier } remove_modifier = stardock_spaceport_7 remove_planet_flag = stardock_spaceport_7_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_8_modifier } remove_modifier = stardock_spaceport_8 remove_planet_flag = stardock_spaceport_8_modifier }
	if = { limit = { has_planet_flag = stardock_spaceport_9_modifier } remove_modifier = stardock_spaceport_9 remove_planet_flag = stardock_spaceport_9_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_1_modifier } remove_planet_flag = defensive_spaceport_1_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_2_modifier } remove_planet_flag = defensive_spaceport_2_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_3_modifier } remove_planet_flag = defensive_spaceport_3_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_4_modifier } remove_planet_flag = defensive_spaceport_4_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_5_modifier } remove_planet_flag = defensive_spaceport_5_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_6_modifier } remove_planet_flag = defensive_spaceport_6_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_7_modifier } remove_planet_flag = defensive_spaceport_7_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_8_modifier } remove_planet_flag = defensive_spaceport_8_modifier }
	if = { limit = { has_planet_flag = defensive_spaceport_9_modifier } remove_planet_flag = defensive_spaceport_9_modifier }
	if = { limit = { has_planet_flag = spaceport_kinetic_t2_modifier } remove_planet_flag = spaceport_kinetic_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_kinetic_t3_modifier } remove_planet_flag = spaceport_kinetic_t3_modifier }			
	if = { limit = { has_planet_flag = spaceport_kinetic_t4_modifier } remove_planet_flag = spaceport_kinetic_t4_modifier }
	if = { limit = { has_planet_flag = spaceport_kinetic_t5_modifier } remove_planet_flag = spaceport_kinetic_t5_modifier }
	if = { limit = { has_planet_flag = spaceport_energy_t2_modifier } remove_planet_flag = spaceport_energy_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_energy_t3_modifier } remove_planet_flag = spaceport_energy_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_energy_t4_modifier } remove_planet_flag = spaceport_energy_t4_modifier }
	if = { limit = { has_planet_flag = spaceport_energy_t5_modifier } remove_planet_flag = spaceport_energy_t5_modifier }
	if = { limit = { has_planet_flag = spaceport_explosive_t2_modifier } remove_planet_flag = spaceport_explosive_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_explosive_t3_modifier } remove_planet_flag = spaceport_explosive_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_explosive_t4_modifier } remove_planet_flag = spaceport_explosive_t4_modifier }
	if = { limit = { has_planet_flag = spaceport_explosive_t5_modifier } remove_planet_flag = spaceport_explosive_t5_modifier }
	if = { limit = { has_planet_flag = spaceport_disruptor_t2_modifier } remove_planet_flag = spaceport_disruptor_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_disruptor_t3_modifier } remove_planet_flag = spaceport_disruptor_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_plasma_t2_modifier } remove_planet_flag = spaceport_plasma_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_plasma_t3_modifier } remove_planet_flag = spaceport_plasma_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_t2_modifier } remove_planet_flag = spaceport_swarmer_missile_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_t3_modifier } remove_planet_flag = spaceport_swarmer_missile_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_t2_modifier } remove_planet_flag = spaceport_kinetic_artillery_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_t3_modifier } remove_planet_flag = spaceport_kinetic_artillery_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_strike_craft_t2_modifier } remove_planet_flag = spaceport_strike_craft_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_strike_craft_t3_modifier } remove_planet_flag = spaceport_strike_craft_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_no_shield_tech_debuff_modifier } remove_modifier = spaceport_no_shield_tech_debuff remove_planet_flag = spaceport_no_shield_tech_debuff_modifier }
	if = { limit = { has_planet_flag = spaceport_shields_t1_modifier } remove_modifier = spaceport_shields_t1 remove_planet_flag = spaceport_shields_t1_modifier }
	if = { limit = { has_planet_flag = spaceport_shields_t2_modifier } remove_modifier = spaceport_shields_t2 remove_planet_flag = spaceport_shields_t2_modifier }
	if = { limit = { has_planet_flag = spaceport_shields_t3_modifier } remove_modifier = spaceport_shields_t3 remove_planet_flag = spaceport_shields_t3_modifier }
	if = { limit = { has_planet_flag = spaceport_shields_t4_modifier } remove_modifier = spaceport_shields_t4 remove_planet_flag = spaceport_shields_t4_modifier }
	if = { limit = { has_planet_flag = spaceport_shields_t5_modifier } remove_modifier = spaceport_shields_t5 remove_planet_flag = spaceport_shields_t5_modifier }		
	if = { limit = { has_planet_flag = spaceport_shields_t6_modifier } remove_modifier = spaceport_shields_t6 remove_planet_flag = spaceport_shields_t6_modifier }		
	check_module_flags = yes
	clear_slot_flag = yes
	set_planet_flag = spaceport_flags_removed
}	

update_spaceport_weapon_modifiers = { ## runs on country scope!
	if = {
		limit = { OR = { has_spaceport_module = defensive_spaceport_kinetic has_spaceport_module = defensive_spaceport_energy has_spaceport_module = defensive_spaceport_explosives } }
		if = {
			limit = { NOT = { has_modifier = spaceport_shields_t6 } }
				if = { limit = { owner = { no_shield_tech = yes } NOT = { has_planet_flag = spaceport_no_shield_tech_debuff_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_no_shield_tech_debuff days = -1 } } } set_planet_flag = spaceport_no_shield_tech_debuff_modifier 
				else = { if = { limit = { owner = { tier_1_shields = yes } NOT = { has_planet_flag = spaceport_shields_t1_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_no_shield_tech_debuff add_modifier = { modifier = spaceport_shields_t2 days = -1 } } } remove_planet_flag = spaceport_no_shield_tech_debuff_modifier set_planet_flag = spaceport_shields_t1_modifier				
				else = { if = { limit = { owner = { tier_2_shields = yes } NOT = { has_planet_flag = spaceport_shields_t2_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_shields_t1 add_modifier = { modifier = spaceport_shields_t2 days = -1 } } } remove_planet_flag = spaceport_shields_t1_modifier set_planet_flag = spaceport_shields_t2_modifier
				else = { if = {	limit = { owner = { tier_3_shields = yes }	NOT = { has_planet_flag = spaceport_shields_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_shields_t2 add_modifier = { modifier = spaceport_shields_t3 days = -1 } } } remove_planet_flag = spaceport_shields_t2_modifier set_planet_flag = spaceport_shields_t3_modifier					
				else = { if = {	limit = { owner = { tier_4_shields = yes }	NOT = { has_planet_flag = spaceport_shields_t4_modifier } }	spaceport = { random_owned_ship = { remove_modifier = spaceport_shields_t3 add_modifier = { modifier = spaceport_shields_t4 days = -1 } } } remove_planet_flag = spaceport_shields_t3_modifier set_planet_flag = spaceport_shields_t4_modifier
				else = { if = {	limit = { owner = { tier_5_shields = yes }	NOT = { has_planet_flag = spaceport_shields_t5_modifier } }	spaceport = { random_owned_ship = {	remove_modifier = spaceport_shields_t4 add_modifier = { modifier = spaceport_shields_t5 days = -1 }	} }	remove_planet_flag = spaceport_shields_t4_modifier set_planet_flag = spaceport_shields_t5_modifier
				else = { if = {	limit = { owner = { tier_6_shields = yes }	NOT = { has_planet_flag = spaceport_shields_t6_modifier } }	spaceport = { random_owned_ship = {	remove_modifier = spaceport_shields_t5 add_modifier = { modifier = spaceport_shields_t5 days = -1 }	} }	remove_planet_flag = spaceport_shields_t5_modifier set_planet_flag = spaceport_shields_t6_modifier
	}}}}}}}}}}}}}}	
	if = {
		limit = { OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_kinetic_t5 } }
			if = { 
				limit = { owner = { tier_2_kinetics = yes } NOT = { has_planet_flag = spaceport_kinetic_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_kinetic_t2 days = -1 } } } set_planet_flag = spaceport_kinetic_t2_modifier
				else = { if = {	limit = { owner = { tier_3_kinetics = yes }	NOT = { has_planet_flag = spaceport_kinetic_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_kinetic_t2 add_modifier = { modifier = spaceport_kinetic_t3 days = -1 } } } remove_planet_flag = spaceport_kinetic_t2_modifier set_planet_flag = spaceport_kinetic_t3_modifier					
				else = { if = {	limit = { owner = { tier_4_kinetics = yes }	NOT = { has_planet_flag = spaceport_kinetic_t4_modifier } }	spaceport = { random_owned_ship = { remove_modifier = spaceport_kinetic_t3 add_modifier = { modifier = spaceport_kinetic_t4 days = -1 } } } remove_planet_flag = spaceport_kinetic_t3_modifier set_planet_flag = spaceport_kinetic_t4_modifier
				else = { if = {	limit = { owner = { tier_5_kinetics = yes }	NOT = { has_planet_flag = spaceport_kinetic_t5_modifier } }	spaceport = { random_owned_ship = {	remove_modifier = spaceport_kinetic_t4 add_modifier = { modifier = spaceport_kinetic_t5 days = -1 }	} }	remove_planet_flag = spaceport_kinetic_t4_modifier set_planet_flag = spaceport_kinetic_t5_modifier						
	}}}}}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_kinetic_t5 } }
			if = { 
				limit = { owner = { tier_2_energy = yes } NOT = { has_planet_flag = spaceport_kinetic_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_kinetic_t2 days = -1 } } } set_planet_flag = spaceport_kinetic_t2_modifier
				else = { if = {	limit = { owner = { tier_3_energy = yes }	NOT = { has_planet_flag = spaceport_kinetic_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_kinetic_t2 add_modifier = { modifier = spaceport_kinetic_t3 days = -1 } } } remove_planet_flag = spaceport_kinetic_t2_modifier set_planet_flag = spaceport_kinetic_t3_modifier					
				else = { if = {	limit = { owner = { tier_4_energy = yes }	NOT = { has_planet_flag = spaceport_kinetic_t4_modifier } }	spaceport = { random_owned_ship = { remove_modifier = spaceport_kinetic_t3 add_modifier = { modifier = spaceport_kinetic_t4 days = -1 } } } remove_planet_flag = spaceport_kinetic_t3_modifier set_planet_flag = spaceport_kinetic_t4_modifier
				else = { if = {	limit = { owner = { tier_5_energy = yes }	NOT = { has_planet_flag = spaceport_kinetic_t5_modifier } }	spaceport = { random_owned_ship = {	remove_modifier = spaceport_kinetic_t4 add_modifier = { modifier = spaceport_kinetic_t5 days = -1 }	} }	remove_planet_flag = spaceport_kinetic_t4_modifier set_planet_flag = spaceport_kinetic_t5_modifier						
	}}}}}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_explosive_t5 } }
			if = { 
				limit = { owner = { tier_2_explosives = yes } NOT = { has_planet_flag = spaceport_explosive_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_explosive_t2 days = -1 } } } set_planet_flag = spaceport_explosive_t2_modifier
				else = { if = {	limit = { owner = { tier_3_explosives = yes }	NOT = { has_planet_flag = spaceport_explosive_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_explosive_t2 add_modifier = { modifier = spaceport_explosive_t3 days = -1 } } } remove_planet_flag = spaceport_explosive_t2_modifier set_planet_flag = spaceport_explosive_t3_modifier					
				else = { if = {	limit = { owner = { tier_4_explosives = yes }	NOT = { has_planet_flag = spaceport_explosive_t4_modifier } }	spaceport = { random_owned_ship = { remove_modifier = spaceport_explosive_t3 add_modifier = { modifier = spaceport_explosive_t4 days = -1 } } } remove_planet_flag = spaceport_explosive_t3_modifier set_planet_flag = spaceport_explosive_t4_modifier
				else = { if = {	limit = { owner = { tier_5_explosives = yes }	NOT = { has_planet_flag = spaceport_explosive_t5_modifier } }	spaceport = { random_owned_ship = {	remove_modifier = spaceport_explosive_t4 add_modifier = { modifier = spaceport_explosive_t5 days = -1 }	} }	remove_planet_flag = spaceport_explosive_t4_modifier set_planet_flag = spaceport_explosive_t5_modifier						
	}}}}}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_disruptor_1 has_spaceport_module = spaceport_disruptor_2 has_spaceport_module = spaceport_disruptor_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_disruptor_t3 } }
			if = { 
				limit = { owner = { tier_2_disruptors = yes } NOT = { has_planet_flag = spaceport_disruptor_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_disruptor_t2 days = -1 } } } set_planet_flag = spaceport_disruptor_t2_modifier
				else = { if = {	limit = { owner = { tier_3_disruptors = yes }	NOT = { has_planet_flag = spaceport_disruptor_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_disruptor_t2 add_modifier = { modifier = spaceport_disruptor_t3 days = -1 } } } remove_planet_flag = spaceport_disruptor_t2_modifier set_planet_flag = spaceport_disruptor_t3_modifier					
	}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_plasma_1 has_spaceport_module = spaceport_plasma_2 has_spaceport_module = spaceport_plasma_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_plasma_t3 } }
			if = { 
				limit = { owner = { tier_2_plasma = yes } NOT = { has_planet_flag = spaceport_plasma_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_plasma_t2 days = -1 } } } set_planet_flag = spaceport_plasma_t2_modifier
				else = { if = {	limit = { owner = { tier_3_plasma = yes }	NOT = { has_planet_flag = spaceport_plasma_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_plasma_t2 add_modifier = { modifier = spaceport_plasma_t3 days = -1 } } } remove_planet_flag = spaceport_plasma_t2_modifier set_planet_flag = spaceport_plasma_t3_modifier					
	}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_swarmer_missile_1 has_spaceport_module = spaceport_swarmer_missile_2 has_spaceport_module = spaceport_swarmer_missile_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_swarmer_missile_t3 } }
			if = { 
				limit = { owner = { tier_2_swarmer_missiles = yes } NOT = { has_planet_flag = spaceport_swarmer_missiles_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_swarmer_missile_t2 days = -1 } } } set_planet_flag = spaceport_swarmer_missiles_t2_modifier
				else = { if = {	limit = { owner = { tier_3_swarmer_missiles = yes }	NOT = { has_planet_flag = spaceport_swarmer_missiles_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_swarmer_missile_t2 add_modifier = { modifier = spaceport_swarmer_missile_t3 days = -1 } } } remove_planet_flag = spaceport_swarmer_missiles_t2_modifier set_planet_flag = spaceport_swarmer_missiles_t3_modifier					
	}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_kinetic_artillery_1 has_spaceport_module = spaceport_kinetic_artillery_2 has_spaceport_module = spaceport_kinetic_artillery_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_kinetic_artillery_t3 } }
			if = { 
				limit = { owner = { tier_2_kinetic_artillery = yes } NOT = { has_planet_flag = spaceport_kinetic_artillery_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_kinetic_artillery_t2 days = -1 } } } set_planet_flag = spaceport_kinetic_artillery_t2_modifier
				else = { if = {	limit = { owner = { tier_3_kinetic_artillery = yes }	NOT = { has_planet_flag = spaceport_kinetic_artillery_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_kinetic_artillery_t2 add_modifier = { modifier = spaceport_kinetic_artillery_t3 days = -1 } } } remove_planet_flag = spaceport_kinetic_artillery_t2_modifier set_planet_flag = spaceport_kinetic_artillery_t3_modifier					
	}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_fighter_strike_craft_1 has_spaceport_module = spaceport_fighter_strike_craft_2 has_spaceport_module = spaceport_fighter_strike_craft_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_strike_craft_t3 } }
			if = { 
				limit = { owner = { tier_2_strike_craft = yes } NOT = { has_planet_flag = spaceport_fighter_strike_craft_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_strike_craft_t2 days = -1 } } } set_planet_flag = spaceport_fighter_strike_craft_t2_modifier
				else = { if = {	limit = { owner = { tier_3_strike_craft = yes }	NOT = { has_planet_flag = spaceport_fighter_strike_craft_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_strike_craft_t2 add_modifier = { modifier = spaceport_strike_craft_t3 days = -1 } } } remove_planet_flag = spaceport_fighter_strike_craft_t2_modifier set_planet_flag = spaceport_fighter_strike_craft_t3_modifier					
	}}}}}
	if = {
		limit = { OR = { has_spaceport_module = spaceport_interceptor_strike_craft_1 has_spaceport_module = spaceport_interceptor_strike_craft_2 has_spaceport_module = spaceport_interceptor_strike_craft_3 } }
		if = {
			limit = { NOT = { has_modifier = spaceport_strike_craft_t3 } }
			if = { 
				limit = { owner = { tier_2_strike_craft = yes } NOT = { has_planet_flag = spaceport_interceptor_strike_craft_t2_modifier } } spaceport = { random_owned_ship = { add_modifier = { modifier = spaceport_strike_craft_t2 days = -1 } } } set_planet_flag = spaceport_interceptor_strike_craft_t2_modifier
				else = { if = {	limit = { owner = { tier_3_strike_craft = yes }	NOT = { has_planet_flag = spaceport_interceptor_strike_craft_t3_modifier } } spaceport = { random_owned_ship = { remove_modifier = spaceport_strike_craft_t2 add_modifier = { modifier = spaceport_strike_craft_t3 days = -1 } } } remove_planet_flag = spaceport_interceptor_strike_craft_t2_modifier set_planet_flag = spaceport_interceptor_strike_craft_t3_modifier					
	}}}}}		
}	

scrap_economic_modules = {
	switch = {
		trigger = has_spaceport_module
		##economic modules
		solar_power_network_1 = { remove_spaceport_module = solar_power_network_1 owner = { add_minerals = 20 } }
		solar_power_network_2 = { remove_spaceport_module = solar_power_network_2 owner = { add_minerals = 60 } }
		robotics_facility = { remove_spaceport_module = robotics_facility owner = { add_minerals = 20 } }
		hydroponic_farms_2 = { remove_spaceport_module = hydroponic_farms_2 owner = { add_minerals = 60 } }
		orbital_lab_complex_1 = { remove_spaceport_module = orbital_lab_complex_1 owner = { add_minerals = 20 } }
		orbital_lab_complex_2 = { remove_spaceport_module = orbital_lab_complex_2 owner = { add_minerals = 60 } }
		orbital_refinery_1 = { remove_spaceport_module = orbital_refinery_1 owner = { add_minerals = 20 } }
		orbital_refinery_2 = { remove_spaceport_module = orbital_refinery_2 owner = { add_minerals = 60 } }
		commercial_terminal = { remove_spaceport_module = commercial_terminal owner = { add_minerals = 40 } } 
		micro_gravity_manufactories = { remove_spaceport_module = micro_gravity_manufactories owner = { add_minerals = 40 } }
		cryogenic_storage_facility = { remove_spaceport_module = cryogenic_storage_facility owner = { add_minerals = 40 } }
		robotics_facility = { remove_spaceport_module = robotics_facility owner = { add_minerals = 40 } }
	}
}

scrap_stardock_modules = {
	switch = {
		trigger = has_spaceport_module
		##stardock modules
		civilian_assembly_yard = { remove_spaceport_module = civilian_assembly_yard owner = { add_minerals = 20 } }
		corvette_assembly_yard = { remove_spaceport_module = corvette_assembly_yard owner = { add_minerals = 20 } }
		destroyer_assembly_yard = { remove_spaceport_module = destroyer_assembly_yard owner = { add_minerals = 40 } } 
		cruiser_assembly_yard = { remove_spaceport_module = cruiser_assembly_yard owner = { add_minerals = 60 } }
		battleship_assembly_yard = { remove_spaceport_module = battleship_assembly_yard owner = { add_minerals = 80 } }
		dreadnought_assembly_yard = { remove_spaceport_module = dreadnought_assembly_yard owner = { add_minerals = 90 } } 
		engineering_bay = { remove_spaceport_module = engineering_bay owner = { add_minerals = 40 } }
		orbital_fleet_support = { remove_spaceport_module = orbital_fleet_support owner = { add_minerals = 40 } }
		advanced_weapons_manufactory = { remove_spaceport_module = advanced_weapons_manufactory owner = { add_minerals = 60 } }
	}
}

scrap_defensive_modules = {
	switch = {
		##defensive modules
		trigger = has_spaceport_module
		spaceport_kinetic_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_1 owner = { add_minerals = 10 } }
		spaceport_kinetic_weapon_2 = { remove_spaceport_module = spaceport_kinetic_weapon_2 owner = { add_minerals = 50 } }
		spaceport_kinetic_weapon_3 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 90 } }
		spaceport_energy_weapon_1 = { remove_spaceport_module = spaceport_energy_weapon_1 owner = { add_minerals = 30 } }
		spaceport_energy_weapon_2 = { remove_spaceport_module = spaceport_energy_weapon_2 owner = { add_minerals = 60 } }
		spaceport_energy_weapon_3 = { remove_spaceport_module = spaceport_energy_weapon_3 owner = { add_minerals = 90 } }
		spaceport_explosive_weapon_1 = { remove_spaceport_module = spaceport_explosive_weapon_1 owner = { add_minerals = 30 } }
		spaceport_explosive_weapon_2 = { remove_spaceport_module = spaceport_explosive_weapon_2 owner = { add_minerals = 60 } }
		spaceport_explosive_weapon_3 = { remove_spaceport_module = spaceport_explosive_weapon_3 owner = { add_minerals = 90 } }
		spaceport_disruptor_1 = { remove_spaceport_module = spaceport_disruptor_1 owner = { add_minerals = 30 } }
		spaceport_disruptor_2 = { remove_spaceport_module = spaceport_disruptor_2 owner = { add_minerals = 60 } }
		spaceport_disruptor_3 = { remove_spaceport_module = spaceport_disruptor_3 owner = { add_minerals = 90 } }
		spaceport_plasma_1 = { remove_spaceport_module = spaceport_plasma_1 owner = { add_minerals = 30 } }
		spaceport_plasma_2 = { remove_spaceport_module = spaceport_plasma_2 owner = { add_minerals = 60 } }
		spaceport_plasma_3 = { remove_spaceport_module = spaceport_plasma_3 owner = { add_minerals = 90 } }
		spaceport_swarmer_missile_1 = { remove_spaceport_module = spaceport_swarmer_missile_1 owner = { add_minerals = 30 } }
		spaceport_swarmer_missile_2 = { remove_spaceport_module = spaceport_swarmer_missile_2 owner = { add_minerals = 60 } }
		spaceport_swarmer_missile_3 = { remove_spaceport_module = spaceport_swarmer_missile_3 owner = { add_minerals = 90 } }
		spaceport_kinetic_artillery_1 = { remove_spaceport_module = spaceport_kinetic_artillery_1 owner = { add_minerals = 30 } }
		spaceport_kinetic_artillery_2 = { remove_spaceport_module = spaceport_kinetic_artillery_2 owner = { add_minerals = 60 } }
		spaceport_kinetic_artillery_3 = { remove_spaceport_module = spaceport_kinetic_artillery_3 owner = { add_minerals = 90 } }
		spaceport_fighter_strike_craft_1 = { remove_spaceport_module = spaceport_fighter_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_fighter_strike_craft_2 = { remove_spaceport_module = spaceport_fighter_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_fighter_strike_craft_3 = { remove_spaceport_module = spaceport_fighter_strike_craft_3 owner = { add_minerals = 90 } }
		spaceport_interceptor_strike_craft_1 = { remove_spaceport_module = spaceport_interceptor_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_interceptor_strike_craft_2 = { remove_spaceport_module = spaceport_interceptor_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_interceptor_strike_craft_3 = { remove_spaceport_module = spaceport_interceptor_strike_craft_3 owner = { add_minerals = 90 } }
	}	
}

scrap_spaceport_modules = { 
	switch = {
		trigger = has_spaceport_module
		##economic modules
		solar_power_network_1 = { remove_spaceport_module = solar_power_network_1 owner = { add_minerals = 20 } }
		solar_power_network_2 = { remove_spaceport_module = solar_power_network_2 owner = { add_minerals = 60 } }
		robotics_facility = { remove_spaceport_module = robotics_facility owner = { add_minerals = 20 } }
		hydroponic_farms_2 = { remove_spaceport_module = hydroponic_farms_2 owner = { add_minerals = 60 } }
		orbital_lab_complex_1 = { remove_spaceport_module = orbital_lab_complex_1 owner = { add_minerals = 20 } }
		orbital_lab_complex_2 = { remove_spaceport_module = orbital_lab_complex_2 owner = { add_minerals = 60 } }
		orbital_refinery_1 = { remove_spaceport_module = orbital_refinery_1 owner = { add_minerals = 20 } }
		orbital_refinery_2 = { remove_spaceport_module = orbital_refinery_2 owner = { add_minerals = 60 } }
		commercial_terminal = { remove_spaceport_module = commercial_terminal owner = { add_minerals = 40 } } 
		micro_gravity_manufactories = { remove_spaceport_module = micro_gravity_manufactories owner = { add_minerals = 40 } }
		cryogenic_storage_facility = { remove_spaceport_module = cryogenic_storage_facility owner = { add_minerals = 40 } }
		robotics_facility = { remove_spaceport_module = robotics_facility owner = { add_minerals = 40 } }
		civilian_assembly_yard = { remove_spaceport_module = civilian_assembly_yard owner = { add_minerals = 20 } }
		corvette_assembly_yard = { remove_spaceport_module = corvette_assembly_yard owner = { add_minerals = 20 } }
		destroyer_assembly_yard = { remove_spaceport_module = destroyer_assembly_yard owner = { add_minerals = 40 } } 
		cruiser_assembly_yard = { remove_spaceport_module = cruiser_assembly_yard owner = { add_minerals = 60 } }
		battleship_assembly_yard = { remove_spaceport_module = battleship_assembly_yard owner = { add_minerals = 80 } }
		dreadnought_assembly_yard = { remove_spaceport_module = dreadnought_assembly_yard owner = { add_minerals = 90 } } 
		engineering_bay = { remove_spaceport_module = engineering_bay owner = { add_minerals = 40 } }
		orbital_fleet_support = { remove_spaceport_module = orbital_fleet_support owner = { add_minerals = 40 } }
		advanced_weapons_manufactory = { remove_spaceport_module = advanced_weapons_manufactory owner = { add_minerals = 60 } }		
		spaceport_kinetic_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_1 owner = { add_minerals = 10 } }
		spaceport_kinetic_weapon_2 = { remove_spaceport_module = spaceport_kinetic_weapon_2 owner = { add_minerals = 50 } }
		spaceport_kinetic_weapon_3 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 90 } }
		spaceport_energy_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 30 } }
		spaceport_energy_weapon_2 = { remove_spaceport_module = spaceport_energy_weapon_2 owner = { add_minerals = 60 } }
		spaceport_energy_weapon_3 = { remove_spaceport_module = spaceport_energy_weapon_3 owner = { add_minerals = 90 } }
		spaceport_explosive_weapon_1 = { remove_spaceport_module = spaceport_explosive_weapon_1 owner = { add_minerals = 30 } }
		spaceport_explosive_weapon_2 = { remove_spaceport_module = spaceport_explosive_weapon_2 owner = { add_minerals = 60 } }
		spaceport_explosive_weapon_3 = { remove_spaceport_module = spaceport_explosive_weapon_3 owner = { add_minerals = 90 } }
		spaceport_disruptor_1 = { remove_spaceport_module = spaceport_disruptor_1 owner = { add_minerals = 30 } }
		spaceport_disruptor_2 = { remove_spaceport_module = spaceport_disruptor_2 owner = { add_minerals = 60 } }
		spaceport_disruptor_3 = { remove_spaceport_module = spaceport_disruptor_3 owner = { add_minerals = 90 } }
		spaceport_plasma_1 = { remove_spaceport_module = spaceport_plasma_1 owner = { add_minerals = 30 } }
		spaceport_plasma_2 = { remove_spaceport_module = spaceport_plasma_2 owner = { add_minerals = 60 } }
		spaceport_plasma_3 = { remove_spaceport_module = spaceport_plasma_3 owner = { add_minerals = 90 } }
		spaceport_swarmer_missile_1 = { remove_spaceport_module = spaceport_swarmer_missile_1 owner = { add_minerals = 30 } }
		spaceport_swarmer_missile_2 = { remove_spaceport_module = spaceport_swarmer_missile_2 owner = { add_minerals = 60 } }
		spaceport_swarmer_missile_3 = { remove_spaceport_module = spaceport_swarmer_missile_3 owner = { add_minerals = 90 } }
		spaceport_kinetic_artillery_1 = { remove_spaceport_module = spaceport_kinetic_artillery_1 owner = { add_minerals = 30 } }
		spaceport_kinetic_artillery_2 = { remove_spaceport_module = spaceport_kinetic_artillery_2 owner = { add_minerals = 60 } }
		spaceport_kinetic_artillery_3 = { remove_spaceport_module = spaceport_kinetic_artillery_3 owner = { add_minerals = 90 } }
		spaceport_fighter_strike_craft_1 = { remove_spaceport_module = spaceport_fighter_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_fighter_strike_craft_2 = { remove_spaceport_module = spaceport_fighter_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_fighter_strike_craft_3 = { remove_spaceport_module = spaceport_fighter_strike_craft_3 owner = { add_minerals = 90 } }
		spaceport_interceptor_strike_craft_1 = { remove_spaceport_module = spaceport_interceptor_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_interceptor_strike_craft_2 = { remove_spaceport_module = spaceport_interceptor_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_interceptor_strike_craft_3 = { remove_spaceport_module = spaceport_interceptor_strike_craft_3 owner = { add_minerals = 90 } }
	}	
}
		
scrap_spaceport = {
	switch = {
		trigger = has_planet_flag
		ex_spaceport_1 = { owner = { add_minerals = 40 } }
		ex_spaceport_2 = { owner = { add_minerals = 60 } }
		ex_spaceport_3 = { owner = { add_minerals = 80 } }
		ex_spaceport_4 = { owner = { add_minerals = 100 } }
		ex_spaceport_5 = { owner = { add_minerals = 120 } }
		ex_spaceport_6 = { owner = { add_minerals = 140 } }
		ex_spaceport_7 = { owner = { add_minerals = 160 } }
		ex_spaceport_8 = { owner = { add_minerals = 180 } }
		ex_spaceport_9 = { owner = { add_minerals = 200 } }
	}
}	

construct_module = {
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_2_free
		}
		set_spaceport_module = { slot = 2 module = "module_under_construction" }	
		remove_planet_flag = slot_2_free
		set_planet_flag = module_under_construction_slot_2
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_3_free
		}
		set_spaceport_module = { slot = 3 module = "module_under_construction" }	
		remove_planet_flag = slot_3_free
		set_planet_flag = module_under_construction_slot_3
		planet_event = { id = ex_spaceport_events.101 days = 180 }
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_4_free
		}
		set_spaceport_module = { slot = 4 module = "module_under_construction" }	
		remove_planet_flag = slot_4_free
		set_planet_flag = module_under_construction_slot_4
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}	
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_5_free
		}
		set_spaceport_module = { slot = 5 module = "module_under_construction" }	
		remove_planet_flag = slot_5_free
		set_planet_flag = module_under_construction_slot_5
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_6_free
		}
		set_spaceport_module = { slot = 6 module = "module_under_construction" }	
		remove_planet_flag = slot_6_free
		set_planet_flag = module_under_construction_slot_6
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_7_free
		}
		set_spaceport_module = { slot = 7 module = "module_under_construction" }	
		remove_planet_flag = slot_7_free
		set_planet_flag = module_under_construction_slot_7
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_8_free
		}
		set_spaceport_module = { slot = 8 module = "module_under_construction" }	
		remove_planet_flag = slot_8_free
		set_planet_flag = module_under_construction_slot_8
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}		
	if = {
		limit = { 			
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_9_free
		}
		set_spaceport_module = { slot = 9 module = "module_under_construction" }	
		remove_planet_flag = slot_9_free
		set_planet_flag = module_under_construction_slot_9
		planet_event = { id = ex_spaceport_events.101 days = 180 }		
		break = yes
	}		
}	