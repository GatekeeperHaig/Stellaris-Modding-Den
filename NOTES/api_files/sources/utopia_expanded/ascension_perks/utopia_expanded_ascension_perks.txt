#######################################
### Utopia Expanded Ascension Perks ###
#######################################

ap_master_of_the_heavens = {
	on_enabled = {
		custom_tooltip = "allow_advanced_ringworlds"
		add_research_option = tech_advanced_megastructure_engineering
		add_tech_progress = {
			tech = tech_advanced_megastructure_engineering
			progress = 0.1
		}
	}
	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_3"
			num_ascension_perks > 2
		}
		custom_tooltip = {
			fail_text = "requires_mega_engineering"
			has_technology = tech_mega_engineering
		}
		custom_tooltip = {
			fail_text = "requires_galactic_wonders"
			has_ascension_perk = ap_galactic_wonders
		}
	}
	
	potential = {
		host_has_dlc = "Utopia"
		NOT = {
			has_ascension_perk = ap_master_of_the_heavens
		}
	}
	
	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pacifist
		}
	}
}

ap_master_builders = {
	possible = {
		custom_tooltip = {
			fail_text = "requires_ascension_perks_2"
			num_ascension_perks > 1
		}
		custom_tooltip = {
			fail_text = "requires_ap_voidborn_OR_ap_galactic_wonders"
			OR = {
				has_ascension_perk = ap_voidborn
				has_ascension_perk = ap_galactic_wonders
			}
		}
		custom_tooltip = {
			fail_text = "requires_technology_zero_point_power"
			has_technology = tech_zero_point_power
		}		
	}
	modifier = {
		megastructure_build_speed_mult = 0.75	
	}
	
	on_enabled = {
		custom_tooltip = "ap_master_builders_habitat_size"
		hidden_effect = {
			every_owned_planet = {
				limit = {
					is_planet_class = pc_habitat 
					planet_size < 15
				}
				set_planet_size = 15
			}	
			every_planet_within_border = {
				limit = {
					is_planet_class = pc_habitat 
					planet_size < 15
				}
				set_planet_size = 15	
			}			
		}
		if = {
			limit = { 
				NOT = { has_technology = tech_mega_engineering }
			}
			give_technology = { message = no tech = tech_mega_engineering }
		}		
	}
	
	potential = {
		host_has_dlc = "Utopia"
		NOT = {
			has_ascension_perk = ap_master_builders
		}
	}
	
	ai_weight = {
		factor = 10
		modifier = {
			factor = 2
			has_ethic = ethic_pacifist
		}
		modifier = {
			factor = 3
			has_ethic = ethic_fanatic_pacifist
		}
	}
}