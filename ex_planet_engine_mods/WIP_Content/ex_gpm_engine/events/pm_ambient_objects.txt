
namespace = pm_ambient

# call event
event = {
	id = pm_ambient.0
	hide_window = yes
	is_triggered_only = yes
	
		
	immediate = {
		if = {
			limit = { 
				NOT = { has_global_flag = "has_real_space_mod" } 
			}
			every_planet = {
				planet_event = { id = pm_ambient.1 } # spawn shipyards objects
				planet_event = { id = pm_ambient.2 } # spawn precursor planetary shields
				planet_event = { id = pm_ambient.3 } # spawn fallen empire planetary shields
			}
		}
		if = {
			limit = { 
				has_global_flag = "has_real_space_mod"
			}
			every_planet = {
				planet_event = { id = pm_ambient.10 } # spawn shipyards objects
				planet_event = { id = pm_ambient.20 } # spawn precursor planetary shields
				planet_event = { id = pm_ambient.30 } # spawn fallen empire planetary shields
			}
		}
	}
}

# spawn shipyards objects
planet_event = {
	id = pm_ambient.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = Precursor_Shipyards
		pm_is_planet_ALL = yes
	}
		
	immediate = {
		log = "---- Fired Event ambient.1 --------"
		log = "---- On planet: [This.GetName] ----"
		log = "---- Spawning Shipyard Ambient Object ----"
		save_event_target_as = pm_orbit_shipyards
			
		if = {
			limit = {
				planet_size > 20
			}
			create_ambient_object = {
				type = pm_shipyards_object_large
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_orbit_shipyards
				}
				set_ambient_object_flag = pm_precursor_shipyard_flag
			}
		}
		
		if = {
			limit = {
				AND = {
					planet_size < 21
					planet_size > 14
				}
			}
			create_ambient_object = {
				type = pm_shipyards_object_medium
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_orbit_shipyards
				}
				set_ambient_object_flag = pm_precursor_shipyard_flag
			}
		}
		
		if = {
			limit = {
				planet_size < 15
			}
			create_ambient_object = {
				type = pm_shipyards_object_small
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_orbit_shipyards
				}
				set_ambient_object_flag = pm_precursor_shipyard_flag
			}
		}
							
		set_planet_flag = pm_precursor_shipyards_ambient
	}
}

# spawn precursor planetary shields
planet_event = {
	id = pm_ambient.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = Precursor_Planetary_Shield
		pm_is_planet_ALL = yes
	}

	immediate = {
		log = "---- Fired Event ambient.2 --------"
		log = "---- On planet: [This.GetName] ----"
		log = "---- Spawning precursor shield Ambient Object ----"
		save_event_target_as = pm_precursor_shield_location
			
		if = {
			limit = {
				planet_size > 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_25
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_24
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 23
			}
			create_ambient_object = {
				type = pm_planetary_shield_23
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 22
			}
			create_ambient_object = {
				type = pm_planetary_shield_22
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 21
			}
			create_ambient_object = {
				type = pm_planetary_shield_21
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 20
			}
			create_ambient_object = {
				type = pm_planetary_shield_20
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 19
			}
			create_ambient_object = {
				type = pm_planetary_shield_19
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 18
			}
			create_ambient_object = {
				type = pm_planetary_shield_18
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 17
			}
			create_ambient_object = {
				type = pm_planetary_shield_17
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 16
			}
			create_ambient_object = {
				type = pm_planetary_shield_16
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 15
			}
			create_ambient_object = {
				type = pm_planetary_shield_15
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 14
			}
			create_ambient_object = {
				type = pm_planetary_shield_14
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 13
			}
			create_ambient_object = {
				type = pm_planetary_shield_13
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 12
			}
			create_ambient_object = {
				type = pm_planetary_shield_12
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 11
			}
			create_ambient_object = {
				type = pm_planetary_shield_11
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 10
			}
			create_ambient_object = {
				type = pm_planetary_shield_10
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 9
			}
			create_ambient_object = {
				type = pm_planetary_shield_09
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_08
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size < 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_07
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		set_planet_flag = pm_precursor_shield_ambient
	}
}

# spawn fallen empire planetary shields
planet_event = {
	id = pm_ambient.3
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = Planetary_Shielding_FE
		pm_is_planet_ALL = yes
	}
	
	immediate = {
		log = "---- Fired Event ambient.3 --------"
		log = "---- On planet: [This.GetName] ----"
		log = "---- Spawning fallen empire shield Ambient Object ----"

		save_event_target_as = pm_FE_shield_location
		
		if = {
			limit = {
				planet_size > 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_25
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_24
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 23
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_23
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 22
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_22
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 21
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_21
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 20
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_20
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 19
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_19
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 18
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_18
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 17
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_17
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 16
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_16
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 15
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_15
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 14
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_14
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 13
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_13
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 12
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_12
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 11
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_11
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 10
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_10
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 9
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_09
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_08
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size < 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_07
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		set_planet_flag = pm_fallen_empire_shield_ambient
	}
}


# spawn shipyards objects REAL SPACE compatibility
planet_event = {
	id = pm_ambient.10
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = Precursor_Shipyards
		pm_is_planet_ALL = yes
	}
		
	immediate = {
		log = "---- Fired Event ambient.10 --------"
		log = "---- On planet: [This.GetName] ----"
		log = "---- Spawning Shipyard Ambient Object real space----"

		save_event_target_as = pm_orbit_shipyards
		
		if = {
			limit = {
				planet_size > 20
			}
			create_ambient_object = {
				type = pm_shipyards_RS_object_large
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_orbit_shipyards
				}
				set_ambient_object_flag = pm_precursor_shipyard_flag
			}
		}
		
		if = {
			limit = {
				AND = {
					planet_size < 21
					planet_size > 14
				}
			}
			create_ambient_object = {
				type = pm_shipyards_RS_object_medium
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_orbit_shipyards
				}
				set_ambient_object_flag = pm_precursor_shipyard_flag
			}
		}
		
		if = {
			limit = {
				planet_size < 15
			}
			create_ambient_object = {
				type = pm_shipyards_RS_object_small
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_orbit_shipyards
				}
				set_ambient_object_flag = pm_precursor_shipyard_flag
			}
		}
							
		set_planet_flag = pm_precursor_shipyards_ambient
	}
}

# spawn precursor planetary shields REAL SPACE compatibility
planet_event = {
	id = pm_ambient.20
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = Precursor_Planetary_Shield
		pm_is_planet_ALL = yes
	}

	immediate = {
		log = "---- Fired Event ambient.20 --------"
		log = "---- On planet: [This.GetName] ----"
		log = "---- Spawning precursor shield Ambient Object real space ----"
		save_event_target_as = pm_precursor_shield_location
		
		if = {
			limit = {
				planet_size > 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_25
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_24
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 23
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_23
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 22
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_22
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 21
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_21
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 20
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_20
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 19
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_19
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 18
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_18
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 17
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_17
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 16
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_16
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 15
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_15
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 14
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_14
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 13
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_13
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 12
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_12
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 11
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_11
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 10
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_10
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 9
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_09
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_08
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size < 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_RS_07
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_precursor_shield_location
				}
				set_ambient_object_flag = pm_precursor_shield_flag
			}
		}
		set_planet_flag = pm_precursor_shield_ambient
	}
}

# spawn fallen empire planetary shields REAL SPACE compatibility
planet_event = {
	id = pm_ambient.30
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_modifier = Planetary_Shielding_FE
		pm_is_planet_ALL = yes
	}
	
	immediate = {
		log = "---- Fired Event ambient.30 --------"
		log = "---- On planet: [This.GetName] ----"
		log = "---- Spawning fallen empire shield Ambient Object real space----"
		save_event_target_as = pm_FE_shield_location
		
		if = {
			limit = {
				planet_size > 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_25
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 24
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_24
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 23
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_23
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 22
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_22
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 21
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_21
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 20
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_20
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 19
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_19
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 18
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_18
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 17
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_17
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 16
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_16
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 15
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_15
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 14
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_14
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 13
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_13
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 12
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_12
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 11
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_11
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 10
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_10
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 9
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_09
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size = 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_08
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		
		if = {
			limit = {
				planet_size < 8
			}
			create_ambient_object = {
				type = pm_planetary_shield_FE_RS_07
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = event_target:pm_FE_shield_location
				}
				set_ambient_object_flag = pm_fallen_empire_shield_flag
			}
		}
		set_planet_flag = pm_fallen_empire_shield_ambient
	}
}