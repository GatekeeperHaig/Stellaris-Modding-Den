#This file was created by script!
#Instead of editing it, you should change the origin files or the script and rerun the script!
#Python files that can be directly used for a rerun (storing all parameters from the last run) should be in the main directory
#
## 1 - auto update
## 3 - auto build new buildings on good tiles
## 7 - auto build in ept tiles
## 13 - robots
## spec planets
namespace = autobuild
# main event
country_event = {
	id = autobuild.1
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		num_owned_planets > 0
		or = {
			is_ai = no
			and = {
				has_global_flag = autobuild_ai_allowed
				not = { is_country_type = primitive }
			}
		}
		not = { has_country_flag = autobuild_empire_block }
	}
	immediate = {
		# set_timed_country_flag = {
		# 	flag = autobuild_empire_block
		# 	days = 90
		# }
		# start local events
		every_owned_planet = { autobuild_effect_planet_build = yes }
		# semi cheat options
		# auto clean
		if = {
			limit = {
				or = {
					has_country_flag = autobuild_clean_blockers
					and = {
						is_ai = yes
						has_global_flag = autobuild_ai_allowed
					}
				}
				autobuild_trigger_cost_energy = yes
			}
			every_owned_planet = {
				limit = {
					autobuild_trigger_planet_block = no
					has_blocker = yes
				}
				every_tile = {
					limit = { has_blocker = yes }
					if = {
						limit = {
							has_blocker = tb_mountain_range
							owner = {
								energy > 400
								has_technology = tech_tb_mountain_range
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -264.0
								else = { add_energy = -400 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_active_volcano
							owner = {
								energy > 400
								has_technology = tech_tb_volcano
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -264.0
								else = { add_energy = -400 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_dangerous_wildlife
							owner = {
								energy > 400
								has_technology = tech_tb_dangerous_wildlife
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -264.0
								else = { add_energy = -400 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_dense_jungle
							owner = {
								energy > 200
								has_technology = tech_tb_dense_jungle
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_quicksand_basin
							owner = {
								energy > 200
								has_technology = tech_tb_quicksand_basin
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_noxious_swamp
							owner = {
								energy > 200
								has_technology = tech_tb_noxious_swamp
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_massive_glacier
							owner = {
								energy > 200
								has_technology = tech_tb_massive_glacier
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_toxic_kelp
							owner = {
								energy > 200
								has_technology = tech_tb_toxic_kelp
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_deep_sinkhole
							owner = {
								energy > 200
								has_technology = tech_tb_deep_sinkhole
							}
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_radioactive_wasteland
							owner = { energy > 200 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_city_ruins
							owner = { energy > 200 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_infestation
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_quarantine_zone
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_slums
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_crater
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_sinkhole_subterraneans
							owner = { energy > 300 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -198.0
								else = { add_energy = -300 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_bomb_crater
							owner = { energy > 200 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_failing_infrastructure
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_decrepit_dwellings
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_bombarded_land
							owner = { energy > 200 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_battlefield_debris
							owner = { energy > 200 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -132.0
								else = { add_energy = -200 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_ancient_ruins
							owner = { energy > 300 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -198.0
								else = { add_energy = -300 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_ancient_cryo_chambers
							owner = { energy > 300 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -198.0
								else = { add_energy = -300 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_exterminators_ruins
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_former_battlefield
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_strip_mine
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_unsupervised_settlement
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
					if = {
						limit = {
							has_blocker = tb_collapsed_burrows
							owner = { energy > 100 }
						}
						owner = {
							if = {
								limit = { has_ascension_perk = ap_mastery_of_nature }
								add_energy = -66.0
								else = { add_energy = -100 }
							}
						}
						remove_blocker = yes
					}
				}
			}
		}
		# auto repair
		if = {
			limit = {
				or = {
					has_country_flag = autobuild_repair
					and = {
						is_ai = yes
						has_global_flag = autobuild_ai_allowed
					}
				}
				minerals > 50
				autobuild_trigger_cost = yes
			}
			every_owned_planet = {
				limit = {
					autobuild_trigger_planet_block = no
					any_tile = {
						has_building = yes
						is_ruined = yes
					}
				}
				every_tile = {
					limit = {
						has_building = yes
						is_ruined = yes
						owner = { minerals > 50 }
					}
					set_ruined = no
					owner = { add_minerals = -50 }
				}
			}
		}
	}
}
# resettle
planet_event = {
	id = autobuild.101
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		autobuild_trigger_planet_block = no
		sector_controlled = no
		exists = owner
		owner = {
			is_ai = no
			has_country_flag = autobuild_local_resettle
		}
		# comented out due to error in log in 2.0
		# any_tile = {
		# 	has_building = yes
		# 	has_pop = no
		# }
		# any_tile = {
		# 	has_building = no
		# 	has_pop = yes
		# }
	}
	immediate = {
		every_tile = {
			limit = {
				has_building = yes
				has_pop = no
			}
			root = {
				random_tile = {
					limit = {
						has_building = no
						autobuild_trigger_tile_has_pop = yes
					}
					resettle_pop = {
						pop = pop
						tile = prevprev
					}
				}
			}
		}
	}
}
# autobuild robots
planet_event = {
	id = autobuild.102
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		autobuild_trigger_planet_block = no
		free_pop_tiles > 0
		sector_controlled = no
		exists = owner
		owner = {
			is_ai = no
			has_country_flag = autobuild_robots
			or = {
				has_technology = tech_robotic_workers
				has_authority = auth_machine_intelligence
			}
			not = { has_policy_flag = robots_outlawed }
			minerals > 100
			income > 0
			autobuild_trigger_cost = yes
		}
		not = {
			any_pop = {
				is_robot_pop = yes
				is_growing = yes
			}
		}
	}
	immediate = {
		if = {
			limit = {
				owner = {
					or = {
						has_country_flag = synthetic_age
						has_authority = auth_machine_intelligence
					}
				}
			}
			build_pop = {
				name = buildable_robot_pop_4
				grown = no
			}
			owner = { add_minerals = -100 }
			break = yes
		}
		if = {
			limit = {
				owner = { has_technology = tech_synthetic_workers }
			}
			build_pop = {
				name = buildable_robot_pop_3
				grown = no
			}
			owner = { add_minerals = -100 }
			break = yes
		}
		if = {
			limit = {
				owner = { has_technology = tech_droid_workers }
			}
			random_tile = {
				limit = {
					autobuild_trigger_tile_is_clean = yes
					or = {
						autobuild_trigger_has_any_mine = yes
						autobuild_trigger_has_any_mine_not_replace = yes
						autobuild_trigger_tile_has_minerals_more_than_others = yes
					}
				}
				build_pop = {
					name = buildable_robot_pop_2
					grown = no
				}
				# last_created_pop = {
				# 	wipe_pop_ethos = yes
				# }
				owner = { add_minerals = -100 }
			}
			break = yes
		}
		random_tile = {
			limit = {
				autobuild_trigger_tile_is_clean = yes
				or = {
					autobuild_trigger_has_any_mine = yes
					autobuild_trigger_has_any_mine_not_replace = yes
					autobuild_trigger_tile_has_minerals_more_than_others = yes
				}
			}
			build_pop = {
				name = buildable_robot_pop_1
				grown = no
			}
			# last_created_pop = {
			# 	wipe_pop_ethos = yes
			# }
			owner = { add_minerals = -100 }
		}
	}
}
# autobuild on tiles
planet_event = {
	id = autobuild.132
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		autobuild_trigger_planet_block_build = no
		free_building_tiles > 0
		exists = owner
		owner = {
			or = {
				has_country_flag = autobuild_on_tile
				autobuild_trigger_planet_special = yes
				and = {
					is_ai = yes
					has_global_flag = autobuild_ai_allowed
				}
			}
			autobuild_trigger_cost = yes
		}
	}
	immediate = {
		if = {
			limit = { autobuild_trigger_has_planet_capital_or_shelter = no }
			random_tile = {
				limit = {
					has_building = no
					num_adjacent_tiles > 3
					autobuild_trigger_tile_has_pop = yes
					autobuild_trigger_tile_has_energy_more_than_others = yes
				}
				add_building_construction = building_colony_shelter
				add_building_construction = building_deployment_post
			}
		}
		every_tile = {
			limit = {
				has_building = no
				autobuild_trigger_tile_has_pop = yes
				or = {
					owner = { has_country_flag = autobuild_7 }
					autobuild_trigger_tile_has_res = yes
				}
			}
			random_list = {
				# energy
				100 = {
					# all cases of 0 factor
					modifier = {
						factor = 0
						or = {
							and = {
								autobuild_trigger_planet_special = no
								or = {
									and = {
										# on ept tile options
										autobuild_trigger_tile_has_res = no
										owner = {
											or = {
												not = { has_country_flag = autobuild_7 }
												has_country_flag = autobuild_power_plant_ratio.0
											}
										}
									}
									# have some other res
									and = {
										autobuild_trigger_tile_has_res = yes
										autobuild_trigger_tile_has_energy_more_than_others = no
									}
								}
							}
							# scpecial planet
							and = {
								autobuild_trigger_planet_special = yes
								autobuild_trigger_planet_energy = no
							}
							# slave or robot
							autobuild_trigger_tile_pop_robot_or_slave = yes
						}
					}
					# ratio settings for ept tiles
					modifier = {
						factor = 2
						owner = { has_country_flag = autobuild_power_plant_ratio.2 }
					}
					modifier = {
						factor = 3
						owner = { has_country_flag = autobuild_power_plant_ratio.3 }
					}
					modifier = {
						factor = 4
						owner = { has_country_flag = autobuild_power_plant_ratio.4 }
					}
					autobuild_build_power_plant = yes
				}
				# minerals
				100 = {
					# all cases of 0 factor
					modifier = {
						factor = 0
						or = {
							and = {
								autobuild_trigger_planet_special = no
								or = {
									and = {
										# on ept tile options
										autobuild_trigger_tile_has_res = no
										or = {
											# habitat
											autobuild_trigger_planet_habitat = yes
											owner = {
												or = {
													not = { has_country_flag = autobuild_7 }
													has_country_flag = autobuild_mine_ratio.0
												}
											}
										}
									}
									# have some other res
									and = {
										autobuild_trigger_tile_has_res = yes
										autobuild_trigger_tile_has_minerals_more_than_others = no
									}
								}
							}
							# scpecial planet
							and = {
								autobuild_trigger_planet_special = yes
								autobuild_trigger_planet_minerals = no
							}
						}
					}
					# ratio settings for ept tiles
					modifier = {
						factor = 2
						owner = { has_country_flag = autobuild_mine_ratio.2 }
					}
					modifier = {
						factor = 3
						owner = { has_country_flag = autobuild_mine_ratio.3 }
					}
					modifier = {
						factor = 4
						owner = { has_country_flag = autobuild_mine_ratio.4 }
					}
					autobuild_build_mine = yes
				}
				# food
				100 = {
					# all cases of 0 factor
					modifier = {
						factor = 0
						or = {
							and = {
								autobuild_trigger_planet_special = no
								or = {
									# habitat
									#autobuild_trigger_planet_habitat = yes
									# have some other res
									and = {
										autobuild_trigger_tile_has_res = yes
										autobuild_trigger_tile_has_food_more_than_others = no
									}
								}
							}
							# scpecial planet
							and = {
								autobuild_trigger_planet_special = yes
								autobuild_trigger_planet_food = no
							}
							# ept tile and not starving
							and = {
								owner = {
									food > 1
									has_monthly_income = {
										resource = food
										value > 1
									}
								}
								autobuild_trigger_tile_has_res = no
							}
						}
					}
					autobuild_build_farm = yes
				}
				# science
				100 = {
					# all cases of 0 factor
					modifier = {
						factor = 0
						or = {
							and = {
								autobuild_trigger_planet_special = no
								or = {
									and = {
										# on ept tile options
										autobuild_trigger_tile_has_res = no
										owner = {
											or = {
												not = { has_country_flag = autobuild_7 }
												has_country_flag = autobuild_lab_ratio.0
											}
										}
									}
									# have some other res
									and = {
										autobuild_trigger_tile_has_res = yes
										autobuild_trigger_tile_has_science_more_than_others = no
									}
								}
							}
							# scpecial planet
							and = {
								autobuild_trigger_planet_special = yes
								autobuild_trigger_planet_science = no
							}
							# slave or robot
							autobuild_trigger_tile_pop_robot_or_slave = yes
						}
					}
					modifier = {
						factor = 2
						owner = { has_country_flag = autobuild_lab_ratio.2 }
					}
					modifier = {
						factor = 3
						owner = { has_country_flag = autobuild_lab_ratio.3 }
					}
					modifier = {
						factor = 4
						owner = { has_country_flag = autobuild_lab_ratio.4 }
					}
					autobuild_build_lab = yes
				}
				1 = { }
			}
		}
	}
}
# replace buildings on edict enabled
planet_event = {
	id = autobuild.134
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		#autobuild_trigger_planet_block_build = no
		#autobuild_trigger_planet_special = yes
		exists = owner
		owner = { autobuild_trigger_cost = yes }
	}
	immediate = {
		if = {
			limit = { autobuild_trigger_planet_energy = yes }
			every_tile = {
				limit = {
					autobuild_trigger_tile_has_pop = yes
					autobuild_trigger_tile_pop_robot_or_slave = no
					or = {
						has_building = no
						autobuild_trigger_has_any_mine = yes
						autobuild_trigger_has_any_science_lab = yes
						autobuild_trigger_has_any_farm = yes
						and = {
							has_building = building_slave_processing
							root = {
								count_pops = {
									limit = { is_enslaved = yes }
									count < @autobuild_num_slave
								}
							}
						}
					}
				}
				autobuild_build_power_plant = yes
			}
		}
		if = {
			limit = { autobuild_trigger_planet_minerals = yes }
			every_tile = {
				limit = {
					or = {
						has_building = no
						autobuild_trigger_has_any_power_plant = yes
						autobuild_trigger_has_any_science_lab = yes
						autobuild_trigger_has_any_farm = yes
					}
					autobuild_trigger_tile_has_pop = yes
				}
				autobuild_build_mine = yes
			}
		}
		if = {
			limit = { autobuild_trigger_planet_food = yes }
			every_tile = {
				limit = {
					or = {
						has_building = no
						autobuild_trigger_has_any_power_plant = yes
						autobuild_trigger_has_any_science_lab = yes
						autobuild_trigger_has_any_mine = yes
					}
					autobuild_trigger_tile_has_pop = yes
				}
				autobuild_build_farm = yes
			}
		}
		if = {
			limit = { autobuild_trigger_planet_science = yes }
			every_tile = {
				limit = {
					autobuild_trigger_tile_has_pop = yes
					autobuild_trigger_tile_pop_robot_or_slave = no
					or = {
						has_building = no
						autobuild_trigger_has_any_mine = yes
						autobuild_trigger_has_any_power_plant = yes
						autobuild_trigger_has_any_farm = yes
						and = {
							has_building = building_slave_processing
							root = {
								count_pops = {
									limit = { is_enslaved = yes }
									count < @autobuild_num_slave
								}
							}
						}
					}
				}
				autobuild_build_lab = yes
			}
		}
	}
}
# autoupdate buildings
planet_event = {
	id = autobuild.138
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		autobuild_trigger_is_sth = no
		autobuild_trigger_local_autoupdate = yes
	}
	immediate = {
		every_tile = {
			limit = { autobuild_trigger_tile_has_pop = yes }
			switch = {
				trigger = has_building
				building_power_plant_1 = { add_building_construction = building_power_plant_2  }
				building_power_plant_2 = { add_building_construction = building_power_plant_3  }
				building_power_plant_2_direct_build = { add_building_construction = building_power_plant_3  }
				building_power_plant_3 = { add_building_construction = building_power_plant_4  }
				building_power_plant_3_direct_build = { add_building_construction = building_power_plant_4  }
				building_power_plant_4 = { add_building_construction = building_power_plant_5  }
				building_power_plant_4_direct_build = { add_building_construction = building_power_plant_5  }
				building_power_hub_1 = { add_building_construction = building_power_hub_2  }
				building_hydroponics_farm_1 = { add_building_construction = building_hydroponics_farm_2  }
				building_hydroponics_farm_2 = { add_building_construction = building_hydroponics_farm_3  }
				building_hydroponics_farm_2_direct_build = { add_building_construction = building_hydroponics_farm_3  }
				building_hydroponics_farm_3 = { add_building_construction = building_hydroponics_farm_4  }
				building_hydroponics_farm_3_direct_build = { add_building_construction = building_hydroponics_farm_4  }
				building_hydroponics_farm_4 = { add_building_construction = building_hydroponics_farm_5  }
				building_hydroponics_farm_4_direct_build = { add_building_construction = building_hydroponics_farm_5  }
				building_mining_network_1 = { add_building_construction = building_mining_network_2  }
				building_mining_network_2 = { add_building_construction = building_mining_network_3  }
				building_mining_network_2_direct_build = { add_building_construction = building_mining_network_3  }
				building_mining_network_3 = { add_building_construction = building_mining_network_4  }
				building_mining_network_3_direct_build = { add_building_construction = building_mining_network_4  }
				building_mining_network_4 = { add_building_construction = building_mining_network_5  }
				building_mining_network_4_direct_build = { add_building_construction = building_mining_network_5  }
				building_mineral_processing_plant_1 = { add_building_construction = building_mineral_processing_plant_2  }
				building_engineering_facility_1 = { add_building_construction = building_engineering_facility_2  }
				building_engineering_facility_1_direct_build = { add_building_construction = building_engineering_facility_2  }
				building_engineering_facility_2 = { add_building_construction = building_engineering_facility_3  }
				building_engineering_facility_2_direct_build = { add_building_construction = building_engineering_facility_3  }
				building_engineering_facility_3 = { add_building_construction = building_engineering_facility_4  }
				building_engineering_facility_3_direct_build = { add_building_construction = building_engineering_facility_4  }
				building_physics_lab_1 = { add_building_construction = building_physics_lab_2  }
				building_physics_lab_1_direct_build = { add_building_construction = building_physics_lab_2  }
				building_physics_lab_2 = { add_building_construction = building_physics_lab_3  }
				building_physics_lab_2_direct_build = { add_building_construction = building_physics_lab_3  }
				building_physics_lab_3 = { add_building_construction = building_physics_lab_4  }
				building_physics_lab_3_direct_build = { add_building_construction = building_physics_lab_4  }
				building_biolab_1 = { add_building_construction = building_biolab_2  }
				building_biolab_1_direct_build = { add_building_construction = building_biolab_2  }
				building_biolab_2 = { add_building_construction = building_biolab_3  }
				building_biolab_2_direct_build = { add_building_construction = building_biolab_3  }
				building_biolab_3 = { add_building_construction = building_biolab_4  }
				building_biolab_3_direct_build = { add_building_construction = building_biolab_4  }
				building_autochthon_monument = { add_building_construction = building_heritage_site  }
				building_heritage_site = { add_building_construction = building_hypercomms_forum  }
				building_heritage_site_direct_build = { add_building_construction = building_hypercomms_forum  }
				building_hypercomms_forum = { add_building_construction = building_autocurating_vault  }
				building_hypercomms_forum_direct_build = { add_building_construction = building_autocurating_vault  }
				building_temple = { add_building_construction = building_holotemple  }
				building_holotemple = { add_building_construction = building_sacred_nexus  }
				building_holotemple_direct_build = { add_building_construction = building_sacred_nexus  }
				building_sacred_nexus = { add_building_construction = building_citadel_of_faith  }
				building_sacred_nexus_direct_build = { add_building_construction = building_citadel_of_faith  }
				building_colony_shelter = { add_building_construction = building_capital_1  }
				building_capital_1 = { add_building_construction = building_capital_2  }
				building_capital_1_direct_build = { add_building_construction = building_capital_2  }
				building_capital_2 = { add_building_construction = building_capital_3  }
				building_capital_2_direct_build = { add_building_construction = building_capital_3  }
				building_clinic = { add_building_construction = building_hospital  }
				building_stronghold = { add_building_construction = building_fortress  }
				building_primitive_farm = { add_building_construction = building_hydroponics_farm_1  }
				building_primitive_factory = { add_building_construction = building_mining_network_1  }
				building_uplink_node = { add_building_construction = building_network_junction  }
				building_network_junction = { add_building_construction = building_system_conflux  }
				building_network_junction_direct_build = { add_building_construction = building_system_conflux  }
				building_system_conflux = { add_building_construction = building_alpha_hub  }
				building_system_conflux_direct_build = { add_building_construction = building_alpha_hub  }
				building_deployment_post = { add_building_construction = building_machine_capital_1  }
				building_machine_capital_1 = { add_building_construction = building_machine_capital_2  }
				building_machine_capital_1_direct_build = { add_building_construction = building_machine_capital_2  }
				building_machine_capital_2 = { add_building_construction = building_machine_capital_3  }
				building_machine_capital_2_direct_build = { add_building_construction = building_machine_capital_3  }
				building_spare_parts_depot = { add_building_construction = building_unit_assembly_plant  }

			}
		}
	}
}
# autoupdate labs
planet_event = {
	id = autobuild.140
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		autobuild_trigger_is_sth = no
		autobuild_trigger_planet_block_update = no
		autobuild_trigger_has_planet_capital = yes
		has_building = building_basic_science_lab_1
		exists = owner
		owner = {
			or = {
				has_country_flag = autobuild_labs
				and = {
					is_ai = yes
					has_global_flag = autobuild_ai_allowed
				}
			}
			autobuild_trigger_cost = yes
		}
	}
	immediate = {
		if = {
			limit = {
				or = {
					has_modifier = autobuild_planet_labs_physics
					has_modifier = autobuild_planet_labs_bio
					has_modifier = autobuild_planet_labs_engineering
				}
			}
			if = {
				limit = { has_modifier = autobuild_planet_labs_physics }
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_physics_lab_1
				}
				break = yes
			}
			if = {
				limit = { has_modifier = autobuild_planet_labs_bio }
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_biolab_1
				}
				break = yes
			}
			if = {
				limit = { has_modifier = autobuild_planet_labs_engineering }
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_engineering_facility_1
				}
				break = yes
			}
		}
		if = {
			limit = {
				owner = {
					not = { has_country_flag = autobuild_labs_not_count_planet }
				}
				or = {
					has_modifier = titanic_life #25
					has_modifier = society_animal_life #25
					has_modifier = dangerous_wildlife #20
					has_modifier = wild_storms #20
					has_modifier = unstable_tectonics #20
					has_modifier = atmospheric_hallucinogen #10
					has_modifier = atmospheric_hallucinogen_good #10
					has_modifier = strong_magnetic_field #5
				}
			}
			if = {
				limit = {
					or = {
						has_modifier = titanic_life #25
						has_modifier = society_animal_life #25
						has_modifier = dangerous_wildlife #20
					}
				}
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_biolab_1
				}
				break = yes
			}
			if = {
				limit = {
					or = {
						has_modifier = unstable_tectonics #20
					}
				}
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_engineering_facility_1
				}
				break = yes
			}
			if = {
				limit = {
					or = {
						has_modifier = atmospheric_hallucinogen #10
						has_modifier = atmospheric_hallucinogen_good #10
						has_modifier = subterranean_civilization #10
					}
				}
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_biolab_1
				}
				break = yes
			}
			if = {
				limit = {
					has_modifier = strong_magnetic_field #5
				}
				every_tile = {
					limit = {
						has_building = building_basic_science_lab_1
						autobuild_trigger_tile_has_pop = yes
					}
					add_building_construction = building_physics_lab_1
				}
				break = yes
			}
		}
		every_tile = {
			limit = {
				has_building = building_basic_science_lab_1
				autobuild_trigger_tile_has_pop = yes
			}
			if = {
				limit = {
					or = {
						and = {
							pop = { has_trait = trait_natural_sociologists }
							not = {
								owner = { has_country_flag = autobuild_labs_not_count_trait }
							}
						}
						has_resource = society_research
					}
				}
				add_building_construction = building_biolab_1
				else = {
					if = {
						limit = {
							or = {
								and = {
									pop = { has_trait = trait_natural_physicists }
									not = {
										owner = { has_country_flag = autobuild_labs_not_count_trait }
									}
								}
								has_resource = physics_research
							}
						}
						add_building_construction = building_physics_lab_1
						else = {
							if = {
								limit = {
									or = {
										and = {
											pop = { has_trait = trait_natural_engineers }
											not = {
												owner = { has_country_flag = autobuild_labs_not_count_trait }
											}
										}
										has_resource = engineering_research
									}
								}
								add_building_construction = building_engineering_facility_1
								else = {
									if = {
										limit = {
											not = {
												owner = { has_country_flag = autobuild_labs_disable_random }
											}
										}
										random_list = {
											10 = {
												modifier = {
													factor = 0
													owner = { has_country_flag = autobuild_physics_lab_ratio.0 }
												}
												modifier = {
													factor = 2
													owner = { has_country_flag = autobuild_physics_lab_ratio.2 }
												}
												modifier = {
													factor = 3
													owner = { has_country_flag = autobuild_physics_lab_ratio.3 }
												}
												add_building_construction = building_physics_lab_1
											}
											10 = {
												modifier = {
													factor = 0
													owner = { has_country_flag = autobuild_biolab_ratio.0 }
												}
												modifier = {
													factor = 2
													owner = { has_country_flag = autobuild_biolab_ratio.2 }
												}
												modifier = {
													factor = 3
													owner = { has_country_flag = autobuild_biolab_ratio.3 }
												}
												add_building_construction = building_biolab_1
											}
											10 = {
												modifier = {
													factor = 0
													owner = { has_country_flag = autobuild_engineering_facility_ratio.0 }
												}
												modifier = {
													factor = 2
													owner = { has_country_flag = autobuild_engineering_facility_ratio.2 }
												}
												modifier = {
													factor = 3
													owner = { has_country_flag = autobuild_engineering_facility_ratio.3 }
												}
												add_building_construction = building_engineering_facility_1
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
# on actions events
# send mod's events by on action
event = {
	id = autobuild.155
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_country = {
			country_event = {
				id = autobuild.1
				days = 15
				random = 10
			}
		}
	}
}
# planet clean
planet_event = {
	id = autobuild.156
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		or = {
			has_modifier = free_from_auto_update
			has_modifier = free_from_autobuild
			has_modifier = planet_labs_autobuild
			has_modifier = planet_forge_autobuild
			has_modifier = planet_power_plant_autobuild
			has_modifier = planet_farms_autobuild
		}
	}
	immediate = { autobuild_effect_clear_planet_modifiers = yes }
}
# on pop birth and migrate
pop_event = {
	id = autobuild.158
	hide_window = yes
	is_triggered_only = yes
	trigger = { exists = planet }
	immediate = {
		planet = { autobuild_effect_planet_build = yes }
	}
}
# for planet on actions
planet_event = {
	id = autobuild.159
	hide_window = yes
	is_triggered_only = yes
	immediate = { autobuild_effect_planet_build = yes }
}
# remove mod's stuff
country_event = {
	id = autobuild.99
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_planet = {
			limit = { autobuild_trigger_planet_special = yes }
			autobuild_effect_clear_planet_modifiers = yes
		}
		every_owned_fleet = {
			limit = { has_fleet_flag = autobuild_fleet }
			autobuild_effect_fleet_clear = yes
		}
		remove_country_flag = autobuild_update
		remove_country_flag = autobuild_2
		remove_country_flag = autobuild_on_tile
		remove_country_flag = autobuild_labs
		remove_country_flag = autobuild_mine_ratio.0
		remove_country_flag = autobuild_mine_ratio.2
		remove_country_flag = autobuild_mine_ratio.3
		remove_country_flag = autobuild_mine_ratio.4
		remove_country_flag = autobuild_power_plant_ratio.0
		remove_country_flag = autobuild_power_plant_ratio.2
		remove_country_flag = autobuild_power_plant_ratio.3
		remove_country_flag = autobuild_power_plant_ratio.4
		remove_country_flag = autobuild_lab_ratio.0
		remove_country_flag = autobuild_lab_ratio.2
		remove_country_flag = autobuild_lab_ratio.3
		remove_country_flag = autobuild_lab_ratio.4
		remove_country_flag = autobuild_ignore_minerals
		remove_country_flag = autobuild_ignore_food
		remove_country_flag = autobuild_ignore_energy
		remove_country_flag = autobuild_ignore_science
		remove_country_flag = autobuild_clean_blockers
		autobuild_effect_clear_cost_flags = yes
		remove_country_flag = autobuild_cost
		remove_country_flag = autobuild_ship_ignore_1_and_less_mineral
		remove_country_flag = autobuild_ship_ignore_2_and_less_mineral
		remove_global_flag = hide_autobuild_planetary_edicts
		remove_global_flag = autobuild_ai_allowed
	}
}
# set global flag
country_event = {
	id = autobuild.200
	hide_window = yes
	fire_only_once = yes
	immediate = { set_global_flag = autobuild_installed }
}
# for on game start
event = {
	id = autobuild.201
	hide_window = yes
	is_triggered_only = yes
	immediate = { set_global_flag = autobuild_installed }
}
