### This effect is currently UNUSED because it doesnt work very well, the deposits spawn but for some reason most (but not all) planets dont update the number of available districts after spawning the deposits
### the solution right now is to overwrite the vanilla deposits file and use the reroll vanilla effect

## Spawn a different number of deposits depending on planet size (larger planets will repeat the roll multiple times)
## Must have one fuction for each planet class, as the deposit possibilities will vary with class

generate_marginal_deposits = {
	clear_deposits = yes
	
	if = {
		limit = {
			is_planet_class = pc_primordial
		}
		if = {
			limit = { planet_size > 3 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 5 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 7 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 9 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 11 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 13 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 15 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 17 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 19 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 21 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 23 }
			roll_primordial_deposit = yes
		}
		if = {
			limit = { planet_size > 25 }
			roll_primordial_deposit = yes
		}
	}
	
}

## Resource spawn possibilities for each planet class

# deposits giving 3 districts will be weighted 1 on the random list, while 2 districts are weighted 2, and 1 district weighted 3
# balanced with a chance of spawning no deposit on the roll
# all 3 types of deposits are mixed, so there's a chance a planet will only get deposits of one type (although a bit unlikely, the universe isnt perfect)
# in the future the code can be expanded to increase odds of some types based on planet modifiers being present (ie. mineral rich increasing odds of mineral deposits)

roll_primordial_deposit = {
	random_list = {
		2 = { }
		3 = { add_deposit = d_arid_highlands }
		2 = { add_deposit = d_searing_desert }
		1 = { add_deposit = d_tempestous_mountain }
		3 = { add_deposit = d_mineral_fields }
		2 = { add_deposit = d_ore_rich_caverns }
		1 = { add_deposit = d_rich_mountain }
		3 = { add_deposit = d_nutritious_mudland }
	}
}