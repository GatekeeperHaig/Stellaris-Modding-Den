##########################################################################
# Planet edicts
##########################################################################

# Variables:
#  name, the name of the edict, also serves as localisation key.
#  influence_cost, the base influence cost of activating the edict.
#  potential, planet or country trigger to decide whether the edict should be shown.
#  allow, planet or country trigger to decide if whether this edict can be activated.
#  effect, an effect that is executed when this trigger activates.
#  prerequisites, tech requirements for this trigger.
#  ai_will_do, determines AI scoring for edict
#  modifier, a list of modifiers
#  length, number of days the trigger is active.

# Sets the edict-cost for all edicts with this variable

@cost1 = 25
@cost2 = 50
@cost5 = 100
@cost15 = 150
@costf = 25

##### USED FOR OTHERS
@2y = 720
##### USED FOR 5 YEAR DEVELOPMENT, TAXES, MARTIAL LAW, EDUCATION AND PROPAGANDA
@5y = 1800
##### USED FOR PLANET FOCUS
@10y = 3600
##### USED FOR 15 YEAR PLANS
@15y = 5400
##### USED FOR 20 YEAR PLANS
@20y = 7200
##### FOCUS CHANGE
@Fy = 60 # Months

##############################################
##### PLANET FOCUSES
##############################################

planet_edict = {
	name = "commercial_focus_p"
	cost = { energy = @costf }
	length = @10y

	potential = {
		NOT = {
			has_planet_flag = recent_change_focus
		}
	}

	modifier = {
	}

	effect = {
		add_modifier = {
			modifier = "commercial_world"
			days = -1
		}
		if = { 
			limit = { has_planet_flag = industrial_world_flag }
			remove_planet_flag = industrial_world_flag
			remove_modifier = industrial_world
		}
		if = { 
			limit = { has_planet_flag = agricultural_world_flag }
			remove_planet_flag =  agricultural_world_flag
			remove_modifier = agricultural_world
		}
		if = { 
			limit = { has_planet_flag = research_world_flag }
			remove_planet_flag = research_world_flag
			remove_modifier = research_world
		}		
		set_planet_flag = commercial_world_flag
		set_timed_planet_flag = { flag = recent_change_focus months = @Fy }
	}

	allow = {
	}
	
	ai_weight = {
		weight = 15
	}
}

planet_edict = {
	name = "industrial_focus_p"
	cost = { energy = @costf }
	length = @10y

	potential = {
		NOT = {
			has_planet_flag = recent_change_focus
		}
	}

	modifier = {
	}

	effect = {
		add_modifier = {
			modifier = "industrial_world"
			days = -1
		}
		if = { 
			limit = { has_planet_flag = commercial_world_flag }
			remove_planet_flag = commercial_world_flag
			remove_modifier = commercial_world
		}
		if = { 
			limit = { has_planet_flag = agricultural_world_flag }
			remove_planet_flag = agricultural_world_flag
			remove_modifier = agricultural_world
		}
		if = { 
			limit = { has_planet_flag = research_world_flag }
			remove_planet_flag = research_world_flag
			remove_modifier = research_world
		}		
		set_planet_flag = industrial_world_flag
		set_timed_planet_flag = { flag = recent_change_focus months = @Fy }
	}

	allow = {
	}
	
	ai_weight = {
		weight = 20
	}
}

planet_edict = {
	name = "agricultural_focus_p"
	cost = { energy = @costf }
	length = @10y

	potential = {
		NOT = {
			has_planet_flag = recent_change_focus
		}
	}

	modifier = {
	}

	effect = {
		add_modifier = {
			modifier = "agricultural_world"
			days = -1
		}
		if = { 
			limit = { has_planet_flag = commercial_world_flag }
			remove_planet_flag = commercial_world_flag
			remove_modifier = commercial_world
		}
		if = { 
			limit = { has_planet_flag = industrial_world_flag }
			remove_planet_flag = industrial_world_flag
			remove_modifier = industrial_world
		}
		if = { 
			limit = { has_planet_flag = research_world_flag }
			remove_planet_flag = research_world_flag
			remove_modifier = research_world
		}		
		set_planet_flag = agricultural_world_flag
		set_timed_planet_flag = { flag = recent_change_focus months = @Fy }
	}

	allow = {
	}
	
	ai_weight = {
		weight = 5
	}
}

planet_edict = {
	name = "research_focus_p"
	cost = { energy = @costf }
	length = @10y

	potential = {
		NOT = {
			has_planet_flag = recent_change_focus
		}
	}

	modifier = {
	}

	effect = {
		add_modifier = {
			modifier = "research_world"
			days = -1
		}
		if = { 
			limit = { has_planet_flag = commercial_world_flag }
			remove_planet_flag = commercial_world_flag
			remove_modifier = commercial_world
		}
		if = { 
			limit = { has_planet_flag = industrial_world_flag }
			remove_planet_flag = industrial_world_flag
			remove_modifier = industrial_world
		}
		if = { 
			limit = { has_planet_flag = agricultural_world_flag }
			remove_planet_flag = agricultural_world_flag
			remove_modifier = agricultural_world
		}
		set_planet_flag = research_world_flag
		set_timed_planet_flag = { flag = recent_change_focus months = @Fy }
	}

	allow = {
	}
	
	ai_weight = {
		weight = 10
	}
}

planet_edict = {
	name = "remove_focus_p"
	cost = { energy = @costf }
	length = @10y

	potential = {
		NOT = {
			has_planet_flag = recent_change_focus
		}
	}

	modifier = {
	}

	effect = {
		if = { 
			limit = { has_planet_flag = commercial_world_flag }
			remove_planet_flag = commercial_world_flag
			remove_modifier = commercial_world
		}
		if = { 
			limit = { has_planet_flag = industrial_world_flag }
			remove_planet_flag = industrial_world_flag
			remove_modifier = industrial_world
		}
		if = { 
			limit = { has_planet_flag = agricultural_world_flag }
			remove_planet_flag = agricultural_world_flag
			remove_modifier = agricultural_world
		}
		if = { 
			limit = { has_planet_flag = research_world_flag }
			remove_planet_flag = research_world_flag
			remove_modifier = research_world
		}
	}

	allow = {
	}
	
	ai_weight = {
		weight = 0
	}
}

####################
##### TAXATION #####
####################

##### Higher Taxes +5% energy -5% happiness
planet_edict = {
	name = "high_taxes_p"
	cost = { influence = @cost2 }
	length = @5y

	potential = {
		NOR = {
			has_planet_flag = "low_taxes_p"
		}
	}

	modifier = {
		tile_resource_energy_mult = 0.1
		pop_happiness = -0.15
	}

	effect = {
		set_timed_planet_flag = {
			flag = high_taxes_p
			months = 60
		}	
	}

	allow = {
	}
	
	ai_weight = {
		weight = 5
	}
}

##### Lower Taxes -5% energy +5% happiness
planet_edict = {
	name = "low_taxes_p"
	cost = { influence = @cost2 }
	length = @5y

	potential = {
		NOR = {
			has_planet_flag = "high_taxes_p"
		}
	}

	modifier = {
		tile_resource_energy_mult = -0.1
		pop_happiness = 0.1
	}

	effect = {
		set_timed_planet_flag = {
			flag = low_taxes_p
			months = 60
		}	
	}

	allow = {
	}
	
	ai_weight = {
		weight = 1
	}
}