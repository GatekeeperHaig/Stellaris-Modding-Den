namespace = cgm_pe_beta_fixes

country_event = { 
	id = cgm_pe_beta_fixes.1
	hide_window = yes
	fire_only_once = yes
	trigger = {
		OR = { 
			NOT = { has_country_flag = has_terraforming_agents }
			NOT = { has_global_flag = cgm_pe_spawn_engine_fired }
			NOR = { 
				has_global_flag = cgm_uninhabitable_terraforming_mechanics_enabled
				has_global_flag = cgm_uninhabitable_terraforming_mechanics_disabled
			}
			NOR = { 	
				has_global_flag = cgm_astrocartography_enabled
				has_global_flag = cgm_astrocartography_disabled
			}
			NOR = { 
				has_global_flag = cgm_planetary_projects_mechanics_enabled
				has_global_flag = cgm_planetary_projects_mechanics_disabled
			}
			NOR = { 
				has_global_flag = cgm_asteroid_colonization_enabled				
				has_global_flag = cgm_asteroid_colonization_disabled
			}
		}
	}	
	
	immediate = { 
		set_country_flag = has_terraforming_agents
		set_global_flag = cgm_pe_spawn_engine_fired
		if = { 
			limit = { 
				NOR = { 
					has_global_flag = cgm_uninhabitable_terraforming_mechanics_enabled
					has_global_flag = cgm_uninhabitable_terraforming_mechanics_disabled
				}
			}
			set_global_flag = cgm_uninhabitable_terraforming_mechanics_enabled	
		}
		if = { 
			limit = { 
				NOR = { 	
					has_global_flag = cgm_astrocartography_enabled
					has_global_flag = cgm_astrocartography_disabled
				}
			}
			set_global_flag = cgm_astrocartography_enabled
		}
		if = { 
			limit = { 		
				NOR = { 
					has_global_flag = cgm_planetary_projects_mechanics_enabled
					has_global_flag = cgm_planetary_projects_mechanics_disabled
				}
			}
			set_global_flag = cgm_planetary_projects_mechanics_enabled
		}
		if = { 
			limit = { 		
				NOR = { 
					has_global_flag = cgm_asteroid_colonization_enabled				
					has_global_flag = cgm_asteroid_colonization_disabled
				}
			}
			set_global_flag = cgm_asteroid_colonization_enabled				
		}	
	}		
}
country_event = { 
	id = cgm_pe_beta_fixes.2
	hide_window = yes
	fire_only_once = yes
	trigger = {
		OR = { 
			NOT = { has_country_flag = has_terraforming_agents }
			NOT = { has_global_flag = cgm_pe_spawn_engine_fired }
			NOR = { 
				has_global_flag = cgm_uninhabitable_terraforming_mechanics_enabled
				has_global_flag = cgm_uninhabitable_terraforming_mechanics_disabled
			}
			NOR = { 	
				has_global_flag = cgm_astrocartography_enabled
				has_global_flag = cgm_astrocartography_disabled
			}
			NOR = { 
				has_global_flag = cgm_planetary_projects_mechanics_enabled
				has_global_flag = cgm_planetary_projects_mechanics_disabled
			}
			NOR = { 
				has_global_flag = cgm_asteroid_colonization_enabled				
				has_global_flag = cgm_asteroid_colonization_disabled
			}
		}
	}	
	
	immediate = { 
		set_country_flag = has_terraforming_agents
		set_global_flag = cgm_pe_spawn_engine_fired
		if = { 
			limit = { 
				NOR = { 
					has_global_flag = cgm_uninhabitable_terraforming_mechanics_enabled
					has_global_flag = cgm_uninhabitable_terraforming_mechanics_disabled
				}
			}
			set_global_flag = cgm_uninhabitable_terraforming_mechanics_enabled	
		}
		if = { 
			limit = { 
				NOR = { 	
					has_global_flag = cgm_astrocartography_enabled
					has_global_flag = cgm_astrocartography_disabled
				}
			}
			set_global_flag = cgm_astrocartography_enabled
		}
		if = { 
			limit = { 		
				NOR = { 
					has_global_flag = cgm_planetary_projects_mechanics_enabled
					has_global_flag = cgm_planetary_projects_mechanics_disabled
				}
			}
			set_global_flag = cgm_planetary_projects_mechanics_enabled
		}
		if = { 
			limit = { 		
				NOR = { 
					has_global_flag = cgm_asteroid_colonization_enabled				
					has_global_flag = cgm_asteroid_colonization_disabled
				}
			}
			set_global_flag = cgm_asteroid_colonization_enabled				
		}	
	}		
}