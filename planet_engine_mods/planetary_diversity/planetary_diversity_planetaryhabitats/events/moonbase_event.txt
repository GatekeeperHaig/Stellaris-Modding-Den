
namespace = moonbase

planet_event = {
	id = moonbase.1
	hide_window = yes

trigger = {
	OR = {
		AND = {
			has_moon = yes 
			has_owner = yes
			NOT = { has_planet_flag = moon_habitat }}
		AND = {
			has_moon = yes
			any_moon = { has_owner = yes }
			NOT = { has_planet_flag = moon_habitat }
			}
		AND = {
			is_planet_class = pc_gas_giant
			has_moon = yes
			NOT = { has_planet_flag = moon_habitat }
		}		
	}
}

immediate = {
	every_moon = {
		if = {
	        limit = { 
				has_owner = no
				NOT = { has_planet_flag = moon_habitat } }	
        		set_planet_flag = moon_habitat
				}
		}
	}
}

# Failed Prospecting
planet_event = {
	id = moonbase.2
	title = moonbase.2.name
	desc = moonbase.2.desc
	picture = GFX_evt_drilling_for_gas
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		OR = {
		is_planet_class = pc_fhab
		is_planet_class = pc_mhab
		is_planet_class = pc_gghab
		}
	}

	option = {
		name = moonbase.2.a
		owner = {
			add_monthly_resource_mult = {
				resource = minerals
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		} 
	}
}

# Barren Fail
planet_event = {
	id = moonbase.31
	title = moonbase.31.name
	desc = moonbase.31.desc
	picture = GFX_evt_drilling_for_gas
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		OR = {
		is_planet_class = pc_bhab
		is_planet_class = pc_bchab
		}
	}

	option = {
		name = moonbase.31.a
		owner = {
			add_monthly_resource_mult = {
				resource = minerals
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		} 
	}
}

# Barren Expand Domes
planet_event = {
	id = moonbase.32
	title = moonbase.32.name
	desc = moonbase.32.desc
	picture = GFX_evt_drilling_for_gas
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		OR = {
		is_planet_class = pc_bhab
		is_planet_class = pc_bchab
		}
	}

	option = {
		name = moonbase.32.a
		add_modifier = {
			modifier = pdmoredomes
			days = -1
		}
	}
}

# Barren Expand Domes
planet_event = {
	id = moonbase.33
	title = moonbase.33.name
	desc = moonbase.33.desc
	picture = GFX_evt_drilling_for_gas
	show_sound = event_cityscape
	location = root

	is_triggered_only = yes

	trigger = {
		OR = {
		is_planet_class = pc_bhab
		is_planet_class = pc_bchab
		}
	}

	option = {
		name = moonbase.33.a
		add_modifier = {
			modifier = terraforming_candidate
			days = -1
		}
	}
}

# Habitat Complete Notification
country_event = {
	id = "moonbase.00"
	title = "moonbase.00.name"
	desc = {
		trigger = {
			NOT = { has_country_flag = already_built_pd_habitat }
		}
		text = "moonbase.00.desc.a"
	}

	desc = {
		trigger = {
			has_country_flag = already_built_pd_habitat
		}
		text = "moonbase.00.desc.b"
	}
	show_sound = event_mystic_reveal
	picture = GFX_evt_colony_settlement
	is_triggered_only = yes
	location = FromFromFrom.Planet

	option = {
		name = EXCELLENT
		hidden_effect = { set_country_flag = already_built_pd_habitat }
	}
}