convert_homeworld = {
	if = {
		limit = { is_planet_class = pc_gaia }

		# Spawn Lithosphere modifier
		random_list = {
			1 = { # This one will result in Chlorogaian
				modifier = { add = 100 planet_size < 24 }
				modifier = { factor = 100 is_moon = yes }
				add_modifier = {
					modifier = "lithosphere-continental"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-diverse"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_chlorogaian"
				set_planet_entity = { picture = biome_chlorogaian entity = gd_chlorogaian_planet_01_entity }
				set_planet_flag = "planet_converted"
			}
			1 = { # This one will result in Olympian
				modifier = { add = 100 planet_size > 23 }
				modifier = { factor = 0 is_moon = yes }
				add_modifier = {
					modifier = "lithosphere-oceanic"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-diverse"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_pangaian"
				set_planet_entity = { picture = biome_olympian entity = gd_olympian_planet_01_entity }
				set_planet_flag = "planet_converted"
			}
		}
	}
	if = {
		limit = { is_planet_class = pc_ocean }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-oceanic"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-water_pelagic"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-aquatic"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-optimal"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_archipelagic"
		set_planet_entity = { picture = biome_archipelagic_lush entity = archipelagic_planet_01_entity }
		set_planet_flag = "planet_converted"
	}
	##
	if = {
		limit = { is_planet_class = pc_continental }

		# Spawn Lithosphere modifier
		random_list = {
			1 = { # This one will result in Pangaian - Dense
				add_modifier = {
					modifier = "lithosphere-oceanic"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-dense"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_pangaian"
				set_planet_entity = { picture = biome_pangaian_lush entity = gd_pangaian_planet_lush_01_entity }
				set_planet_flag = "planet_converted"
			}
			1 = { # This one will result in Pangaian - Sparse
				add_modifier = {
					modifier = "lithosphere-oceanic"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-sparse"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_pangaian"
				set_planet_entity = { picture = biome_pangaian_sparse entity = gd_pangaian_planet_mixed_01_entity }
				set_planet_flag = "planet_converted"
			}
			2 = { # This one will result in Chlorogenian - Diverse
				add_modifier = {
					modifier = "lithosphere-continental"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-diverse"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_chlorogenian"
				set_planet_entity = { picture = biome_chlorogenian_arboreal entity = gd_chlorogenian_planet_mixed_01_entity }
				set_planet_flag = "planet_converted"				
			}
			1 = { # This one will result in Chlorogenian - Sparse
				add_modifier = {
					modifier = "lithosphere-continental"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-diverse"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_chlorogenian"
				set_planet_entity = { picture = biome_chlorogenian_sparse entity = gd_chlorogenian_planet_sparse_01_entity }
				set_planet_flag = "planet_converted"				
			}
			1 = { # This one will result in Xerosgenian - Sparse
				add_modifier = {
					modifier = "lithosphere-continental"
					days = -1
				}
				# Spawn Hydrosphere modifier
				add_modifier = {
					modifier = "hydrosphere-water_abundant"
					days = -1
				}
				# Spawn Biosphere modifier
				add_modifier = {
					modifier = "biosphere-sparse"
					days = -1
				}
				# Spawn Atmosphere modifier
				add_modifier = {
					modifier = "atmosphere-optimal"
					days = -1
				}
				# Spawn Gravity modifier
				add_modifier = {
					modifier = "standard_gravity"
					days = -1
				}
				# Change pc
				change_pc = "pc_xerosgenian"
				set_planet_entity = { picture = biome_xerosgenian_mixed entity = gd_xerosgenian_planet_mixed_01_entity }
				set_planet_flag = "planet_converted"				
			}
		}
	}
	##
	if = {
		limit = { is_planet_class = pc_desert }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-uniform"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-toxic"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-exotic"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-toxic"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_sulfur"
		set_planet_entity = { picture = biome_sulfur entity = sulfur_gd_planet_01_entity }
		set_planet_flag = "planet_converted"
	}
	##
	if = {
		limit = { is_planet_class = pc_tropical }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-continental"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-water_dark"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-diverse"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-optimal"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_archipelagic"
		set_planet_entity = { picture = biome_biolumenal entity = gd_biolumenal_planet_01_entity }
		set_planet_flag = "planet_converted"
	}
	##
	if = {
		limit = { is_planet_class = pc_savannah }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-uniform"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-water_limited"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-diverse"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-optimal"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_geoalgae"
		set_planet_entity = { picture = biome_geoalgae entity = gd_geoalgae_planet_01_entity }
		set_planet_flag = "planet_converted"		
	}
	##
	if = {
		limit = { is_planet_class = pc_tundra }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-uniform"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-toxic"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-barren"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-toxic"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_hydrocarbonal"
		set_planet_entity = { picture = biome_methane entity = hydrocarbonal_planet_01_entity }
		set_planet_flag = "planet_converted"		
	}
	##
	if = {
		limit = { is_planet_class = pc_arctic }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-continental"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-water_frozen"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-diverse"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-optimal"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_cryogenian"
		set_planet_entity = { picture = biome_cryogenian_mixed entity = gd_cryogenian_planet_mixed_01_entity }
		set_planet_flag = "planet_converted"		
	}
	##
	if = {
		limit = { is_planet_class = pc_alpine }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-uniform"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-negligible"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-sparse"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-optimal"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_karstic"
		set_planet_entity = { picture = biome_karstic_underground entity = gd_karstic_planet_01_entity }
		set_planet_flag = "planet_converted"		
	}
	##
	if = {
		limit = { is_planet_class = pc_arid }

		# Spawn Lithosphere modifier
		add_modifier = {
			modifier = "lithosphere-continental"
			days = -1
		}
		# Spawn Hydrosphere modifier
		add_modifier = {
			modifier = "hydrosphere-ammonia_abundant"
			days = -1
		}
		# Spawn Biosphere modifier
		add_modifier = {
			modifier = "biosphere-exotic"
			days = -1
		}
		# Spawn Atmosphere modifier
		add_modifier = {
			modifier = "atmosphere-toxic"
			days = -1
		}
		# Spawn Gravity modifier
		add_modifier = {
			modifier = "standard_gravity"
			days = -1
		}
		# Change pc
		change_pc = "pc_ammonia"
		set_planet_entity = { picture = biome_ammoniacal entity = ammonia_gd_planet_01_entity }
		set_planet_flag = "planet_converted"		
	}
	##
}

generate_home_system_resources = {
	# Clean-up
	every_system_planet = {
		limit = {
			colonizeable_planet = no
			NOT = { has_planet_flag = ignore_startup_effect }
		}
		prevent_anomaly = yes
		clear_deposits = yes
	}
	every_system_planet = {
		limit = { colonizeable_planet = no is_star = no is_gas_giant = no is_asteroid = no }
		random_list = {
			# Exploitable Planetoid
		0 = {
			modifier = { add = 10 is_rocky_airless_planet = yes planet_size < 5 }			
			add_modifier = {
				modifier = "exploitable_planetoid"
				days = -1
			}
			add_deposit = d_minerals_2
			set_planet_flag = "deposit_spawned"
		}
		0 = {
			modifier = { add = 5 is_rocky_airless_planet = yes planet_size < 7 }			
			add_modifier = {
				modifier = "exploitable_planetoid"
				days = -1
			}
			add_deposit = d_minerals_2
			set_planet_flag = "deposit_spawned"
		}
		0 = {
			modifier = { add = 2 is_rocky_airless_planet = yes planet_size < 9 }			
			add_modifier = {
				modifier = "exploitable_planetoid"
				days = -1
			}
			add_deposit = d_minerals_2
			set_planet_flag = "deposit_spawned"
		}
		0 = {
			modifier = { add = 1 is_rocky_airless_planet = yes planet_size < 12 }			
			add_modifier = {
				modifier = "exploitable_planetoid"
				days = -1
			}
			add_deposit = d_minerals_3
			set_planet_flag = "deposit_spawned"
		}
		# Ice Planetoid
		0 = {
			modifier = { add = 10 is_planet_class = "orbit_icy" planet_size < 5 }			
			add_modifier = {
				modifier = "ice_planetoid"
				days = -1
			}
			add_deposit = d_energy_2
			set_planet_flag = "deposit_spawned"
		}
		0 = {
			modifier = { add = 5 is_planet_class = "orbit_icy" planet_size < 7 }			
			add_modifier = {
				modifier = "ice_planetoid"
				days = -1
			}
			add_deposit = d_energy_2
			set_planet_flag = "deposit_spawned"
		}
		0 = {
			modifier = { add = 2 is_planet_class = "orbit_icy" planet_size < 9 }			
			add_modifier = {
				modifier = "ice_planetoid"
				days = -1
			}
			add_deposit = d_energy_3
			set_planet_flag = "deposit_spawned"
		}
		# Ringed Planet
		0 = {
			modifier = { add = 1000 has_ring = yes }			
			add_modifier = {
				modifier = "ringed_planet"
				days = -1
			}
			random_list = {
				0 = {
					modifier = { add = 1 planet_size < 15 }
					add_deposit = d_minerals_2
					set_planet_flag = "deposit_spawned"
				}
				0 = {
					modifier = { add = 1 planet_size > 14 planet_size < 20 }
					add_deposit = d_minerals_2
					set_planet_flag = "deposit_spawned"
				}
				0 = {
					modifier = { add = 1 planet_size > 19 }
					add_deposit = d_minerals_3
					set_planet_flag = "deposit_spawned"
				}
			}
		}
		# Nothing at all
		50 = {
		
		}
		}
	}
	# Set-up Gas-giant mining targets
	while = {
		count = 2
		random_system_planet = {
			limit = {
				NOT = { has_planet_flag = starting_deposit }
				NOT = { has_planet_flag = ignore_startup_effect }
				is_gas_giant = yes
				#has_deposit_for = shipclass_mining_station
			}
			set_planet_flag = starting_mining_target
			set_planet_flag = starting_deposit
		}
	}
	# Generate minable asteroids
	while = {
		count = 2
		random_system_planet = {
			limit = {
				NOT = { has_planet_flag = starting_deposit }
				NOT = { has_planet_flag = ignore_startup_effect }
				is_planet_class = pc_asteroid
			}

			set_planet_flag = starting_mining_target
			set_planet_flag = starting_deposit
			add_modifier = {
				modifier = "asteroid-carbon_rich"
				days = -1
			}
			random_list = {
				0 = {
					add_deposit = d_minerals_2
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 3 }
				}
				0 = {
					add_deposit = d_minerals_3
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 4 }
				}
				0 = {
					add_deposit = d_minerals_4
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 5 }
				}
				0 = {
					add_deposit = d_minerals_5
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 6 }
				}
			}
		}
	}
	while = {
		count = 2
		random_system_planet = {
			limit = {
				NOT = { has_planet_flag = starting_deposit }
				NOT = { has_planet_flag = ignore_startup_effect }
				is_planet_class = pc_ice_asteroid
			}

			#set_planet_flag = starting_mining_target
			set_planet_flag = starting_deposit
			add_modifier = {
				modifier = "asteroid-frozen_gases"
				days = -1
			}
			random_list = {
				0 = {
					add_deposit = d_energy_2
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 3 }
				}
				0 = {
					add_deposit = d_energy_3
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 4 }
				}
				0 = {
					add_deposit = d_energy_4
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 5 }
				}
				0 = {
					add_deposit = d_energy_5
					set_planet_flag = "deposit_spawned"
					modifier = { add = 1 planet_size = 6 }
				}
			}
		}
	}
	# Try to spawn a research target
	random_system_planet = { # Try physics first
		limit = { num_moons > 1 NOR = { is_gas_giant = yes is_star = yes }}
		if = {
			limit = { has_modifier = scorched_planetoid }
			remove_modifier = scorched_planetoid
		}
		if = {
			limit = { has_modifier = exploitable_planetoid }
			remove_modifier = exploitable_planetoid
		}
		if = {
			limit = { has_modifier = ice_planetoid }
			remove_modifier = ice_planetoid
		}
		if = {
			limit = { has_modifier = ringed_planet }
			remove_modifier = ringed_planet
			set_ring = no
		}
		random_list = {
			0 = {
				modifier = { add = 10 num_moons = 2 }			
				add_modifier = {
					modifier = "stable_dual_moon_system"
					days = -1
				}
				clear_deposits = yes
				add_deposit = d_physics_2
				every_moon = { remove_planet_flag = "erasable" }
				set_planet_flag = "deposit_spawned"
			}
			0 = {
				modifier = { add = 10 num_moons = 3 }			
				add_modifier = {
					modifier = "stable_dual_moon_system"
					days = -1
				}
				clear_deposits = yes
				add_deposit = d_physics_3
				every_moon = { remove_planet_flag = "erasable" }
				set_planet_flag = "deposit_spawned"
			}
			0 = {
				modifier = { add = 10 num_moons = 4 }			
				add_modifier = {
					modifier = "stable_dual_moon_system"
					days = -1
				}
				clear_deposits = yes
				add_deposit = d_physics_4
				every_moon = { remove_planet_flag = "erasable" }
				set_planet_flag = "deposit_spawned"
			}
			0 = {
				modifier = { add = 10 num_moons = 5 }			
				add_modifier = {
					modifier = "stable_dual_moon_system"
					days = -1
				}
				clear_deposits = yes
				add_deposit = d_physics_5
				every_moon = { remove_planet_flag = "erasable" }
				set_planet_flag = "deposit_spawned"
			}
		}
		set_planet_flag = starting_research_target
		set_planet_flag = starting_deposit
		solar_system = { set_star_flag = research_deposit_spawned }
	}
	if = {
		limit = { NOT = { solar_system = { has_star_flag = "research_deposit_spawned" }}}
		random_system_planet = { # Engineering next
			limit = { has_planet_flag = "torrid_zone" NOT = { is_gas_giant = yes }}
			if = {
				limit = { has_modifier = scorched_planetoid }
				remove_modifier = scorched_planetoid
			}
			if = {
				limit = { has_modifier = exploitable_planetoid }
				remove_modifier = exploitable_planetoid
			}
			if = {
				limit = { has_modifier = ice_planetoid }
				remove_modifier = ice_planetoid
			}
			if = {
				limit = { has_modifier = ringed_planet }
				remove_modifier = ringed_planet
				set_ring = no
			}
			random_list = {
				10 = {
					add_modifier = {
						modifier = "scorched_planetoid"
						days = -1
					}
					clear_deposits = yes
					add_deposit = d_engineering_2
					set_planet_flag = "deposit_spawned"
				}
				2 = {
					add_modifier = {
						modifier = "scorched_planetoid"
						days = -1
					}
					clear_deposits = yes
					add_deposit = d_engineering_3
					set_planet_flag = "deposit_spawned"
				}
			}
			set_planet_flag = starting_research_target
			set_planet_flag = starting_deposit
			solar_system = { set_star_flag = engineering_deposit_spawned }
		}
	}
	if = {
		limit = { solar_system = { NOR = { has_star_flag = "reserach_deposit_spawned" has_star_flag = "engineering_deposit_spawned" }}}
		random_system_planet = { # Finally society
			limit = { is_rocky_greenhouse_planet = yes }
			if = {
				limit = { has_modifier = scorched_planetoid }
				remove_modifier = scorched_planetoid
			}
			if = {
				limit = { has_modifier = exploitable_planetoid }
				remove_modifier = exploitable_planetoid
			}
			if = {
				limit = { has_modifier = ice_planetoid }
				remove_modifier = ice_planetoid
			}
			if = {
				limit = { has_modifier = ringed_planet }
				remove_modifier = ringed_planet
				set_ring = no
			}
			add_modifier = {
				modifier = "extremophile_environment"
				days = -1
			}
			random_list = {
				0 = {
					modifier = { add = 1 planet_size < 15 }
					clear_deposits = yes
					add_deposit = d_society_2
					set_planet_flag = "deposit_spawned"
				}
				0 = {
					modifier = { add = 1 planet_size > 14 planet_size < 20 }
					clear_deposits = yes
					add_deposit = d_society_3
					set_planet_flag = "deposit_spawned"
				}
				0 = {
					modifier = { add = 1 planet_size > 19 }
					clear_deposits = yes
					add_deposit = d_society_4
					set_planet_flag = "deposit_spawned"
				}
			}
			set_planet_flag = starting_research_target
			set_planet_flag = starting_deposit
		}
	}
	
}