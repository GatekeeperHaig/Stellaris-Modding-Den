##########################################################################
# Decisions
##########################################################################

# Adapted Environment
decision_engineered_environment = {
	icon = decision_engineered_environment
	owned_planets_only = yes
	
	prerequisites = {
		"tech_terrestrial_sculpting"		
	}

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 50
			energy = 2500
		}
	}
	
	potential = {
		habitable_structure = no
		NOT = { is_planet_class = pc_gaia }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_archive }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_tmhab }
		NOT = { is_planet_class = pc_tmhab2 }
		NOT = { is_planet_class = pc_mmhab }
		NOT = { is_planet_class = pc_mmhab2 }
		NOT = { is_planet_class = pc_bhab }
		NOT = { is_planet_class = pc_bchab }
		NOT = { is_planet_class = pc_gghab }
		NOT = { is_planet_class = pc_mhab }
		NOT = { is_planet_class = pc_fhab }
		NOT = { has_modifier = engineered_environment }
		NOT = { has_modifier = engineered_environment_gaia }
	}

	effect = {
		add_modifier = {
			modifier = engineered_environment
			days = -1
		}
		if = {
			limit = { has_modifier = bleak_planet }
			remove_modifier = bleak_planet
		}
		if = {
			limit = { has_modifier = high_gravity }
			remove_modifier = high_gravity
		}
		if = {
			limit = { has_modifier = irradiated_planet }
			remove_modifier = irradiated_planet
		}
		if = {
			limit = { has_modifier = mineral_poor }
			remove_modifier = mineral_poor
		}
		if = {
			limit = { has_modifier = unstable_tectonics }
			remove_modifier = unstable_tectonics
		}
		if = {
			limit = { has_modifier = weak_magnetic_field }
			remove_modifier = weak_magnetic_field
		}
		if = {
			limit = { has_modifier = exofungus }
			remove_modifier = exofungus
		}
	}    
	
	ai_weight = {
        weight = 1
        modifier = {
            factor = 0
            or = {
                free_building_slots > 0
                owner = {
                    or = {
                        resource_stockpile_compare = { resource = energy value < 6000 } 
                        resource_stockpile_compare = { resource = influence value < 150 }
                     } }
            }
        }
    }
}

# Adapted Environment Gaia
decision_engineered_environment_gaia = {
	icon = decision_engineered_environment_gaia
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 50
			energy = 5000
		}
	}
	
	potential = {
		habitable_structure = no
		NOT = { is_planet_class = pc_gaia }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_archive }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_tmhab }
		NOT = { is_planet_class = pc_tmhab2 }
		NOT = { is_planet_class = pc_mmhab }
		NOT = { is_planet_class = pc_mmhab2 }
		NOT = { is_planet_class = pc_bhab }
		NOT = { is_planet_class = pc_bchab }
		NOT = { is_planet_class = pc_gghab }
		NOT = { is_planet_class = pc_mhab }
		NOT = { is_planet_class = pc_fhab }
		has_modifier = engineered_environment
		owner = { has_ascension_perk = ap_world_shaper }
	}

	effect = {
		add_modifier = {
			modifier = engineered_environment_gaia
			days = -1
		}
		hidden_effect = {
			remove_modifier = engineered_environment
		}
	}   
	
	ai_weight = {
        weight = 1
        modifier = {
            factor = 0
            or = {
                free_building_slots > 0
                owner = {
                    or = {
                        resource_stockpile_compare = { resource = energy value < 6000 } 
                        resource_stockpile_compare = { resource = influence value < 150 }
                     } }
            }
        }
    }
}

# Any Planet to Radiotrophic
decision_radiotrophic = {
	icon = decision_radiotrophic
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			energy = 2000
			sr_rad_bloom = 500
		}
	}
	
	potential = {
		habitable_structure = no
		owner = { 
			any_owned_planet = { is_planet_class = pc_irradiated }
		}
	}

	effect = {
		change_pc = pc_irradiated
		
		hidden_effect = {
			remove_modifier = radiotrophic
			add_modifier = {
				modifier = radiotrophic
				days = -1
			}
			add_deposit = d_rad_blooms
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

#Coloinze Ocean Worlds
decision_aquaticliving = {
	icon = decision_aquaticliving

	resources = {
		category = decisions
		cost = { }
	}
	
	potential = {
		space_owner = { has_trait = trait_pc_aquatic_preference }
		OR = {
			is_planet_class = pc_ocean
			is_planet_class = pc_desertislands
			is_planet_class = pc_subarctic
			is_planet_class = pc_continental
			is_planet_class = pc_forest
			is_planet_class = pc_tropical
			is_planet_class = pc_cascadian
			is_planet_class = pc_mangrove
			is_planet_class = pc_hajungle
			is_planet_class = pc_retinal
		}
	}

	effect = {
		planet = {
			#Temp
			IF = { limit = { is_planet_class = pc_ocean } change_pc = pc_aquatic set_planet_entity = { entity = "ocean_planet_01_entity" } 	set_planet_flag = pdaquaocean }
			IF = { limit = { is_planet_class = pc_continental } change_pc = pc_aquatic set_planet_entity = { entity = "continental_planet_01_entity" } set_planet_flag = pdaquacontinental }
			IF = { limit = { is_planet_class = pc_forest } change_pc = pc_aquatic set_planet_entity = { entity = "forest_planet_01_entity" } set_planet_flag = pdaquaforest }
			IF = { limit = { is_planet_class = pc_cascadian } change_pc = pc_aquatic set_planet_entity = { entity = "cascadian_planet_01_entity" } set_planet_flag = pdaquacascadian }
			IF = { limit = { is_planet_class = pc_retinal } change_pc = pc_aquatic set_planet_entity = { entity = "retinal_planet_01_entity" } set_planet_flag = pdaquaretinal }
			#Cold
			IF = { limit = { is_planet_class = pc_subarctic } change_pc = pc_aquatic set_planet_entity = { entity = "subarctic_planet_01_entity" picture = pc_aquaticcold } set_planet_flag = pdaquacrag	}	
			#Tropical
			IF = { limit = { is_planet_class = pc_desertislands } change_pc = pc_aquatic set_planet_entity = { entity = "desertislands_planet_01_entity" picture = pc_aquatichot } set_planet_flag = pdaquaatoll }
			IF = { limit = { is_planet_class = pc_tropical } change_pc = pc_aquatic set_planet_entity = { entity = "tropical_planet_01_entity" picture = pc_aquatichot } set_planet_flag = pdaquatropical }
			IF = { limit = { is_planet_class = pc_mangrove } change_pc = pc_aquatic set_planet_entity = { entity = "mangrove_planet_01_entity" picture = pc_aquatichot } set_planet_flag = pdaquamangrove }
			IF = { limit = { is_planet_class = pc_hajungle } change_pc = pc_aquatic set_planet_entity = { entity = "hajungle_planet_01_entity" picture = pc_aquatichot } set_planet_flag = pdaquahajungle }
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}
