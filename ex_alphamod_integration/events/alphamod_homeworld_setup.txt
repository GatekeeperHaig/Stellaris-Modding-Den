namespace = homeworld_setup

planet_event = {
	id = homeworld_setup.1
	hide_window = yes

	is_triggered_only = false
	
	trigger = {
		is_homeworld = yes
		not = { has_planet_flag = giftsonature1 }
		has_owner = yes
		num_pops > 0
	}
	
	immediate = {
		set_planet_flag = giftsonature1
		
		if = {
			limit = {
				planet_size < 20
			}
			change_planet_size = 3
		}
		
		if = {
			limit = {
				has_owner = yes
				owner = {
					is_country_type = default
					not = { has_authority = auth_machine_intelligence }
					not = { has_authority = auth_ancient_machine_intelligence }
				}
			}
			
			random_tile = {
				limit = { 
					not = { has_building = yes } 
					not = { has_blocker = yes } 
					not = { has_resource = energy }
					not = { has_resource = minerals }
					not = { has_resource = food }
					not = { has_resource = engineering_research }
					not = { has_resource = society_research }
					not = { has_resource = physics_research }				
				}
				set_building = "building_large_city"
				set_deposit = d_megacity_deposit
			}
			random_tile = {
				limit = { 
					not = { has_building = yes } 
					not = { has_blocker = yes } 
					not = { has_resource = energy }
					not = { has_resource = minerals }
					not = { has_resource = food }
					not = { has_resource = engineering_research }
					not = { has_resource = society_research }
					not = { has_resource = physics_research }				
				}
				set_building = "building_large_city"
				set_deposit = d_megacity_deposit
			}
		}
		
		random_tile = {
			limit = {
				not = { has_building = yes }
				not = { has_building_construction = yes }
				not = { has_resource = energy }
				not = { has_resource = minerals }
				not = { has_resource = food }
				not = { has_resource = engineering_research }
				not = { has_resource = society_research }
				not = { has_resource = physics_research }
			}
			set_deposit = d_fuels_and_energy_deposit
		}
		random_tile = {
			limit = {
				not = { has_building = yes }
				not = { has_building_construction = yes }
				not = { has_resource = energy }
				not = { has_resource = minerals }
				not = { has_resource = food }
				not = { has_resource = engineering_research }
				not = { has_resource = society_research }
				not = { has_resource = physics_research }
			}
			set_deposit = d_actinides_and_minerals_deposit
		}
		random_tile = {
			limit = {
				has_blocker = yes
				has_resource = food
			}
			clear_deposits = yes
			set_deposit = d_food_and_water_deposit
		}
	}
}