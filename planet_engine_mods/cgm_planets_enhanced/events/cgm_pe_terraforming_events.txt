namespace = cgm_terraforming

planet_event = { #this fires on the on_terraforming_begun on action trigger, flagging a planet with its type. 
	id = cgm_terraforming.0
	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		if = { limit = { is_planet_class = pc_desert } set_planet_flag = terraforming_from_pc_desert } 
		if = { limit = { is_planet_class = pc_tropical } set_planet_flag = terraforming_from_pc_tropical } 
		if = { limit = { is_planet_class = pc_arid } set_planet_flag = terraforming_from_pc_arid } 
		if = { limit = { is_planet_class = pc_continental } set_planet_flag = terraforming_from_pc_continental } 
		if = { limit = { is_planet_class = pc_ocean } set_planet_flag = terraforming_from_pc_ocean } 
		if = { limit = { is_planet_class = pc_tundra } set_planet_flag = terraforming_from_pc_tundra } 
		if = { limit = { is_planet_class = pc_arctic } set_planet_flag = terraforming_from_pc_arctic } 
		if = { limit = { is_planet_class = pc_alpine } set_planet_flag = terraforming_from_pc_alpine } 
		if = { limit = { is_planet_class = pc_savannah } set_planet_flag = terraforming_from_pc_savannah } 
		if = { limit = { is_planet_class = pc_gaia } set_planet_flag = terraforming_from_pc_gaia } 
		if = { limit = { is_planet_class = pc_nuked } set_planet_flag = terraforming_from_pc_nuked } 
		if = { limit = { is_planet_class = pc_machine } set_planet_flag = terraforming_from_pc_machine } 
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_tidallylocked = yes } set_planet_flag = terraforming_from_pc_tidallylocked }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_mangrove = yes } set_planet_flag = terraforming_from_pc_mangrove }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_desertislands = yes } set_planet_flag = terraforming_from_pc_desertislands }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_hajungle = yes } set_planet_flag = terraforming_from_pc_hajungle }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_cascadian = yes } set_planet_flag = terraforming_from_pc_cascadian }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_swamp = yes } set_planet_flag = terraforming_from_pc_swamp }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_subarctic = yes } set_planet_flag = terraforming_from_pc_subarctic }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_glacial = yes } set_planet_flag = terraforming_from_pc_glacial }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_geothermal = yes } set_planet_flag = terraforming_from_pc_geothermal }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_sandsea = yes } set_planet_flag = terraforming_from_pc_sandsea }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_mesa = yes } set_planet_flag = terraforming_from_pc_mesa }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_oasis = yes } set_planet_flag = terraforming_from_pc_oasis }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_hadesert = yes } set_planet_flag = terraforming_from_pc_hadesert }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_steppe = yes } set_planet_flag = terraforming_from_pc_steppe }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_frozen_desert = yes } set_planet_flag = terraforming_from_pc_frozen_desert }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_antarctic = yes } set_planet_flag = terraforming_from_pc_antarctic }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_ammonia = yes } set_planet_flag = terraforming_from_pc_ammonia }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_methane = yes } set_planet_flag = terraforming_from_pc_methane }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_crystal = yes } set_planet_flag = terraforming_from_pc_crystal }
		if = { limit = { planetary_diversity_enabled = yes is_planet_class_pc_floating = yes } set_planet_flag = terraforming_from_pc_floating }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_geocrystalline = yes } set_planet_flag = terraforming_from_pc_geocrystalline }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_marginal = yes } set_planet_flag = terraforming_from_pc_marginal }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_irradiated_marginal = yes } set_planet_flag = terraforming_from_pc_irradiated_marginal }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_marginal_cold = yes } set_planet_flag = terraforming_from_pc_marginal_cold }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_greenhouse_cold = yes } set_planet_flag = terraforming_from_pc_greenhouse_cold }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_greenhouse_hot = yes } set_planet_flag = terraforming_from_pc_greenhouse_hot }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_retinal = yes } set_planet_flag = terraforming_from_pc_retinal }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_lush = yes } set_planet_flag = terraforming_from_pc_lush }
		if = { limit = { new_worlds_enabled = yes is_planet_class_pc_irradiated_terrestrial = yes } set_planet_flag = terraforming_from_pc_irradiated_terrestrial }
	}
}

planet_event = {
	id = cgm_terraforming.1
	is_triggered_only = yes
	diplomatic = yes	
	force_open = yes
	title = cgm.terraforming_main_menu.title
	desc = cgm.terraforming_main_menu.desc
	custom_gui = "cgm_terraforming_menu"
	
	picture_event_data = { room = cgm_terraforming_room }

	option = {
		name = terraforming_deep_core_mining.name
		custom_tooltip = terraforming_deep_core_mining.desc
		custom_gui = "cgm_option"
		
		trigger = { 
			root.owner = { has_technology = tech_deep_core_mining_1 }
		}	
		hidden_effect = { 
			set_global_flag = new_building_content_active			
			hidden_effect = { 
				every_country = {
					limit = { 
						OR = {
							is_country_type = default
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}	
					country_event = { id = cgm_building_operations.1 }
				}
				country_event = { id = core_game_mechanics_and_ai_base.1 }
			}	
		}
	}		
}