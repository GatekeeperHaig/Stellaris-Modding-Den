# spawn special tile blockers like planet shields and temples
gpm_spawn_special_blockers = {
	if = {
		limit = { has_modifier = Android_Pleasure_Palace }
		random_tile = {
			limit = {
				AND = {
					has_building = no
					has_pop = no
					num_adjacent_tiles > 3
				}
			}
			if = {
				limit = { has_blocker = yes gpm_has_gpm_special_blocker = no }
				remove_blocker = yes
			}
			clear_deposits = yes
			set_blocker = "gpm_tb_Android_Pleasure_Palace"
		}
	}
	if = {
		limit = { has_modifier = Precursor_Planetary_Shield }
		random_tile = {
			limit = {
				AND = {
					has_building = no
					has_pop = no
					num_adjacent_tiles > 3
				}
			}
			if = {
				limit = { has_blocker = yes gpm_has_gpm_special_blocker = no }
				remove_blocker = yes
			}
			clear_deposits = yes
			set_blocker = "gpm_tb_Precursor_Planetary_Shield"
		}
	}
	if = {
		limit = { has_modifier = Precursor_Capital_Complex }
		random_tile = {
			limit = {
				AND = {
					has_building = no
					has_pop = no
					num_adjacent_tiles > 3
				}
			}
			if = {
				limit = { has_blocker = yes gpm_has_gpm_special_blocker = no }
				remove_blocker = yes
			}
			clear_deposits = yes
			set_blocker = "gpm_tb_Precursor_Capital_Complex"
		}
	}
	if = {
		limit = { has_modifier = Temple_of_the_Ancient_One }
		random_tile = {
			limit = {
				AND = {
					has_building = no
					has_pop = no
					num_adjacent_tiles > 3
				}
			}
			if = {
				limit = { has_blocker = yes gpm_has_gpm_special_blocker = no }
				remove_blocker = yes
			}
			clear_deposits = yes
			set_blocker = "gpm_tb_Temple_of_the_Ancient_One"
		}
	}
}

gpm_spawn_precursor_tileblockers = {
	random_list = {
		70 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_ancient_ruins"
			}
			modifier = { factor = 0 has_blocker = "tb_ancient_ruins" }
			modifier = { factor = 0
				OR = {
					is_planet_class = pc_floating
					is_planet_class = pc_crystal
					is_planet_class = pc_city
				}
			}
			# modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		20 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_ancient_cryo_chambers"
			}
			modifier = { factor = 0 has_blocker = "tb_ancient_cryo_chambers" }
			modifier = { factor = 0
				OR = {
					is_planet_class = pc_floating
					is_planet_class = pc_crystal
					is_planet_class = pc_city
				}
			}
			# modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_crater"
			}
			modifier = { factor = 0 has_blocker = "tb_crater" }
			modifier = { factor = 0
				OR = {
					is_planet_class = pc_floating
					is_planet_class = pc_crystal
					is_planet_class = pc_city
				}
			}
			# modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
	}
}

# Spawn tile blockers based on modifiers. 
gpm_spawn_tile_blockers = {
	# gpm_tb_Precursor_Planetary_Shield
	# gpm_tb_Precursor_Capital_Complex
	# gpm_tb_Android_Pleasure_Palace
	# gpm_tb_Temple_of_the_Ancient_One
	# gpm_tb_Ruined_Battlefield
	# gpm_tb_Spaceship_Graveyard
	# gpm_tb_Toxic_Gas
	# gpm_tb_Unusual_Formations
	# gpm_tb_Locust_Plagues
	# gpm_tb_Seasonal_Flooding
	# gpm_tb_Ice_Flora
	# gpm_tb_Planetwide_Forest
	# gpm_tb_Dense_Forests
	# gpm_tb_Proto_Forests
	# gpm_tb_Arachnophobia
	# gpm_tb_Dunes
	# gpm_tb_Mushroom_Forest
	# gpm_tb_Floating_Rocks
	# gpm_tb_Oasis
	
	if = { limit = { has_modifier = "Ruined_Battlefield" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Ruined_Battlefield" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Ruined_Battlefield"
		}
	}
	if = { limit = { has_modifier = "Spaceship_Graveyard" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Spaceship_Graveyard" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Spaceship_Graveyard"
		}
	}
	if = { limit = { has_modifier = "Toxic_Gas" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Toxic_Gas" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Toxic_Gas"
		}
	}
	if = { limit = { has_modifier = "Unusual_Formations" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Unusual_Formations" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Unusual_Formations"
		}
	}
	if = { limit = { has_modifier = "Locust_Plagues" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Locust_Plagues" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Locust_Plagues"
		}
	}
	if = { limit = { has_modifier = "Seasonal_Flooding" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Seasonal_Flooding" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Seasonal_Flooding"
		}
	}
	if = { limit = { has_modifier = "Ice_Flora" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Ice_Flora" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Ice_Flora"
		}
	}
	if = { limit = { has_modifier = "Planetwide_Forest" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Planetwide_Forest" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			
			set_blocker = "gpm_tb_Planetwide_Forest"
		}
	}
	if = { limit = { has_modifier = "Dense_Forests" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Dense_Forests" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Dense_Forests"
		}
	}
	if = { limit = { has_modifier = "Proto_Forests" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Proto_Forests" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Proto_Forests"
		}
	}
	if = { limit = { has_modifier = "Arachnophobia" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Arachnophobia" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Arachnophobia"
		}
	}
	if = { limit = { has_modifier = "Dunes" }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Dunes" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Dunes"
		}
	}
	if = { limit = { OR = { has_modifier = "Mushroom_Forest" is_planet_class = pc_mushroom } }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Mushroom_Forest" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Mushroom_Forest"
		}
	}
	if = { limit = { OR = { has_modifier = "Floating_Islands" is_planet_class = pc_floating } }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Floating_Rocks" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Floating_Rocks"
		}
	}
	if = { limit = { OR = { has_modifier = "Ancient_Temple" has_modifier = "Temple_of_the_Ancient_One"  } }
		random_tile = {
			limit = {
				NOT = { has_blocker = "gpm_tb_Ancient_Temple" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "gpm_tb_Ancient_Temple"
		}
	}
	if = { limit = { OR = { has_modifier = "asteroid_impacts" has_modifier = "asteroid_impacts_2" is_planet_class = pc_nuked } }
		random_tile = {
			limit = {
				NOT = { has_blocker = "tb_crater" }
				gpm_has_gpm_special_blocker = no
				has_pop = no
				has_building = no
				OR = {
					AND = {
						has_blocker = yes
						OR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes }
					}
					has_blocker = no
				}
			}
			if = { limit = { has_blocker = yes } remove_blocker = yes }
			set_blocker = "tb_crater"
		}
	}
	# Easter egg elowiny tileblocker
	# random_tile = {
		# limit = { NOR = { has_modifier = "Arachnophobia" gpm_has_gpm_special_blocker = no has_building = no has_pop = no } }
		# random_list = {
			# 999999 = { }
			# 1 = { remove_blocker = yes set_blocker = "gpm_tb_Elowiny_Blocker" }
		# }
	# }
}

# We spawn a few more vanilla tileblockers
gpm_spawn_vanilla_tileblockers = {
	random_list = {
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_mountain_range"
			}
			modifier = { factor = 0 has_blocker = "tb_mountain_range" }
			modifier = { factor = 0
				OR = {
					is_planet_class = pc_floating
					is_planet_class = pc_crystal
					is_planet_class = pc_city
				}
			}
			modifier = { factor = 2 is_planet_class = pc_alpine }
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_active_volcano"
			}
			modifier = { factor = 0 has_blocker = "tb_active_volcano" }
			modifier = { factor = 0
				OR = {
					is_planet_class = pc_floating
					is_planet_class = pc_crystal
					is_planet_class = pc_city
				}
			}
			modifier = { factor = 2
				OR = {
					is_planet_class = pc_alpine
					is_planet_class = pc_hajungle
					is_planet_class = pc_steppe
					is_planet_class = pc_hadesert
					is_planet_class = pc_antarctic
					is_planet_class = pc_cascadian
					is_planet_class = pc_crystal
					is_planet_class = pc_city
				}
			}
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_dangerous_wildlife"
			}
			modifier = { factor = 0 has_blocker = "tb_dangerous_wildlife" }
			modifier = { factor = 2 
				OR = {
					has_modifier = "dangerous_wildlife" 
					has_modifier = "Titanic_Predators" 
					has_modifier = "Ruined_Battlefield" 
					has_modifier = "Living_Planet" 
					has_modifier = "Hiveworld" 
					has_modifier = "Furry_Packs" 
					has_modifier = "Abominable_Predators" 
				}
			}
			modifier = { factor = 0 is_planet_class = pc_city }
			modifier = { factor = 3 has_modifier = "titanic_life" }
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_dense_jungle"
			}
			modifier = { factor = 0 has_blocker = "tb_dense_jungle" }
			modifier = { factor = 3.6
				OR = {
					is_planet_class = pc_tropical
					is_planet_class = pc_mangrove
					is_planet_class = pc_hajungle
				}
			}
			modifier = { factor = 2.1
				OR = {
					is_planet_class = pc_continental
					is_planet_class = pc_swamp
					is_planet_class = pc_geothermal
				}
			}
			
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_quicksand_basin"
			}
			modifier = { factor = 0 has_blocker = "tb_quicksand_basin" }
			modifier = { factor = 3.6
				OR = {
					is_planet_class = pc_desert
					is_planet_class = pc_sandsea
					is_planet_class = pc_savannah
				}
			}
			modifier = { factor = 2.1
				OR = {
					is_planet_class = pc_steppe
					is_planet_class = pc_frozen_desert
					is_planet_class = pc_arid
					is_planet_class = pc_oasis
					is_planet_class = pc_mesa
				}
			}
			
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_noxious_swamp"
			}
			modifier = { factor = 0 has_blocker = "tb_noxious_swamp" }
			modifier = { factor = 3.6
				OR = {
					is_planet_class = pc_tundra
					is_planet_class = pc_mangrove
					is_planet_class = pc_swamp
				}
			}
			modifier = { factor = 1.8
				OR = {
					is_planet_class = pc_tropical
					is_planet_class = pc_desertislands
				}
			}
			
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_massive_glacier"
			}
			modifier = { factor = 0 has_blocker = "tb_massive_glacier" }
			modifier = { factor = 3.6
				OR = {
					is_planet_class = pc_arctic
					is_planet_class = pc_glacial
					is_planet_class = pc_alpine
					is_planet_class = pc_subarctic
					is_planet_class = pc_antarctic
				}
			}
			modifier = { factor = 1.8
				OR = {
					is_planet_class = pc_tundra
					is_planet_class = pc_cascadian
					is_planet_class = pc_geothermal
				}
			}
			
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_toxic_kelp"
			}
			modifier = { factor = 0 has_blocker = "tb_toxic_kelp" }
			modifier = { factor = 5.4
				OR = {
					is_planet_class = pc_ocean
					is_planet_class = pc_desertislands
				}
			}
			modifier = { factor = 2.0
				OR = {
					is_planet_class = pc_continental
					is_planet_class = pc_subarctic
				}
			}
			
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
		10 = {
			random_tile = {
				if = { limit = { has_blocker = yes } remove_blocker = yes }
				set_blocker = "tb_deep_sinkhole"
			}
			modifier = { factor = 0 has_blocker = "tb_deep_sinkhole" }
			modifier = { factor = 3.6 is_planet_class = pc_arid	}
			modifier = { factor = 2.0
				OR = {
					is_planet_class = pc_sandsea
					is_planet_class = pc_mesa
					is_planet_class = pc_oasis
					is_planet_class = pc_frozen_desert
					is_planet_class = pc_antarctic
					is_planet_class = pc_savannah
					is_planet_class = pc_desert
				}
			}
			
			modifier = { factor = 0.25 planet_size > 16 }
			modifier = { factor = 0 is_colonizable = no }
			modifier = { factor = 0 has_pop = yes }
			modifier = { factor = 0 has_building = yes }
			modifier = { factor = 0 gpm_has_gpm_special_blocker = yes }
			modifier = { factor = 0 NOR = { has_regular_vanilla_blocker = yes gpm_has_gpm_blocker = yes has_blocker = yes } }
		}
	}
}


gpm_cleanup_tileblockers = {
	# Check to see if there are no free tiles. If there aren't any, remove 3 random ones. 
	if = {
		limit = {
			count_tile = {
				limit = { has_blocker = no has_pop = no has_building = no }
				count < 3
			}
		}
		while = {
			count = 2
			random_tile = {
				limit = { has_blocker = yes gpm_has_gpm_blocker = yes }
				remove_blocker = yes
			}
		}
		# Remove another 2 if the planet is bigger than 15 tiles.
		if = {
			limit = {
				planet_size > 15
			}
			while = {
				count = 1
				random_tile = {
					limit = { has_blocker = yes gpm_has_gpm_blocker = yes }
					remove_blocker = yes
				}
			}
			# Remove another 2 if the planet is bigger than 20 tiles.
			if = {
				limit = {
					planet_size > 20
				}
				while = {
					count = 1
					random_tile = {
						limit = { has_blocker = yes gpm_has_gpm_blocker = yes }
						remove_blocker = yes
					}
				}
			}
		}
	}
}

# To spawn special blockers after terraforming world with special modifier. Ensures the blockers are pressent. 
gpm_spawn_planet_wonders_desert = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Gargantuan_Sinkhole" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_arid = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Discharging_Field" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_savannah = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Giant_Trees" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_tropical = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Crystal_Jungle" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_continental = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Floating_Islands" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_ocean = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Amoeba_Sea" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_arctic = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Glass_Towers" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_alpine = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Howling_Peaks" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_tundra = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Mega_Fungi" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_gaia = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Energy_Storm" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_nuked = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			16 = { set_blocker = "gpm_tb_Forgotten_Deposit" }
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			1 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			1 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}
gpm_spawn_planet_wonders_any = {
	random_tile = {
		limit = { AND = { has_building = no	has_pop = no num_adjacent_tiles > 3 } }
		if = { limit = { has_blocker = yes } remove_blocker = yes }
		clear_deposits = yes
		random_list = {
			2 = { set_blocker = "gpm_tb_Titanic_Cave" }
			2 = { set_blocker = "gpm_tb_Abandoned_Stargate" }
			2 = { set_blocker = "gpm_tb_Bioluminescent_Forest" }
			2 = { set_blocker = "gpm_tb_Land_Reefs" }
			2 = { set_blocker = "gpm_tb_Lava_Lake" }
			2 = { set_blocker = "gpm_tb_Collapsed_Habitat" }
			2 = { set_blocker = "gpm_tb_Ruined_Arcology" }
		}
	}
}












