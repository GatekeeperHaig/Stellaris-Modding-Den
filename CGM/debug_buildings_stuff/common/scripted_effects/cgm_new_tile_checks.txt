 # This file was created by script!
 # Instead of editing it, you should change the python script.
 # Changes to the file will be overwritten the next time the script is run.
calculate_tile_weight = {
	prev = {
		set_variable = { which = energy_weight value = 3 }
		log = "Starting with energy. Initial weight [this.energy_weight]"
	}
	if = {
		limit = {
			has_resource = { type = energy amount > 0 }
		}
		check_energy_deposit = yes
		log = "Non empty tile regarding energy. New weight [this.energy_weight]"
	}
	prev = {
		set_variable = { which = minerals_weight value = 3 }
		log = "Starting with minerals. Initial weight [this.minerals_weight]"
	}
	if = {
		limit = {
			has_resource = { type = minerals amount > 0 }
		}
		check_minerals_deposit = yes
		log = "Non empty tile regarding minerals. New weight [this.minerals_weight]"
	}
	prev = {
		set_variable = { which = food_weight value = 3 }
		log = "Starting with food. Initial weight [this.food_weight]"
	}
	if = {
		limit = {
			has_resource = { type = food amount > 0 }
		}
		check_food_deposit = yes
		log = "Non empty tile regarding food. New weight [this.food_weight]"
	}
	prev = {
		set_variable = { which = unity_weight value = 0 }
		 #Unity is later subtracted from other weights on this tile as we build unity on the 'worst' tile. Thus it must not have a base value
		log = "Starting with unity. Initial weight [this.unity_weight]"
	}
	if = {
		limit = {
			has_resource = { type = unity amount > 0 }
		}
		check_unity_deposit = yes
		log = "Non empty tile regarding unity. New weight [this.unity_weight]"
	}
	prev = {
		set_variable = { which = society_research_weight value = 3 }
		log = "Starting with society_research. Initial weight [this.society_research_weight]"
	}
	if = {
		limit = {
			has_resource = { type = society_research amount > 0 }
		}
		check_society_research_deposit = yes
		log = "Non empty tile regarding society_research. New weight [this.society_research_weight]"
	}
	prev = {
		set_variable = { which = physics_research_weight value = 3 }
		log = "Starting with physics_research. Initial weight [this.physics_research_weight]"
	}
	if = {
		limit = {
			has_resource = { type = physics_research amount > 0 }
		}
		check_physics_research_deposit = yes
		log = "Non empty tile regarding physics_research. New weight [this.physics_research_weight]"
	}
	prev = {
		set_variable = { which = engineering_research_weight value = 3 }
		log = "Starting with engineering_research. Initial weight [this.engineering_research_weight]"
	}
	if = {
		limit = {
			has_resource = { type = engineering_research amount > 0 }
		}
		check_engineering_research_deposit = yes
		log = "Non empty tile regarding engineering_research. New weight [this.engineering_research_weight]"
	}
	prev = {
		set_variable = { which = energy_adjacency_weight value = 0 }
	}
	check_energy_adjacency = yes
	prev = {
		set_variable = { which = minerals_adjacency_weight value = 0 }
	}
	check_minerals_adjacency = yes
	prev = {
		set_variable = { which = food_adjacency_weight value = 0 }
	}
	check_food_adjacency = yes
	prev = {
		set_variable = { which = society_research_adjacency_weight value = 0 }
	}
	check_society_research_adjacency = yes
	prev = {
		set_variable = { which = physics_research_adjacency_weight value = 0 }
	}
	check_physics_research_adjacency = yes
	prev = {
		set_variable = { which = engineering_research_adjacency_weight value = 0 }
	}
	check_engineering_research_adjacency = yes
	log = "After adjacency stuff: energy: [prev.energy_weight]"
	log = "After adjacency stuff: minerals: [prev.minerals_weight]"
	log = "After adjacency stuff: food: [prev.food_weight]"
	log = "After adjacency stuff: unity: [prev.unity_weight]"
	log = "After adjacency stuff: society_research: [prev.society_research_weight]"
	log = "After adjacency stuff: physics_research: [prev.physics_research_weight]"
	log = "After adjacency stuff: engineering_research: [prev.engineering_research_weight]"
	check_neighboring_adj_bonus_buildings = yes
	log = "After neighbors stuff: energy: [prev.energy_weight]"
	log = "After neighbors stuff: minerals: [prev.minerals_weight]"
	log = "After neighbors stuff: food: [prev.food_weight]"
	log = "After neighbors stuff: unity: [prev.unity_weight]"
	log = "After neighbors stuff: society_research: [prev.society_research_weight]"
	log = "After neighbors stuff: physics_research: [prev.physics_research_weight]"
	log = "After neighbors stuff: engineering_research: [prev.engineering_research_weight]"
	check_adj_bonus_blockers = yes
	log = "After blockers stuff (final): energy: [prev.energy_weight]"
	log = "After blockers stuff (final): minerals: [prev.minerals_weight]"
	log = "After blockers stuff (final): food: [prev.food_weight]"
	log = "After blockers stuff (final): unity: [prev.unity_weight]"
	log = "After blockers stuff (final): society_research: [prev.society_research_weight]"
	log = "After blockers stuff (final): physics_research: [prev.physics_research_weight]"
	log = "After blockers stuff (final): engineering_research: [prev.engineering_research_weight]"
}
check_energy_deposit = {
	if = {
		limit = {
			has_resource = { type = energy amount = 1 }
		}
		prev = {
			change_variable = { which = energy_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = energy amount = 2 }
			}
			prev = {
				change_variable = { which = energy_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = energy amount = 3 }
				}
				prev = {
					change_variable = { which = energy_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = energy amount = 4 }
					}
					prev = {
						change_variable = { which = energy_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = energy amount = 5 }
						}
						prev = {
							change_variable = { which = energy_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = energy amount = 6 }
							}
							prev = {
								change_variable = { which = energy_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = energy amount = 7 }
								}
								prev = {
									change_variable = { which = energy_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = energy amount = 8 }
									}
									prev = {
										change_variable = { which = energy_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = energy amount = 9 }
										}
										prev = {
											change_variable = { which = energy_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_minerals_deposit = {
	if = {
		limit = {
			has_resource = { type = minerals amount = 1 }
		}
		prev = {
			change_variable = { which = minerals_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = minerals amount = 2 }
			}
			prev = {
				change_variable = { which = minerals_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = minerals amount = 3 }
				}
				prev = {
					change_variable = { which = minerals_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = minerals amount = 4 }
					}
					prev = {
						change_variable = { which = minerals_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = minerals amount = 5 }
						}
						prev = {
							change_variable = { which = minerals_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = minerals amount = 6 }
							}
							prev = {
								change_variable = { which = minerals_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = minerals amount = 7 }
								}
								prev = {
									change_variable = { which = minerals_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = minerals amount = 8 }
									}
									prev = {
										change_variable = { which = minerals_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = minerals amount = 9 }
										}
										prev = {
											change_variable = { which = minerals_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_food_deposit = {
	if = {
		limit = {
			has_resource = { type = food amount = 1 }
		}
		prev = {
			change_variable = { which = food_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = food amount = 2 }
			}
			prev = {
				change_variable = { which = food_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = food amount = 3 }
				}
				prev = {
					change_variable = { which = food_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = food amount = 4 }
					}
					prev = {
						change_variable = { which = food_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = food amount = 5 }
						}
						prev = {
							change_variable = { which = food_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = food amount = 6 }
							}
							prev = {
								change_variable = { which = food_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = food amount = 7 }
								}
								prev = {
									change_variable = { which = food_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = food amount = 8 }
									}
									prev = {
										change_variable = { which = food_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = food amount = 9 }
										}
										prev = {
											change_variable = { which = food_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_unity_deposit = {
	if = {
		limit = {
			has_resource = { type = unity amount = 1 }
		}
		prev = {
			change_variable = { which = unity_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = unity amount = 2 }
			}
			prev = {
				change_variable = { which = unity_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = unity amount = 3 }
				}
				prev = {
					change_variable = { which = unity_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = unity amount = 4 }
					}
					prev = {
						change_variable = { which = unity_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = unity amount = 5 }
						}
						prev = {
							change_variable = { which = unity_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = unity amount = 6 }
							}
							prev = {
								change_variable = { which = unity_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = unity amount = 7 }
								}
								prev = {
									change_variable = { which = unity_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = unity amount = 8 }
									}
									prev = {
										change_variable = { which = unity_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = unity amount = 9 }
										}
										prev = {
											change_variable = { which = unity_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_society_research_deposit = {
	if = {
		limit = {
			has_resource = { type = society_research amount = 1 }
		}
		prev = {
			change_variable = { which = society_research_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = society_research amount = 2 }
			}
			prev = {
				change_variable = { which = society_research_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = society_research amount = 3 }
				}
				prev = {
					change_variable = { which = society_research_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = society_research amount = 4 }
					}
					prev = {
						change_variable = { which = society_research_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = society_research amount = 5 }
						}
						prev = {
							change_variable = { which = society_research_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = society_research amount = 6 }
							}
							prev = {
								change_variable = { which = society_research_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = society_research amount = 7 }
								}
								prev = {
									change_variable = { which = society_research_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = society_research amount = 8 }
									}
									prev = {
										change_variable = { which = society_research_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = society_research amount = 9 }
										}
										prev = {
											change_variable = { which = society_research_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_physics_research_deposit = {
	if = {
		limit = {
			has_resource = { type = physics_research amount = 1 }
		}
		prev = {
			change_variable = { which = physics_research_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = physics_research amount = 2 }
			}
			prev = {
				change_variable = { which = physics_research_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = physics_research amount = 3 }
				}
				prev = {
					change_variable = { which = physics_research_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = physics_research amount = 4 }
					}
					prev = {
						change_variable = { which = physics_research_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = physics_research amount = 5 }
						}
						prev = {
							change_variable = { which = physics_research_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = physics_research amount = 6 }
							}
							prev = {
								change_variable = { which = physics_research_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = physics_research amount = 7 }
								}
								prev = {
									change_variable = { which = physics_research_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = physics_research amount = 8 }
									}
									prev = {
										change_variable = { which = physics_research_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = physics_research amount = 9 }
										}
										prev = {
											change_variable = { which = physics_research_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_engineering_research_deposit = {
	if = {
		limit = {
			has_resource = { type = engineering_research amount = 1 }
		}
		prev = {
			change_variable = { which = engineering_research_weight value = 2 }
		}
	}
	else = {
		if = {
			limit = {
				has_resource = { type = engineering_research amount = 2 }
			}
			prev = {
				change_variable = { which = engineering_research_weight value = 4 }
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = engineering_research amount = 3 }
				}
				prev = {
					change_variable = { which = engineering_research_weight value = 6 }
				}
			}
			else = {
				if = {
					limit = {
						has_resource = { type = engineering_research amount = 4 }
					}
					prev = {
						change_variable = { which = engineering_research_weight value = 8 }
					}
				}
				else = {
					if = {
						limit = {
							has_resource = { type = engineering_research amount = 5 }
						}
						prev = {
							change_variable = { which = engineering_research_weight value = 10 }
						}
					}
					else = {
						if = {
							limit = {
								has_resource = { type = engineering_research amount = 6 }
							}
							prev = {
								change_variable = { which = engineering_research_weight value = 12 }
							}
						}
						else = {
							if = {
								limit = {
									has_resource = { type = engineering_research amount = 7 }
								}
								prev = {
									change_variable = { which = engineering_research_weight value = 14 }
								}
							}
							else = {
								if = {
									limit = {
										has_resource = { type = engineering_research amount = 8 }
									}
									prev = {
										change_variable = { which = engineering_research_weight value = 16 }
									}
								}
								else = {
									if = {
										limit = {
											has_resource = { type = engineering_research amount = 9 }
										}
										prev = {
											change_variable = { which = engineering_research_weight value = 18 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
check_energy_adjacency = {
	every_neighboring_tile = {
		if = {
			limit = { has_building = yes has_grown_pop = yes }
			if = {
				limit = {
					pop = {
						pop_produces_resource = { type = energy amount > 0 }
					}
				}
				prevprev = {
					change_variable = { which = energy_adjacency_weight value = 3 }
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = energy amount > 0 }
				}
				prevprev = {
					change_variable = { which = energy_adjacency_weight value = 2.5 }
				}
			}
		}
	}
}
check_minerals_adjacency = {
	every_neighboring_tile = {
		if = {
			limit = { has_building = yes has_grown_pop = yes }
			if = {
				limit = {
					pop = {
						pop_produces_resource = { type = minerals amount > 0 }
					}
				}
				prevprev = {
					change_variable = { which = minerals_adjacency_weight value = 3 }
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = minerals amount > 0 }
				}
				prevprev = {
					change_variable = { which = minerals_adjacency_weight value = 2.5 }
				}
			}
		}
	}
}
check_food_adjacency = {
	every_neighboring_tile = {
		if = {
			limit = { has_building = yes has_grown_pop = yes }
			if = {
				limit = {
					pop = {
						pop_produces_resource = { type = food amount > 0 }
					}
				}
				prevprev = {
					change_variable = { which = food_adjacency_weight value = 3 }
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = food amount > 0 }
				}
				prevprev = {
					change_variable = { which = food_adjacency_weight value = 2.5 }
				}
			}
		}
	}
}
check_society_research_adjacency = {
	every_neighboring_tile = {
		if = {
			limit = { has_building = yes has_grown_pop = yes }
			if = {
				limit = {
					pop = {
						pop_produces_resource = { type = society_research amount > 0 }
					}
				}
				prevprev = {
					change_variable = { which = society_research_adjacency_weight value = 3 }
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = society_research amount > 0 }
				}
				prevprev = {
					change_variable = { which = society_research_adjacency_weight value = 2.5 }
				}
			}
		}
	}
}
check_physics_research_adjacency = {
	every_neighboring_tile = {
		if = {
			limit = { has_building = yes has_grown_pop = yes }
			if = {
				limit = {
					pop = {
						pop_produces_resource = { type = physics_research amount > 0 }
					}
				}
				prevprev = {
					change_variable = { which = physics_research_adjacency_weight value = 3 }
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = physics_research amount > 0 }
				}
				prevprev = {
					change_variable = { which = physics_research_adjacency_weight value = 2.5 }
				}
			}
		}
	}
}
check_engineering_research_adjacency = {
	every_neighboring_tile = {
		if = {
			limit = { has_building = yes has_grown_pop = yes }
			if = {
				limit = {
					pop = {
						pop_produces_resource = { type = engineering_research amount > 0 }
					}
				}
				prevprev = {
					change_variable = { which = engineering_research_adjacency_weight value = 3 }
				}
			}
		}
		else = {
			if = {
				limit = {
					has_resource = { type = engineering_research amount > 0 }
				}
				prevprev = {
					change_variable = { which = engineering_research_adjacency_weight value = 2.5 }
				}
			}
		}
	}
}
