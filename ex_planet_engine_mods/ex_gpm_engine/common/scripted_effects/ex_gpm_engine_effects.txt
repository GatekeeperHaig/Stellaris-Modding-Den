remove_regular_planet_modifiers = {
	if = { limit = { has_modifier = hazardous_weather } remove_modifier = hazardous_weather }
	if = { limit = { has_modifier = dangerous_wildlife } remove_modifier = dangerous_wildlife }
	if = { limit = { has_modifier = weak_magnetic_field } remove_modifier = weak_magnetic_field }
	if = { limit = { has_modifier = strong_magnetic_field } remove_modifier = strong_magnetic_field }
	if = { limit = { has_modifier = unstable_tectonics } remove_modifier = unstable_tectonics }
	if = { limit = { has_modifier = tidal_locked } remove_modifier = tidal_locked }
	if = { limit = { has_modifier = chthonian_planet } remove_modifier = chthonian_planet }
	if = { limit = { has_modifier = asteroid_impacts } remove_modifier = asteroid_impacts }
	if = { limit = { has_modifier = extensive_moon_system } remove_modifier = extensive_moon_system }
	if = { limit = { has_modifier = carbon_world } remove_modifier = carbon_world }
	if = { limit = { has_modifier = wild_storms } remove_modifier = wild_storms }
	if = { limit = { has_modifier = low_gravity } remove_modifier = low_gravity }
	if = { limit = { has_modifier = high_gravity } remove_modifier = high_gravity }
	if = { limit = { has_modifier = mineral_rich } remove_modifier = mineral_rich }
	if = { limit = { has_modifier = ultra_rich } remove_modifier = ultra_rich }
	if = { limit = { has_modifier = mineral_poor } remove_modifier = mineral_poor }
	if = { limit = { has_modifier = titanic_life } remove_modifier = titanic_life }
	if = { limit = { has_modifier = asteroid_belt } remove_modifier = asteroid_belt }
	if = { limit = { has_modifier = natural_beauty } remove_modifier = natural_beauty }
	if = { limit = { has_modifier = atmospheric_aphrodisiac } remove_modifier = atmospheric_aphrodisiac }
	if = { limit = { has_modifier = atmospheric_hallucinogen } remove_modifier = atmospheric_hallucinogen }
	if = { limit = { has_modifier = lush_planet } remove_modifier = lush_planet }
	if = { limit = { has_modifier = bleak_planet } remove_modifier = bleak_planet }
	if = { limit = { has_modifier = irradiated_planet } remove_modifier = irradiated_planet }
}
	
check_other_modifiers = {
	if = { limit = { num_modifiers = 1 } change_variable = { which = other_pm_points value = 1 } break = yes }
	if = { limit = { num_modifiers = 2 } change_variable = { which = other_pm_points value = 2 } break = yes }
	if = { limit = { num_modifiers = 3 } change_variable = { which = other_pm_points value = 3 } break = yes }
	if = { limit = { num_modifiers = 4 } change_variable = { which = other_pm_points value = 4 } break = yes }
	if = { limit = { num_modifiers = 5 } change_variable = { which = other_pm_points value = 5 } break = yes }
	if = { limit = { num_modifiers = 6 } change_variable = { which = other_pm_points value = 6 } break = yes }
	if = { limit = { num_modifiers = 7 } change_variable = { which = other_pm_points value = 7 } break = yes }
	if = { limit = { num_modifiers = 8 } change_variable = { which = other_pm_points value = 8 } break = yes }
	if = { limit = { num_modifiers = 9 } change_variable = { which = other_pm_points value = 9 } break = yes }
	if = { limit = { num_modifiers = 10 } change_variable = { which = other_pm_points value = 10 } break = yes }
}	

roll_pm_points = {
	if = { #stars only 					
		limit = { is_star = yes	} 
		random_list = { #0.33 = x*1 + x/3 *2	
			73.33 = { break = yes } #keep the value at 0
			20 = { change_variable = { which = pm_points value = 1 } }
			6.66 = { change_variable = { which = pm_points value = 2 } }
		}	
	}
	if = { 
		limit = { #regular habitable planets only
			is_colonizable = yes
			NOR = {
				is_special_planet = yes
				is_unusual_planet = yes
				is_artificial_habitable_planet = yes
				is_machine_planet = yes
			}	
		} 
		random_list = { #1.5 = x*1 + x/2*2+x/4*3
			21.25 = { break = yes } #keep the value at 0
			45 = { change_variable = { which = pm_points value = 1 } }
			22.5 = { change_variable = { which = pm_points value = 2 } }
			11.25 = { change_variable = { which = pm_points value = 3 } }
		}	
	}	
	if = { 
		limit = { #uninhabitable planets and irregular habitable planets
			OR = {
				AND = {
					is_colonizable = no
					is_star = no
					is_megastructure = no
				}	
				is_special_planet = yes
				is_unusual_planet = yes
				is_artificial_planet = yes
			}	
		} 
		random_list = { #1.2 = x*1 + x/2*2+x/4*3
			37 = { break = yes } #keep the value at 0
			36 = { change_variable = { which = pm_points value = 1 } }
			18 = { change_variable = { which = pm_points value = 2 } }
			9 = { change_variable = { which = pm_points value = 3 } }
		}	
	}				
	if = { 
		limit = { is_machine_planet = yes } 
		random_list = { 
			75 = { break = yes } #keep the value at 0
			25 = { change_variable = { which = pm_points value = 1 } }
		}	
	}							
}	

calculate_pm_points = {
	while = { 
		limit = { check_variable = { which = pm_points value > 0 } }	
		random_list = { #please use the modifier field to make sure stuff is properly balanced
			25 = { 
				change_variable = { which = positive_pm_points value = 1 }
				modifier = { factor = 1 is_star = yes }							
				modifier = { factor = 1 is_regular_uninhabitable_planet = yes }
				modifier = { factor = 1 is_regular_habitable_planet = yes }
				modifier = { factor = 1 is_special_planet = yes }
				modifier = { factor = 1 is_unusual_planet = yes }
				modifier = { factor = 1 is_artificial_planet = yes }
				modifier = { factor = 1 is_machine_planet = yes }					
			}
			25 = { 
				change_variable = { which = neutal_pm_points value = 1 }
				modifier = { factor = 1 is_star = yes }							
				modifier = { factor = 1 is_regular_uninhabitable_planet = yes }
				modifier = { factor = 1 is_regular_habitable_planet = yes }
				modifier = { factor = 1 is_special_planet = yes }
				modifier = { factor = 1 is_unusual_planet = yes }
				modifier = { factor = 1 is_artificial_planet = yes }
				modifier = { factor = 1 is_machine_planet = yes }							
			}
			25 = { 
				change_variable = { which = mixed_pm_points value = 1 }
				modifier = { factor = 1 is_star = yes }							
				modifier = { factor = 1 is_regular_uninhabitable_planet = yes }
				modifier = { factor = 1 is_regular_habitable_planet = yes }
				modifier = { factor = 1 is_special_planet = yes }
				modifier = { factor = 1 is_unusual_planet = yes }
				modifier = { factor = 1 is_artificial_planet = yes }
				modifier = { factor = 1 is_machine_planet = yes }							
			}
			25 = { 
				change_variable = { which = negative_pm_points value = 1 }
				modifier = { factor = 1 is_star = yes }							
				modifier = { factor = 1 is_regular_uninhabitable_planet = yes }
				modifier = { factor = 1 is_regular_habitable_planet = yes }
				modifier = { factor = 1 is_special_planet = yes }
				modifier = { factor = 1 is_unusual_planet = yes }
				modifier = { factor = 1 is_artificial_planet = yes }
				modifier = { factor = 1 is_machine_planet = yes }							
			}
		}	
		change_variable = { which = pm_points value = -1 }
	}	
}	