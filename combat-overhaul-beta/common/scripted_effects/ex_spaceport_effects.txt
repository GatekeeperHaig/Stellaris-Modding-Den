@level_1_module_cost = -30
@level_2_module_cost = -60
@level_3_module_cost = -90
@level_4_module_cost = -120
@level_5_module_cost = -150
@level_6_module_cost = -180
@level_7_module_cost = -210
@level_8_module_cost = -240
@level_9_module_cost = -270

check_spaceport_base_weapon = {
	if = {
		limit = { 
			OR = {
				has_spaceport_module = economic_spaceport_kinetic
				has_spaceport_module = stardock_spaceport_kinetic
				has_spaceport_module = defensive_spaceport_kinetic					
			}
		}	
		set_planet_flag = ex_spaceport_rebuild_kinetic
	}	
	if = {
		limit = { 
			OR = {
				has_spaceport_module = economic_spaceport_energy
				has_spaceport_module = stardock_spaceport_energy
				has_spaceport_module = defensive_spaceport_energy
				
			}
		}	
		set_planet_flag = ex_spaceport_rebuild_energy
	}	
	if = {
		limit = { 
			OR = {
				has_spaceport_module = economic_spaceport_explosives
				has_spaceport_module = stardock_spaceport_explosives
				has_spaceport_module = defensive_spaceport_explosives
				
			}
		}	
		set_planet_flag = ex_spaceport_rebuild_explosives
	}
}

rebuild_spaceport_economic = {
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_kinetic }				
		create_spaceport = {
			owner = root.owner
			initial_module = economic_spaceport_kinetic
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_kinetic
	}
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_energy }				
		create_spaceport = {
			owner = root.owner
			initial_module = economic_spaceport_energy
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_energy
	}			
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_explosives }				
		create_spaceport = {
			owner = root.owner
			initial_module = economic_spaceport_explosives
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_explosives
	}	
}

rebuild_spaceport_stardock = {
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_kinetic }				
		create_spaceport = {
			owner = root.owner
			initial_module = stardock_spaceport_kinetic
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_kinetic
	}
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_energy }				
		create_spaceport = {
			owner = root.owner
			initial_module = stardock_spaceport_energy
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_energy
	}			
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_explosives }				
		create_spaceport = {
			owner = root.owner
			initial_module = stardock_spaceport_explosives
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_explosives
	}	
}

rebuild_spaceport_defensive = {
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_kinetic }				
		create_spaceport = {
			owner = root.owner
			initial_module = defensive_spaceport_kinetic
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_kinetic
	}
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_energy }				
		create_spaceport = {
			owner = root.owner
			initial_module = defensive_spaceport_energy
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_energy
	}			
	if = {
		limit = { has_planet_flag = ex_spaceport_rebuild_explosives }				
		create_spaceport = {
			owner = root.owner
			initial_module = defensive_spaceport_explosives
		}
		set_base_weapon = yes
		set_level = yes
		remove_planet_flag = ex_spaceport_rebuild_explosives
	}	
}
		
set_level = {
	switch = {
		trigger = has_planet_flag
		ex_spaceport_1 = { set_spaceport_level = 1 }
		ex_spaceport_2 = { set_spaceport_level = 2 }
		ex_spaceport_3 = { set_spaceport_level = 3 }
		ex_spaceport_4 = { set_spaceport_level = 4 }
		ex_spaceport_5 = { set_spaceport_level = 5 }
		ex_spaceport_6 = { set_spaceport_level = 6 }
		ex_spaceport_7 = { set_spaceport_level = 7 }
		ex_spaceport_8 = { set_spaceport_level = 8 }
		ex_spaceport_9 = { set_spaceport_level = 9 }
	}
}	

set_base_weapon = {
	switch = {
		trigger = has_spaceport_module
		economic_spaceport_kinetic = { set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" } }
		stardock_spaceport_kinetic = { set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" } }
		defensive_spaceport_kinetic = { set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" } }
		economic_spaceport_energy = { set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" } }
		stardock_spaceport_energy = { set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" } }
		defensive_spaceport_energy = { set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" } }	
		economic_spaceport_explosives = { set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" } }
		stardock_spaceport_explosives = { set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" } }
		defensive_spaceport_explosives = { set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" } }	
	}
}	

flag_module_slots = {
	switch = {
		trigger = is_spaceport_module_slot_free
		1 = { set_planet_flag = slot_1_free }
		2 = { set_planet_flag = slot_2_free }
		3 = { set_planet_flag = slot_3_free }
		4 = { set_planet_flag = slot_4_free }
		5 = { set_planet_flag = slot_5_free }
		6 = { set_planet_flag = slot_6_free }
		7 = { set_planet_flag = slot_7_free }
		8 = { set_planet_flag = slot_8_free }
		9 = { set_planet_flag = slot_9_free }
	}
}	

check_module_slots = {
	if = { limit = { has_planet_flag = slot_1_free NOT = { is_spaceport_module_slot_free = 1 } } remove_planet_flag = slot_1_free }
	if = { limit = { has_planet_flag = slot_2_free NOT = { is_spaceport_module_slot_free = 2 } } remove_planet_flag = slot_2_free }
	if = { limit = { has_planet_flag = slot_3_free NOT = { is_spaceport_module_slot_free = 3 } } remove_planet_flag = slot_3_free }
	if = { limit = { has_planet_flag = slot_4_free NOT = { is_spaceport_module_slot_free = 4 } } remove_planet_flag = slot_4_free }
	if = { limit = { has_planet_flag = slot_5_free NOT = { is_spaceport_module_slot_free = 5 } } remove_planet_flag = slot_5_free }
	if = { limit = { has_planet_flag = slot_6_free NOT = { is_spaceport_module_slot_free = 6 } } remove_planet_flag = slot_6_free }
	if = { limit = { has_planet_flag = slot_7_free NOT = { is_spaceport_module_slot_free = 7 } } remove_planet_flag = slot_7_free }
	if = { limit = { has_planet_flag = slot_8_free NOT = { is_spaceport_module_slot_free = 8 } } remove_planet_flag = slot_8_free }
	if = { limit = { has_planet_flag = slot_9_free NOT = { is_spaceport_module_slot_free = 9 } } remove_planet_flag = slot_9_free }
}	

clear_slot_flag = {
	if = { limit = { has_planet_flag = slot_1_free } remove_planet_flag = slot_1_free }
	if = { limit = { has_planet_flag = slot_2_free } remove_planet_flag = slot_2_free }
	if = { limit = { has_planet_flag = slot_3_free } remove_planet_flag = slot_3_free }
	if = { limit = { has_planet_flag = slot_4_free } remove_planet_flag = slot_4_free }
	if = { limit = { has_planet_flag = slot_5_free } remove_planet_flag = slot_5_free }
	if = { limit = { has_planet_flag = slot_6_free } remove_planet_flag = slot_6_free }
	if = { limit = { has_planet_flag = slot_7_free } remove_planet_flag = slot_7_free }
	if = { limit = { has_planet_flag = slot_8_free } remove_planet_flag = slot_8_free }
	if = { limit = { has_planet_flag = slot_9_free } remove_planet_flag = slot_9_free }	
}

flag_modules = {
	switch = {
		trigger = has_spaceport_module
		##economic modules
		solar_power_network_1 = { set_planet_flag = solar_power_network_1 }
		solar_power_network_2 = { set_planet_flag =  solar_power_network_2 }
		hydroponic_farms_1 = { set_planet_flag = hydroponic_farms_1 }
		hydroponic_farms_2 = { set_planet_flag = hydroponic_farms_2 }
		orbital_lab_complex_1 = { set_planet_flag = orbital_lab_complex_1 }
		orbital_lab_complex_2 = { set_planet_flag = orbital_lab_complex_2 } 
		orbital_refinery_1 = { set_planet_flag = orbital_refinery_1 }
		orbital_refinery_2 = { set_planet_flag = orbital_refinery_2 }
		commercial_terminal = { set_planet_flag = commercial_terminal } 
		micro_gravity_manufactories = { set_planet_flag = micro_gravity_manufactories }
		cryogenic_storage_facility = { set_planet_flag = cryogenic_storage_facility }
		robotics_facility = { set_planet_flag = robotics_facility }
		##stardock modules
		civilian_assembly_yard = { set_planet_flag = civilian_assembly_yard }
		corvette_assembly_yard = { set_planet_flag = corvette_assembly_yard }
		destroyer_assembly_yard = { set_planet_flag = destroyer_assembly_yard } 
		cruiser_assembly_yard = { set_planet_flag = cruiser_assembly_yard }
		battleship_assembly_yard = { set_planet_flag = battleship_assembly_yard }
		dreadnought_assembly_yard = { set_planet_flag = dreadnought_assembly_yard } 
		engineering_bay = { set_planet_flag = engineering_bay }
		orbital_fleet_support = { set_planet_flag = orbital_fleet_support }
		advanced_weapons_manufactory = { set_planet_flag = advanced_weapons_manufactory }
		##defensive modules
		spaceport_kinetic_weapon_1 = { set_planet_flag = spaceport_kinetic_weapon_1 }
		spaceport_kinetic_weapon_2 = { set_planet_flag = spaceport_kinetic_weapon_2 }
		spaceport_kinetic_weapon_3 = { set_planet_flag = spaceport_kinetic_weapon_3 }
		spaceport_energy_weapon_1 = { set_planet_flag = spaceport_kinetic_weapon_3 }
		spaceport_energy_weapon_2 = { set_planet_flag = spaceport_energy_weapon_2 }
		spaceport_energy_weapon_3 = { set_planet_flag = spaceport_energy_weapon_3 }
		spaceport_explosive_weapon_1 = { set_planet_flag = spaceport_explosive_weapon_1 }
		spaceport_explosive_weapon_2 = { set_planet_flag = spaceport_explosive_weapon_2 }
		spaceport_explosive_weapon_3 = { set_planet_flag = spaceport_explosive_weapon_3 }
		spaceport_disruptor_1 = { set_planet_flag = spaceport_disruptor_1 }
		spaceport_disruptor_2 = { set_planet_flag = spaceport_disruptor_2 }
		spaceport_disruptor_3 = { set_planet_flag = spaceport_disruptor_3 }
		spaceport_plasma_1 = { set_planet_flag = spaceport_plasma_1 }
		spaceport_plasma_2 = { set_planet_flag = spaceport_plasma_2 }
		spaceport_plasma_3 = { set_planet_flag = spaceport_plasma_3 }
		spaceport_swarmer_missile_1 = { set_planet_flag = spaceport_swarmer_missile_1 }
		spaceport_swarmer_missile_2 = { set_planet_flag = spaceport_swarmer_missile_2 }
		spaceport_swarmer_missile_3 = { set_planet_flag = spaceport_swarmer_missile_3 }
		spaceport_kinetic_artillery_1 = { set_planet_flag = spaceport_kinetic_artillery_1 }
		spaceport_kinetic_artillery_2 = { set_planet_flag = spaceport_kinetic_artillery_2 }
		spaceport_kinetic_artillery_3 = { set_planet_flag = spaceport_kinetic_artillery_3 }
		spaceport_fighter_strike_craft_1 = { set_planet_flag = spaceport_fighter_strike_craft_1 }
		spaceport_fighter_strike_craft_2 = { set_planet_flag = spaceport_fighter_strike_craft_2 }
		spaceport_fighter_strike_craft_3 = { set_planet_flag = spaceport_fighter_strike_craft_3 }
		spaceport_interceptor_strike_craft_1 = { set_planet_flag = spaceport_interceptor_strike_craft_1 }
		spaceport_interceptor_strike_craft_2 = { set_planet_flag = spaceport_interceptor_strike_craft_2 }
		spaceport_interceptor_strike_craft_3 = { set_planet_flag = spaceport_interceptor_strike_craft_3 }
	}	
}

check_module_flags = {
	if = { limit = { has_planet_flag = solar_power_network_1 NOT = { has_spaceport_module = solar_power_network_1 } } remove_planet_flag = solar_power_network_1 }
	if = { limit = { has_planet_flag = solar_power_network_2 NOT = { has_spaceport_module =   solar_power_network_2 } } remove_planet_flag = solar_power_network_2 }
	if = { limit = { has_planet_flag = hydroponic_farms_1 NOT = { has_spaceport_module =  hydroponic_farms_1 } } remove_planet_flag = hydroponic_farms_1 }
	if = { limit = { has_planet_flag = hydroponic_farms_2 NOT = { has_spaceport_module =  hydroponic_farms_2 } } remove_planet_flag = hydroponic_farms_2 }
	if = { limit = { has_planet_flag = orbital_lab_complex_1 NOT = { has_spaceport_module =  orbital_lab_complex_1 } } remove_planet_flag = orbital_lab_complex_1 }
	if = { limit = { has_planet_flag = orbital_lab_complex_2 NOT = { has_spaceport_module =  orbital_lab_complex_2 } } remove_planet_flag = orbital_lab_complex_2 }
	if = { limit = { has_planet_flag = orbital_refinery_1 NOT = { has_spaceport_module =  orbital_refinery_1 } } remove_planet_flag = orbital_refinery_1 }
	if = { limit = { has_planet_flag = orbital_refinery_2 NOT = { has_spaceport_module =  orbital_refinery_2 } } remove_planet_flag = orbital_refinery_2 }
	if = { limit = { has_planet_flag = commercial_terminal NOT = { has_spaceport_module =  commercial_terminal } } remove_planet_flag = commercial_terminal }
	if = { limit = { has_planet_flag = micro_gravity_manufactories NOT = { has_spaceport_module =  micro_gravity_manufactories } } remove_planet_flag = micro_gravity_manufactories }
	if = { limit = { has_planet_flag = cryogenic_storage_facility NOT = { has_spaceport_module =  cryogenic_storage_facility } } remove_planet_flag = cryogenic_storage_facility }
	if = { limit = { has_planet_flag = robotics_facility NOT = { has_spaceport_module =  robotics_facility } } remove_planet_flag = robotics_facility }
	##stardock modules
	if = { limit = { has_planet_flag = civilian_assembly_yard NOT = { has_spaceport_module =  civilian_assembly_yard } } remove_planet_flag = civilian_assembly_yard }
	if = { limit = { has_planet_flag = corvette_assembly_yard NOT = { has_spaceport_module =  corvette_assembly_yard } } remove_planet_flag = corvette_assembly_yard }
	if = { limit = { has_planet_flag = destroyer_assembly_yard NOT = { has_spaceport_module =  destroyer_assembly_yard } } remove_planet_flag = destroyer_assembly_yard }
	if = { limit = { has_planet_flag = cruiser_assembly_yard NOT = { has_spaceport_module =  cruiser_assembly_yard } } remove_planet_flag = cruiser_assembly_yard }
	if = { limit = { has_planet_flag = battleship_assembly_yard NOT = { has_spaceport_module =  battleship_assembly_yard } } remove_planet_flag = battleship_assembly_yard }
	if = { limit = { has_planet_flag = dreadnought_assembly_yard NOT = { has_spaceport_module =  dreadnought_assembly_yard } } remove_planet_flag = dreadnought_assembly_yard  }
	if = { limit = { has_planet_flag = engineering_bay NOT = { has_spaceport_module =  engineering_bay } } remove_planet_flag = engineering_bay }
	if = { limit = { has_planet_flag = orbital_fleet_support NOT = { has_spaceport_module =  orbital_fleet_support } } remove_planet_flag = orbital_fleet_support }
	if = { limit = { has_planet_flag = advanced_weapons_manufactory NOT = { has_spaceport_module =  advanced_weapons_manufactory } } remove_planet_flag = advanced_weapons_manufactory }
	##defensive modules
	if = { limit = { has_planet_flag = spaceport_kinetic_weapon_1 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_1 } } remove_planet_flag = spaceport_kinetic_weapon_1 }
	if = { limit = { has_planet_flag = spaceport_kinetic_weapon_2 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_2 } } remove_planet_flag = spaceport_kinetic_weapon_2 }
	if = { limit = { has_planet_flag = spaceport_kinetic_weapon_3 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_3 } } remove_planet_flag = spaceport_kinetic_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_energy_weapon_1 NOT = { has_spaceport_module =  spaceport_kinetic_weapon_3 } } remove_planet_flag = spaceport_kinetic_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_energy_weapon_2 NOT = { has_spaceport_module =  spaceport_energy_weapon_2 } } remove_planet_flag = spaceport_energy_weapon_2 }
	if = { limit = { has_planet_flag = spaceport_energy_weapon_3 NOT = { has_spaceport_module =  spaceport_energy_weapon_3 } } remove_planet_flag = spaceport_energy_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_explosive_weapon_1 NOT = { has_spaceport_module =  spaceport_explosive_weapon_1 } } remove_planet_flag = spaceport_explosive_weapon_1 }
	if = { limit = { has_planet_flag = spaceport_explosive_weapon_2 NOT = { has_spaceport_module =  spaceport_explosive_weapon_2 } } remove_planet_flag = spaceport_explosive_weapon_2 }
	if = { limit = { has_planet_flag = spaceport_explosive_weapon_3 NOT = { has_spaceport_module =  spaceport_explosive_weapon_3 } } remove_planet_flag = spaceport_explosive_weapon_3 }
	if = { limit = { has_planet_flag = spaceport_disruptor_1 NOT = { has_spaceport_module =  spaceport_disruptor_1 } } remove_planet_flag = spaceport_disruptor_1 }
	if = { limit = { has_planet_flag = spaceport_disruptor_2 NOT = { has_spaceport_module =  spaceport_disruptor_2 } } remove_planet_flag = spaceport_disruptor_2 }
	if = { limit = { has_planet_flag = spaceport_disruptor_3 NOT = { has_spaceport_module =  spaceport_disruptor_3 } } remove_planet_flag = spaceport_disruptor_3 }
	if = { limit = { has_planet_flag = spaceport_plasma_1 NOT = { has_spaceport_module =  spaceport_plasma_1 } } remove_planet_flag = spaceport_plasma_1 }
	if = { limit = { has_planet_flag = spaceport_plasma_2 NOT = { has_spaceport_module =  spaceport_plasma_2 } } remove_planet_flag = spaceport_plasma_2 }
	if = { limit = { has_planet_flag = spaceport_plasma_3 NOT = { has_spaceport_module =  spaceport_plasma_3 } } remove_planet_flag = spaceport_plasma_3 }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_1 NOT = { has_spaceport_module =  spaceport_swarmer_missile_1 } } remove_planet_flag = spaceport_swarmer_missile_1 }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_2 NOT = { has_spaceport_module =  spaceport_swarmer_missile_2 } } remove_planet_flag = spaceport_swarmer_missile_2 }
	if = { limit = { has_planet_flag = spaceport_swarmer_missile_3 NOT = { has_spaceport_module =  spaceport_swarmer_missile_3 } } remove_planet_flag = spaceport_swarmer_missile_3 }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_1 NOT = { has_spaceport_module =  spaceport_kinetic_artillery_1 } } remove_planet_flag = spaceport_kinetic_artillery_1 }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_2 NOT = { has_spaceport_module =  spaceport_kinetic_artillery_2 } } remove_planet_flag = spaceport_kinetic_artillery_2 }
	if = { limit = { has_planet_flag = spaceport_kinetic_artillery_3 NOT = { has_spaceport_module =  spaceport_kinetic_artillery_3 } } remove_planet_flag = spaceport_kinetic_artillery_3 }
	if = { limit = { has_planet_flag = spaceport_fighter_strike_craft_1 NOT = { has_spaceport_module =  spaceport_fighter_strike_craft_1 } } remove_planet_flag = spaceport_fighter_strike_craft_1 }
	if = { limit = { has_planet_flag = spaceport_fighter_strike_craft_2 NOT = { has_spaceport_module =  spaceport_fighter_strike_craft_2 } } remove_planet_flag = spaceport_fighter_strike_craft_2 }
	if = { limit = { has_planet_flag = spaceport_fighter_strike_craft_3 NOT = { has_spaceport_module =  spaceport_fighter_strike_craft_3 } } remove_planet_flag = spaceport_fighter_strike_craft_3 }
	if = { limit = { has_planet_flag = spaceport_interceptor_strike_craft_1 NOT = { has_spaceport_module =  spaceport_interceptor_strike_craft_1 } } remove_planet_flag = spaceport_interceptor_strike_craft_1 }
	if = { limit = { has_planet_flag = spaceport_interceptor_strike_craft_2 NOT = { has_spaceport_module =  spaceport_interceptor_strike_craft_2 } } remove_planet_flag = spaceport_interceptor_strike_craft_2 }
	if = { limit = { has_planet_flag = spaceport_interceptor_strike_craft_3 NOT = { has_spaceport_module =  spaceport_interceptor_strike_craft_3 } } remove_planet_flag = spaceport_interceptor_strike_craft_3 }		
}

scrap_economic_modules = {
	switch = {
		trigger = has_spaceport_module
		##economic modules
		solar_power_network_1 = { remove_spaceport_module = solar_power_network_1 owner = { add_minerals = 20 } }
		solar_power_network_2 = { remove_spaceport_module = solar_power_network_2 owner = { add_minerals = 60 } }
		hydroponic_farms_1 = { remove_spaceport_module = hydroponic_farms_1 owner = { add_minerals = 20 } }
		hydroponic_farms_2 = { remove_spaceport_module = hydroponic_farms_2 owner = { add_minerals = 60 } }
		orbital_lab_complex_1 = { remove_spaceport_module = orbital_lab_complex_1 owner = { add_minerals = 20 } }
		orbital_lab_complex_2 = { remove_spaceport_module = orbital_lab_complex_2 owner = { add_minerals = 60 } }
		orbital_refinery_1 = { remove_spaceport_module = orbital_refinery_1 owner = { add_minerals = 20 } }
		orbital_refinery_2 = { remove_spaceport_module = orbital_refinery_2 owner = { add_minerals = 60 } }
		commercial_terminal = { remove_spaceport_module = commercial_terminal owner = { add_minerals = 40 } } 
		micro_gravity_manufactories = { remove_spaceport_module = micro_gravity_manufactories owner = { add_minerals = 40 } }
		cryogenic_storage_facility = { remove_spaceport_module = cryogenic_storage_facility owner = { add_minerals = 40 } }
		robotics_facility = { remove_spaceport_module = robotics_facility owner = { add_minerals = 40 } }
	}
}

scrap_stardock_modules = {
	switch = {
		trigger = has_spaceport_module
		##stardock modules
		civilian_assembly_yard = { remove_spaceport_module = civilian_assembly_yard owner = { add_minerals = 20 } }
		corvette_assembly_yard = { remove_spaceport_module = corvette_assembly_yard owner = { add_minerals = 20 } }
		destroyer_assembly_yard = { remove_spaceport_module = destroyer_assembly_yard owner = { add_minerals = 40 } } 
		cruiser_assembly_yard = { remove_spaceport_module = cruiser_assembly_yard owner = { add_minerals = 60 } }
		battleship_assembly_yard = { remove_spaceport_module = battleship_assembly_yard owner = { add_minerals = 80 } }
		dreadnought_assembly_yard = { remove_spaceport_module = dreadnought_assembly_yard owner = { add_minerals = 90 } } 
		engineering_bay = { remove_spaceport_module = engineering_bay owner = { add_minerals = 40 } }
		orbital_fleet_support = { remove_spaceport_module = orbital_fleet_support owner = { add_minerals = 40 } }
		advanced_weapons_manufactory = { remove_spaceport_module = advanced_weapons_manufactory owner = { add_minerals = 60 } }
	}
}

scrap_defensive_modules = {
	switch = {
		##defensive modules
		trigger = has_spaceport_module
		spaceport_kinetic_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_1 owner = { add_minerals = 10 } }
		spaceport_kinetic_weapon_2 = { remove_spaceport_module = spaceport_kinetic_weapon_2 owner = { add_minerals = 50 } }
		spaceport_kinetic_weapon_3 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 90 } }
		spaceport_energy_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 30 } }
		spaceport_energy_weapon_2 = { remove_spaceport_module = spaceport_energy_weapon_2 owner = { add_minerals = 60 } }
		spaceport_energy_weapon_3 = { remove_spaceport_module = spaceport_energy_weapon_3 owner = { add_minerals = 90 } }
		spaceport_explosive_weapon_1 = { remove_spaceport_module = spaceport_explosive_weapon_1 owner = { add_minerals = 30 } }
		spaceport_explosive_weapon_2 = { remove_spaceport_module = spaceport_explosive_weapon_2 owner = { add_minerals = 60 } }
		spaceport_explosive_weapon_3 = { remove_spaceport_module = spaceport_explosive_weapon_3 owner = { add_minerals = 90 } }
		spaceport_disruptor_1 = { remove_spaceport_module = spaceport_disruptor_1 owner = { add_minerals = 30 } }
		spaceport_disruptor_2 = { remove_spaceport_module = spaceport_disruptor_2 owner = { add_minerals = 60 } }
		spaceport_disruptor_3 = { remove_spaceport_module = spaceport_disruptor_3 owner = { add_minerals = 90 } }
		spaceport_plasma_1 = { remove_spaceport_module = spaceport_plasma_1 owner = { add_minerals = 30 } }
		spaceport_plasma_2 = { remove_spaceport_module = spaceport_plasma_2 owner = { add_minerals = 60 } }
		spaceport_plasma_3 = { remove_spaceport_module = spaceport_plasma_3 owner = { add_minerals = 90 } }
		spaceport_swarmer_missile_1 = { remove_spaceport_module = spaceport_swarmer_missile_1 owner = { add_minerals = 30 } }
		spaceport_swarmer_missile_2 = { remove_spaceport_module = spaceport_swarmer_missile_2 owner = { add_minerals = 60 } }
		spaceport_swarmer_missile_3 = { remove_spaceport_module = spaceport_swarmer_missile_3 owner = { add_minerals = 90 } }
		spaceport_kinetic_artillery_1 = { remove_spaceport_module = spaceport_kinetic_artillery_1 owner = { add_minerals = 30 } }
		spaceport_kinetic_artillery_2 = { remove_spaceport_module = spaceport_kinetic_artillery_2 owner = { add_minerals = 60 } }
		spaceport_kinetic_artillery_3 = { remove_spaceport_module = spaceport_kinetic_artillery_3 owner = { add_minerals = 90 } }
		spaceport_fighter_strike_craft_1 = { remove_spaceport_module = spaceport_fighter_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_fighter_strike_craft_2 = { remove_spaceport_module = spaceport_fighter_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_fighter_strike_craft_3 = { remove_spaceport_module = spaceport_fighter_strike_craft_3 owner = { add_minerals = 90 } }
		spaceport_interceptor_strike_craft_1 = { remove_spaceport_module = spaceport_interceptor_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_interceptor_strike_craft_2 = { remove_spaceport_module = spaceport_interceptor_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_interceptor_strike_craft_3 = { remove_spaceport_module = spaceport_interceptor_strike_craft_3 owner = { add_minerals = 90 } }
	}	
}

scrap_spaceport_modules = { 
	switch = {
		trigger = has_spaceport_module
		##economic modules
		solar_power_network_1 = { remove_spaceport_module = solar_power_network_1 owner = { add_minerals = 20 } }
		solar_power_network_2 = { remove_spaceport_module = solar_power_network_2 owner = { add_minerals = 60 } }
		hydroponic_farms_1 = { remove_spaceport_module = hydroponic_farms_1 owner = { add_minerals = 20 } }
		hydroponic_farms_2 = { remove_spaceport_module = hydroponic_farms_2 owner = { add_minerals = 60 } }
		orbital_lab_complex_1 = { remove_spaceport_module = orbital_lab_complex_1 owner = { add_minerals = 20 } }
		orbital_lab_complex_2 = { remove_spaceport_module = orbital_lab_complex_2 owner = { add_minerals = 60 } }
		orbital_refinery_1 = { remove_spaceport_module = orbital_refinery_1 owner = { add_minerals = 20 } }
		orbital_refinery_2 = { remove_spaceport_module = orbital_refinery_2 owner = { add_minerals = 60 } }
		commercial_terminal = { remove_spaceport_module = commercial_terminal owner = { add_minerals = 40 } } 
		micro_gravity_manufactories = { remove_spaceport_module = micro_gravity_manufactories owner = { add_minerals = 40 } }
		cryogenic_storage_facility = { remove_spaceport_module = cryogenic_storage_facility owner = { add_minerals = 40 } }
		robotics_facility = { remove_spaceport_module = robotics_facility owner = { add_minerals = 40 } }
		civilian_assembly_yard = { remove_spaceport_module = civilian_assembly_yard owner = { add_minerals = 20 } }
		corvette_assembly_yard = { remove_spaceport_module = corvette_assembly_yard owner = { add_minerals = 20 } }
		destroyer_assembly_yard = { remove_spaceport_module = destroyer_assembly_yard owner = { add_minerals = 40 } } 
		cruiser_assembly_yard = { remove_spaceport_module = cruiser_assembly_yard owner = { add_minerals = 60 } }
		battleship_assembly_yard = { remove_spaceport_module = battleship_assembly_yard owner = { add_minerals = 80 } }
		dreadnought_assembly_yard = { remove_spaceport_module = dreadnought_assembly_yard owner = { add_minerals = 90 } } 
		engineering_bay = { remove_spaceport_module = engineering_bay owner = { add_minerals = 40 } }
		orbital_fleet_support = { remove_spaceport_module = orbital_fleet_support owner = { add_minerals = 40 } }
		advanced_weapons_manufactory = { remove_spaceport_module = advanced_weapons_manufactory owner = { add_minerals = 60 } }		
		spaceport_kinetic_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_1 owner = { add_minerals = 10 } }
		spaceport_kinetic_weapon_2 = { remove_spaceport_module = spaceport_kinetic_weapon_2 owner = { add_minerals = 50 } }
		spaceport_kinetic_weapon_3 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 90 } }
		spaceport_energy_weapon_1 = { remove_spaceport_module = spaceport_kinetic_weapon_3 owner = { add_minerals = 30 } }
		spaceport_energy_weapon_2 = { remove_spaceport_module = spaceport_energy_weapon_2 owner = { add_minerals = 60 } }
		spaceport_energy_weapon_3 = { remove_spaceport_module = spaceport_energy_weapon_3 owner = { add_minerals = 90 } }
		spaceport_explosive_weapon_1 = { remove_spaceport_module = spaceport_explosive_weapon_1 owner = { add_minerals = 30 } }
		spaceport_explosive_weapon_2 = { remove_spaceport_module = spaceport_explosive_weapon_2 owner = { add_minerals = 60 } }
		spaceport_explosive_weapon_3 = { remove_spaceport_module = spaceport_explosive_weapon_3 owner = { add_minerals = 90 } }
		spaceport_disruptor_1 = { remove_spaceport_module = spaceport_disruptor_1 owner = { add_minerals = 30 } }
		spaceport_disruptor_2 = { remove_spaceport_module = spaceport_disruptor_2 owner = { add_minerals = 60 } }
		spaceport_disruptor_3 = { remove_spaceport_module = spaceport_disruptor_3 owner = { add_minerals = 90 } }
		spaceport_plasma_1 = { remove_spaceport_module = spaceport_plasma_1 owner = { add_minerals = 30 } }
		spaceport_plasma_2 = { remove_spaceport_module = spaceport_plasma_2 owner = { add_minerals = 60 } }
		spaceport_plasma_3 = { remove_spaceport_module = spaceport_plasma_3 owner = { add_minerals = 90 } }
		spaceport_swarmer_missile_1 = { remove_spaceport_module = spaceport_swarmer_missile_1 owner = { add_minerals = 30 } }
		spaceport_swarmer_missile_2 = { remove_spaceport_module = spaceport_swarmer_missile_2 owner = { add_minerals = 60 } }
		spaceport_swarmer_missile_3 = { remove_spaceport_module = spaceport_swarmer_missile_3 owner = { add_minerals = 90 } }
		spaceport_kinetic_artillery_1 = { remove_spaceport_module = spaceport_kinetic_artillery_1 owner = { add_minerals = 30 } }
		spaceport_kinetic_artillery_2 = { remove_spaceport_module = spaceport_kinetic_artillery_2 owner = { add_minerals = 60 } }
		spaceport_kinetic_artillery_3 = { remove_spaceport_module = spaceport_kinetic_artillery_3 owner = { add_minerals = 90 } }
		spaceport_fighter_strike_craft_1 = { remove_spaceport_module = spaceport_fighter_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_fighter_strike_craft_2 = { remove_spaceport_module = spaceport_fighter_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_fighter_strike_craft_3 = { remove_spaceport_module = spaceport_fighter_strike_craft_3 owner = { add_minerals = 90 } }
		spaceport_interceptor_strike_craft_1 = { remove_spaceport_module = spaceport_interceptor_strike_craft_1 owner = { add_minerals = 30 } }
		spaceport_interceptor_strike_craft_2 = { remove_spaceport_module = spaceport_interceptor_strike_craft_2 owner = { add_minerals = 60 } }
		spaceport_interceptor_strike_craft_3 = { remove_spaceport_module = spaceport_interceptor_strike_craft_3 owner = { add_minerals = 90 } }
	}	
}
		
scrap_spaceport = {
	switch = {
		trigger = has_planet_flag
		ex_spaceport_1 = { owner = { add_minerals = 40 } }
		ex_spaceport_2 = { owner = { add_minerals = 60 } }
		ex_spaceport_3 = { owner = { add_minerals = 80 } }
		ex_spaceport_4 = { owner = { add_minerals = 100 } }
		ex_spaceport_5 = { owner = { add_minerals = 120 } }
		ex_spaceport_6 = { owner = { add_minerals = 140 } }
		ex_spaceport_7 = { owner = { add_minerals = 160 } }
		ex_spaceport_8 = { owner = { add_minerals = 180 } }
		ex_spaceport_9 = { owner = { add_minerals = 200 } }
	}
}	

construct_module = {
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_2_free
		}
		set_spaceport_module = { slot = 2 module = "module_under_construction" }	
		remove_planet_flag = slot_2_free
		set_planet_flag = module_under_construction_slot_2
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.102 days = 180 }	
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_3_free
		}
		set_spaceport_module = { slot = 3 module = "module_under_construction" }	
		remove_planet_flag = slot_3_free
		set_planet_flag = module_under_construction_slot_3
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.103 days = 180 }	
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_4_free
		}
		set_spaceport_module = { slot = 4 module = "module_under_construction" }	
		remove_planet_flag = slot_4_free
		set_planet_flag = module_under_construction_slot_4
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.104 days = 180 }	
		break = yes
	}	
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_5_free
		}
		set_spaceport_module = { slot = 5 module = "module_under_construction" }	
		remove_planet_flag = slot_5_free
		set_planet_flag = module_under_construction_slot_5
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.105 days = 180 }	
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_6_free
		}
		set_spaceport_module = { slot = 6 module = "module_under_construction" }	
		remove_planet_flag = slot_6_free
		set_planet_flag = module_under_construction_slot_6
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.106 days = 180 }	
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_7_free
		}
		set_spaceport_module = { slot = 7 module = "module_under_construction" }	
		remove_planet_flag = slot_7_free
		set_planet_flag = module_under_construction_slot_7
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.107 days = 180 }	
		break = yes
	}		
	if = {
		limit = { 
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_8_free
		}
		set_spaceport_module = { slot = 8 module = "module_under_construction" }	
		remove_planet_flag = slot_8_free
		set_planet_flag = module_under_construction_slot_8
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.108 days = 180 }	
		break = yes
	}		
	if = {
		limit = { 			
			NOT = { has_spaceport_module = module_under_construction }
			has_planet_flag = slot_9_free
		}
		set_spaceport_module = { slot = 9 module = "module_under_construction" }	
		remove_planet_flag = slot_9_free
		set_planet_flag = module_under_construction_slot_9
		switch = {
			trigger = has_planet_flag
			edict_economic_spaceport_in_effect = { roll_economic_module = yes }
			edict_stardock_spaceport_in_effect = { roll_stardock_module = yes }
			edict_defensive_spaceport_in_effect = { roll_defensive_module = yes } 
		}
		planet_event = { id = ex_spaceport_events.109 days = 190 }	
		break = yes
	}		
}	



roll_economic_module = {
	if = { 
		limit = { has_planet_flag = module_under_construction_slot_2 }
		random_list = {
			8.33 = {
				set_module = { slot = 2 module = "hydroponic_farms_1" }
				owner = { add_minerals = @level_2_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { can_build_spaceport_module = hydroponic_farms_1 }
						has_spaceport_module = hydroponic_farms_1
					}	
				}						
				modifier = { 
					factor = 0
					owner = { is_machine_or_synth = yes }
				}				
				modifier = { 
					factor = 0.25
					owner = { has_monthly_income = { resource = food value > 25 } }
				}					
				modifier = { 
					factor = 1.5
					owner = { has_monthly_income = { resource = food value < 15 } }
				}	
				modifier = { 
					factor = 3
					owner = { has_monthly_income = { resource = food value < 5 } }
				}
				modifier = { 
					factor = 5
					AND = {
						pop_requires_food = yes
						has_resource = { resource = food value < 0 } 
					}	
				}								
			}	
			8.33 = {
				set_module = { slot = 2 module = "hydroponic_farms_2" }
				owner = { add_minerals = @level_6_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { 
							can_build_spaceport_module = hydroponic_farms_2
							has_spaceport_module = hydroponic_farms_1
						}
						has_spaceport_module = hydroponic_farms_2
					}	
				}						
				modifier = { 
					factor = 0
					owner = { is_machine_or_synth = yes }
				}								
				modifier = { 
					factor = 0.25
					owner = { has_monthly_income = { resource = food value > 25 } }
				}					
				modifier = { 
					factor = 1.5
					owner = { has_monthly_income = { resource = food value < 15 } }
				}	
				modifier = { 
					factor = 3
					owner = { has_monthly_income = { resource = food value < 5 } }
				}
				modifier = { 
					factor = 5
					AND = {
						pop_requires_food = yes
						has_resource = { resource = food value < 0 } 
					}	
				}						
			}													
			8.33 = {
				set_module = { slot = 2 module = "solar_power_network_1" }
				owner = { add_minerals = @level_2_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { can_build_spaceport_module = solar_power_network_1 }
						has_spaceport_module = solar_power_network_1
					}	
				}							
				modifier = { 
					factor = 1.5
					owner = { is_machine_or_synth = yes }
				}								
				modifier = { 
					factor = 1.25
					owner = { has_monthly_income = { resource = energy value < 150 } }
				}																						
				modifier = { 
					factor = 1.5
					owner = { has_monthly_income = { resource = energy value < 100 } }
				}																					
				modifier = { 
					factor = 2
					owner = { has_monthly_income = { resource = energy value < 50 } }
				}																			
				modifier = { 
					factor = 5
					owner = { has_monthly_income = { resource = energy value < 25 } }
				}														
				modifier = { 
					factor = 8
					owner = { has_monthly_income = { resource = energy value < 15 } }
				}									
				modifier = { 
					factor = 10
					owner = { has_monthly_income = { resource = energy value < 5 } }
				}					
				modifier = { 
					factor = 12
					owner = { has_monthly_income = { resource = energy value < 0 } }
				}
			}
			8.33 = {
				set_module = { slot = 2 module = "solar_power_network_2" }
				owner = { add_minerals = @level_6_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { 
							can_build_spaceport_module = solar_power_network_1
							has_spaceport_module = solar_power_network_1
						}
						has_spaceport_module = solar_power_network_2
					}	
				}							
				modifier = { 
					factor = 1.5
					owner = { is_machine_or_synth = yes }
				}								
				modifier = { 
					factor = 1.25
					owner = { has_monthly_income = { resource = energy value < 150 } }
				}																						
				modifier = { 
					factor = 1.5
					owner = { has_monthly_income = { resource = energy value < 100 } }
				}																					
				modifier = { 
					factor = 2
					owner = { has_monthly_income = { resource = energy value < 50 } }
				}																			
				modifier = { 
					factor = 5
					owner = { has_monthly_income = { resource = energy value < 25 } }
				}														
				modifier = { 
					factor = 8
					owner = { has_monthly_income = { resource = energy value < 15 } }
				}									
				modifier = { 
					factor = 10
					owner = { has_monthly_income = { resource = energy value < 5 } }
				}					
				modifier = { 
					factor = 12
					owner = { has_monthly_income = { resource = energy value < 0 } }
				}
			}				
			8.33 = {
				set_module = { slot = 2 module = "orbital_refinery_1" }
				owner = { add_minerals = @level_2_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { can_build_spaceport_module = orbital_refinery_1 }
						has_spaceport_module = orbital_refinery_1
					}	
				}	
				modifier = { 
					factor = 1.25
					owner = { has_monthly_income = { resource = minerals value < 250 } }
				}																						
				modifier = { 
					factor = 1.5
					owner = { has_monthly_income = { resource = minerals value < 200 } }
				}																					
				modifier = { 
					factor = 2
					owner = { has_monthly_income = { resource = minerals value < 100 } }
				}																			
				modifier = { 
					factor = 5
					owner = { has_monthly_income = { resource = minerals value < 50 } }
				}														
				modifier = { 
					factor = 8
					owner = { has_monthly_income = { resource = minerals value < 25 } }
				}									
				modifier = { 
					factor = 10
					owner = { has_monthly_income = { resource = minerals value < 10 } }
				}					
				modifier = { 
					factor = 12
					owner = { has_monthly_income = { resource = minerals value < 5 } }
				}				
			}
			8.33 = {
				set_module = { slot = 2 module = "orbital_refinery_2" }
				owner = { add_minerals = @level_6_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { 
							can_build_spaceport_module = orbital_refinery_2
							has_spaceport_module = orbital_refinery_1
						}
						has_spaceport_module = orbital_refinery_2
					}	
				}	
				modifier = { 
					factor = 1.25
					owner = { has_monthly_income = { resource = minerals value < 250 } }
				}																						
				modifier = { 
					factor = 1.5
					owner = { has_monthly_income = { resource = minerals value < 200 } }
				}																					
				modifier = { 
					factor = 2
					owner = { has_monthly_income = { resource = minerals value < 100 } }
				}																			
				modifier = { 
					factor = 5
					owner = { has_monthly_income = { resource = minerals value < 50 } }
				}														
				modifier = { 
					factor = 8
					owner = { has_monthly_income = { resource = minerals value < 25 } }
				}									
				modifier = { 
					factor = 10
					owner = { has_monthly_income = { resource = minerals value < 10 } }
				}					
				modifier = { 
					factor = 12
					owner = { has_monthly_income = { resource = minerals value < 5 } }
				}				
			}			
			8.33 = {
				set_module = { slot = 2 module = "orbital_lab_complex_1" }
				owner = { add_minerals = @level_2_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { can_build_spaceport_module = orbital_lab_complex_1 }
						has_spaceport_module = orbital_lab_complex_1
					}	
				}	
				modifier = { 
					factor = 0.75
					NOT = {
						has_spaceport_module = solar_power_network_1
						has_spaceport_module = orbital_refinery_1
					}	
				}	
				modifier = { 
					factor = 3
					AND = {
						has_spaceport_module = solar_power_network_1
						has_spaceport_module = orbital_refinery_1
					}	
				}				
			}
			8.33 = {
				set_module = { slot = 2 module = "orbital_lab_complex_2" }
				owner = { add_minerals = @level_6_module_cost }
				modifier = { 
					factor = 0
					OR = {
						NOT = { 
							can_build_spaceport_module = orbital_lab_complex_2
							has_spaceport_module = orbital_lab_complex_1
						}
						has_spaceport_module = orbital_lab_complex_2
					}	
				}	
				modifier = { 
					factor = 0
					NOT = {
						has_spaceport_module = solar_power_network_1
						has_spaceport_module = orbital_refinery_1
					}	
				}	
				modifier = { 
					factor = 1.5
					AND = {
						has_spaceport_module = solar_power_network_1
						has_spaceport_module = orbital_refinery_1
					}	
				}				
				modifier = { 
					factor = 3
					AND = {
						has_spaceport_module = solar_power_network_2
						has_spaceport_module = orbital_refinery_2
					}	
				}								
			}			
			8.33 = { }
			8.33 = { }
			8.33 = { }
			8.33 = { }
			8.33 = { }			
			8.33 = { }
		}
	}	
}	
		
