##########################################################################
# Decisions
##########################################################################


# Eco-Arcology Project
decision_ecoarcology_project = {
	owned_planets_only = yes
	icon = decision_ecoarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_pdshroud
			is_planet_class = pc_ecocity
			is_planet_class = pc_corpoarc
			is_planet_class = pc_palacearc
			is_planet_class = pc_capitalarc
			is_planet_class = pc_milarc
			is_planet_class = pc_necropolis
			is_planet_class = pc_machine_necropolis
			is_planet_class = pc_necrohive
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_planet_class = pc_milarc_relic
			is_planet_class = pc_shroudcapitalarc
			is_planet_class = pc_shroudcity
			is_planet_class = pc_shroudmilarc
			is_planet_class = pc_shroudecocity
			is_planet_class = pc_shroudcorpoarc
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_pd_unique = yes
		}
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_arcology_project }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_eco_arcology_project_requirements
			OR = {
				num_districts = { type = district_city value >= 5 }
				num_districts = { type = district_nexus value >= 5 }
			}
			num_districts = { type = district_industrial value < 1 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_ecocity
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				set_planet_entity = {
                    entity = "ecocity_planet_02_earth_entity"
                }
			}
			IF = {
				limit = {
					has_planet_flag = pdmars
				}
				set_planet_entity = {
                    entity = "ecocity_planet_03_mars_entity"
                }
			}
			IF = {
				limit = {
					has_planet_flag = pdvenus
				}
				set_planet_entity = {
                    entity = "ecocity_planet_04_venus_entity"
                }
			}
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "ecocity_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticecocity_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniacity entity = ecocity_ammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcity 
					entity = ecocity_sulfur_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecity 
					entity = ecocity_methane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcity 
					entity = ecocity_ash_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_origin = origin_pd_shroud has_ascension_perk = ap_transcendence } }
				set_planet_entity = { picture = pc_shroudcity entity = ecoshroud_planet_01_entity }
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			planet_event = { id = pdengine.09 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			add_deposit = d_ecogarden
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = { 
			factor = 0	
			owner = { any_owned_planet = { is_planet_class = pc_ecocity } }
		}
	}
}

# Machine Factory Project
decision_machinefactory_project = {
	owned_planets_only = yes
	icon = decision_machine_factory_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_machine_factory
		}
		is_planet_class = pc_machine
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_machine_worlds }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_machine_factory_requirements
			num_districts = { type = district_nexus value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_machine_factory_effects
		hidden_effect = {		
			change_pc = pc_machine_factory
			add_modifier = {
				modifier = machine_factory
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.10 }
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Machine Capital Project
decision_machinecapital_project = {
	owned_planets_only = yes
	icon = decision_machine_capital_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		is_planet_class = pc_machine
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_machine_worlds }
		planet = { is_capital = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_machine_capital_requirements
			num_districts = { type = district_nexus value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
		free_building_slots >= 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_machine_capital_effects
		hidden_effect = {		
			change_pc = pc_machine_capital
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.10 }
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			planet_event = { id = pdengine.14 }
		}
		add_building = building_grand_processing_nexus
	}
	
	ai_weight = {
		weight = 0
	}
}

# Biocapital Project
decision_biocapital_project = {
	owned_planets_only = yes
	icon = decision_biocapital_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		is_planet_class = pc_hive
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_hive_worlds }
		planet = { is_capital = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_bioforge_requirements
			num_districts = { type = district_hive value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
		free_building_slots >= 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_bioforge_effects
		hidden_effect = {		
			change_pc = pc_biocapital
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.11 }
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_building = building_prime_synaptic_warren
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

# Bio-Forge Project
decision_bioforge_project = {
	owned_planets_only = yes
	icon = decision_bioforge_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_bioforge
		}
		is_planet_class = pc_hive
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_hive_worlds }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_bioforge_requirements
			num_districts = { type = district_hive value >= 10 }
			num_districts = { type = district_farming_uncapped value < 1 }
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_bioforge_effects
		hidden_effect = {		
			change_pc = pc_bioforge
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.11 }
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Eco-Arcology Project (Relic Worlds)
decision_ecoarcology_project_relic = {
	owned_planets_only = yes
	icon = decision_arcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		is_planet_class = pc_relic
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
	}

	allow = {
		num_uncleared_blockers < 1
		free_district_slots >= 5
		owner = { has_technology = tech_housing_2 }
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_eco_arcology_project_effects
		hidden_effect = {
			clear_deposits = yes
			change_pc = pc_ecocity
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
				 }
				set_planet_entity = {
					entity = "ecocity_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticecocity_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				add_modifier = { modifier = pdammoniaatmosphere	}
				remove_modifier = ammonia
				set_planet_entity = { 
					picture = pc_ammoniacity 
					entity = ecocity_ammonia_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				add_modifier = { modifier = pdsulfuratmosphere	}
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcity 
					entity = ecocity_sulfur_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				add_modifier = { modifier = pdmethaneatmosphere	}
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecity 
					entity = ecocity_methane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				add_modifier = { modifier = pdashatmosphere	}
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcity 
					entity = ecocity_ash_planet_01_entity 
				}
			}
			add_deposit = d_former_relic_world
			add_deposit = d_ecogarden
			planet_event = { id =  mega.201 }
			while = {
				count = 4
				solar_system = {
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = relic_world_debris }
						destroy_ambient_object = this
					}
				}
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Flora-Forge Project
decision_floraforge_project = {
	owned_planets_only = yes
	icon = decision_floraforge_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 10000
			food = 10000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_megafloraforge
		}
		is_planet_class = pc_megafloratol
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_florahive_worlds }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_floraforge_requirements
			num_districts = { type = district_hive value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
			num_districts = { type = district_industrial value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_floraforge_effects
		hidden_effect = {		
			change_pc = pc_megafloraforge
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.11 }
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Flora-Capital Project
decision_floracapital_project = {
	owned_planets_only = yes
	icon = decision_floracapital_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 10000
			food = 10000
		}
	}
	
	potential = {
		is_planet_class = pc_megafloratol
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_florahive_worlds }
		planet = { is_capital = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_floraforge_requirements
			num_districts = { type = district_hive value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
			num_districts = { type = district_industrial value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
		free_building_slots >= 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_floraforge_effects
		hidden_effect = {		
			change_pc = pc_megafloracapital
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.47 }
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_building = building_megaflora_synaptic_warren
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Flora-Fort Project
decision_florafort_project = {
	owned_planets_only = yes
	icon = decision_florafort_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 10000
			food = 10000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_megaflorafort
		}
		is_planet_class = pc_megafloratol
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_florahive_worlds }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_floraforge_requirements
			num_districts = { type = district_hive value >= 10 }
			num_districts = { type = district_farming_uncapped value < 1 }
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_florafort_effects
		hidden_effect = {		
			change_pc = pc_megaflorafort
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.11 }
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Bio-Fort Project
decision_biofort_project = {
	owned_planets_only = yes
	icon = decision_biofort_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_biofort
		}
		is_planet_class = pc_hive
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_hive_worlds }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_bioforge_requirements
			num_districts = { type = district_hive value >= 10 }
			num_districts = { type = district_farming_uncapped value < 1 }
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_biofort_effects
		hidden_effect = {		
			change_pc = pc_biofort
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.11 }
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Machine Factory Project
decision_machine_fort_project = {
	owned_planets_only = yes
	icon = decision_machine_fort_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_machine_fort
		}
		is_planet_class = pc_machine
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_machine_worlds }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_machine_fort_requirements
			num_districts = { type = district_nexus value >= 10 }
			num_districts = { type = district_farming_uncapped value < 1 }
			num_districts = { type = district_mining_uncapped value < 1 }
			num_districts = { type = district_generator_uncapped value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_machine_fort_effects
		hidden_effect = {		
			change_pc = pc_machine_fort
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			planet_event = { id = pdengine.10 }
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Military Arcology Project
decision_milarcology_project = {
	owned_planets_only = yes
	icon = decision_milarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_pdshroud
			is_planet_class = pc_ecocity
			is_planet_class = pc_corpoarc
			is_planet_class = pc_palacearc
			is_planet_class = pc_capitalarc
			is_planet_class = pc_necropolis
			is_planet_class = pc_machine_necropolis
			is_planet_class = pc_necrohive
			is_planet_class = pc_milarc
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_planet_class = pc_milarc_relic
			is_planet_class = pc_shroudcapitalarc
			is_planet_class = pc_shroudcity
			is_planet_class = pc_shroudmilarc
			is_planet_class = pc_shroudecocity
			is_planet_class = pc_shroudcorpoarc
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_pd_unique = yes
		}
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_arcology_project }
		NOT = { owner = { has_valid_civic = civic_machine_servitor } }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_mil_arcology_project_requirements
			OR = {
				num_districts = { type = district_city value >= 5 }
				num_districts = { type = district_nexus value >= 5 }
			}
			num_districts = { type = district_industrial value < 1 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_milarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				set_planet_entity = {
                    entity = "milarc_planet_02_earth_entity"
                }
			}
			IF = {
				limit = {
					has_planet_flag = pdmars
				}
				set_planet_entity = {
                    entity = "milarc_planet_02_mars_entity"
                }
			}
			IF = {
				limit = {
					has_planet_flag = pdvenus
				}
				set_planet_entity = {
                    entity = "milarc_planet_02_venus_entity"
                }
			}
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "milarc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticmilarc_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniamilarc entity = milarc_ammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurmilarc 
					entity = milarc_sulfur_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanermilarc 
					entity = milarc_methane_planet_01_entity 
				}
				set_planet_entity = { picture = pc_methanecity entity = milarc_methane_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashmilarc
					entity = milarc_ash_planet_01_entity 
				}
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			planet_event = { id = pdengine.54 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			add_deposit = d_milarc
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Milarc Project (Milarc Relic Worlds)
decision_milarc_project_relic = {
	owned_planets_only = yes
	icon = decision_milarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		is_planet_class = pc_milarc_relic
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
	}

	allow = {
		num_uncleared_blockers < 1
		owner = { has_technology = tech_housing_2 }
		free_district_slots >= 5
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_milarcology_project_effects
		hidden_effect = {
			clear_deposits = yes
			change_pc = pc_milarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
				 }
				set_planet_entity = {
					entity = "milarc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticmilarc_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniamilarc entity = milarc_ammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurmilarc 
					entity = milarc_sulfur_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanermilarc 
					entity = milarc_methane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashmilarc
					entity = milarc_ash_planet_01_entity 
				}
			}
			add_deposit = d_former_relic_world
			add_deposit = d_milarc
			planet_event = { id =  mega.201 }
			while = {
				count = 4
				solar_system = {
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = relic_world_debris }
						destroy_ambient_object = this
					}
				}
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Milarc Project (Regular Relic Worlds)
decision_milarc_project_regrelic = {
	owned_planets_only = yes
	icon = decision_milarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		is_planet_class = pc_relic
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
	}

	allow = {
		num_uncleared_blockers < 1
		owner = { has_technology = tech_housing_2 }
		free_district_slots >= 5
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_milarcology_project_effects
		hidden_effect = {
			clear_deposits = yes
			change_pc = pc_milarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
				 }
				set_planet_entity = {
					entity = "milarc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticmilarc_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniamilarc entity = milarc_ammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurmilarc 
					entity = milarc_sulfur_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanermilarc 
					entity = milarc_methane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashmilarc
					entity = milarc_ash_planet_01_entity 
				}
			}
			add_deposit = d_former_relic_world
			add_deposit = d_milarc
			planet_event = { id =  mega.201 }
			while = {
				count = 4
				solar_system = {
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = relic_world_debris }
						destroy_ambient_object = this
					}
				}
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Necropolis Reg Project
decision_necropolis_reg_project = {
	owned_planets_only = yes
	icon = decision_necropolis_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_pdshroud
			is_planet_class = pc_ecocity
			is_planet_class = pc_corpoarc
			is_planet_class = pc_necropolis
			is_planet_class = pc_machine_necropolis
			is_planet_class = pc_necrohive
			is_planet_class = pc_milarc
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_planet_class = pc_milarc_relic
			is_planet_class = pc_shroudcapitalarc
			is_planet_class = pc_shroudcity
			is_planet_class = pc_shroudmilarc
			is_planet_class = pc_shroudecocity
			is_planet_class = pc_shroudcorpoarc
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_pd_unique = yes
		}
		is_artificial = no
		exists = owner
		owner = { 
			has_ascension_perk = ap_arcology_project 
			OR = {
				has_civic = civic_memorialist
				has_civic = civic_death_cult
				has_civic = civic_death_cult_corporate
				has_civic = civic_reanimated_armies
				has_origin = origin_necrophage
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_necropolis_reg_project_requirements
			num_districts = { type = district_city value >= 10 }
			num_districts = { type = district_industrial value < 1 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_necropolis_reg_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_necropolis
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			#IF = {
			#	limit = {
			#		has_planet_flag = planet_earth
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_02_earth_entity"
            #    }
			#}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdmars
			#	}
			#	set_planet_entity = {
            #       entity = "ecocity_planet_03_mars_entity"
            #    }
			#}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdvenus
			#	}
			#	set_planet_entity = {
            #       entity = "ecocity_planet_04_venus_entity"
            #    }
			#}
			#IF = {
			#	limit = { 
			#		owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
			#		NOT = { has_planet_flag = planet_earth }
			#		NOT = { has_planet_flag = pdmars }
			#		NOT = { has_planet_flag = pdvenus }
			#	 }
			#	set_planet_entity = {
			#		entity = "ecocity_planet_entity"
			#		graphical_culture = owner
			#	}
			#}
			#IF = {
			#	limit = { owner = { has_trait = trait_pc_aquatic_preference } }
			#	set_planet_entity = {
			#		entity = "aquaticcity_planet_01_entity"
			#		picture = "pc_aquaticcity"
			#	}
			#	set_planet_flag = pdaquapicture
			#}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			#planet_event = { id = pdengine.09 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Necropolis Project (Relic Worlds)
decision_necropolis_project_relic = {
	owned_planets_only = yes
	icon = decision_necropolis_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_relic
			is_artificial = no
			exists = owner
			owner = { 
				OR = {
					has_civic = civic_memorialist
					has_civic = civic_death_cult
					has_civic = civic_death_cult_corporate
					has_civic = civic_reanimated_armies
					has_origin = origin_necrophage
				}
			}
		}
	}

	allow = {
		num_uncleared_blockers < 1
		owner = { 
			has_technology = tech_housing_2 
			OR = {
				has_civic = civic_memorialist
				has_civic = civic_death_cult
				has_civic = civic_death_cult_corporate
				has_civic = civic_reanimated_armies
				has_origin = origin_necrophage
			}
		}
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_necropolis_reg_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_necropolis
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			add_deposit = d_former_relic_world
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			planet_event = { id = pdengine.14 }
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Necropolis Hive Project
decision_necropolis_hive_project = {
	owned_planets_only = yes
	icon = decision_necropolis_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		is_planet_class = pc_hive
		is_artificial = no
		exists = owner
		owner = { 
			OR = {
				has_ascension_perk = ap_hive_worlds 
			}
			OR = {
				has_civic = civic_hive_memorialist
				has_origin = origin_necrophage
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_necropolis_hive_project_requirements
			num_districts = { type = district_hive value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
			num_districts = { type = district_industrial value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_necropolis_hive_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_necrohive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive
			add_district = district_pdhive

			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			#planet_event = { id = pdengine.09 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Necropolis Robo Project
decision_necropolis_robo_project = {
	owned_planets_only = yes
	icon = decision_necropolis_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 5000
		}
	}
	
	potential = {
		is_planet_class = pc_machine
		is_artificial = no
		exists = owner
		owner = { 
			has_ascension_perk = ap_machine_worlds 
			has_civic = civic_machine_memorialist
		}
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_necropolis_robo_project_requirements
			num_districts = { type = district_nexus value >= 10 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
			num_districts = { type = district_industrial value < 1 }
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_necropolis_robo_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_machine_necropolis
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			add_district = district_pdnexus
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			#planet_event = { id = pdengine.09 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Palace Arc Project
decision_palacearcology_project = {
	owned_planets_only = yes
	icon = decision_palacearcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_pdshroud
			is_planet_class = pc_ecocity
			is_planet_class = pc_corpoarc
			is_planet_class = pc_palacearc
			is_planet_class = pc_capitalarc
			is_planet_class = pc_milarc
			is_planet_class = pc_necropolis
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_planet_class = pc_milarc_relic
			is_planet_class = pc_shroudcapitalarc
			is_planet_class = pc_shroudcity
			is_planet_class = pc_shroudmilarc
			is_planet_class = pc_shroudecocity
			is_planet_class = pc_shroudcorpoarc
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_pd_unique = yes
		}
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_arcology_project }
		owner = {
			OR = {
				has_authority = auth_imperial
				has_authority = auth_dictatorial
			}
		}
		owner = { is_regular_empire = yes }
		planet = { is_capital = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_palace_arcology_project_requirements
			num_districts = { type = district_city value >= 5 }
			num_districts = { type = district_industrial value < 1 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
			free_district_slots >= 5
			free_building_slots >= 1
		}
		num_uncleared_blockers < 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_palace_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_palacearc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			remove_deposit = d_pdshroud_desire
			remove_modifier = pddesire
			remove_deposit = d_pdshroud_composer
			remove_modifier = pdcomposer
			remove_deposit = d_pdshroud_whispers
			remove_modifier = pdwhispers
			remove_deposit = d_pdshroud_eater
			remove_modifier = pdeater
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				planet_event = { id = pdarcs.01 } 
				#set_planet_entity = {
                #    entity = "earthpalacearc_planet_01_entity"
                #}
			}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdmars
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_03_mars_entity"
            #    }
			#}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdvenus
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_04_venus_entity"
            #    }
			#}
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				}
				set_planet_entity = {
					entity = "palacearc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticpalace_planet_01_entity"
					picture = "pc_aquaticpalacearc"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniapalacearc entity = palacearcammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurpalacearc 
					entity = palacearcsulfur_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanepalacearc 
					entity = palacearcmethane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashpalacearc
					entity = palacearcash_planet_01_entity 
				}
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			planet_event = { id = pdengine.61 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			add_building = building_imperial_palace
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = { 
			factor = 0	
			owner = { any_owned_planet = { is_planet_class = pc_palacearc } }
		}
		modifier = { 
			factor = 110	
			is_capital = yes
		}
	}
}

# Palace Arcology Project (Relic Worlds)
decision_palacearcology_project_relic = {
	owned_planets_only = yes
	icon = decision_palacearcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		is_planet_class = pc_relic
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
		owner = {
			OR = {
				has_authority = auth_imperial
				has_authority = auth_dictatorial
			}
		}
		planet = { is_capital = yes }
	}	
	
	allow = {
		owner = { has_technology = tech_housing_2 }
		num_uncleared_blockers < 1
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_palace_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_palacearc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			remove_deposit = d_pdshroud_desire
			remove_modifier = pddesire
			remove_deposit = d_pdshroud_composer
			remove_modifier = pdcomposer
			remove_deposit = d_pdshroud_whispers
			remove_modifier = pdwhispers
			remove_deposit = d_pdshroud_eater
			remove_modifier = pdeater
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				set_planet_entity = {
                    entity = "earthpalacearc_planet_02_entity"
                }
			}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdmars
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_03_mars_entity"
            #    }
			#}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdvenus
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_04_venus_entity"
            #    }
			#}
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "palacearc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticpalace_planet_01_entity"
					picture = "pc_aquaticpalacearc"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniapalacearc entity = palacearcammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurpalacearc 
					entity = palacearcsulfur_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanepalacearc 
					entity = palacearcmethane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashpalacearc
					entity = palacearcash_planet_01_entity 
				}
			}
			add_deposit = d_former_relic_world
			add_building = building_imperial_palace
			planet_event = { id =  mega.201 }
			while = {
				count = 4
				solar_system = {
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = relic_world_debris }
						destroy_ambient_object = this
					}
				}
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Capital Arc Project
decision_capitalarcology_project = {
	owned_planets_only = yes
	icon = decision_capitalarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_pdshroud
			is_planet_class = pc_ecocity
			is_planet_class = pc_corpoarc
			is_planet_class = pc_palacearc
			is_planet_class = pc_capitalarc
			is_planet_class = pc_milarc
			is_planet_class = pc_necropolis
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_planet_class = pc_milarc_relic
			is_planet_class = pc_shroudcapitalarc
			is_planet_class = pc_shroudcity
			is_planet_class = pc_shroudmilarc
			is_planet_class = pc_shroudecocity
			is_planet_class = pc_shroudcorpoarc
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_pd_unique = yes
		}
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_arcology_project }
		owner = {
			OR = {
				has_authority = auth_democratic
				has_authority = auth_oligarchic
				has_authority = auth_corporate
			}
		}
		owner = { is_regular_empire = yes }
		planet = { is_capital = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_capital_arcology_project_requirements
			num_districts = { type = district_city value >= 5 }
			num_districts = { type = district_industrial value < 1 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
		free_building_slots >= 1
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_capital_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_capitalarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			remove_deposit = d_pdshroud_desire
			remove_modifier = pddesire
			remove_deposit = d_pdshroud_composer
			remove_modifier = pdcomposer
			remove_deposit = d_pdshroud_whispers
			remove_modifier = pdwhispers
			remove_deposit = d_pdshroud_eater
			remove_modifier = pdeater
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				planet_event = { id = pdarcs.02 } 
				#set_planet_entity = {
                #    entity = "earthcapitalarc_planet_01_entity"
                #}
			}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdmars
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_03_mars_entity"
            #    }
			#}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdvenus
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_04_venus_entity"
            #    }
			#}
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "capitalarc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticpalace_planet_01_entity"
					picture = "pc_aquaticcapitalarc"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniacapitalarc entity = palacearcammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcapitalarc 
					entity = palacearcsulfur_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecapitalarc 
					entity = palacearcmethane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcapitalarc
					entity = palacearcash_planet_01_entity 
				}
			}
			owner = {
				country_event = { id = distar.201 } # port for living planet distar.197, triggers in event
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
			planet_event = { id = pdengine.61 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			IF = { 
				limit = {
					NOT = { owner = { has_authority = auth_corporate } }
				}
				add_building = building_senate_building
			}
			IF = { 
				limit = {
					owner = { has_authority = auth_corporate }
				}
				add_building = building_grand_boardroom
			}
			planet_event = { id = pdengine.14 }
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = { 
			factor = 0	
			owner = { any_owned_planet = { is_planet_class = pc_capitalarc } }
		}
		modifier = { 
			factor = 110	
			is_capital = yes
		}
	}
}

# Capital Arcology Project (Relic Worlds)
decision_capitalarcology_project_relic = {
	owned_planets_only = yes
	icon = decision_capitalarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		is_planet_class = pc_relic
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
		owner = {
			OR = {
				has_authority = auth_democratic
				has_authority = auth_oligarchic
				has_authority = auth_corporate
			}
		}
		planet = { is_capital = yes }
	}	
	
	allow = {
		owner = { has_technology = tech_housing_2 }
		num_uncleared_blockers < 1
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_capital_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_capitalarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			remove_deposit = d_pdshroud_desire
			remove_modifier = pddesire
			remove_deposit = d_pdshroud_composer
			remove_modifier = pdcomposer
			remove_deposit = d_pdshroud_whispers
			remove_modifier = pdwhispers
			remove_deposit = d_pdshroud_eater
			remove_modifier = pdeater
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				set_planet_entity = {
                    entity = "earthcapitalarc_planet_02_entity"
                }
			}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdmars
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_03_mars_entity"
            #    }
			#}
			#IF = {
			#	limit = {
			#		has_planet_flag = pdvenus
			#	}
			#	set_planet_entity = {
            #        entity = "ecocity_planet_04_venus_entity"
            #    }
			#}
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "capitalarc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticpalace_planet_01_entity"
					picture = "pc_aquaticcapitalarc"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniacapitalarc entity = palacearcammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcapitalarc
					entity = palacearcsulfur_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecapitalarc 
					entity = palacearcmethane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcapitalarc
					entity = palacearcash_planet_01_entity 
				}
			}
			add_deposit = d_former_relic_world
			IF = { 
				limit = {
					NOT = { owner = { has_authority = auth_corporate } }
				}
				add_building = building_senate_building
			}
			IF = { 
				limit = {
					owner = { has_authority = auth_corporate }
				}
				add_building = building_grand_boardroom
			}
			planet_event = { id =  mega.201 }
			while = {
				count = 4
				solar_system = {
					random_system_ambient_object = {
						limit = { has_ambient_object_flag = relic_world_debris }
						destroy_ambient_object = this
					}
				}
			}
			if = {
				limit = {
					OR = {
						is_active_resolution = "resolution_ecology_environmental_control_board"
						is_active_resolution = "resolution_ecology_paradise_initiative"
					}
				}
				owner = {
					set_timed_country_flag = { flag = resolution_breached_terraformed days = 3600 }
				}
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Palace -> Capital Arc
decision_palacetocapital_project = {
	owned_planets_only = yes
	icon = decision_capitalarcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 2000
		}
	}

	potential = {
		is_planet_class = pc_palacearc
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
		owner = {
			OR = {
				has_authority = auth_democratic
				has_authority = auth_oligarchic
				has_authority = auth_corporate
			}
		}
		planet = { is_capital = yes }
	}	
	
	allow = {
		planet = { has_building = building_imperial_palace }
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_capital_arcology_project_effects
		hidden_effect = {		
			change_pc = pc_capitalarc
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "capitalarc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				set_planet_entity = {
                    entity = "earthcapitalarc_planet_01_entity"
                }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticpalace_planet_01_entity"
					picture = "pc_aquaticcapitalarc"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniacapitalarc entity = palacearcammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcapitalarc
					entity = palacearcsulfur_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecapitalarc 
					entity = palacearcmethane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcapitalarc
					entity = palacearcash_planet_01_entity 
				}
			}
			remove_building = building_imperial_palace
			IF = { 
				limit = {
					NOT = { owner = { has_authority = auth_corporate } }
				}
				add_building = building_senate_building
			}
			IF = { 
				limit = {
					owner = { has_authority = auth_corporate }
				}
				add_building = building_grand_boardroom
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

# Capital Arc -> Palace
decision_capitaltopalace_project = {
	owned_planets_only = yes
	icon = decision_palacearcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 2000
		}
	}

	potential = {
		is_planet_class = pc_capitalarc
		is_artificial = no
		exists = owner
		owner = { is_regular_empire = yes }
		owner = {
			OR = {
				has_authority = auth_imperial
				has_authority = auth_dictatorial
			}
		}
		planet = { is_capital = yes }
	}	
	
	allow = {
		planet = { 
			OR = {
				has_building = building_grand_boardroom 
				has_building = building_senate_building
			}
		}
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_palace_arcology_project_effects
		hidden_effect = {		
			change_pc = pc_palacearc
			IF = {
				limit = { 
					owner = { NOT = { has_trait = trait_pc_aquatic_preference } }
					NOT = { has_planet_flag = planet_earth }
					NOT = { has_planet_flag = pdmars }
					NOT = { has_planet_flag = pdvenus }
				 }
				set_planet_entity = {
					entity = "palacearc_planet_entity"
					graphical_culture = owner
				}
			}
			IF = {
				limit = {
					has_planet_flag = planet_earth
				}
				set_planet_entity = {
                    entity = "earthpalacearc_planet_01_entity"
                }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticpalace_planet_01_entity"
					picture = "pc_aquaticpalacearc"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { picture = pc_ammoniapalacearc entity = palacearcammonia_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { picture = pc_sulfurpalacearc entity = palacearcsulfur_planet_01_entity }
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanepalacearc 
					entity = palacearcmethane_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashpalacearc
					entity = palacearcash_planet_01_entity 
				}
			}
			remove_building = building_senate_building
			remove_building = building_grand_boardroom
			add_building = building_imperial_palace
		}
	}

	ai_weight = {
		weight = 1
	}
}

# Corpo-Arc Project
decision_corpoarcology_project = {
	owned_planets_only = yes
	icon = decision_corpoarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}
	
	potential = {
		NOR = {
			is_planet_class = pc_pdshroud
			is_planet_class = pc_ecocity
			is_planet_class = pc_corpoarc
			is_planet_class = pc_palacearc
			is_planet_class = pc_capitalarc
			is_planet_class = pc_milarc
			is_planet_class = pc_necropolis
			is_planet_class = pc_machine_necropolis
			is_planet_class = pc_necrohive
			is_planet_class = pc_city
			is_planet_class = pc_relic
			is_planet_class = pc_milarc_relic
			is_planet_class = pc_shroudcapitalarc
			is_planet_class = pc_shroudcity
			is_planet_class = pc_shroudmilarc
			is_planet_class = pc_shroudecocity
			is_planet_class = pc_shroudcorpoarc
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_pd_unique = yes
		}
		is_artificial = no
		exists = owner
		owner = { has_ascension_perk = ap_arcology_project }
		owner = { is_megacorp = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = decision_eco_arcology_project_requirements
			num_districts = { type = district_city value >= 5 }
			num_districts = { type = district_industrial value < 1 }
			OR = {
				num_districts = { type = district_farming value < 1 }
				num_districts = { type = district_farming_uncapped value < 1 }
			}
			num_districts = { type = district_mining value < 1 }
			num_districts = { type = district_generator value < 1 }
		}
		num_uncleared_blockers < 1
		free_district_slots >= 5
	}
	
	effect = {
		# Make city-planet
		custom_tooltip = decision_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_corpoarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticcity_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { 
					picture = pc_ammoniacity 
					entity = ammonia_arc_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcity 
					entity = sulfur_arc_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecity 
					entity = methane_arc_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcity 
					entity = ash_arc_planet_01_entity 
				}
			}
			planet_event = { id = pdengine.64 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			planet_event = { id = pdengine.14 }
			add_deposit = d_corpoarc
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

# Corpo-Arc Project (Relic Worlds)
decision_corpoarcology_project_relic = {
	owned_planets_only = yes
	icon = decision_corpoarcology_project

	enactment_time = 3600
	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		is_planet_class = pc_relic
		is_artificial = no
		exists = owner
		owner = { is_megacorp = yes }
	}	
	
	allow = {
		owner = { has_technology = tech_housing_2 }
		num_uncleared_blockers < 1
		free_district_slots >= 5
	}

	effect = {
		# Make city-planet
		custom_tooltip = decision_eco_arcology_project_effects
		hidden_effect = {		
			clear_deposits = yes
			change_pc = pc_corpoarc
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			add_district = district_pdarcology_housing
			remove_deposit = d_pdshroud_desire
			remove_modifier = pddesire
			remove_deposit = d_pdshroud_composer
			remove_modifier = pdcomposer
			remove_deposit = d_pdshroud_whispers
			remove_modifier = pdwhispers
			remove_deposit = d_pdshroud_eater
			remove_modifier = pdeater
			add_deposit = d_corpoarc
			IF = {
				limit = { owner = { has_trait = trait_pc_aquatic_preference } }
				set_planet_entity = {
					entity = "aquaticcity_planet_01_entity"
					picture = "pc_aquaticcity"
				}
				set_planet_flag = pdaquapicture
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ammonia_preference } }
				IF = { limit = { NOT = { has_modifier = pdammoniaatmosphere } }	add_modifier = { modifier = pdammoniaatmosphere	} }
				remove_modifier = ammonia
				set_planet_entity = { 
					picture = pc_ammoniacity 
					entity = ammonia_arc_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_sulfur_preference } }
				IF = { limit = { NOT = { has_modifier = pdsulfuratmosphere } }	add_modifier = { modifier = pdsulfuratmosphere	} }
				remove_modifier = pdsulfur
				set_planet_entity = { 
					picture = pc_sulfurcity 
					entity = sulfur_arc_planet_01_entity
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_methane_preference } }
				IF = { limit = { NOT = { has_modifier = pdmethaneatmosphere } }	add_modifier = { modifier = pdmethaneatmosphere	} }
				remove_modifier = methane
				set_planet_entity = { 
					picture = pc_methanecity 
					entity = methane_arc_planet_01_entity 
				}
			}
			IF = {
				limit = { owner = { has_trait = trait_pc_ash_preference } }
				IF = { limit = { NOT = { has_modifier = pdashatmosphere } }	add_modifier = { modifier = pdashatmosphere	} }
				remove_modifier = ash
				set_planet_entity = { 
					picture = pc_ashcity 
					entity = ash_arc_planet_01_entity 
				}
			}
			planet_event = { id = pdengine.64 }
			remove_modifier = engineered_environment
			remove_modifier = engineered_environment_gaia
			planet_event = { id = pdengine.14 }
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Replace Capital Arc Building
decision_rebuildarccapital_project = {
	owned_planets_only = yes
	icon = decision_capitalarcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_capitalarc
		exists = owner
		owner = { is_megacorp = no }
		planet = { is_capital = yes }
		planet = { 	NOT = { has_building = building_senate_building }
		}
	}	

	allow = {
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = { 
		add_building = building_senate_building 
	}

	ai_weight = {
		weight = 1000
	}
}

# Replace Capital Arc Building (Megacorp)
decision_rebuildarccapital_project_mega = {
	owned_planets_only = yes
	icon = decision_capitalarcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_capitalarc
		exists = owner
		owner = { is_megacorp = yes }
		planet = { is_capital = yes }
		planet = { 	NOT = { has_building = building_grand_boardroom }
		}
	}	

	allow = {
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = { 
		add_building = building_grand_boardroom 
	}

	ai_weight = {
		weight = 1000
	}
}

# Replace Palace Arc Building
decision_rebuildarcpalace_project = {
	owned_planets_only = yes
	icon = decision_palacearcology_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_palacearc
		exists = owner
		planet = { is_capital = yes }
		planet = { NOT = { has_building = building_imperial_palace }
		}
	}	

	allow = {
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = { add_building = building_imperial_palace }

	ai_weight = {
		weight = 1000
	}
}

# Replace Machine Capital Building
decision_rebuildarcmachinecapital_project = {
	owned_planets_only = yes
	icon = decision_machinecapital_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_machine_capital
		exists = owner
		planet = { is_capital = yes }
		planet = { NOT = { has_building = building_grand_processing_nexus }
		}
	}	

	allow = {
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = { add_building = building_grand_processing_nexus }

	ai_weight = {
		weight = 1000
	}
}
	
# Replace Bio Capital
decision_rebuildarcbiocapital_project = {
	owned_planets_only = yes
	icon = decision_biocapital_project

	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_biocapital
		exists = owner
		planet = { is_capital = yes }
		planet = { NOT = { has_building = building_prime_synaptic_warren }
		}
	}	

	allow = {
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = { add_building = building_prime_synaptic_warren }

	ai_weight = {
		weight = 1000
	}
}
	
# Replace Flora Capital
decision_rebuildarcfloracapital_project = {
	owned_planets_only = yes
	icon = decision_floracapital_project
	enactment_time = 360
	resources = {
		category = decisions
		cost = {
			influence = 20
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_megafloracapital
		exists = owner
		planet = { is_capital = yes }
		planet = { NOT = { has_building = building_megaflora_synaptic_warren }
		}
	}	

	allow = {
		free_district_slots >= 5
		free_building_slots >= 1
	}

	effect = { add_building = building_megaflora_synaptic_warren }

	ai_weight = {
		weight = 1000
	}
}