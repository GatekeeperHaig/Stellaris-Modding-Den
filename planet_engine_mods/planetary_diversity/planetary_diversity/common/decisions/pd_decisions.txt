##########################################################################
# Decisions
##########################################################################

# Adapted Environment
decision_engineered_environment = {
	icon = decision_engineered_environment
	owned_planets_only = yes
	
	prerequisites = {
		"tech_terrestrial_sculpting"		
	}

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			energy = 2500
		}
	}
	
	potential = {
		habitable_structure = no
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_gaia }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_milarc_relic }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_archive }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_pd_gas_giant_hab }
		NOT = { is_planet_class = pc_pd_barren_hab }
		NOT = { is_planet_class = pc_pd_barren_cold_hab }
		NOT = { is_planet_class = pc_pd_frozen_hab }
		NOT = { is_planet_class = pc_pd_molten_hab }
		NOT = { is_planet_class = pc_pd_toxic_hab }
		NOT = { is_planet_class = pc_pd_hothouse_hab }
		NOT = { is_planet_class = pc_pd_asteroid_hab }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_pdhive1 }
		NOT = { is_planet_class = pc_pdhive2 }
		NOT = { is_planet_class = pc_machine }
		NOT = { is_planet_class = pc_machine_factory }
		NOT = { is_planet_class = pc_machine_capital }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_bioforge }
		NOT = { is_planet_class = pc_biocapital }
		NOT = { is_planet_class = pc_megafloraforge }
		NOT = { is_planet_class = pc_megafloracapital }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_planet_class = pc_biofort }
		NOT = { is_planet_class = pc_megaflorafort }
		NOT = { is_planet_class = pc_machine_fort }
		NOT = { has_modifier = engineered_environment }
		NOT = { has_modifier = engineered_environment_gaia }
	}

	effect = {
		if = { limit = { NOT = { is_planet_class = pc_gaia } }
			add_modifier = {
				modifier = engineered_environment
				days = -1
			}
		}
		if = {
			limit = { has_modifier = bleak_planet }
			remove_modifier = bleak_planet
		}
		if = {
			limit = { has_modifier = high_gravity }
			remove_modifier = high_gravity
		}
		if = {
			limit = { has_modifier = irradiated_planet }
			remove_modifier = irradiated_planet
		}
		if = {
			limit = { has_modifier = mineral_poor }
			remove_modifier = mineral_poor
		}
		if = {
			limit = { has_modifier = unstable_tectonics }
			remove_modifier = unstable_tectonics
		}
		if = {
			limit = { has_modifier = weak_magnetic_field }
			remove_modifier = weak_magnetic_field
		}
		if = {
			limit = { has_modifier = exofungus }
			remove_modifier = exofungus
		}
	}    
	
	ai_weight = {
        weight = 3
        modifier = {
            factor = 0
            or = {
            		num_pops < 15
                and = {
                  # By late game, AI will likely keep some open building slots
                  # This is mostly harmless if there are still jobs available
                  # Otherwise, don't let them take this over building a building
                  free_building_slots > 0
                  free_jobs <= 0
                }
                free_building_slots > 2
                owner = {
                    or = {
                        resource_stockpile_compare = { resource = energy value < 6000 } 
                        resource_stockpile_compare = { resource = influence value < 150 }
                    }
                }
            }
        }
        modifier = {
        	# Will still be above 1
          factor = 0.5
          # We want to move along to perfect world shaping for its 10% jobs bonus if we have world shaper
          NOT = { owner = { has_ascension_perk = ap_world_shaper } }
          NOT = { any_owned_pop = {
            prev = {
              habitability = { who = prev value < 1.0 }
            }
          } }
        }
        modifier = {
          factor = 0
				  owner = {
            or = {
              has_civic = civic_barbaric_despoilers
              has_civic = civic_fanatic_purifiers
              has_origin = origin_post_apocalyptic
              has_civic = civic_hive_devouring_swarm			
            }
          }
        }
        modifier = {
          factor = 0
          owner = { is_machine_empire = yes }
        }
    }
}

# Adapted Environment Gaia
decision_engineered_environment_gaia = {
	icon = decision_engineered_environment_gaia
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			energy = 5000
		}
	}

	allow = {
		NOT = { is_planet_class = pc_gaia }
	}
	
	potential = {
		habitable_structure = no
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_gaia }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_milarc_relic }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_archive }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_pd_gas_giant_hab }
		NOT = { is_planet_class = pc_pd_barren_hab }
		NOT = { is_planet_class = pc_pd_barren_cold_hab }
		NOT = { is_planet_class = pc_pd_frozen_hab }
		NOT = { is_planet_class = pc_pd_molten_hab }
		NOT = { is_planet_class = pc_pd_toxic_hab }
		NOT = { is_planet_class = pc_pd_hothouse_hab }
		NOT = { is_planet_class = pc_pd_asteroid_hab }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_pdhive1 }
		NOT = { is_planet_class = pc_pdhive2 }
		NOT = { is_planet_class = pc_bioforge }
		NOT = { is_planet_class = pc_biocapital }
		NOT = { is_planet_class = pc_megafloraforge }
		NOT = { is_planet_class = pc_megafloracapital }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_planet_class = pc_biofort }
		NOT = { is_planet_class = pc_megaflorafort }
		NOT = { is_planet_class = pc_machine_fort }
		NOT = { is_planet_class = pc_shroudcity }
		has_modifier = engineered_environment
		owner = { has_ascension_perk = ap_world_shaper }
	}

	effect = {
		if = { limit = { NOT = { is_planet_class = pc_gaia } }
			add_modifier = {
				modifier = engineered_environment_gaia
				days = -1
			}
		}
		hidden_effect = {
			remove_modifier = engineered_environment
		}
	}   
	
	ai_weight = {
        weight = 3
        modifier = {
            factor = 0
            or = {
                num_pops < 20
                and = {
                  # By late game, AI will likely keep some open building slots
                  # This is mostly harmless if there are still jobs available
                  # Otherwise, don't let them take this over building a building
                  free_building_slots > 0
                  free_jobs <= 0
                }
                free_building_slots > 2
                owner = {
                    or = {
                        resource_stockpile_compare = { resource = energy value < 10000 }
                        resource_stockpile_compare = { resource = influence value < 150 }
                    }
                }
            }
        }
  }
}

# Any Planet to Radiotrophic
decision_radiotrophic = {
	icon = decision_radiotrophic
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			energy = 2000
			sr_rad_bloom = 500
		}
	}
	
	potential = {
		habitable_structure = no
		habitable_planet = yes
		owner = { 
			any_owned_planet = { is_planet_class = pc_irradiated }
		}
		NOT = { is_planet_class = pc_irradiated }
		NOT = { is_planet_class = pc_nuked }
		
	}

	effect = {
		change_pc = pc_irradiated
		
		hidden_effect = {
			remove_modifier = radiotrophic
			add_modifier = {
				modifier = radiotrophic
				days = -1
			}
			add_deposit = d_rad_blooms
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Any Planet to Radiotrophic Uncolonized
decision_radiotrophic_no_colony = {
	icon = decision_radiotrophic

	resources = {
		category = decisions
		cost = {
			energy = 2000
			sr_rad_bloom = 500
		}
	}
	
	potential = {
		habitable_structure = no
		habitable_planet = yes
		has_owner = no
		FROM = { owner = {  any_owned_planet = { is_planet_class = pc_irradiated } } }
		NOT = { is_planet_class = pc_irradiated }
		NOT = { is_planet_class = pc_nuked }
		NOT = { has_modifier = pdintrotorads }
	}

	effect = {
		add_modifier = { modifier = pdintrotorads days = 1800 }
		hidden_effect = { planet_event = { id = pdengine.49 days = 1800 } }
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Tomb to Radiotrophic
decision_radiotrophic_nuked = {
	icon = decision_radiotrophic
	owned_planets_only = yes

	enactment_time = 900
	resources = {
		category = decisions
		cost = {
			energy = 1000
			sr_rad_bloom = 250
		}
	}
	
	potential = {
		habitable_structure = no
		owner = { 
			any_owned_planet = { is_planet_class = pc_irradiated }
		}
		is_planet_class = pc_nuked
	}

	effect = {
		change_pc = pc_irradiated
		
		hidden_effect = {
			remove_modifier = radiotrophic
			add_modifier = {
				modifier = radiotrophic
				days = -1
			}
			add_deposit = d_rad_blooms
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Tomb to Radiotrophic No Colony
decision_radiotrophic_nuked_no_colony = {
	icon = decision_radiotrophic

	resources = {
		category = decisions
		cost = {
			energy = 1000
			sr_rad_bloom = 250
		}
	}
	
	potential = {
		habitable_structure = no
		has_owner = no
		is_planet_class = pc_nuked
		FROM = { owner = {  any_owned_planet = { is_planet_class = pc_irradiated } } }
		NOT = { has_modifier = pdintrotorads }
	}

	effect = {
		add_modifier = { modifier = pdintrotorads days = 900 }
		hidden_effect = { planet_event = { id = pdengine.49 days = 900 } }
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Change Ocean Picture
decision_removeocean = {
	icon = decision_removeocean
	owned_planets_only = yes

	#enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 25
		}
	}
	
	potential = {
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_milarc_relic }
		NOT = { owner = { has_trait = trait_pc_aquatic_preference } }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_pd_gas_giant_hab }
		NOT = { is_planet_class = pc_pd_barren_hab }
		NOT = { is_planet_class = pc_pd_barren_cold_hab }
		NOT = { is_planet_class = pc_pd_frozen_hab }
		NOT = { is_planet_class = pc_pd_molten_hab }
		NOT = { is_planet_class = pc_pd_toxic_hab }
		NOT = { is_planet_class = pc_pd_hothouse_hab }
		NOT = { is_planet_class = pc_pd_asteroid_hab }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_milarc }
		habitable_structure = no
		has_planet_flag = pdaquapicture
	}

	effect = {
		custom_tooltip = decision_removeocean_tooltip
		hidden_effect = {
			remove_planet_flag = pdaquapicture
			IF = { limit = { is_planet_class = pc_ocean } set_planet_entity = { picture = pc_ocean } }
			IF = { limit = { is_planet_class = pc_continental } set_planet_entity = { picture = pc_continental } }
			IF = { limit = { is_planet_class = pc_tropical } set_planet_entity = { picture = pc_tropical } }
			IF = { limit = { is_planet_class = pc_cascadian } set_planet_entity = { picture = pc_cascadian } }
			IF = { limit = { is_planet_class = pc_retinal } set_planet_entity = { picture = pc_retinal } }
			IF = { limit = { is_planet_class = pc_forest } set_planet_entity = { picture = pc_forest } }
			IF = { limit = { is_planet_class = pc_lake } set_planet_entity = { picture = pc_lake } }
			IF = { limit = { is_planet_class = pc_tepid } set_planet_entity = { picture = pc_tepid } }
			IF = { limit = { is_planet_class = pc_desertislands } set_planet_entity = { picture = pc_desertislands } }
			IF = { limit = { is_planet_class = pc_subarctic } set_planet_entity = { picture = pc_subarctic } }
			IF = { limit = { is_planet_class = pc_mangrove } set_planet_entity = { picture = pc_mangrove } }
			IF = { limit = { is_planet_class = pc_wetswamp } set_planet_entity = { picture = pc_wetswamp } }
			IF = { limit = { is_planet_class = pc_hajungle } set_planet_entity = { picture = pc_hajungle } }
			IF = { limit = { is_planet_class = pc_gaia } set_planet_entity = { picture = pc_gaia } }
			IF = { limit = { is_planet_class = pc_prairie } set_planet_entity = { picture = pc_prairie } }
			IF = { limit = { is_planet_class = pc_veld } set_planet_entity = { picture = pc_veld } }
			IF = { limit = { is_planet_class = pc_semiarid } set_planet_entity = { picture = pc_semiarid } }
			IF = { limit = { is_planet_class = pc_steppe } set_planet_entity = { picture = pc_steppe } }
			IF = { limit = { is_planet_class = pc_swamp } set_planet_entity = { picture = pc_swamp } }
			IF = { limit = { is_planet_class = pc_mud } set_planet_entity = { picture = pc_mud } }
			IF = { limit = { is_planet_class = pc_glacial } set_planet_entity = { picture = pc_glacial } }
			IF = { limit = { is_planet_class = pc_boreal } set_planet_entity = { picture = pc_boreal } }
			IF = { limit = { is_planet_class = pc_arctic } set_planet_entity = { picture = pc_arctic } }
			IF = { limit = { is_planet_class = pc_alpine } set_planet_entity = { picture = pc_alpine } }
			IF = { limit = { is_planet_class = pc_mushroom } set_planet_entity = { picture = pc_mushroom } }
			IF = { limit = { is_planet_class = pc_med } set_planet_entity = { picture = pc_med } }
			IF = { limit = { is_planet_class = pc_savannah } set_planet_entity = { picture = pc_savannah } }
			IF = { limit = { is_planet_class = pc_city } set_planet_entity = { picture = pc_city } }
			IF = { limit = { is_planet_class = pc_geothermal } set_planet_entity = { picture = pc_geothermal } }
			IF = { limit = { is_planet_class = pc_superhabitable } set_planet_entity = { picture = pc_superhabitable } }
			IF = { limit = { is_planet_class = pc_tidallylocked } set_planet_entity = { picture = pc_tidallylocked } }
			IF = { limit = { is_planet_class = pc_supercon } set_planet_entity = { picture = pc_supercon } }
			IF = { limit = { is_planet_class = pc_biolumen } set_planet_entity = { picture = pc_biolumen } }
			IF = { limit = { is_planet_class = pc_primal } set_planet_entity = { picture = pc_primal } }
			IF = { limit = { is_planet_class = pc_salt } set_planet_entity = { picture = pc_salt } }
			IF = { limit = { is_planet_class = pc_aquifer } set_planet_entity = { picture = pc_aquifer } }
			IF = { limit = { is_planet_class = pc_coral } set_planet_entity = { picture = pc_coral } }
			IF = { limit = { is_planet_class = pc_storm } set_planet_entity = { picture = pc_storm } }
			IF = { limit = { is_planet_class = pc_rogue } set_planet_entity = { picture = pc_rogue } }
			IF = { limit = { is_planet_class = pc_lichen } set_planet_entity = { picture = pc_lichen } }
			IF = { limit = { is_planet_class = pc_eyeball } set_planet_entity = { picture = pc_eyeball } }
			IF = { limit = { is_planet_class = pc_glacio } set_planet_entity = { picture = pc_glacio } }
			IF = { limit = { is_planet_class = pc_lanthanide } set_planet_entity = { picture = pc_lanthanide } }
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Change Ocean Picture
decision_oceancapital = {
	icon = decision_oceancapital
	owned_planets_only = yes

	#enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 25
		}
	}
	
	potential = {
		owner = { has_trait = trait_pc_aquatic_preference }
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_aquatic }
		NOT = { has_planet_flag = pdaquapicture }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_milarc_relic }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_habitat }
		NOT = { is_planet_class = pc_pd_gas_giant_hab }
		NOT = { is_planet_class = pc_pd_barren_hab }
		NOT = { is_planet_class = pc_pd_barren_cold_hab }
		NOT = { is_planet_class = pc_pd_frozen_hab }
		NOT = { is_planet_class = pc_pd_molten_hab }
		NOT = { is_planet_class = pc_pd_toxic_hab }
		NOT = { is_planet_class = pc_pd_hothouse_hab }
		NOT = { is_planet_class = pc_pd_asteroid_hab }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_dry = yes }
	}

	effect = {
		custom_tooltip = decision_oceancapital_tooltip
		hidden_effect = {
			set_planet_flag = pdaquapicture
			IF = { limit = { is_planet_class = pc_ocean } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_continental } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_forest } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_lake } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pc_lake }
			IF = { limit = { is_planet_class = pc_tepid } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pc_tepid }
			IF = { limit = { is_planet_class = pc_cascadian } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture } 
			IF = { limit = { is_planet_class = pc_retinal } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_steppe } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_city } set_planet_entity = { picture = pc_aquaticcity } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_hadesert } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_tidallylocked } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_supercon } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_karst } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			#Cold
			IF = { limit = { is_planet_class = pc_subarctic } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_swamp } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_mud } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_glacial } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_boreal } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_arctic } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_alpine } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_mushroom } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_antarctic } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_snow } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_highland } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_duneforest } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_tundra } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_frozen_desert } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#Tropical
			IF = { limit = { is_planet_class = pc_desertislands } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_tropical } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_mangrove } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_wetswamp } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_hajungle } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_oasis } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_med } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_savannah } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_gaia } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_ringworld_habitable } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_mesa } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_outback } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_desert } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_arid } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_sandsea } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_geothermal } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_superhabitable } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_biolumen } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_primal } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Add Acean Crystal Patch
decision_pdcrystalpatch = {
	icon = decision_pdcrystalpatch
	owned_planets_only = yes

	enactment_time = 900
	resources = {
		category = decisions
		cost = {
			sr_acean = 500
		}
	}
		
	prerequisites = {
		"tech_crystal_propagation"		
	}
	
	potential = {
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { has_planet_flag = pdcrystalpatch }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_bioforge }
		NOT = { is_planet_class = pc_biocapital }
		NOT = { is_planet_class = pc_machine }
		NOT = { is_planet_class = pc_machine_factory }
		NOT = { is_planet_class = pc_machine_capital }
		NOT = { is_planet_class = pc_machine_fort }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		habitable_structure = no
	}

	effect = {
		add_deposit = d_pdcrystalpatch
		hidden_effect = { set_planet_flag = pdcrystalpatch }
	}
	
	ai_weight = {
		weight = 1
    modifier = {
        factor = 0
        or = {
            num_pops < 15
            and = {
              # By late game, AI will likely keep some open building slots
              # This is mostly harmless if there are still jobs available
              # Otherwise, don't let them take this over building a building
              free_building_slots > 0
              free_jobs <= 0
            }
            free_building_slots > 2
            owner = {
                or = {
                    resource_stockpile_compare = { resource = sr_acean value < 2500 }
                    resource_income_compare = { resource = sr_acean value < 0 }
                }
            }
            AND = {
            	free_district_slots <= 0
            	owner = { resource_income_compare = { resource = rare_crystals value > 2 } }
          	}
            AND = {
		          num_free_districts = {
		            type = district_mining
		            value > 1
		          }
		          num_free_districts = {
		            type = district_farming
		            value > 1
		          }
	          }
          	owner = { resource_income_compare = { resource = rare_crystals value > 2 } }
        }
    }
	}
}

# Tiyanki Prospecting
decision_tiyanki_prospecting = {
	icon = decision_tiyanki_prospecting
	owned_planets_only = yes

	enactment_time = 500
	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}
		
	prerequisites = { "tech_tiyanki_prospecting" }
	
	potential = {
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { has_planet_flag = tiyanki_prospected }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_bioforge }
		NOT = { is_planet_class = pc_biocapital }
		NOT = { is_planet_class = pc_machine }
		NOT = { is_planet_class = pc_machine_factory }
		NOT = { is_planet_class = pc_machine_capital }
		NOT = { is_planet_class = pc_machine_fort }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		habitable_structure = no
	}

	effect = {
		custom_tooltip = decision_tiyanki_prospect_effects_short
		hidden_effect = {
			set_planet_flag = tiyanki_prospected
			random_list = {
				40 = { add_deposit = d_tiyanki_small }
				30 = { add_deposit = d_bubbling_swamp }
				20 = { add_deposit = d_fuming_bog }
				10 = { add_deposit = d_tiyanki_large }
			}
		}
	}
	
	ai_weight = {
		weight = 2
    modifier = {
        factor = 0
        or = {
            # Deliberately start not on a multiple of 5 boundary, so hopefully this
            # will be done by the time the next building slot opens up.
            num_pops < 13
            and = {
              # By late game, AI will likely keep some open building slots
              # This is mostly harmless if there are still jobs available
              # Otherwise, don't let them take this over building a building
              free_building_slots > 0
              free_jobs <= 0
            }
            free_building_slots > 2
            owner = {
                or = {
                    resource_stockpile_compare = { resource = energy value < 8000 }
                }
            }
        }
    }
	}
}

# Techno Canal
decision_techno_canal = {
	icon = decision_techno_canal
	owned_planets_only = yes

	enactment_time = 900
	resources = {
		category = decisions
		cost = {
			energy = 1000
			minerals = 1000
		}
	}
		
	prerequisites = {
		"tech_techno_canal"		
	}
	
	potential = {
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { has_planet_flag = pdtechnocanal }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_bioforge }
		NOT = { is_planet_class = pc_biocapital }
		NOT = { is_planet_class = pc_machine }
		NOT = { is_planet_class = pc_machine_factory }
		NOT = { is_planet_class = pc_machine_capital }
		NOT = { is_planet_class = pc_machine_fort }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		habitable_structure = no
	}

	effect = {
		add_deposit = d_technocanal
		hidden_effect = { set_planet_flag = pdtechnocanal }
	}
	
	ai_weight = {
		weight = 1
    modifier = {
        factor = 0
        or = {
            num_pops < 15
            and = {
              # By late game, AI will likely keep some open building slots
              # This is mostly harmless if there are still jobs available
              # Otherwise, don't let them take this over building a building
              free_building_slots > 0
              free_jobs <= 0
            }
            free_building_slots > 2
            owner = {
                or = {
                    resource_stockpile_compare = { resource = energy value < 8000 } 
                    resource_stockpile_compare = { resource = minerals value < 8000 } 
                }
            }
            free_district_slots <= 0
            num_free_districts = {
              type = district_farming
              value > 1
            }
        }
    }
	}
}

# Add Floating Islands
decision_pdfloatingislands = {
	icon = decision_pdfloatingislands
	owned_planets_only = yes

	enactment_time = 900
	resources = {
		category = decisions
		cost = {
			sr_eludium = 500
		}
	}
		
	prerequisites = {
		"tech_floating_islands"		
	}
	
	potential = {
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { has_planet_flag = pdfloatingislands }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_palacearc }
		NOT = { is_planet_class = pc_capitalarc }
		NOT = { is_planet_class = pc_necropolis }
		NOT = { is_planet_class = pc_machine_necropolis }
		NOT = { is_planet_class = pc_necrohive }
		NOT = { is_planet_class = pc_milarc }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { is_planet_class = pc_hive }
		NOT = { is_planet_class = pc_bioforge }
		NOT = { is_planet_class = pc_biocapital }
		NOT = { is_planet_class = pc_machine }
		NOT = { is_planet_class = pc_machine_factory }
		NOT = { is_planet_class = pc_machine_capital }
		NOT = { is_planet_class = pc_machine_fort }
		NOT = { is_planet_class = pc_shroudcity }
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = penal_colony }
		NOT = { has_modifier = slave_colony }
		habitable_structure = no
	}

	effect = {
		add_deposit = d_pdfloatingislands
		hidden_effect = { set_planet_flag = pdfloatingislands }
	}
	
	ai_weight = {
		weight = 1
    modifier = {
        factor = 0
        or = {
            num_pops < 15
            and = {
              # By late game, AI will likely keep some open building slots
              # This is mostly harmless if there are still jobs available
              # Otherwise, don't let them take this over building a building
              free_building_slots > 0
              free_jobs <= 0
            }
            free_building_slots > 2
            owner = {
                or = {
                    resource_stockpile_compare = { resource = sr_acean value < 2500 }
                    resource_income_compare = { resource = sr_acean value < 0 }
                }
            }
            AND = {
            	free_district_slots <= 0
            	owner = { resource_income_compare = { resource = rare_crystals value > 2 } }
          	}
            AND = {
		          num_free_districts = {
		            type = district_mining
		            value > 1
		          }
		          num_free_districts = {
		            type = district_farming
		            value > 1
		          }
	          }
          	owner = { resource_income_compare = { resource = rare_crystals value > 2 } }
        }
    }
	}
}

decision_pd_transplant_tree = {
	owned_planets_only = yes
	sound = event_laboratory_sound
	icon = decision_pd_transplant_tree

	enactment_time = 180

	resources = {
		category = decisions
		cost = {
			food = 500
		}
	}

	potential = {
		has_modifier = no_pd_lifetree
		NOT = {
			OR = {
				has_deposit = d_pd_tree_of_life_habitat
				has_deposit = d_pd_tree_of_life_ringworld
				has_deposit = d_pd_tree_of_life_special
			}
		}
	}

	allow = { }

	effect = {
		remove_modifier = no_pd_lifetree
		hidden_effect = {
		remove_deposit = d_pd_tree_of_life_dead
		IF = {
			limit = { 
				NOT = { has_planet_flag = pd_tol1 }
				NOT = { has_planet_flag = pd_tol2 }
				NOT = { has_planet_flag = pd_tol3 }
				NOT = { habitable_structure = yes }
				NOT = { is_planet_class = pc_ecocity }
				NOT = { is_planet_class = pc_palacearc }
				NOT = { is_planet_class = pc_capitalarc }
				NOT = { is_planet_class = pc_necropolis }
				NOT = { is_planet_class = pc_machine_necropolis }
				NOT = { is_planet_class = pc_necrohive }
				NOT = { is_planet_class = pc_milarc }
				NOT = { is_planet_class = pc_shroudcity }
				NOT = { is_planet_class = pc_relic }
				NOT = { is_planet_class = pc_milarc_relic }
				NOT = { is_planet_class = pc_city }
				NOT = { is_planet_class = pc_floating }
				NOT = { is_planet_class = pc_crystal }
				NOT = { is_planet_class = pc_technoorganic }
				NOT = { is_planet_class = pc_graveyard }
			 }
			add_deposit = d_pd_tree_of_life_1
			set_planet_flag = pd_tol1	
			IF = {
				limit = { owner = { NOT = { has_technology = tech_pdtoltech } } }
				planet_event = { id = pdengine.40 days = 7200 random = 7200 } 
			}
			IF = {
				limit = { owner = { has_technology = tech_pdtoltech } }
				planet_event = { id = pdengine.40 days = 3600 random = 3600 }
			}
		}
		ELSE_IF = {
			limit = { 
				habitable_structure = yes
				NOT = { is_planet_class = pc_ringworld_habitable }
			 }
		add_deposit = d_pd_tree_of_life_habitat
		}
		ELSE_IF = {
			limit = { 
				is_planet_class = pc_ringworld_habitable
			 }
		add_deposit = d_pd_tree_of_life_ringworld
		}
		ELSE_IF = {
			limit = { 
				OR = {
				is_planet_class = pc_ecocity
				is_planet_class = pc_palacearc
				is_planet_class = pc_capitalarc
				is_planet_class = pc_necropolis
				is_planet_class = pc_machine_necropolis
				is_planet_class = pc_necrohive
				is_planet_class = pc_milarc
				is_planet_class = pc_shroudcity
				is_planet_class = pc_relic
				is_planet_class = pc_milarc_relic
				is_planet_class = pc_city
				is_planet_class = pc_floating
				is_planet_class = pc_crystal
				is_planet_class = pc_technoorganic
				is_planet_class = pc_graveyard
				}
			 }
		add_deposit = d_pd_tree_of_life_special
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Ammonia Hab (No Colony)
decision_ammoniahabsnocolony = {
	#owned_planets_only = no
	sound = event_alien_nature_02
	icon = decision_ammoniahabs

	#enactment_time = 180

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		has_owner = no
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_habitat 
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdammoniaatmosphere }
		space_owner = { any_owned_pop = { has_trait = trait_pc_ammonia_preference } }
	}

	allow = {
	}

	effect = {
		add_modifier = { modifier = pdammoniaatmosphere days = -1 }
		#set_planet_entity = { picture = pc_ammoniahab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdsulfuratmosphere
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_ammoniaring entity = ammoniaring_habitable_entity_01_entity }
			}
			if = {
				limit = { 
					OR = { 
						is_planet_class = pc_city 
						is_planet_class = pc_ecocity 
						is_planet_class = pc_palacearc
						is_planet_class = pc_capitalarc
						is_planet_class = pc_necropolis
						is_planet_class = pc_milarc
						is_planet_class = pc_shroudcity
					} 
				}
				set_planet_entity = { picture = pc_ammoniacity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Ammonia Hab (Colony)
decision_ammoniahabs = {
	owned_planets_only = yes
	sound = event_alien_nature_02
	icon = decision_ammoniahabs

	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdammoniaatmosphere }
		owner = { any_owned_pop = { has_trait = trait_pc_ammonia_preference } }
	}

	allow = { 
	}

	effect = {
		add_modifier = { modifier = pdammoniaatmosphere days = -1 }
		#set_planet_entity = { picture = pc_ammoniahab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdsulfuratmosphere
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_ammoniaring entity = ammoniaring_habitable_entity_01_entity }
			}
			if = {
				limit = { OR = { is_planet_class = pc_city is_planet_class = pc_ecocity is_planet_class = pc_necropolis is_planet_class = pc_palacearc is_planet_class = pc_capitalarc } }
				set_planet_entity = { picture = pc_ammoniacity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Sulfur Hab (No Colony)
decision_sulfurhabsnocolony = {
	#owned_planets_only = no
	sound = event_alien_nature_02
	icon = decision_sulfurhabs

	#enactment_time = 180

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		has_owner = no
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_habitat 
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdsulfuratmosphere }
		space_owner = { any_owned_pop = { has_trait = trait_pc_sulfur_preference } }
	}

	allow = {
	}

	effect = {
		add_modifier = { modifier = pdsulfuratmosphere days = -1 }
		#set_planet_entity = { picture = pc_ammoniahab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdammoniaatmosphere
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_sulfurring entity = sulfurring_habitable_entity_01_entity }
			}
			if = {
				limit = { 
					OR = { 
						is_planet_class = pc_city 
						is_planet_class = pc_ecocity 
						is_planet_class = pc_palacearc
						is_planet_class = pc_capitalarc
						is_planet_class = pc_necropolis
						is_planet_class = pc_milarc
						is_planet_class = pc_shroudcity
					} 
				}
				set_planet_entity = { picture = pc_sulfurcity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Sulfur Hab (Colony)
decision_sulfurhabs = {
	owned_planets_only = yes
	sound = event_alien_nature_02
	icon = decision_sulfurhabs

	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdsulfuratmosphere }
		owner = { any_owned_pop = { has_trait = trait_pc_sulfur_preference } }
	}

	allow = { 
	}

	effect = {
		add_modifier = { modifier = pdsulfuratmosphere days = -1 }
		#set_planet_entity = { picture = pc_ammoniahab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdammoniaatmosphere
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_sulfurring entity = sulfurring_habitable_entity_01_entity }
			}
			if = {
				limit = { OR = { 
					is_planet_class = pc_city 
					is_planet_class = pc_ecocity 
					is_planet_class = pc_necropolis 
					is_planet_class = pc_palacearc
					is_planet_class = pc_capitalarc
				} 
			}
			set_planet_entity = { picture = pc_sulfurcity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Methane Hab (No Colony)
decision_methanehabsnocolony = {
	#owned_planets_only = no
	sound = event_alien_nature_02
	icon = decision_methanehabs

	#enactment_time = 180

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		has_owner = no
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdmethaneatmosphere }
		space_owner = { any_owned_pop = { has_trait = trait_pc_methane_preference } }
	}

	allow = {
	}

	effect = {
		add_modifier = { modifier = pdmethaneatmosphere days = -1 }
		#set_planet_entity = { picture = pc_methanehab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdammoniaatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdsulfuratmosphere
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_methanering entity = methanering_habitable_entity_01_entity }
			}
			if = {
				limit = { OR = { 
					is_planet_class = pc_city 
					is_planet_class = pc_ecocity 
					is_planet_class = pc_necropolis 
					is_planet_class = pc_palacearc
					is_planet_class = pc_capitalarc
				} }
				set_planet_entity = { picture = pc_methanecity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Methane Hab (Colony)
decision_methanehabs = {
	owned_planets_only = yes
	sound = event_alien_nature_02
	icon = decision_methanehabs

	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdmethaneatmosphere }
		owner = { any_owned_pop = { has_trait = trait_pc_methane_preference } }
	}

	allow = { 
	}

	effect = {
		add_modifier = { modifier = pdmethaneatmosphere days = -1 }
		#set_planet_entity = { picture = pc_methanehab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdammoniaatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdsulfuratmosphere
			if = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_methanering entity = methanering_habitable_entity_01_entity }
			}
			if = {
				limit = { 
					OR = { 
						is_planet_class = pc_city 
						is_planet_class = pc_ecocity 
						is_planet_class = pc_necropolis
						is_planet_class = pc_palacearc
						is_planet_class = pc_capitalarc 
					} 
				}
				set_planet_entity = { picture = pc_methanecity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Ash Hab (No Colony)
decision_ashhabsnocolony = {
	#owned_planets_only = no
	sound = event_alien_nature_02
	icon = decision_ashhabs

	#enactment_time = 180

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		has_owner = no
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdashatmosphere }
		space_owner = { any_owned_pop = { has_trait = trait_pc_ash_preference } }
	}

	allow = {
	}

	effect = {
		add_modifier = { modifier = pdashatmosphere days = -1 }
		#set_planet_entity = { picture = pc_ashhab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdammoniaatmosphere
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdsulfuratmosphere
			IF = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_ashring entity = ashring_habitable_entity_01_entity }
			}
			if = {
				limit = { 
					OR = { 
						is_planet_class = pc_city 
						is_planet_class = pc_ecocity 
						is_planet_class = pc_necropolis
						is_planet_class = pc_palacearc 
						is_planet_class = pc_capitalarc
					} 
				}
				set_planet_entity = { picture = pc_ashcity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Ash Hab (Colony)
decision_ashhabs = {
	owned_planets_only = yes
	sound = event_alien_nature_02
	icon = decision_ashhabs

	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		NOT = { has_modifier = pdashatmosphere }
		owner = { any_owned_pop = { has_trait = trait_pc_ash_preference } }
	}

	allow = { 
	}

	effect = {
		add_modifier = { modifier = pdashatmosphere days = -1 }
		#set_planet_entity = { picture = pc_ashhab }
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdammoniaatmosphere
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdsulfuratmosphere
			IF = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_ashring entity = ashring_habitable_entity_01_entity }
			}
			if = {
				limit = { 
					OR = { 
						is_planet_class = pc_city 
						is_planet_class = pc_ecocity 
						is_planet_class = pc_necropolis
						is_planet_class = pc_palacearc 
						is_planet_class = pc_capitalarc
					} 
				}
				set_planet_entity = { picture = pc_ashcity }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Remove Exotic Hab (No Colony)
decision_noexoitchabsnocolony = {
	#owned_planets_only = yes
	sound = event_alien_nature_02
	icon = decision_noexoitchabs

	#enactment_time = 180

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		has_owner = no
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		}
		OR = {
		has_modifier = pdammoniaatmosphere
		has_modifier = pdmethaneatmosphere
		has_modifier = pdashatmosphere
		has_modifier = pdsulfuratmosphere
		}
		from = { 
			NOT = { 
				OR = {
					has_trait = trait_pc_ash_preference
					has_trait = trait_pc_methane_preference
					has_trait = trait_pc_ammonia_preference
					has_trait = trait_pc_sulfur_preference
				}
			}
		}
	}

	allow = {
	}

	effect = {
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdammoniaatmosphere
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdsulfuratmosphere
			IF = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_ringworld_habitable }
			}
			IF = {
				limit = { is_planet_class = pc_city }
				set_planet_entity = { picture = pc_city }
			}
			IF = {
				limit = { is_planet_class = pc_ecocity }
				set_planet_entity = { picture = pc_ecocity }
			}
			IF = {
				limit = { is_planet_class = pc_necropolis }
				set_planet_entity = { picture = pc_necropolis }
			}
			IF = {
				limit = { is_planet_class = pc_milarc }
				set_planet_entity = { picture = pc_milarc }
			}
			IF = {
				limit = { is_planet_class = pc_palacearc }
				set_planet_entity = { picture = pc_palacearc }
			}
			IF = {
				limit = { is_planet_class = pc_capitalarc }
				set_planet_entity = { picture = pc_capitalarc }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#No Exotic Hab (Colony)
decision_noexoitchabs = {
	owned_planets_only = yes
	sound = event_alien_nature_02
	icon = decision_noexoitchabs

	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 1000
		}
	}

	potential = {
		OR = {
		is_planet_class = pc_habitat
		is_planet_class = pc_ringworld_habitable
		is_planet_class = pc_relic
		is_planet_class = pc_milarc_relic
		is_planet_class = pc_city
		is_planet_class = pc_ecocity
		is_planet_class = pc_palacearc
		is_planet_class = pc_capitalarc
		is_planet_class = pc_necropolis
		is_planet_class = pc_milarc
		is_planet_class = pc_shroudcity
		is_planet_class = pc_pd_barren_hab
		is_planet_class = pc_pd_barren_cold_hab
		is_planet_class = pc_pd_frozen_hab
		is_planet_class = pc_pd_molten_hab
		is_planet_class = pc_pd_hothouse_hab
		is_planet_class = pc_pd_toxic_hab
		is_planet_class = pc_pd_gas_giant_hab
		is_planet_class = pc_pd_asteroid_hab
		}
		OR = {
		has_modifier = pdammoniaatmosphere
		has_modifier = pdsulfuratmosphere
		has_modifier = pdmethaneatmosphere
		has_modifier = pdashatmosphere
		}
		owner = { 
			NOT = { 
				OR = {
					has_trait = trait_pc_ash_preference
					has_trait = trait_pc_methane_preference
					has_trait = trait_pc_ammonia_preference
					has_trait = trait_pc_sulfur_preference
				}
			}
		}
	}

	allow = { 
	}

	effect = {
		custom_tooltip = changehabatsomphereeffect
		hidden_effect = { 
			remove_modifier = pdammoniaatmosphere
			remove_modifier = pdmethaneatmosphere
			remove_modifier = pdashatmosphere
			remove_modifier = pdsulfuratmosphere
			IF = {
				limit = { is_planet_class = pc_ringworld_habitable }
				set_planet_entity = { picture = pc_ringworld_habitable }
			}
			IF = {
				limit = { is_planet_class = pc_city }
				set_planet_entity = { picture = pc_city }
			}
			IF = {
				limit = { is_planet_class = pc_ecocity }
				set_planet_entity = { picture = pc_ecocity }
			}
			IF = {
				limit = { is_planet_class = pc_necropolis }
				set_planet_entity = { picture = pc_necropolis }
			}
			IF = {
				limit = { is_planet_class = pc_milarc }
				set_planet_entity = { picture = pc_milarc }
			}
			IF = {
				limit = { is_planet_class = pc_palacearc }
				set_planet_entity = { picture = pc_palacearc }
			}
			IF = {
				limit = { is_planet_class = pc_capitalarc }
				set_planet_entity = { picture = pc_capitalarc }
			}
		}
	}

	ai_weight = {
		weight = 1
	}
}

#Set off the Bombs
decision_armbombownplanet = {
	owned_planets_only = yes
	sound = event_red_alert
	icon = decision_armbombownplanet

	enactment_time = 1800

	resources = {
		category = decisions
		cost = {
			energy = 1000
			influence = 50
		}
	}

	potential = { owner = { AND = { has_civic = civic_fanatic_purifiers has_origin = origin_post_apocalyptic } } NOT = { is_planet_class = pc_nuked } }

	allow = { 
	}

	effect = {
		change_pc = pc_nuked
		add_planet_devastation = 75
		hidden_effect = {
			remove_modifier = geothermal
			remove_deposit = d_geothermal_slurry_site
			remove_modifier = superhabitable
			remove_deposit = d_ancient_motes
			remove_modifier = aquatic
			remove_deposit = d_aquatic_trench
			remove_modifier = tidal_locked2
			remove_deposit = d_nightside_mining_operations
			remove_modifier = karst
			remove_deposit = d_karst_cave
			remove_modifier = ammonia
			remove_deposit = d_ammonia_sea
			remove_modifier = pdsulfur
			remove_deposit = d_sulfur_pool
			remove_modifier = pdacid
			remove_deposit = d_acid_lakes
			remove_deposit = d_pdacid_rain
			remove_modifier = methane
			remove_deposit = d_frozen_gas_mountain
			remove_modifier = ash
			remove_modifier = primal
			remove_deposit = d_lava_lakes
			remove_modifier = radiotrophic
			remove_deposit = d_rad_blooms
			remove_modifier = biolumen
			remove_deposit = d_biolumen_nature_preserve
			remove_deposit = d_pdshroud
			remove_modifier = pdsalt
			remove_deposit = d_storm_corridor
			remove_modifier = pdaquifer
			remove_deposit = d_aquifer_cave
			remove_modifier = pdstorm
			remove_deposit = d_coral_fields
			remove_modifier = pdcoral
			remove_deposit = d_salt_caves
		}
	}

	ai_weight = {
		weight = 10
	}
}

# TOL Can Terraform Barren
decision_tolbarren_no_colony = {
	icon = decision_pd_transplant_tree
	#owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			energy = 10000
		}
	}
	
	potential = {
		habitable_structure = no
		has_owner = no
		FROM = { owner = { has_origin = origin_pd_tree_of_life has_technology = tech_climate_restoration } }
		OR = {
			AND = {
			OR = {
			is_planet_class = pc_barren
			is_planet_class = pc_barren_cold
			is_planet_class = pc_hothouse
			}
			has_modifier = terraforming_candidate
			}
			OR = {
				is_planet_class = pc_acid
				is_planet_class = pc_irradiated
				is_planet_class = pc_methane
				is_planet_class = pc_ash
				is_planet_class = pc_sulfur
				is_planet_class = pc_ammonia
			}
		}
		NOT = { has_modifier = pdintoaforest }
	}

	effect = {
		add_modifier = { modifier = pdintoaforest days = -1 }
		hidden_effect = { planet_event = { id = pdengine.50 days = 3600 } }
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Frozen gets Methane Terraforming=
#decision_pd_scan_frozen_world = {
#	icon = decision_pd_scan_frozen_world
#	#owned_planets_only = yes
#
#	resources = {
#		category = decisions
#		cost = {
#			energy = 200
#		}
#	}
#	
#	potential = {
#		is_planet_class = pc_frozen
#		from = { owner = { has_trait = trait_pc_methane_preference } }
#		from = { owner = { has_technology = tech_terrestrial_sculpting } }
#		planet_size > 9
#		planet_size < 26	
#		solar_system = {
#			NOR = {
#				is_star_class = sc_black_hole
#				is_star_class = sc_neutron_star
#				is_star_class = sc_pulsar
#			}
#		}
#		NOT = { has_modifier = terraforming_methane }
#		NOT = { has_planet_flag = pdmethanescan }
#	}
#
#	effect = {
#		custom_tooltip = decision_pd_scan_frozen_world_tooltip
#		hidden_effect = {
#			random_list = {
#				66 = {}
#				33 = { add_modifier = { modifier = terraforming_methane days = -1 } }
#			}
#			set_planet_flag = pdmethanescan
#		}
#	}
#	
#	ai_weight = {
#		weight = 1000
#	}
#}


