###############################
# Mandate Events
# by Maximilian Olbers
###############################

namespace = mandate

@tier1influencecontact = 7
@tier1influencecontactxenophile = 8
@tier1influencecontactmin = 20
@tier1influencecontactmax = 80

@tier2influencecontact = 10
@tier2influencecontactxenophile = 12
@tier2influencecontactmin = 40
@tier2influencecontactmax = 100

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000
@tier5materialreward = 48
@tier5materialmin = 700
@tier5materialmax = 4000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300
@tier5influencereward = 36
@tier5influencemin = 250
@tier5influencemax = 500
@tier6influencereward = 48
@tier6influencemin = 300
@tier6influencemax = 600

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500
@tier5researchreward = 48
@tier5researchmin = 300
@tier5researchmax = 1000


# Removing progress to mandate if you disband a related station
country_event = {
	id = mandate.3
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		OR = {
			has_event_chain = mandate_miner_chain
			has_event_chain = mandate_orbresearch_chain
		}
	}

	immediate = {
		if = {
			limit = {
				OR = {
					from = {
						is_ship_size = mining_station
					}
					AND = {
						from = {
							is_ship_size = outpost_station
						}
					}
				}
				has_event_chain = mandate_miner_chain
			}
			add_event_chain_counter = { 
				event_chain = mandate_miner_chain 
				counter = mining_stations_built
				amount = -1
			}
		}
		if = {
			limit = {
				OR = {
					from = {
						is_ship_size = research_station
					}
					AND = {
						from = {
							is_ship_size = outpost_station
							orbit = {
								OR = {
									has_resource = {
										type = physics_research
										amount > 0
									}
									has_resource = {
										type = society_research
										amount > 0
									}
									has_resource = {
										type = engineering_research
										amount > 0
									}
								}
							}
						}
					}
				}
				has_event_chain = mandate_orbresearch_chain
			}
			add_event_chain_counter = { 
				event_chain = mandate_orbresearch_chain 
				counter = orbresearch_built
				amount = -1
			}
		} 
	}
}

#########################
# Miner events
# id 110
#########################
# This = construction ship
# From = planet it is built on
# Increase Mandated Mining Station counter when built
ship_event = {
	id = mandate.110
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		owner = {
			has_event_chain = mandate_miner_chain
		}
	}

	immediate = {
		owner = {
			if = {
				###DO NOTHING
				else = {
					add_event_chain_counter = { 
						event_chain = mandate_miner_chain 
						counter = mining_stations_built
						amount = 1
					}
					if = {
						limit = {
							has_completed_event_chain_counter = {
								event_chain = mandate_miner_chain
								counter = mining_stations_built
							}
						}
						country_event = { id = mandate.111 }
					}
				}
			}
		}
	}
}