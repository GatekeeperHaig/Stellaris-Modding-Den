#This file was created by script!
#Instead of editing it, you should change the origin files or the script and rerun the script!
#Python files that can be directly used for a rerun (storing all parameters from the last run) should be in the main directory
namespace = hostileworlds_terraform

planet_event = {
	id = hostileworlds_terraform.1
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		is_planet_class = pc_habitat
	}
	
	immediate = {
		add_modifier = {
			modifier = light_population
			days = -1
		}
		add_modifier = {
			modifier = ex_asteroid
			days = -1
		}
		remove_modifier = underground_caverns
		remove_modifier = alpha_doming
		remove_modifier = zero_gravity
		remove_modifier = mineral_rich
		remove_modifier = mineral_poor
		remove_modifier = low_gravity
	}
}

planet_event = {
	id = hostileworlds_terraform.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		not = {
			is_planet_class = pc_frozen_habitable
		}
	}
	
	immediate = {
		remove_modifier = very_cold
	}
}

planet_event = {
	id = hostileworlds_terraform.3
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_building = building_ice_rig
	}
	
	immediate = {
		every_tile = {
			limit = {
				has_building = building_ice_rig
				any_neighboring_tile = {
					has_building = no
					has_building_construction = no
					has_grown_pop = no
					has_growing_pop = no
				}
			}
			random_neighboring_tile = {
				limit = {
					has_building = no
					has_building_construction = no
					has_grown_pop = no
					has_growing_pop = no
				}
				set_blocker = tb_massive_glacier_locked
			}
		}
	}
}

planet_event = {
	id = hostileworlds_terraform.4
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		nor = {
			is_planet_class = pc_asteroid_habitable
			is_planet_class = pc_barren_habitable
		}
	}
	
	immediate = {
		remove_modifier = zero_gravity
	}
}

planet_event = {
	id = hostileworlds_terraform.5
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		not = {
			is_planet_class = pc_molten_habitable
		}
	}
	
	immediate = {
		remove_modifier = volcanic_atmosphere
		remove_modifier = natural_refinery
		remove_modifier = very_hot
	}
}

planet_event = {
	id = hostileworlds_terraform.6
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		not = {
			is_planet_class = pc_toxic_habitable
		}
	}
	
	immediate = {
		remove_modifier = toxic_atmosphere
	}
}

planet_event = {
	id = hostileworlds_terraform.7
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		has_building = building_geothermal_tap
	}
	
	immediate = {
		every_tile = {
			limit = {
				has_building = building_geothermal_tap
				any_neighboring_tile = {
					has_building = no
					has_building_construction = no
					has_grown_pop = no
					has_growing_pop = no
				}
			}
			random_neighboring_tile = {
				limit = {
					has_building = no
					has_building_construction = no
					has_grown_pop = no
					has_growing_pop = no
				}
				set_blocker = tb_active_volcano_locked
			}
		}
	}
}

planet_event = {
	id = hostileworlds_terraform.8
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_planet_flag = pf_has_been_terraformed
		# Uncolonised planet not owned???
		# owner = {
		# set_country_flag = cf_is_terraformer
		# }
		if = {
			limit = {
				is_colony = yes
			}
			owner = {
				set_country_flag = cf_is_terraformer
				set_timed_country_flag = {
					flag = cf_recent_terraforming
					days = 3600
				}
			}
		}
	}
}
