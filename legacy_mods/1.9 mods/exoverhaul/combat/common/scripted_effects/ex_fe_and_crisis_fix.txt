swarm_vanguard = {	
	random_list = {
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 3452
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 2967
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 4126
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 756
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 1007
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 2510
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 4831
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 3367
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 987
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
		10 = {
			create_leader = {
				type = admiral
				species = last_created
				name = random
				skill = 500
				set_age = 4517
				traits = {
					trait = leader_trait_void_swimmer
				}
			}
		}
	}

	create_fleet = {
		name = "NAME_Prethoryn_Vanguard"
		effect = {
			set_owner = PREV
			create_ship = {
				name = random
				design = "NAME_Swarm_Small"
				graphical_culture = "swarm_01"
			}
			assign_leader = last_created_leader
			while = {
				count = 12 #reduced from 46
				create_ship = {
					name = random
					design = "NAME_Swarm_Small"
					graphical_culture = "swarm_01"
				}
			}
			set_location = {
				target = PREVPREV
				distance = 35
				angle = random 
			}
			set_fleet_stance = aggressive
			set_aggro_range = 500
			set_aggro_range_measure_from = self
		}
	}
}

swarm_brood = {
	random_list = {
		75 = {
			create_leader = {
				type = admiral
				species = event_target:prethoryn_species
				name = random
				skill = 500
				set_age = 1125
			}
		}
		25 = {
			create_leader = {
				type = admiral
				species = event_target:prethoryn_species
				name = random
				skill = 500
				set_age = 1125
				traits = {
					trait = leader_trait_hive_affinity
				}
			}
		}
	}
	create_fleet = {
		name = "NAME_Prethoryn_Star_Brood"
		effect = {
			set_owner = event_target:prethoryn
			create_ship = {
				name = random
				design = "NAME_Swarm_Queen"
				graphical_culture = "swarm_01"
			}
			assign_leader = last_created_leader
			while = {
				count = 4 #reduced from 15
				create_ship = {
					name = random
					design = "NAME_Swarm_Large"
					graphical_culture = "swarm_01"
				}
			}
			while = {
				count = 3 #reduced from 13
				create_ship = {
					name = random
					design = "NAME_Swarm_Carrier"
					graphical_culture = "swarm_01"
				}
			}
			while = {
				count = 16 #reduced from 63
				create_ship = {
					name = random
					design = "NAME_Swarm_Small"
					graphical_culture = "swarm_01"
				}
			}
			set_location = prevprev
			set_fleet_stance = aggressive
			set_aggro_range = 500
			set_aggro_range_measure_from = self
		}
	}
}

# AI Crisis Planet Defense plus Armies
create_ai_planet_defense = {
	create_fleet = {
		name = "NAME_AI_Core"
		effect = {
			set_owner = event_target:AI_crisis
			create_ship = {
				name = random
				design = "NAME_AI_Core"
				graphical_culture = "ai_01"
			}
			set_location = {
				target = root
				distance = 10
				angle = random
			}
		}
	}
	owner = {
		create_leader = {
			type = admiral
			species = owner_main_species
			name = random
			skill = 800
		}
		last_created_leader = { set_age = 0 }
	}
	create_fleet = {
		effect = {
			set_owner = event_target:AI_crisis
			while = {
				count = 10 #reduced from 40
				create_ship = {
					name = random
					design = "NAME_Euthanizer"
					graphical_culture = "ai_01"
				}
			}
			assign_leader = last_created_leader
			while = {
				count = 20 #reduced from 80
				create_ship = {
					name = random
					design = "NAME_Sterilizer"
					graphical_culture = "ai_01"
				}
			}
			set_location = {
				target = root
				distance = 45
				angle = random
			}
		}
		settings = {
			garrison = yes
		}
	}
	create_fleet = {
		effect = {
			set_owner = event_target:AI_crisis
			while = {
				count = 20 
				create_army_transport = {
					graphical_culture = "ai_01"
					army_type = "android_army"
				}
			}
			set_location = {
				target = root
				distance = 45
				angle = random
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = event_target:AI_crisis
			create_ship = {
				name = random
				design = "NAME_AI_Constructor"
				graphical_culture = "ai_01"
			}
			set_location = {
				target = root
				distance = 45
				angle = random
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = event_target:AI_crisis
			create_ship = {
				name = random
				design = "NAME_AI_Constructor"
				graphical_culture = "ai_01"
			}
			set_location = {
				target = root
				distance = 45
				angle = random
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = event_target:AI_crisis
			create_ship = {
				name = random
				design = "NAME_AI_Constructor"
				graphical_culture = "ai_01"
			}
			set_location = {
				target = root
				distance = 45
				angle = random
			}
		}
	}
}

create_ai_fleet = {
	owner = {
		create_leader = {
			type = admiral
			species = owner_main_species
			name = random
			skill = 400
		}
		last_created_leader = { set_age = 0 }
	}
	create_fleet = {
		effect = {
			set_owner = event_target:AI_crisis
			while = {
				count = 4 #reduced from 16
				create_ship = {
					name = random
					design = "NAME_Euthanizer"
					graphical_culture = "ai_01"
				}
			}
			assign_leader = last_created_leader
			while = {
				count = 10 #reduced from 38
				create_ship = {
					name = random
					design = "NAME_Sterilizer"
					graphical_culture = "ai_01"
				}
			}
			set_location = {
				target = root
				distance = 45
				angle = random
			}
		}
	}
}

awaken_guardians_of_the_galaxy = {
	random_list = {
		60 = { # Awaken one
			random_country = {
				limit = {
					is_country_type = fallen_empire
					OR = {
						has_ethic = ethic_fanatic_materialist
						has_ethic = ethic_fanatic_xenophile
					}
					fleet_power > 40000
				}
				set_country_flag = guardians_of_the_galaxy
				set_timed_country_flag = { flag = timed_guardians_of_the_galaxy days = 1825 }
				set_timed_country_flag = { flag = timed_guardians_of_the_galaxy_2 days = 3650 }
			}
		}
		15 = { # Awaken both!
			every_country = {
				limit = {
					is_country_type = fallen_empire
					OR = {
						has_ethic = ethic_fanatic_materialist
						has_ethic = ethic_fanatic_xenophile
					}
					fleet_power > 40000
				}
				set_country_flag = guardians_of_the_galaxy
				set_timed_country_flag = { flag = timed_guardians_of_the_galaxy days = 1825 }
				set_timed_country_flag = { flag = timed_guardians_of_the_galaxy_2 days = 3650 }
			}
		}
		25 = {} # No awakening
	}
}

create_fallen_empire_reinforcements = {
	create_fleet = {
		effect = {
			set_owner = prev.owner
			while = {
				count = 2 #reduced from 5
				create_fallen_empire_large_ship = yes
			}
			while = {
				count = 4 #reduced from 10
				create_fallen_empire_small_ship = yes
			}
			random_list = {
				25 = {
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 60
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 75
						angle = random 
					}				
				}				
			}
		}
	}					
}

create_fallen_empire_fleet = {
	create_fleet = {
		effect = {
			set_owner = prev.owner
			while = {
				count = 5 #reduced from 10
				create_fallen_empire_large_ship = yes
			}
			while = {
				count = 10 #reduced from 20
				create_fallen_empire_small_ship = yes
			}
			random_list = {
				25 = {
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 60
						angle = random 
					}				
				}
				25 = {
					set_location = {
						target = prev
						distance = 75
						angle = random 
					}				
				}				
			}
		}
	}					
}

create_fallen_empire_starting_navy = {
	create_fallen_empire_fleet = yes
	create_fallen_empire_fleet = yes
	random = {
		chance = 33			
		create_fallen_empire_fleet = yes
	}
	random = {
		chance = 10
		create_fleet = {
			effect = {
				set_owner = prev.owner
				create_fallen_empire_titan = yes
				set_location = {
					target = prev
					distance = 20
					angle = random 
				}					
			}
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 60
				angle = random 
			}				
		}
	}
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 80
				angle = random 
			}				
		}
	}				
	create_fleet = {
		effect = {
			set_owner = prev.owner
			create_fallen_empire_construction_ship = yes
			set_location = {
				target = prev
				distance = 100
				angle = random 
			}				
		}
	}
}