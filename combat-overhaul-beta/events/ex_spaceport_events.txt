namespace = ex_spaceport_events

event = { #this event fires on game start and with a monthly pulse, firing ex_spaceport_events.10-18
	id = ex_spaceport_events.0
	hide_window = yes
	is_triggered_only = yes

	immediate = { 
		every_country = { 
			if = {
				limit = { is_country_type = default }
				if = {
					limit = { 
						NOT = { has_global_flag = ex_spaceport_game_start }
						is_ai = yes
					} 
					every_owned_planet = {
						limit = { 
							is_colony = yes
							has_spaceport = yes							
							sector_controlled = no
						}					
						set_timed_planet_flag = { flag = edict_economic_spaceport_in_effect days = 3600 }
					}	
					set_global_flag = ex_spaceport_game_start
				}	
			}	
			every_owned_planet = { 				
				limit = { 
					is_colony = yes
					has_spaceport = yes
				}
				if = {
					limit = { 
						owner = { NOT = { has_country_flag = ex_spaceport_automation_disabled } } 						
						sector_controlled = yes
						OR = {
							has_spaceport = yes
							has_spaceport_construction = yes
						}						
						NOT = { has_planet_flag = edict_economic_spaceport_in_effect }
					}
					if = {
						limit = { has_planet_flag = edict_stardock_spaceport_in_effect }
						remove_planet_flag = edict_stardock_spaceport_in_effect	
					}	
					if = {
						limit = { has_planet_flag = edict_defensive_spaceport_in_effect }
						remove_planet_flag = edict_defensive_spaceport_in_effect
					}					
					set_planet_flag = edict_economic_spaceport_in_effect					
				}	
			}			
		}
	}	
}

ship_event = { #this event fires the moment a spaceport is built, firing in turn ex_spaceport_events.10
	id = ex_spaceport_events.1
	hide_window = yes
	is_triggered_only = yes

	immediate = { from = { planet_event = { id = ex_spaceport_events.10 } } }		
}

country_event = { #this event fires whenever a new technology is researched and it updates core spaceport modules, if applicable
	id = ex_spaceport_events.2
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {			
			last_increased_tech = "tech_mass_drivers_2"
			last_increased_tech = "tech_mass_drivers_3"
			last_increased_tech = "tech_mass_drivers_4"
			last_increased_tech = "tech_mass_drivers_5"				
			last_increased_tech = "tech_lasers_2"
			last_increased_tech = "tech_lasers_3"
			last_increased_tech = "tech_lasers_4"
			last_increased_tech = "tech_lasers_5"			
			last_increased_tech = "tech_missiles_2"
			last_increased_tech = "tech_missiles_3"
			last_increased_tech = "tech_missiles_4"
			last_increased_tech = "tech_missiles_5"		
			last_increased_tech = "tech_plasma_1"
			last_increased_tech = "tech_plasma_2"
			last_increased_tech = "tech_plasma_3"
			last_increased_tech = "tech_disruptors_1"
			last_increased_tech = "tech_disruptors_2"
			last_increased_tech = "tech_disruptors_3"
			last_increased_tech = "tech_swarmer_missiles_1"
			last_increased_tech = "tech_swarmer_missiles_2"
			last_increased_tech = "tech_swarmer_missiles_3"
			last_increased_tech = "tech_kinetic_artillery_1"
			last_increased_tech = "tech_kinetic_artillery_2"
			last_increased_tech = "tech_kinetic_artillery_3"
			last_increased_tech = "tech_strike_craft_1"
			last_increased_tech = "tech_strike_craft_2"
			last_increased_tech = "tech_strike_craft_3"
		}
	}	
	
	immediate = {
		every_owned_planet = {
			limit = { has_spaceport = yes }	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
					NOT = { has_planet_flag = spaceport_kinetic_t2_modifier }
					owner = { tier_2_kinetics = yes }						
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_kinetic_t2 days = -1 }
					}
				}
				set_planet_flag = spaceport_kinetic_t2_modifier
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
					NOT = { has_planet_flag = spaceport_kinetic_t3_modifier }
					owner = { tier_3_kinetics = yes }
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_kinetic_t2
						add_modifier = { modifier = spaceport_kinetic_t3 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_kinetic_t2_modifier					
				set_planet_flag = spaceport_kinetic_t3_modifier					
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
					NOT = { has_planet_flag = spaceport_kinetic_t4_modifier }
					owner = { tier_4_kinetics = yes }
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_kinetic_t3
						add_modifier = { modifier = spaceport_kinetic_t4 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_kinetic_t3_modifier					
				set_planet_flag = spaceport_kinetic_t4_modifier						
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
					NOT = { has_planet_flag = spaceport_kinetic_t5_modifier }
					owner = { tier_5_kinetics = yes }
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_kinetic_t4
						add_modifier = { modifier = spaceport_kinetic_t5 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_kinetic_t4_modifier					
				set_planet_flag = spaceport_kinetic_t5_modifier						
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
					NOT = { has_planet_flag = spaceport_energy_t2_modifier }
					owner = { tier_2_energy = yes }							
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_energy_t2 days = -1 }
					}
				}	
				set_planet_flag = spaceport_energy_t2_modifier
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
					NOT = { has_planet_flag = spaceport_energy_t3_modifier }
					owner = { tier_3_energy = yes }			
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_energy_t2
						add_modifier = { modifier = spaceport_energy_t3 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_energy_t2_modifier					
				set_planet_flag = spaceport_energy_t3_modifier					
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
					NOT = { has_planet_flag = spaceport_energy_t4_modifier }
					owner = { tier_4_energy = yes }			
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_energy_t3
						add_modifier = { modifier = spaceport_energy_t4 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_energy_t3_modifier					
				set_planet_flag = spaceport_energy_t4_modifier						
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
					NOT = { has_planet_flag = spaceport_energy_t5_modifier }
					owner = { tier_5_energy = yes }			
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_energy_t4
						add_modifier = { modifier = spaceport_energy_t5 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_energy_t4_modifier					
				set_planet_flag = spaceport_energy_t5_modifier						
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
					NOT = { has_planet_flag = spaceport_explosive_t2_modifier }
					owner = { tier_2_explosives = yes }							
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_explosive_t2 days = -1 }
					}
				}	
				set_planet_flag = spaceport_explosive_t2_modifier	
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
					NOT = { has_planet_flag = spaceport_explosive_t3_modifier }
					owner = { tier_3_explosives = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_explosive_t2
						add_modifier = { modifier = spaceport_explosive_t3 days = -1 }
					}
				}
				remove_planet_flag = spaceport_explosive_t2_modifier					
				set_planet_flag = spaceport_explosive_t3_modifier						
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
					NOT = { has_planet_flag = spaceport_explosive_t4_modifier }
					owner = { tier_4_explosives = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_explosive_t3
						add_modifier = { modifier = spaceport_explosive_t4 days = -1 }
					}
				}	
				remove_planet_flag = spaceport_explosive_t3_modifier					
				set_planet_flag = spaceport_explosive_t4_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
					NOT = { has_planet_flag = spaceport_explosive_t5_modifier }
					owner = { tier_5_explosives = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_explosive_t4
						add_modifier = { modifier = spaceport_explosive_t5 days = -1 }
					}
				}		
				remove_planet_flag = spaceport_explosive_t4_modifier					
				set_planet_flag = spaceport_explosive_t5_modifier											
			}
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_disruptor_1 has_spaceport_module = spaceport_disruptor_2 has_spaceport_module = spaceport_disruptor_3 }
					NOT = { has_planet_flag = spaceport_disruptor_t2_modifier }
					owner = { tier_2_disruptors = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_disruptor_t2 days = -1 }
					}
				}		
				set_planet_flag = spaceport_disruptor_t2_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_disruptor_1 has_spaceport_module = spaceport_disruptor_2 has_spaceport_module = spaceport_disruptor_3 }
					NOT = { has_planet_flag = spaceport_disruptor_t3_modifier }
					owner = { tier_3_disruptors = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_disruptor_t2
						add_modifier = { modifier = spaceport_disruptor_t3 days = -1 }
					}
				}		
				remove_planet_flag = spaceport_disruptor_t2_modifier
				set_planet_flag = spaceport_disruptor_t3_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_plasma_1 has_spaceport_module = spaceport_plasma_2 has_spaceport_module = spaceport_plasma_3 }
					NOT = { has_planet_flag = spaceport_plasma_t2_modifier }
					owner = { tier_2_plasma = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_plasma_t2 days = -1 }
					}
				}		
				set_planet_flag = spaceport_plasma_t2_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_plasma_1 has_spaceport_module = spaceport_plasma_2 has_spaceport_module = spaceport_plasma_3 }
					NOT = { has_planet_flag = spaceport_plasma_t3_modifier }
					owner = { tier_3_plasma = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_plasma_t2
						add_modifier = { modifier = spaceport_plasma_t3 days = -1 }
					}
				}		
				remove_planet_flag = spaceport_plasma_t2_modifier
				set_planet_flag = spaceport_plasma_t3_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_swarmer_missile_1 has_spaceport_module = spaceport_swarmer_missile_2 has_spaceport_module = spaceport_swarmer_missile_3 }
					NOT = { has_planet_flag = spaceport_swarmer_missile_t2_modifier }
					owner = { tier_2_swarmer_missiles = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_swarmer_missile_t2 days = -1 }
					}
				}		
				set_planet_flag = spaceport_swarmer_missile_t2_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_swarmer_missile_1 has_spaceport_module = spaceport_swarmer_missile_2 has_spaceport_module = spaceport_swarmer_missile_3 }
					NOT = { has_planet_flag = spaceport_swarmer_missile_t3_modifier }
					owner = { tier_3_swarmer_missiles = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_swarmer_missile_t2
						add_modifier = { modifier = spaceport_swarmer_missile_t3 days = -1 }
					}
				}		
				remove_planet_flag = spaceport_swarmer_missile_t2_modifier
				set_planet_flag = spaceport_swarmer_missile_t3_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_kinetic_artillery_1 has_spaceport_module = spaceport_kinetic_artillery_2 has_spaceport_module = spaceport_kinetic_artillery_3 }
					NOT = { has_planet_flag = spaceport_kinetic_artillery_t2_modifier }
					owner = { tier_2_kinetic_artillery = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_kinetic_artillery_t2 days = -1 }
					}
				}		
				set_planet_flag = spaceport_kinetic_artillery_t2_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_kinetic_artillery_1 has_spaceport_module = spaceport_kinetic_artillery_2 has_spaceport_module = spaceport_kinetic_artillery_3 }
					NOT = { has_planet_flag = spaceport_kinetic_artillery_t3_modifier }
					owner = { tier_3_kinetic_artillery = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_kinetic_artillery_t2
						add_modifier = { modifier = spaceport_kinetic_artillery_t3 days = -1 }
					}
				}		
				remove_planet_flag = spaceport_kinetic_artillery_t2_modifier
				set_planet_flag = spaceport_kinetic_artillery_t3_modifier											
			}		
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_fighter_strike_craft_1 has_spaceport_module = spaceport_fighter_strike_craft_2 has_spaceport_module = spaceport_fighter_strike_craft_3 has_spaceport_module = spaceport_interceptor_strike_craft_1 has_spaceport_module = spaceport_interceptor_strike_craft_2 has_spaceport_module = spaceport_interceptor_strike_craft_3	}
					NOT = { has_planet_flag = spaceport_strike_craft_t2_modifier }
					owner = { tier_2_strike_craft = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						add_modifier = { modifier = spaceport_strike_craft_t2 days = -1 }
					}
				}		
				set_planet_flag = spaceport_strike_craft_t2_modifier											
			}	
			if = {
				limit = { 
					OR = { has_spaceport_module = spaceport_fighter_strike_craft_1 has_spaceport_module = spaceport_fighter_strike_craft_2 has_spaceport_module = spaceport_fighter_strike_craft_3 has_spaceport_module = spaceport_interceptor_strike_craft_1 has_spaceport_module = spaceport_interceptor_strike_craft_2 has_spaceport_module = spaceport_interceptor_strike_craft_3	}
					NOT = { has_planet_flag = spaceport_strike_craft_t3_modifier }
					owner = { tier_3_strike_craft = yes }		
				}
				spaceport = { 
					random_owned_ship = { 
						remove_modifier = spaceport_strike_craft_t2
						add_modifier = { modifier = spaceport_strike_craft_t3 days = -1 }
					}
				}		
				remove_planet_flag = spaceport_strike_craft_t2_modifier
				set_planet_flag = spaceport_strike_craft_t3_modifier											
			}					
		}
	}
}	

country_event = { #this event is triggered when a spaceport is destroyed (not dismantled)
	id = ex_spaceport_events.3
	hide_window = yes
	is_triggered_only = yes
	trigger = {	fromfrom = { is_ship_size = orbital_station } }		
		

    immediate = {
		fromfrom = {
			orbit = {
				planet = {
					if = {
						limit = { has_planet_flag = ex_spaceport_1 }
						remove_planet_flag = ex_spaceport_1
					}	
					if = {
						limit = { has_planet_flag = ex_spaceport_2 }
						remove_planet_flag = ex_spaceport_2
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_3 }
						remove_planet_flag = ex_spaceport_3
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_4 }
						remove_planet_flag = ex_spaceport_4
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_5 }
						remove_planet_flag = ex_spaceport_5
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_6 }
						remove_planet_flag = ex_spaceport_6
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_7 }
						remove_planet_flag = ex_spaceport_7
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_8 }
						remove_planet_flag = ex_spaceport_8
					}
					if = {
						limit = { has_planet_flag = ex_spaceport_9 }
						remove_planet_flag = ex_spaceport_9
					}	
					if = {
						limit = { has_planet_flag = economic_spaceport_1_modifier }
						remove_modifier = economic_spaceport_1
						remove_planet_flag = economic_spaceport_1_modifier
					}	
					if = {
						limit = { has_planet_flag = economic_spaceport_2_modifier }
						remove_modifier = economic_spaceport_2
						remove_planet_flag = economic_spaceport_2_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_3_modifier }
						remove_modifier = economic_spaceport_3
						remove_planet_flag = economic_spaceport_3_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_4_modifier }
						remove_modifier = economic_spaceport_4
						remove_planet_flag = economic_spaceport_4_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_5_modifier }
						remove_modifier = economic_spaceport_5
						remove_planet_flag = economic_spaceport_5_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_6_modifier }
						remove_modifier = economic_spaceport_6
						remove_planet_flag = economic_spaceport_6_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_7_modifier }
						remove_modifier = economic_spaceport_7
						remove_planet_flag = economic_spaceport_7_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_8_modifier }
						remove_modifier = economic_spaceport_8
						remove_planet_flag = economic_spaceport_8_modifier
					}
					if = {
						limit = { has_planet_flag = economic_spaceport_9_modifier }
						remove_modifier = economic_spaceport_9
						remove_planet_flag = economic_spaceport_9_modifier
					}	
					if = {
						limit = { has_planet_flag = stardock_spaceport_1_modifier }
						remove_modifier = stardock_spaceport_1
						remove_planet_flag = stardock_spaceport_1_modifier
					}	
					if = {
						limit = { has_planet_flag = stardock_spaceport_2_modifier }
						remove_modifier = stardock_spaceport_2
						remove_planet_flag = stardock_spaceport_2_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_3_modifier }
						remove_modifier = stardock_spaceport_3
						remove_planet_flag = stardock_spaceport_3_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_4_modifier }
						remove_modifier = stardock_spaceport_4
						remove_planet_flag = stardock_spaceport_4_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_5_modifier }
						remove_modifier = stardock_spaceport_5
						remove_planet_flag = stardock_spaceport_5_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_6_modifier }
						remove_modifier = stardock_spaceport_6
						remove_planet_flag = stardock_spaceport_6_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_7_modifier }
						remove_modifier = stardock_spaceport_7
						remove_planet_flag = stardock_spaceport_7_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_8_modifier }
						remove_modifier = stardock_spaceport_8
						remove_planet_flag = stardock_spaceport_8_modifier
					}
					if = {
						limit = { has_planet_flag = stardock_spaceport_9_modifier }
						remove_modifier = stardock_spaceport_9
						remove_planet_flag = stardock_spaceport_9_modifier
					}	
					if = {
						limit = { has_planet_flag = defensive_spaceport_1_modifier }
						remove_planet_flag = defensive_spaceport_1_modifier
					}	
					if = {
						limit = { has_planet_flag = defensive_spaceport_2_modifier }
						remove_planet_flag = defensive_spaceport_2_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_3_modifier }
						remove_planet_flag = defensive_spaceport_3_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_4_modifier }
						remove_planet_flag = defensive_spaceport_4_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_5_modifier }
						remove_planet_flag = defensive_spaceport_5_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_6_modifier }
						remove_planet_flag = defensive_spaceport_6_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_7_modifier }
						remove_planet_flag = defensive_spaceport_7_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_8_modifier }
						remove_planet_flag = defensive_spaceport_8_modifier
					}
					if = {
						limit = { has_planet_flag = defensive_spaceport_9_modifier }
						remove_planet_flag = defensive_spaceport_9_modifier
					}						
					if = {
						limit = { has_planet_flag = spaceport_kinetic_t2_modifier }
						remove_planet_flag = spaceport_kinetic_t2_modifier
					}
					if = {
						limit = { has_planet_flag = spaceport_kinetic_t3_modifier }
						remove_planet_flag = spaceport_kinetic_t3_modifier				
					}			
					if = {
						limit = { has_planet_flag = spaceport_kinetic_t4_modifier }
						remove_planet_flag = spaceport_kinetic_t4_modifier
					}			
					if = {
						limit = { has_planet_flag = spaceport_kinetic_t5_modifier }
						remove_planet_flag = spaceport_kinetic_t5_modifier
					}			
					if = {
						limit = { has_planet_flag = spaceport_energy_t2_modifier }
						remove_planet_flag = spaceport_energy_t2_modifier
					}			
					if = {
						limit = { has_planet_flag = spaceport_energy_t3_modifier }
						remove_planet_flag = spaceport_energy_t3_modifier
					}						
					if = {
						limit = { has_planet_flag = spaceport_energy_t4_modifier }
						remove_planet_flag = spaceport_energy_t4_modifier
					}						
					if = {
						limit = { has_planet_flag = spaceport_energy_t5_modifier }
						remove_planet_flag = spaceport_energy_t5_modifier
					}						
					if = {
						limit = { has_planet_flag = spaceport_explosive_t2_modifier }
						remove_planet_flag = spaceport_explosive_t2_modifier
					}						
					if = {
						limit = { has_planet_flag = spaceport_explosive_t3_modifier }
						remove_planet_flag = spaceport_explosive_t3_modifier
					}									
					if = {
						limit = { has_planet_flag = spaceport_explosive_t4_modifier }
						remove_planet_flag = spaceport_explosive_t4_modifier
					}									
					if = {
						limit = { has_planet_flag = spaceport_explosive_t5_modifier }
						remove_planet_flag = spaceport_explosive_t5_modifier
					}	
					if = {
						limit = { has_planet_flag = spaceport_disruptor_t2_modifier }
						remove_planet_flag = spaceport_disruptor_t2_modifier
					}	
					if = {
						limit = { has_planet_flag = spaceport_disruptor_t3_modifier }
						remove_planet_flag = spaceport_disruptor_t3_modifier
					}			
					if = {
						limit = { has_planet_flag = spaceport_plasma_t2_modifier }
						remove_planet_flag = spaceport_plasma_t2_modifier
					}			
					if = {
						limit = { has_planet_flag = spaceport_plasma_t3_modifier }
						remove_planet_flag = spaceport_plasma_t3_modifier
					}				
					if = {
						limit = { has_planet_flag = spaceport_swarmer_missile_t2_modifier }
						remove_planet_flag = spaceport_swarmer_missile_t2_modifier
					}	
					if = {
						limit = { has_planet_flag = spaceport_swarmer_missile_t3_modifier }
						remove_planet_flag = spaceport_swarmer_missile_t3_modifier
					}					
					if = {
						limit = { has_planet_flag = spaceport_kinetic_artillery_t2_modifier }
						remove_planet_flag = spaceport_kinetic_artillery_t2_modifier
					}					
					if = {
						limit = { has_planet_flag = spaceport_kinetic_artillery_t3_modifier }
						remove_planet_flag = spaceport_kinetic_artillery_t3_modifier
					}							
					if = {
						limit = { has_planet_flag = spaceport_strike_craft_t2_modifier }
						remove_planet_flag = spaceport_strike_craft_t2_modifier
					}							
					if = {
						limit = { has_planet_flag = spaceport_strike_craft_t3_modifier }
						remove_planet_flag = spaceport_strike_craft_t3_modifier
					}
				}
			}
		}	
	}
}
				
country_event = {
	id = ex_spaceport_events.4
	hide_window = yes
	is_triggered_only = yes

	trigger = { from = { is_ship_size = orbital_station } }
	
	immediate = {
		every_owned_planet = { 
			limit = {
				has_spaceport = no
				OR = {
					has_planet_flag = ex_spaceport_1
					has_planet_flag = ex_spaceport_2
					has_planet_flag = ex_spaceport_3
					has_planet_flag = ex_spaceport_4
					has_planet_flag = ex_spaceport_5
					has_planet_flag = ex_spaceport_6
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9
					has_planet_flag = economic_spaceport_1_modifier
					has_planet_flag = economic_spaceport_2_modifier
					has_planet_flag = economic_spaceport_3_modifier
					has_planet_flag = economic_spaceport_4_modifier
					has_planet_flag = economic_spaceport_5_modifier
					has_planet_flag = economic_spaceport_6_modifier
					has_planet_flag = economic_spaceport_7_modifier
					has_planet_flag = economic_spaceport_8_modifier
					has_planet_flag = economic_spaceport_9_modifier
					has_planet_flag = stardock_spaceport_1_modifier
					has_planet_flag = stardock_spaceport_2_modifier
					has_planet_flag = stardock_spaceport_3_modifier
					has_planet_flag = stardock_spaceport_4_modifier
					has_planet_flag = stardock_spaceport_5_modifier
					has_planet_flag = stardock_spaceport_6_modifier
					has_planet_flag = stardock_spaceport_7_modifier
					has_planet_flag = stardock_spaceport_8_modifier
					has_planet_flag = stardock_spaceport_9_modifier
					has_planet_flag = spaceport_kinetic_t2_modifier
					has_planet_flag = spaceport_kinetic_t3_modifier
					has_planet_flag = spaceport_kinetic_t4_modifier
					has_planet_flag = spaceport_kinetic_t5_modifier
					has_planet_flag = spaceport_energy_t2_modifier
					has_planet_flag = spaceport_energy_t3_modifier
					has_planet_flag = spaceport_energy_t4_modifier
					has_planet_flag = spaceport_energy_t5_modifier
					has_planet_flag = spaceport_explosive_t2_modifier
					has_planet_flag = spaceport_explosive_t3_modifier
					has_planet_flag = spaceport_explosive_t4_modifier
					has_planet_flag = spaceport_explosive_t5_modifier
					has_planet_flag = spaceport_disruptor_t2_modifier
					has_planet_flag = spaceport_disruptor_t3_modifier
					has_planet_flag = spaceport_plasma_t2_modifier
					has_planet_flag = spaceport_plasma_t3_modifier
					has_planet_flag = spaceport_swarmer_missile_t2_modifier
					has_planet_flag = spaceport_swarmer_missile_t3_modifier
					has_planet_flag = spaceport_kinetic_artillery_t2_modifier
					has_planet_flag = spaceport_kinetic_artillery_t3_modifier
					has_planet_flag = spaceport_strike_craft_t2_modifier					
					has_planet_flag = spaceport_strike_craft_t3_modifier
				}
			}	
			if = {
				limit = { has_planet_flag = ex_spaceport_1 }
				remove_planet_flag = ex_spaceport_1
			}	
			if = {
				limit = { has_planet_flag = ex_spaceport_2 }
				remove_planet_flag = ex_spaceport_2
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_3 }
				remove_planet_flag = ex_spaceport_3
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_4 }
				remove_planet_flag = ex_spaceport_4
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_5 }
				remove_planet_flag = ex_spaceport_5
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_6 }
				remove_planet_flag = ex_spaceport_6
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_7 }
				remove_planet_flag = ex_spaceport_7
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_8 }
				remove_planet_flag = ex_spaceport_8
			}
			if = {
				limit = { has_planet_flag = ex_spaceport_9 }
				remove_planet_flag = ex_spaceport_9
			}	
			if = {
				limit = { has_planet_flag = economic_spaceport_1_modifier }
				remove_modifier = economic_spaceport_1
				remove_planet_flag = economic_spaceport_1_modifier
			}	
			if = {
				limit = { has_planet_flag = economic_spaceport_2_modifier }
				remove_modifier = economic_spaceport_2
				remove_planet_flag = economic_spaceport_2_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_3_modifier }
				remove_modifier = economic_spaceport_3
				remove_planet_flag = economic_spaceport_3_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_4_modifier }
				remove_modifier = economic_spaceport_4
				remove_planet_flag = economic_spaceport_4_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_5_modifier }
				remove_modifier = economic_spaceport_5
				remove_planet_flag = economic_spaceport_5_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_6_modifier }
				remove_modifier = economic_spaceport_6
				remove_planet_flag = economic_spaceport_6_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_7_modifier }
				remove_modifier = economic_spaceport_7
				remove_planet_flag = economic_spaceport_7_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_8_modifier }
				remove_modifier = economic_spaceport_8
				remove_planet_flag = economic_spaceport_8_modifier
			}
			if = {
				limit = { has_planet_flag = economic_spaceport_9_modifier }
				remove_modifier = economic_spaceport_9
				remove_planet_flag = economic_spaceport_9_modifier
			}	
			if = {
				limit = { has_planet_flag = stardock_spaceport_1_modifier }
				remove_modifier = stardock_spaceport_1
				remove_planet_flag = stardock_spaceport_1_modifier
			}	
			if = {
				limit = { has_planet_flag = stardock_spaceport_2_modifier }
				remove_modifier = stardock_spaceport_2
				remove_planet_flag = stardock_spaceport_2_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_3_modifier }
				remove_modifier = stardock_spaceport_3
				remove_planet_flag = stardock_spaceport_3_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_4_modifier }
				remove_modifier = stardock_spaceport_4
				remove_planet_flag = stardock_spaceport_4_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_5_modifier }
				remove_modifier = stardock_spaceport_5
				remove_planet_flag = stardock_spaceport_5_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_6_modifier }
				remove_modifier = stardock_spaceport_6
				remove_planet_flag = stardock_spaceport_6_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_7_modifier }
				remove_modifier = stardock_spaceport_7
				remove_planet_flag = stardock_spaceport_7_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_8_modifier }
				remove_modifier = stardock_spaceport_8
				remove_planet_flag = stardock_spaceport_8_modifier
			}
			if = {
				limit = { has_planet_flag = stardock_spaceport_9_modifier }
				remove_modifier = stardock_spaceport_9
				remove_planet_flag = stardock_spaceport_9_modifier
			}	
			if = {
				limit = { has_planet_flag = defensive_spaceport_1_modifier }
				remove_planet_flag = defensive_spaceport_1_modifier
			}	
			if = {
				limit = { has_planet_flag = defensive_spaceport_2_modifier }
				remove_planet_flag = defensive_spaceport_2_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_3_modifier }
				remove_planet_flag = defensive_spaceport_3_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_4_modifier }
				remove_planet_flag = defensive_spaceport_4_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_5_modifier }
				remove_planet_flag = defensive_spaceport_5_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_6_modifier }
				remove_planet_flag = defensive_spaceport_6_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_7_modifier }
				remove_planet_flag = defensive_spaceport_7_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_8_modifier }
				remove_planet_flag = defensive_spaceport_8_modifier
			}
			if = {
				limit = { has_planet_flag = defensive_spaceport_9_modifier }
				remove_planet_flag = defensive_spaceport_9_modifier
			}				
			if = {
				limit = { has_planet_flag = spaceport_kinetic_t2_modifier }
				remove_planet_flag = spaceport_kinetic_t2_modifier
			}
			if = {
				limit = { has_planet_flag = spaceport_kinetic_t3_modifier }
				remove_planet_flag = spaceport_kinetic_t3_modifier				
			}			
			if = {
				limit = { has_planet_flag = spaceport_kinetic_t4_modifier }
				remove_planet_flag = spaceport_kinetic_t4_modifier
			}			
			if = {
				limit = { has_planet_flag = spaceport_kinetic_t5_modifier }
				remove_planet_flag = spaceport_kinetic_t5_modifier
			}			
			if = {
				limit = { has_planet_flag = spaceport_energy_t2_modifier }
				remove_planet_flag = spaceport_energy_t2_modifier
			}			
			if = {
				limit = { has_planet_flag = spaceport_energy_t3_modifier }
				remove_planet_flag = spaceport_energy_t3_modifier
			}						
			if = {
				limit = { has_planet_flag = spaceport_energy_t4_modifier }
				remove_planet_flag = spaceport_energy_t4_modifier
			}						
			if = {
				limit = { has_planet_flag = spaceport_energy_t5_modifier }
				remove_planet_flag = spaceport_energy_t5_modifier
			}						
			if = {
				limit = { has_planet_flag = spaceport_explosive_t2_modifier }
				remove_planet_flag = spaceport_explosive_t2_modifier
			}						
			if = {
				limit = { has_planet_flag = spaceport_explosive_t3_modifier }
				remove_planet_flag = spaceport_explosive_t3_modifier
			}									
			if = {
				limit = { has_planet_flag = spaceport_explosive_t4_modifier }
				remove_planet_flag = spaceport_explosive_t4_modifier
			}									
			if = {
				limit = { has_planet_flag = spaceport_explosive_t5_modifier }
				remove_planet_flag = spaceport_explosive_t5_modifier
			}									
			if = {
				limit = { has_planet_flag = spaceport_disruptor_t2_modifier }
				remove_planet_flag = spaceport_disruptor_t2_modifier
			}	
			if = {
				limit = { has_planet_flag = spaceport_disruptor_t3_modifier }
				remove_planet_flag = spaceport_disruptor_t3_modifier
			}			
			if = {
				limit = { has_planet_flag = spaceport_plasma_t2_modifier }
				remove_planet_flag = spaceport_plasma_t2_modifier
			}			
			if = {
				limit = { has_planet_flag = spaceport_plasma_t3_modifier }
				remove_planet_flag = spaceport_plasma_t3_modifier
			}				
			if = {
				limit = { has_planet_flag = spaceport_swarmer_missile_t2_modifier }
				remove_planet_flag = spaceport_swarmer_missile_t2_modifier
			}	
			if = {
				limit = { has_planet_flag = spaceport_swarmer_missile_t3_modifier }
				remove_planet_flag = spaceport_swarmer_missile_t3_modifier
			}					
			if = {
				limit = { has_planet_flag = spaceport_kinetic_artillery_t2_modifier }
				remove_planet_flag = spaceport_kinetic_artillery_t2_modifier
			}					
			if = {
				limit = { has_planet_flag = spaceport_kinetic_artillery_t3_modifier }
				remove_planet_flag = spaceport_kinetic_artillery_t3_modifier
			}							
			if = {
				limit = { has_planet_flag = spaceport_strike_craft_t2_modifier }
				remove_planet_flag = spaceport_strike_craft_t2_modifier
			}							
			if = {
				limit = { has_planet_flag = spaceport_strike_craft_t3_modifier }
				remove_planet_flag = spaceport_strike_craft_t3_modifier
			}										
		}
	}
}	

event = { #this event fires on a monthly pulse
	id = ex_spaceport_events.6
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				OR = {
					is_country_type = default
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}				
			}			
			every_owned_planet = {
				limit = { has_spaceport = yes }	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
						NOT = { has_planet_flag = spaceport_kinetic_t2_modifier }
						owner = { tier_2_kinetics = yes }						
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_kinetic_t2 days = -1 }
						}
					}
					set_planet_flag = spaceport_kinetic_t2_modifier
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
						NOT = { has_planet_flag = spaceport_kinetic_t3_modifier }
						owner = { tier_3_kinetics = yes }
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_kinetic_t2
							add_modifier = { modifier = spaceport_kinetic_t3 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_kinetic_t2_modifier					
					set_planet_flag = spaceport_kinetic_t3_modifier					
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
						NOT = { has_planet_flag = spaceport_kinetic_t4_modifier }
						owner = { tier_4_kinetics = yes }
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_kinetic_t3
							add_modifier = { modifier = spaceport_kinetic_t4 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_kinetic_t3_modifier					
					set_planet_flag = spaceport_kinetic_t4_modifier						
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_kinetic_weapon_1 has_spaceport_module = spaceport_kinetic_weapon_2 has_spaceport_module = spaceport_kinetic_weapon_3 }
						NOT = { has_planet_flag = spaceport_kinetic_t5_modifier }
						owner = { tier_5_kinetics = yes }
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_kinetic_t4
							add_modifier = { modifier = spaceport_kinetic_t5 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_kinetic_t4_modifier					
					set_planet_flag = spaceport_kinetic_t5_modifier						
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
						NOT = { has_planet_flag = spaceport_energy_t2_modifier }
						owner = { tier_2_energy = yes }							
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_energy_t2 days = -1 }
						}
					}	
					set_planet_flag = spaceport_energy_t2_modifier
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
						NOT = { has_planet_flag = spaceport_energy_t3_modifier }
						owner = { tier_3_energy = yes }			
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_energy_t2
							add_modifier = { modifier = spaceport_energy_t3 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_energy_t2_modifier					
					set_planet_flag = spaceport_energy_t3_modifier					
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
						NOT = { has_planet_flag = spaceport_energy_t4_modifier }
						owner = { tier_4_energy = yes }			
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_energy_t3
							add_modifier = { modifier = spaceport_energy_t4 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_energy_t3_modifier					
					set_planet_flag = spaceport_energy_t4_modifier						
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_energy_weapon_1 has_spaceport_module = spaceport_energy_weapon_2 has_spaceport_module = spaceport_energy_weapon_3 }
						NOT = { has_planet_flag = spaceport_energy_t5_modifier }
						owner = { tier_5_energy = yes }			
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_energy_t4
							add_modifier = { modifier = spaceport_energy_t5 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_energy_t4_modifier					
					set_planet_flag = spaceport_energy_t5_modifier						
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
						NOT = { has_planet_flag = spaceport_explosive_t2_modifier }
						owner = { tier_2_explosives = yes }							
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_explosive_t2 days = -1 }
						}
					}	
					set_planet_flag = spaceport_explosive_t2_modifier	
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
						NOT = { has_planet_flag = spaceport_explosive_t3_modifier }
						owner = { tier_3_explosives = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_explosive_t2
							add_modifier = { modifier = spaceport_explosive_t3 days = -1 }
						}
					}
					remove_planet_flag = spaceport_explosive_t2_modifier					
					set_planet_flag = spaceport_explosive_t3_modifier						
				}
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
						NOT = { has_planet_flag = spaceport_explosive_t4_modifier }
						owner = { tier_4_explosives = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_explosive_t3
							add_modifier = { modifier = spaceport_explosive_t4 days = -1 }
						}
					}	
					remove_planet_flag = spaceport_explosive_t3_modifier					
					set_planet_flag = spaceport_explosive_t4_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_explosive_weapon_1 has_spaceport_module = spaceport_explosive_weapon_2 has_spaceport_module = spaceport_explosive_weapon_3 }
						NOT = { has_planet_flag = spaceport_explosive_t5_modifier }
						owner = { tier_5_explosives = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_explosive_t4
							add_modifier = { modifier = spaceport_explosive_t5 days = -1 }
						}
					}		
					remove_planet_flag = spaceport_explosive_t4_modifier					
					set_planet_flag = spaceport_explosive_t5_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_disruptor_1 has_spaceport_module = spaceport_disruptor_2 has_spaceport_module = spaceport_disruptor_3 }
						NOT = { has_planet_flag = spaceport_disruptor_t2_modifier }
						owner = { tier_2_disruptors = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_disruptor_t2 days = -1 }
						}
					}		
					set_planet_flag = spaceport_disruptor_t2_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_disruptor_1 has_spaceport_module = spaceport_disruptor_2 has_spaceport_module = spaceport_disruptor_3 }
						NOT = { has_planet_flag = spaceport_disruptor_t3_modifier }
						owner = { tier_3_disruptors = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_disruptor_t2
							add_modifier = { modifier = spaceport_disruptor_t3 days = -1 }
						}
					}		
					remove_planet_flag = spaceport_disruptor_t2_modifier
					set_planet_flag = spaceport_disruptor_t3_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_plasma_1 has_spaceport_module = spaceport_plasma_2 has_spaceport_module = spaceport_plasma_3 }
						NOT = { has_planet_flag = spaceport_plasma_t2_modifier }
						owner = { tier_2_plasma = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_plasma_t2 days = -1 }
						}
					}		
					set_planet_flag = spaceport_plasma_t2_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_plasma_1 has_spaceport_module = spaceport_plasma_2 has_spaceport_module = spaceport_plasma_3 }
						NOT = { has_planet_flag = spaceport_plasma_t3_modifier }
						owner = { tier_3_plasma = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_plasma_t2
							add_modifier = { modifier = spaceport_plasma_t3 days = -1 }
						}
					}		
					remove_planet_flag = spaceport_plasma_t2_modifier
					set_planet_flag = spaceport_plasma_t3_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_swarmer_missile_1 has_spaceport_module = spaceport_swarmer_missile_2 has_spaceport_module = spaceport_swarmer_missile_3 }
						NOT = { has_planet_flag = spaceport_swarmer_missile_t2_modifier }
						owner = { tier_2_swarmer_missiles = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_swarmer_missile_t2 days = -1 }
						}
					}		
					set_planet_flag = spaceport_swarmer_missile_t2_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_swarmer_missile_1 has_spaceport_module = spaceport_swarmer_missile_2 has_spaceport_module = spaceport_swarmer_missile_3 }
						NOT = { has_planet_flag = spaceport_swarmer_missile_t3_modifier }
						owner = { tier_3_swarmer_missiles = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_swarmer_missile_t2
							add_modifier = { modifier = spaceport_swarmer_missile_t3 days = -1 }
						}
					}		
					remove_planet_flag = spaceport_swarmer_missile_t2_modifier
					set_planet_flag = spaceport_swarmer_missile_t3_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_kinetic_artillery_1 has_spaceport_module = spaceport_kinetic_artillery_2 has_spaceport_module = spaceport_kinetic_artillery_3 }
						NOT = { has_planet_flag = spaceport_kinetic_artillery_t2_modifier }
						owner = { tier_2_kinetic_artillery = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_kinetic_artillery_t2 days = -1 }
						}
					}		
					set_planet_flag = spaceport_kinetic_artillery_t2_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_kinetic_artillery_1 has_spaceport_module = spaceport_kinetic_artillery_2 has_spaceport_module = spaceport_kinetic_artillery_3 }
						NOT = { has_planet_flag = spaceport_kinetic_artillery_t3_modifier }
						owner = { tier_3_kinetic_artillery = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_kinetic_artillery_t2
							add_modifier = { modifier = spaceport_kinetic_artillery_t3 days = -1 }
						}
					}		
					remove_planet_flag = spaceport_kinetic_artillery_t2_modifier
					set_planet_flag = spaceport_kinetic_artillery_t3_modifier											
				}		
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_fighter_strike_craft_1 has_spaceport_module = spaceport_fighter_strike_craft_2 has_spaceport_module = spaceport_fighter_strike_craft_3 has_spaceport_module = spaceport_interceptor_strike_craft_1 has_spaceport_module = spaceport_interceptor_strike_craft_2 has_spaceport_module = spaceport_interceptor_strike_craft_3	}
						NOT = { has_planet_flag = spaceport_strike_craft_t2_modifier }
						owner = { tier_2_strike_craft = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							add_modifier = { modifier = spaceport_strike_craft_t2 days = -1 }
						}
					}		
					set_planet_flag = spaceport_strike_craft_t2_modifier											
				}	
				if = {
					limit = { 
						OR = { has_spaceport_module = spaceport_fighter_strike_craft_1 has_spaceport_module = spaceport_fighter_strike_craft_2 has_spaceport_module = spaceport_fighter_strike_craft_3 has_spaceport_module = spaceport_interceptor_strike_craft_1 has_spaceport_module = spaceport_interceptor_strike_craft_2 has_spaceport_module = spaceport_interceptor_strike_craft_3	}
						NOT = { has_planet_flag = spaceport_strike_craft_t3_modifier }
						owner = { tier_3_strike_craft = yes }		
					}
					spaceport = { 
						random_owned_ship = { 
							remove_modifier = spaceport_strike_craft_t2
							add_modifier = { modifier = spaceport_strike_craft_t3 days = -1 }
						}
					}		
					remove_planet_flag = spaceport_strike_craft_t2_modifier
					set_planet_flag = spaceport_strike_craft_t3_modifier											
				}					
			}
		}
	}	
}	


planet_event = { #this event adds base spaceport weapons to level 1 spaceports
	id = ex_spaceport_events.10
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_planet_flag = ex_spaceport_1
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_kinetic					
				}
			}	
			set_spaceport_module = { slot = 1 module = "spaceport_kinetic_weapon_1" }
		}	
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = defensive_spaceport_energy
					
				}
			}	
			set_spaceport_module = { slot = 1 module = "spaceport_energy_weapon_1" }			
		}	
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_explosives
					has_spaceport_module = stardock_spaceport_explosives
					has_spaceport_module = defensive_spaceport_explosives
					
				}
			}	
			set_spaceport_module = { slot = 1 module = "spaceport_explosive_weapon_1" }
		}			
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			add_modifier = { modifier = economic_spaceport_1 days = -1 }
			set_planet_flag = economic_spaceport_1_modifier
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			add_modifier = { modifier = stardock_spaceport_1 days = -1 }
			set_planet_flag = stardock_spaceport_1_modifier
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					add_modifier = { modifier = defensive_spaceport_1 days = -1 }
				}
			}
			set_planet_flag = defensive_spaceport_1_modifier
			break = yes			
		}			
	}
}

## the events below are triggered using a hub event (see event 19 below) to minimze performance impact.

planet_event = {
	id = ex_spaceport_events.11
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		remove_planet_flag = ex_spaceport_1
		set_planet_flag = ex_spaceport_2
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_1
			add_modifier = { modifier = economic_spaceport_2 days = -1 }
			remove_planet_flag = economic_spaceport_1_modifier
			set_planet_flag = economic_spaceport_2_modifier
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_1
			add_modifier = { modifier = stardock_spaceport_2 days = -1 }
			remove_planet_flag = stardock_spaceport_1_modifier
			set_planet_flag = stardock_spaceport_2_modifier			
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_1
					add_modifier = { modifier = defensive_spaceport_2 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_1_modifier
			set_planet_flag = defensive_spaceport_2_modifier			
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.12
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_2
		set_planet_flag = ex_spaceport_3
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_2
			add_modifier = { modifier = economic_spaceport_3 days = -1 }
			remove_planet_flag = economic_spaceport_2_modifier
			set_planet_flag = economic_spaceport_3_modifier			
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_2
			add_modifier = { modifier = stardock_spaceport_3 days = -1 }
			remove_planet_flag = stardock_spaceport_2_modifier
			set_planet_flag = stardock_spaceport_3_modifier			
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_2
					add_modifier = { modifier = defensive_spaceport_3 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_2_modifier
			set_planet_flag = defensive_spaceport_3_modifier
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.13
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_3
		set_planet_flag = ex_spaceport_4
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_3
			add_modifier = { modifier = economic_spaceport_4 days = -1 }
			remove_planet_flag = economic_spaceport_3_modifier
			set_planet_flag = economic_spaceport_4_modifier
			break = yes	
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_3
			add_modifier = { modifier = stardock_spaceport_4 days = -1 }
			remove_planet_flag = stardock_spaceport_3_modifier
			set_planet_flag = stardock_spaceport_4_modifier						
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_3
					add_modifier = { modifier = defensive_spaceport_4 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_3_modifier
			set_planet_flag = defensive_spaceport_4_modifier			
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.14
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_4
		set_planet_flag = ex_spaceport_5
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_4
			add_modifier = { modifier = economic_spaceport_5 days = -1 }
			remove_planet_flag = economic_spaceport_4_modifier
			set_planet_flag = economic_spaceport_5_modifier			
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_4
			add_modifier = { modifier = stardock_spaceport_5 days = -1 }
			remove_planet_flag = stardock_spaceport_4_modifier
			set_planet_flag = stardock_spaceport_5_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_4
					add_modifier = { modifier = defensive_spaceport_5 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_4_modifier
			set_planet_flag = defensive_spaceport_5_modifier			
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.15
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_5
		set_planet_flag = ex_spaceport_6
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_5
			add_modifier = { modifier = economic_spaceport_6 days = -1 }
			remove_planet_flag = economic_spaceport_5_modifier
			set_planet_flag = economic_spaceport_6_modifier						
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_5
			add_modifier = { modifier = stardock_spaceport_6 days = -1 }
			remove_planet_flag = stardock_spaceport_5_modifier
			set_planet_flag = stardock_spaceport_6_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_5
					add_modifier = { modifier = defensive_spaceport_6 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_5_modifier
			set_planet_flag = defensive_spaceport_6_modifier						
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.16
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_6
		set_planet_flag = ex_spaceport_7
		spaceport = { 
			random_owned_ship = { 
				remove_modifier = spaceport_level_6
				add_modifier = { modifier = spaceport_level_7 days = -1 }
			}
		}				
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_6
			add_modifier = { modifier = economic_spaceport_7 days = -1 }
			remove_planet_flag = economic_spaceport_6_modifier
			set_planet_flag = economic_spaceport_7_modifier						
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_6
			add_modifier = { modifier = stardock_spaceport_7 days = -1 }
			remove_planet_flag = stardock_spaceport_6_modifier
			set_planet_flag = stardock_spaceport_7_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_6
					add_modifier = { modifier = defensive_spaceport_7 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_6_modifier
			set_planet_flag = defensive_spaceport_7_modifier						
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.17
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_7
		set_planet_flag = ex_spaceport_8
		spaceport = { 
			random_owned_ship = { 
				remove_modifier = spaceport_level_7
				add_modifier = { modifier = spaceport_level_8 days = -1 }
			}
		}				
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_7
			add_modifier = { modifier = economic_spaceport_8 days = -1 }
			remove_planet_flag = economic_spaceport_7_modifier
			set_planet_flag = economic_spaceport_8_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_7
			add_modifier = { modifier = stardock_spaceport_8 days = -1 }
			remove_planet_flag = stardock_spaceport_7_modifier
			set_planet_flag = stardock_spaceport_8_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_7
					add_modifier = { modifier = defensive_spaceport_8 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_7_modifier
			set_planet_flag = defensive_spaceport_8_modifier						
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = {
	id = ex_spaceport_events.18
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		remove_planet_flag = ex_spaceport_8
		set_planet_flag = ex_spaceport_9
		spaceport = { 
			random_owned_ship = { 
				remove_modifier = spaceport_level_8
				add_modifier = { modifier = spaceport_level_9 days = -1 }
			}
		}				
		if = {
			limit = { 
				OR = {
					has_spaceport_module = economic_spaceport_kinetic
					has_spaceport_module = economic_spaceport_energy
					has_spaceport_module = economic_spaceport_explosives
				}
			}
			remove_modifier = economic_spaceport_8
			add_modifier = { modifier = economic_spaceport_9 days = -1 }
			remove_planet_flag = economic_spaceport_8_modifier
			set_planet_flag = economic_spaceport_9_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = stardock_spaceport_kinetic
					has_spaceport_module = stardock_spaceport_energy
					has_spaceport_module = stardock_spaceport_explosives
				}
			}
			remove_modifier = stardock_spaceport_8
			add_modifier = { modifier = stardock_spaceport_9 days = -1 }
			remove_planet_flag = stardock_spaceport_8_modifier
			set_planet_flag = stardock_spaceport_9_modifier									
			break = yes
		}
		if = {
			limit = { 
				OR = {
					has_spaceport_module = defensive_spaceport_kinetic
					has_spaceport_module = defensive_spaceport_energy
					has_spaceport_module = defensive_spaceport_explosives
				}
			}
			spaceport = { 
				random_owned_ship = { 
					remove_modifier = defensive_spaceport_8
					add_modifier = { modifier = defensive_spaceport_9 days = -1 }
				}
			}	
			remove_planet_flag = defensive_spaceport_8_modifier
			set_planet_flag = defensive_spaceport_9_modifier						
			break = yes
		}
		#planet_event = { id = ex_spaceport_events.100 }
	}
}

planet_event = { # this event runs on every tick (day), checking planet flags and firing events as necessary. 
	id = ex_spaceport_events.19
	hide_window = yes

	trigger = {
		has_owner = yes
		has_spaceport = yes	
		has_free_spaceport_module_slot = yes				
		controller = { is_same_value = root.owner }
	}
	
	immediate = {
		if = {
			limit = {
				is_spaceport_module_slot_free = 2
				NOT = { 
					has_planet_flag = ex_spaceport_2
					has_planet_flag = ex_spaceport_3
					has_planet_flag = ex_spaceport_4
					has_planet_flag = ex_spaceport_5
					has_planet_flag = ex_spaceport_6
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.11 }			
			break = yes
		}		
		if = {
			limit = {
				is_spaceport_module_slot_free = 3
				NOT = { 
					has_planet_flag = ex_spaceport_3
					has_planet_flag = ex_spaceport_4
					has_planet_flag = ex_spaceport_5
					has_planet_flag = ex_spaceport_6
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.12 }
			break = yes
		}		
		if = {
			limit = {
				is_spaceport_module_slot_free = 4
				NOT = { 
					has_planet_flag = ex_spaceport_4
					has_planet_flag = ex_spaceport_5
					has_planet_flag = ex_spaceport_6
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.13 }
			break = yes
		}		
		if = {
			limit = {
				is_spaceport_module_slot_free = 5
				NOT = { 
					has_planet_flag = ex_spaceport_5
					has_planet_flag = ex_spaceport_6
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.14 }
			break = yes
		}				
		if = {
			limit = {
				is_spaceport_module_slot_free = 6
				NOT = { 
					has_planet_flag = ex_spaceport_6
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.15 }
			break = yes
		}				
		if = {
			limit = {
				is_spaceport_module_slot_free = 7
				NOT = { 
					has_planet_flag = ex_spaceport_7
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.16 }
			break = yes
		}						
		if = {
			limit = {
				is_spaceport_module_slot_free = 8
				NOT = { 
					has_planet_flag = ex_spaceport_8
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.17 }
			break = yes
		}								
		if = {
			limit = {
				is_spaceport_module_slot_free = 9
				NOT = { 
					has_planet_flag = ex_spaceport_9					
				}
			}
			planet_event = { id = ex_spaceport_events.18 }
			break = yes
		}								
	}
}

#the events below are spaceport development automation events.

planet_event = { #this event checks the spaceport type, compares to the edict and replaces the spaceport itself as needed. 
	id = ex_spaceport_events.100
	hide_window = yes
	is_triggered_only = yes

	trigger = { 		
		NOT = { 
			has_planet_flag = spaceport_automation_disabled_local			
			owner = { has_policy_flag = spaceport_automation_disabled }
		}		
	}
	
	immediate = {
		if = {
			limit = { 
				has_planet_flag = edict_economic_spaceport_in_effect				
			}	
			if = {
				limit = {	
					OR = {
						has_spaceport_module = economic_spaceport_kinetic
						has_spaceport_module = economic_spaceport_energy
						has_spaceport_module = economic_spaceport_explosives								
					}
				}
				scrap_stardock_modules = yes
				scrap_defensive_modules = yes
				flag_modules = yes
				check_module_flags = yes
				clear_slot_flag = yes
				flag_module_slots = yes
				planet_event = { id = ex_spaceport_events.110 }
				break = yes
			}	
			else = {
				check_spaceport_base_weapon = yes
				scrap_spaceport_modules = yes
				spaceport = { delete_ship = this }
				clear_slot_flag = yes
				check_module_flags = yes
				rebuild_spaceport_economic = yes
				flag_module_slots = yes
				planet_event = { id = ex_spaceport_events.110 }
				break = yes				
			}
		}	
		if = {
			limit = { 
				has_planet_flag = edict_stardock_spaceport_in_effect				
			}	
			if = {
				limit = {	
					OR = {
						has_spaceport_module = stardock_spaceport_kinetic
						has_spaceport_module = stardock_spaceport_energy
						has_spaceport_module = stardock_spaceport_explosives								
					}
				}
				scrap_economic_modules = yes
				scrap_defensive_modules = yes
				flag_modules = yes
				check_module_flags = yes
				clear_slot_flag = yes
				flag_module_slots = yes				
				planet_event = { id = ex_spaceport_events.110 }
				break = yes
			}	
			else = {
				check_spaceport_base_weapon = yes
				scrap_spaceport_modules = yes
				spaceport = { delete_ship = this }
				clear_slot_flag = yes
				check_module_flags = yes
				rebuild_spaceport_stardock = yes
				flag_module_slots = yes
				planet_event = { id = ex_spaceport_events.110 }
				break = yes
			}	
		}	
		if = {
			limit = { 
				has_planet_flag = edict_defensive_spaceport_in_effect				
			}	
			if = {
				limit = {	
					OR = {
						has_spaceport_module = defensive_spaceport_kinetic
						has_spaceport_module = defensive_spaceport_energy
						has_spaceport_module = defensive_spaceport_explosives								
					}
				}
				scrap_economic_modules = yes
				scrap_stardock_modules = yes
				flag_modules = yes
				check_module_flags = yes
				clear_slot_flag = yes
				flag_module_slots = yes					
				planet_event = { id = ex_spaceport_events.110 }
				break = yes
			}	
			else = {
				check_spaceport_base_weapon = yes
				scrap_spaceport_modules = yes
				spaceport = { delete_ship = this }
				clear_slot_flag = yes				
				check_module_flags = yes				
				rebuild_spaceport_defensive = yes
				flag_module_slots = yes
				planet_event = { id = ex_spaceport_events.110 }
				break = yes
			}	
		}
	}
}