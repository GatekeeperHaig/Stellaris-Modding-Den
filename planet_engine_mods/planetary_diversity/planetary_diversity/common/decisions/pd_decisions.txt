##########################################################################
# Decisions
##########################################################################

# Adapted Environment
decision_engineered_environment = {
	icon = decision_engineered_environment
	owned_planets_only = yes
	
	prerequisites = {
		"tech_terrestrial_sculpting"		
	}

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 50
			energy = 2500
		}
	}
	
	potential = {
		habitable_structure = no
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_gaia }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_archive }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_tmhab }
		NOT = { is_planet_class = pc_tmhab2 }
		NOT = { is_planet_class = pc_mmhab }
		NOT = { is_planet_class = pc_mmhab2 }
		NOT = { is_planet_class = pc_bhab }
		NOT = { is_planet_class = pc_bchab }
		NOT = { is_planet_class = pc_gghab }
		NOT = { is_planet_class = pc_mhab }
		NOT = { is_planet_class = pc_fhab }
		NOT = { is_planet_class = pc_fmhab }
		NOT = { is_planet_class = pc_mehab }
		NOT = { has_modifier = engineered_environment }
		NOT = { has_modifier = engineered_environment_gaia }
	}

	effect = {
		add_modifier = {
			modifier = engineered_environment
			days = -1
		}
		if = {
			limit = { has_modifier = bleak_planet }
			remove_modifier = bleak_planet
		}
		if = {
			limit = { has_modifier = high_gravity }
			remove_modifier = high_gravity
		}
		if = {
			limit = { has_modifier = irradiated_planet }
			remove_modifier = irradiated_planet
		}
		if = {
			limit = { has_modifier = mineral_poor }
			remove_modifier = mineral_poor
		}
		if = {
			limit = { has_modifier = unstable_tectonics }
			remove_modifier = unstable_tectonics
		}
		if = {
			limit = { has_modifier = weak_magnetic_field }
			remove_modifier = weak_magnetic_field
		}
		if = {
			limit = { has_modifier = exofungus }
			remove_modifier = exofungus
		}
	}    
	
	ai_weight = {
        weight = 1
        modifier = {
            factor = 0
            or = {
                free_building_slots > 0
                owner = {
                    or = {
                        resource_stockpile_compare = { resource = energy value < 6000 } 
                        resource_stockpile_compare = { resource = influence value < 150 }
					} 
				}
            }
        }
        modifier = {
            factor = 0
            or = {
				owner = {
					has_civic = civic_barbaric_despoilers
					has_civic = civic_fanatic_purifiers
					has_origin = origin_post_apocalyptic
					has_civic = civic_hive_devouring_swarm			
				}
            }
        }
        modifier = {
			factor = 0
				owner = { is_machine_empire = yes }
        }
    }
}

# Adapted Environment Gaia
decision_engineered_environment_gaia = {
	icon = decision_engineered_environment_gaia
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 50
			energy = 5000
		}
	}
	
	potential = {
		habitable_structure = no
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_gaia }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_crystal }
		NOT = { is_planet_class = pc_graveyard }
		NOT = { is_planet_class = pc_floating }
		NOT = { is_planet_class = pc_archive }
		NOT = { is_planet_class = pc_technoorganic }
		NOT = { is_planet_class = pc_tmhab }
		NOT = { is_planet_class = pc_tmhab2 }
		NOT = { is_planet_class = pc_mmhab }
		NOT = { is_planet_class = pc_mmhab2 }
		NOT = { is_planet_class = pc_bhab }
		NOT = { is_planet_class = pc_bchab }
		NOT = { is_planet_class = pc_gghab }
		NOT = { is_planet_class = pc_mhab }
		NOT = { is_planet_class = pc_fhab }
		NOT = { is_planet_class = pc_fmhab }
		NOT = { is_planet_class = pc_mehab }
		has_modifier = engineered_environment
		owner = { has_ascension_perk = ap_world_shaper }
	}

	effect = {
		add_modifier = {
			modifier = engineered_environment_gaia
			days = -1
		}
		hidden_effect = {
			remove_modifier = engineered_environment
		}
	}   
	
	ai_weight = {
        weight = 1
        modifier = {
            factor = 0
            or = {
                free_building_slots > 0
                owner = {
                    or = {
                        resource_stockpile_compare = { resource = energy value < 6000 } 
                        resource_stockpile_compare = { resource = influence value < 150 }
                     } }
            }
        }
    }
}

# Any Planet to Radiotrophic
decision_radiotrophic = {
	icon = decision_radiotrophic
	owned_planets_only = yes

	enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			energy = 2000
			sr_rad_bloom = 500
		}
	}
	
	potential = {
		habitable_structure = no
		owner = { 
			any_owned_planet = { is_planet_class = pc_irradiated }
		}
	}

	effect = {
		change_pc = pc_irradiated
		
		hidden_effect = {
			remove_modifier = radiotrophic
			add_modifier = {
				modifier = radiotrophic
				days = -1
			}
			add_deposit = d_rad_blooms
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Change Ocean Picture
decision_removeocean = {
	icon = decision_removeocean
	owned_planets_only = yes

	#enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 25
		}
	}
	
	potential = {
		NOT = { is_planet_class = pc_relic }
		NOT = { owner = { has_trait = trait_pc_aquatic_preference } }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_tmhab }
		NOT = { is_planet_class = pc_tmhab2 }
		NOT = { is_planet_class = pc_mmhab }
		NOT = { is_planet_class = pc_mmhab2 }
		NOT = { is_planet_class = pc_bhab }
		NOT = { is_planet_class = pc_bchab }
		NOT = { is_planet_class = pc_gghab }
		NOT = { is_planet_class = pc_mhab }
		NOT = { is_planet_class = pc_fhab }
		NOT = { is_planet_class = pc_fmhab }
		NOT = { is_planet_class = pc_mehab }
		has_planet_flag = pdaquapicture
	}

	effect = {
		custom_tooltip = decision_removeocean_tooltip
		hidden_effect = {
			remove_planet_flag = pdaquapicture
			IF = { limit = { is_planet_class = pc_ocean } set_planet_entity = { picture = pc_ocean } }
			IF = { limit = { is_planet_class = pc_continental } set_planet_entity = { picture = pc_continental } }
			IF = { limit = { is_planet_class = pc_tropical } set_planet_entity = { picture = pc_tropical } }
			IF = { limit = { is_planet_class = pc_cascadian } set_planet_entity = { picture = pc_cascadian } }
			IF = { limit = { is_planet_class = pc_retinal } set_planet_entity = { picture = pc_retinal } }
			IF = { limit = { is_planet_class = pc_forest } set_planet_entity = { picture = pc_forest } }
			IF = { limit = { is_planet_class = pc_desertislands } set_planet_entity = { picture = pc_desertislands } }
			IF = { limit = { is_planet_class = pc_subarctic } set_planet_entity = { picture = pc_subarctic } }
			IF = { limit = { is_planet_class = pc_mangrove } set_planet_entity = { picture = pc_mangrove } }
			IF = { limit = { is_planet_class = pc_hajungle } set_planet_entity = { picture = pc_hajungle } }
			IF = { limit = { is_planet_class = pc_gaia } set_planet_entity = { picture = pc_gaia } }
			IF = { limit = { is_planet_class = pc_prairie } set_planet_entity = { picture = pc_prairie } }
			IF = { limit = { is_planet_class = pc_steppe } set_planet_entity = { picture = pc_steppe } }
			IF = { limit = { is_planet_class = pc_swamp } set_planet_entity = { picture = pc_swamp } }
			IF = { limit = { is_planet_class = pc_glacial } set_planet_entity = { picture = pc_glacial } }
			IF = { limit = { is_planet_class = pc_boreal } set_planet_entity = { picture = pc_boreal } }
			IF = { limit = { is_planet_class = pc_arctic } set_planet_entity = { picture = pc_arctic } }
			IF = { limit = { is_planet_class = pc_alpine } set_planet_entity = { picture = pc_alpine } }
			IF = { limit = { is_planet_class = pc_mushroom } set_planet_entity = { picture = pc_mushroom } }
			IF = { limit = { is_planet_class = pc_med } set_planet_entity = { picture = pc_med } }
			IF = { limit = { is_planet_class = pc_savannah } set_planet_entity = { picture = pc_savannah } }
			IF = { limit = { is_planet_class = pc_city } set_planet_entity = { picture = pc_city } }
			IF = { limit = { is_planet_class = pc_geothermal } set_planet_entity = { picture = pc_geothermal } }
			IF = { limit = { is_planet_class = pc_superhabitable } set_planet_entity = { picture = pc_superhabitable } }
			IF = { limit = { is_planet_class = pc_tidallylocked } set_planet_entity = { picture = pc_tidallylocked } }
			IF = { limit = { is_planet_class = pc_biolumen } set_planet_entity = { picture = pc_biolumen } }
			IF = { limit = { is_planet_class = pc_primal } set_planet_entity = { picture = pc_primal } }
			IF = { limit = { is_planet_class = pc_salt } set_planet_entity = { picture = pc_salt } }
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}

# Change Ocean Picture
decision_oceancapital = {
	icon = decision_oceancapital
	owned_planets_only = yes

	#enactment_time = 1800
	resources = {
		category = decisions
		cost = {
			influence = 25
		}
	}
	
	potential = {
		owner = { has_trait = trait_pc_aquatic_preference }
		NOT = { is_planet_class = pc_pdshroud }
		NOT = { is_planet_class = pc_aquatic }
		NOT = { has_planet_flag = pdaquapicture }
		NOT = { is_planet_class = pc_relic }
		NOT = { is_planet_class = pc_city }
		NOT = { is_planet_class = pc_ecocity }
		NOT = { is_planet_class = pc_tmhab }
		NOT = { is_planet_class = pc_tmhab2 }
		NOT = { is_planet_class = pc_mmhab }
		NOT = { is_planet_class = pc_mmhab2 }
		NOT = { is_planet_class = pc_bhab }
		NOT = { is_planet_class = pc_bchab }
		NOT = { is_planet_class = pc_gghab }
		NOT = { is_planet_class = pc_mhab }
		NOT = { is_planet_class = pc_fhab }
		NOT = { is_planet_class = pc_fmhab }
		NOT = { is_planet_class = pc_mehab }
	}

	effect = {
		custom_tooltip = decision_oceancapital_tooltip
		hidden_effect = {
			set_planet_flag = pdaquapicture
			IF = { limit = { is_planet_class = pc_ocean } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_continental } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_forest } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_cascadian } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture } 
			IF = { limit = { is_planet_class = pc_retinal } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_steppe } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_city } set_planet_entity = { picture = pc_aquaticcity } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_hadesert } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_tidallylocked } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_karst } set_planet_entity = { picture = pc_aquatic } set_planet_flag = pdaquapicture }
			#Cold
			IF = { limit = { is_planet_class = pc_subarctic } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_swamp } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_glacial } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_boreal } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_arctic } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_alpine } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_mushroom } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_antarctic } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_snow } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_tundra } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_frozen_desert } set_planet_entity = { picture = pc_aquaticcold } set_planet_flag = pdaquapicture }
			#Tropical
			IF = { limit = { is_planet_class = pc_desertislands } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_tropical } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_mangrove } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_hajungle } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_oasis } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_med } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_savannah } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_gaia } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_ringworld_habitable } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_mesa } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_desert } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_arid } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			#IF = { limit = { is_planet_class = pc_sandsea } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_geothermal } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_superhabitable } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_biolumen } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
			IF = { limit = { is_planet_class = pc_primal } set_planet_entity = { picture = pc_aquatichot } set_planet_flag = pdaquapicture }
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
		}
	}
}


