calculate_tile_weights = {
	
	if = {
		limit = {
			has_deposit = yes
		}
		if = {
			limit = {
				has_vanilla_or_exoverhaul_strategic_resources = no
			}
			check_energy_deposit = yes
			check_mineral_deposit = yes
			check_unity_deposit = yes
			check_food_deposit = yes
			check_society_research_deposit = yes
			check_physics_research_deposit = yes
			else = {
				change_variable = {
					which = energy_weight
					value = -1000
				}
				change_variable = {
					which = minerals_weight
					value = -1000
				}
				change_variable = {
					which = food_weight
					value = -1000
				}
				change_variable = {
					which = unity_weight
					value = -1000
				}
				change_variable = {
					which = society_research_weight
					value = -1000
				}
				change_variable = {
					which = physics_research_weight
					value = -1000
				}
				change_variable = {
					which = engineering_research_weight
					value = -1000
				}
			}
		}
		else = {
			change_variable = {
				which = energy_weight
				value = 0
			}
			change_variable = {
				which = minerals_weight
				value = 0
			}
			change_variable = {
				which = food_weight
				value = 0
			}
			change_variable = {
				which = unity_weight
				value = 2
			}
			change_variable = {
				which = society_research_weight
				value = 1
			}
			change_variable = {
				which = physics_research_weight
				value = 1
			}
			change_variable = {
				which = engineering_research_weight
				value = 1
			}
		}
	}
}

check_energy_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 1
			}
		}
		change_variable = {
			which = energy_weight
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 2
			}
		}
		change_variable = {
			which = energy_weight
			value = 1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 3
			}
		}
		change_variable = {
			which = energy_weight
			value = 4
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 4
			}
		}
		change_variable = {
			which = energy_weight
			value = 9
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 5
			}
		}
		change_variable = {
			which = energy_weight
			value = 16
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 6
			}
		}
		change_variable = {
			which = energy_weight
			value = 25
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 7
			}
		}
		change_variable = {
			which = energy_weight
			value = 36
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 8
			}
		}
		change_variable = {
			which = energy_weight
			value = 49
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount < 9
			}
		}
		change_variable = {
			which = energy_weight
			value = 64
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount = 9
				amount = 9
			}
		}
		change_variable = {
			which = energy_weight
			value = 81
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = energy amount > 9
			}
		}
		change_variable = {
			which = energy_weight
			value = 100
		}
		break = yes
	}
}
check_mineral_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 1
			}
		}
		change_variable = {
			which = minerals_weight
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 2
			}
		}
		change_variable = {
			which = minerals_weight
			value = 1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 3
			}
		}
		change_variable = {
			which = minerals_weight
			value = 4
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 4
			}
		}
		change_variable = {
			which = minerals_weight
			value = 9
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 5
			}
		}
		change_variable = {
			which = minerals_weight
			value = 16
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 6
			}
		}
		change_variable = {
			which = minerals_weight
			value = 25
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 7
			}
		}
		change_variable = {
			which = minerals_weight
			value = 36
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 8
			}
		}
		change_variable = {
			which = minerals_weight
			value = 49
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount < 9
			}
		}
		change_variable = {
			which = minerals_weight
			value = 64
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount = 9
			}
		}
		change_variable = {
			which = minerals_weight
			value = 81
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = minerals amount > 9
			}
		}
		change_variable = {
			which = minerals_weight
			value = 100
		}
		break = yes
	}
}
check_food_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 1
			}
		}
		change_variable = {
			which = food_weight
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 2
			}
		}
		change_variable = {
			which = food_weight
			value = 1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 3
			}
		}
		change_variable = {
			which = food_weight
			value = 4
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 4
			}
		}
		change_variable = {
			which = food_weight
			value = 9
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 5
			}
		}
		change_variable = {
			which = food_weight
			value = 16
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 6
			}
		}
		change_variable = {
			which = food_weight
			value = 25
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 7
			}
		}
		change_variable = {
			which = food_weight
			value = 36
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 8
			}
		}
		change_variable = {
			which = food_weight
			value = 49
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount < 9
			}
		}
		change_variable = {
			which = food_weight
			value = 64
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount = 9
			}
		}
		change_variable = {
			which = food_weight
			value = 81
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = food amount > 9
			}
		}
		change_variable = {
			which = food_weight
			value = 100
		}
		break = yes
	}
}
check_unity_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 0
			}
		}
		change_variable = {
			which = unity_weight
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 1
			}
		}
		change_variable = {
			which = unity_weight
			value = 2
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 2
			}
		}
		change_variable = {
			which = unity_weight
			value = 3
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 3
			}
		}
		change_variable = {
			which = unity_weight
			value = 6
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 4
			}
		}
		change_variable = {
			which = unity_weight
			value = 11
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 5
			}
		}
		change_variable = {
			which = unity_weight
			value = 18
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 6
			}
		}
		change_variable = {
			which = unity_weight
			value = 27
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 7
			}
		}
		change_variable = {
			which = unity_weight
			value = 38
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 8
			}
		}
		change_variable = {
			which = unity_weight
			value = 51
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount < 9
			}
		}
		change_variable = {
			which = unity_weight
			value = 66
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount = 9
			}
		}
		change_variable = {
			which = unity_weight
			value = 83
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = unity amount > 9
			}
		}
		change_variable = {
			which = unity_weight
			value = 102
		}
		break = yes
	}
}
check_society_research_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 0
			}
		}
		change_variable = {
			which = society_research_weight
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 1
			}
		}
		change_variable = {
			which = society_research_weight
			value = 1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 2
			}
		}
		change_variable = {
			which = society_research_weight
			value = 2
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 3
			}
		}
		change_variable = {
			which = society_research_weight
			value = 5
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 4
			}
		}
		change_variable = {
			which = society_research_weight
			value = 10
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 5
			}
		}
		change_variable = {
			which = society_research_weight
			value = 17
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 6
			}
		}
		change_variable = {
			which = society_research_weight
			value = 26
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 7
			}
		}
		change_variable = {
			which = society_research_weight
			value = 37
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 8
			}
		}
		change_variable = {
			which = society_research_weight
			value = 50
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount < 9
			}
		}
		change_variable = {
			which = society_research_weight
			value = 65
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount = 9
			}
		}
		change_variable = {
			which = society_research_weight
			value = 82
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = society_research amount > 9
			}
		}
		change_variable = {
			which = society_research_weight
			value = 101
		}
		break = yes
	}
}
check_physics_research_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 0
			}
		}
		change_variable = {
			which = physics_research_weight
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 1
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 2
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 2
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 3
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 5
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 4
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 10
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 5
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 17
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 6
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 26
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 7
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 37
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 8
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 50
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount < 9
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 65
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount = 9
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 82
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = physics_research amount > 9
			}
		}
		change_variable = {
			which = physics_research_weight
			value = 101
		}
		break = yes
	}
}
check_engineering_research_deposit = {
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 0
			}
		}
		change_variable = {
			which = engineering_research
			value = -1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 1
			}
		}
		change_variable = {
			which = engineering_research
			value = 1
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 2
			}
		}
		change_variable = {
			which = engineering_research
			value = 2
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 3
			}
		}
		change_variable = {
			which = engineering_research
			value = 5
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 4
			}
		}
		change_variable = {
			which = engineering_research
			value = 10
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 5
			}
		}
		change_variable = {
			which = engineering_research
			value = 17
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 6
			}
		}
		change_variable = {
			which = engineering_research
			value = 26
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 7
			}
		}
		change_variable = {
			which = engineering_research
			value = 37
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 8
			}
		}
		change_variable = {
			which = engineering_research
			value = 50
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount < 9
			}
		}
		change_variable = {
			which = engineering_research
			value = 65
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount = 9
			}
		}
		change_variable = {
			which = engineering_research
			value = 82
		}
		break = yes
	}
	
	if = {
		limit = {
			has_resource = {
				type = engineering_research amount > 9
			}
		}
		change_variable = {
			which = engineering_research
			value = 101
		}
		break = yes
	}
}
