count_food_reserve = {
	if = {
		limit = { food > 0 }
		if = {
			limit = { food > 2097151.999 }
			add_food = -2097152
			change_variable = { which = food_reserve value = 2097152 }
		}
		if = {
			limit = { food > 1048575.999 }
			add_food = -1048576
			change_variable = { which = food_reserve value = 1048576 }
		}
		if = {
			limit = { food > 524287.999 }
			add_food = -524288
			change_variable = { which = food_reserve value = 524288 }
		}
		if = {
			limit = { food > 262143.999 }
			add_food = -262144
			change_variable = { which = food_reserve value = 262144 }
		}
		if = {
			limit = { food > 131071.999 }
			add_food = -131072
			change_variable = { which = food_reserve value = 131072 }
		}
		if = {
			limit = { food > 65535.999 }
			add_food = -65536
			change_variable = { which = food_reserve value = 65536 }
		}
		if = {
			limit = { food > 32767.999 }
			add_food = -32768
			change_variable = { which = food_reserve value = 32768 }
		}
		if = {
			limit = { food > 16383.999 }
			add_food = -16384
			change_variable = { which = food_reserve value = 16384 }
		}
		if = {
			limit = { food > 8191.999 }
			add_food = -8192
			change_variable = { which = food_reserve value = 8192 }
		}
		if = {
			limit = { food > 4095.999 }
			add_food = -4096
			change_variable = { which = food_reserve value = 4096 }
		}
		if = {
			limit = { food > 2047.999 }
			add_food = -2048
			change_variable = { which = food_reserve value = 2048 }
		}
		if = {
			limit = { food > 1023.999 }
			add_food = -1024
			change_variable = { which = food_reserve value = 1024 }
		}
		if = {
			limit = { food > 511.999 }
			add_food = -512
			change_variable = { which = food_reserve value = 512 }
		}
		if = {
			limit = { food > 255.999 }
			add_food = -256
			change_variable = { which = food_reserve value = 256 }
		}
		if = {
			limit = { food > 127.999 }
			add_food = -128
			change_variable = { which = food_reserve value = 128 }
		}
		if = {
			limit = { food > 63.999 }
			add_food = -64
			change_variable = { which = food_reserve value = 64 }
		}
		if = {
			limit = { food > 31.999 }
			add_food = -32
			change_variable = { which = food_reserve value = 32 }
		}
		if = {
			limit = { food > 15.999 }
			add_food = -16
			change_variable = { which = food_reserve value = 16 }
		}
		if = {
			limit = { food > 7.999 }
			add_food = -8
			change_variable = { which = food_reserve value = 8 }
		}
		if = {
			limit = { food > 3.999 }
			add_food = -4
			change_variable = { which = food_reserve value = 4 }
		}
		if = {
			limit = { food > 1.999 }
			add_food = -2
			change_variable = { which = food_reserve value = 2 }
		}
		if = {
			limit = { food > 0.999 }
			add_food = -1
			change_variable = { which = food_reserve value = 1 }
		}
	}
	if = {
		limit = { food < 0 }
		if = {
			limit = { food < -2097151.999 }
			add_food = 2097152
			change_variable = { which = food_reserve value = -2097152 }
		}
		if = {
			limit = { food < -1048575.999 }
			add_food = 1048576
			change_variable = { which = food_reserve value = -1048576 }
		}
		if = {
			limit = { food < -524287.999 }
			add_food = 524288
			change_variable = { which = food_reserve value = -524288 }
		}
		if = {
			limit = { food < -262143.999 }
			add_food = 262144
			change_variable = { which = food_reserve value = -262144 }
		}
		if = {
			limit = { food < -131071.999 }
			add_food = 131072
			change_variable = { which = food_reserve value = -131072 }
		}
		if = {
			limit = { food < -65535.999 }
			add_food = 65536
			change_variable = { which = food_reserve value = -65536 }
		}
		if = {
			limit = { food < -32767.999 }
			add_food = 32768
			change_variable = { which = food_reserve value = -32768 }
		}
		if = {
			limit = { food < -16383.999 }
			add_food = 16384
			change_variable = { which = food_reserve value = -16384 }
		}
		if = {
			limit = { food < -8191.999 }
			add_food = 8192
			change_variable = { which = food_reserve value = -8192 }
		}
		if = {
			limit = { food < -4095.999 }
			add_food = 4096
			change_variable = { which = food_reserve value = -4096 }
		}
		if = {
			limit = { food < -2047.999 }
			add_food = 2048
			change_variable = { which = food_reserve value = -2048 }
		}
		if = {
			limit = { food < -1023.999 }
			add_food = 1024
			change_variable = { which = food_reserve value = -1024 }
		}
		if = {
			limit = { food < -511.999 }
			add_food = 512
			change_variable = { which = food_reserve value = -512 }
		}
		if = {
			limit = { food < -255.999 }
			add_food = 256
			change_variable = { which = food_reserve value = -256 }
		}
		if = {
			limit = { food < -127.999 }
			add_food = 128
			change_variable = { which = food_reserve value = -128 }
		}
		if = {
			limit = { food < -63.999 }
			add_food = 64
			change_variable = { which = food_reserve value = -64 }
		}
		if = {
			limit = { food < -31.999 }
			add_food = 32
			change_variable = { which = food_reserve value = -32 }
		}
		if = {
			limit = { food < -15.999 }
			add_food = 16
			change_variable = { which = food_reserve value = -16 }
		}
		if = {
			limit = { food < -7.999 }
			add_food = 8
			change_variable = { which = food_reserve value = -8 }
		}
		if = {
			limit = { food < -3.999 }
			add_food = 4
			change_variable = { which = food_reserve value = -4 }
		}
		if = {
			limit = { food < -1.999 }
			add_food = 2
			change_variable = { which = food_reserve value = -2 }
		}
		if = {
			limit = { food < -0.999 }
			add_food = 1
			change_variable = { which = food_reserve value = -1 }
		}
	}
}
restore_food_reserve = {
	set_variable = { which = reserve_transport value = food_reserve }
	if = {
		limit = {
			check_variable = { which = reserve_transport value > 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2097151.999 }
			}
			add_food = 2097152
			change_variable = { which = reserve_transport value = -2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1048575.999 }
			}
			add_food = 1048576
			change_variable = { which = reserve_transport value = -1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 524287.999 }
			}
			add_food = 524288
			change_variable = { which = reserve_transport value = -524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 262143.999 }
			}
			add_food = 262144
			change_variable = { which = reserve_transport value = -262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 131071.999 }
			}
			add_food = 131072
			change_variable = { which = reserve_transport value = -131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 65535.999 }
			}
			add_food = 65536
			change_variable = { which = reserve_transport value = -65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 32767.999 }
			}
			add_food = 32768
			change_variable = { which = reserve_transport value = -32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 16383.999 }
			}
			add_food = 16384
			change_variable = { which = reserve_transport value = -16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 8191.999 }
			}
			add_food = 8192
			change_variable = { which = reserve_transport value = -8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 4095.999 }
			}
			add_food = 4096
			change_variable = { which = reserve_transport value = -4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2047.999 }
			}
			add_food = 2048
			change_variable = { which = reserve_transport value = -2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1023.999 }
			}
			add_food = 1024
			change_variable = { which = reserve_transport value = -1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 511.999 }
			}
			add_food = 512
			change_variable = { which = reserve_transport value = -512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 255.999 }
			}
			add_food = 256
			change_variable = { which = reserve_transport value = -256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 127.999 }
			}
			add_food = 128
			change_variable = { which = reserve_transport value = -128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 63.999 }
			}
			add_food = 64
			change_variable = { which = reserve_transport value = -64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 31.999 }
			}
			add_food = 32
			change_variable = { which = reserve_transport value = -32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 15.999 }
			}
			add_food = 16
			change_variable = { which = reserve_transport value = -16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 7.999 }
			}
			add_food = 8
			change_variable = { which = reserve_transport value = -8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 3.999 }
			}
			add_food = 4
			change_variable = { which = reserve_transport value = -4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1.999 }
			}
			add_food = 2
			change_variable = { which = reserve_transport value = -2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 0.999 }
			}
			add_food = 1
			change_variable = { which = reserve_transport value = -1 }
		}
	}
	if = {
		limit = {
			check_variable = { which = reserve_transport value < 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2097151.999 }
			}
			add_food = -2097152
			change_variable = { which = reserve_transport value = 2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1048575.999 }
			}
			add_food = -1048576
			change_variable = { which = reserve_transport value = 1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -524287.999 }
			}
			add_food = -524288
			change_variable = { which = reserve_transport value = 524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -262143.999 }
			}
			add_food = -262144
			change_variable = { which = reserve_transport value = 262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -131071.999 }
			}
			add_food = -131072
			change_variable = { which = reserve_transport value = 131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -65535.999 }
			}
			add_food = -65536
			change_variable = { which = reserve_transport value = 65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -32767.999 }
			}
			add_food = -32768
			change_variable = { which = reserve_transport value = 32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -16383.999 }
			}
			add_food = -16384
			change_variable = { which = reserve_transport value = 16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -8191.999 }
			}
			add_food = -8192
			change_variable = { which = reserve_transport value = 8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -4095.999 }
			}
			add_food = -4096
			change_variable = { which = reserve_transport value = 4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2047.999 }
			}
			add_food = -2048
			change_variable = { which = reserve_transport value = 2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1023.999 }
			}
			add_food = -1024
			change_variable = { which = reserve_transport value = 1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -511.999 }
			}
			add_food = -512
			change_variable = { which = reserve_transport value = 512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -255.999 }
			}
			add_food = -256
			change_variable = { which = reserve_transport value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -127.999 }
			}
			add_food = -128
			change_variable = { which = reserve_transport value = 128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -63.999 }
			}
			add_food = -64
			change_variable = { which = reserve_transport value = 64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -31.999 }
			}
			add_food = -32
			change_variable = { which = reserve_transport value = 32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -15.999 }
			}
			add_food = -16
			change_variable = { which = reserve_transport value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -7.999 }
			}
			add_food = -8
			change_variable = { which = reserve_transport value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -3.999 }
			}
			add_food = -4
			change_variable = { which = reserve_transport value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1.999 }
			}
			add_food = -2
			change_variable = { which = reserve_transport value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -0.999 }
			}
			add_food = -1
			change_variable = { which = reserve_transport value = 1 }
		}
	}
}
count_energy_reserve = {
	if = {
		limit = { energy > 0 }
		if = {
			limit = { energy > 2097151.999 }
			add_energy = -2097152
			change_variable = { which = energy_reserve value = 2097152 }
		}
		if = {
			limit = { energy > 1048575.999 }
			add_energy = -1048576
			change_variable = { which = energy_reserve value = 1048576 }
		}
		if = {
			limit = { energy > 524287.999 }
			add_energy = -524288
			change_variable = { which = energy_reserve value = 524288 }
		}
		if = {
			limit = { energy > 262143.999 }
			add_energy = -262144
			change_variable = { which = energy_reserve value = 262144 }
		}
		if = {
			limit = { energy > 131071.999 }
			add_energy = -131072
			change_variable = { which = energy_reserve value = 131072 }
		}
		if = {
			limit = { energy > 65535.999 }
			add_energy = -65536
			change_variable = { which = energy_reserve value = 65536 }
		}
		if = {
			limit = { energy > 32767.999 }
			add_energy = -32768
			change_variable = { which = energy_reserve value = 32768 }
		}
		if = {
			limit = { energy > 16383.999 }
			add_energy = -16384
			change_variable = { which = energy_reserve value = 16384 }
		}
		if = {
			limit = { energy > 8191.999 }
			add_energy = -8192
			change_variable = { which = energy_reserve value = 8192 }
		}
		if = {
			limit = { energy > 4095.999 }
			add_energy = -4096
			change_variable = { which = energy_reserve value = 4096 }
		}
		if = {
			limit = { energy > 2047.999 }
			add_energy = -2048
			change_variable = { which = energy_reserve value = 2048 }
		}
		if = {
			limit = { energy > 1023.999 }
			add_energy = -1024
			change_variable = { which = energy_reserve value = 1024 }
		}
		if = {
			limit = { energy > 511.999 }
			add_energy = -512
			change_variable = { which = energy_reserve value = 512 }
		}
		if = {
			limit = { energy > 255.999 }
			add_energy = -256
			change_variable = { which = energy_reserve value = 256 }
		}
		if = {
			limit = { energy > 127.999 }
			add_energy = -128
			change_variable = { which = energy_reserve value = 128 }
		}
		if = {
			limit = { energy > 63.999 }
			add_energy = -64
			change_variable = { which = energy_reserve value = 64 }
		}
		if = {
			limit = { energy > 31.999 }
			add_energy = -32
			change_variable = { which = energy_reserve value = 32 }
		}
		if = {
			limit = { energy > 15.999 }
			add_energy = -16
			change_variable = { which = energy_reserve value = 16 }
		}
		if = {
			limit = { energy > 7.999 }
			add_energy = -8
			change_variable = { which = energy_reserve value = 8 }
		}
		if = {
			limit = { energy > 3.999 }
			add_energy = -4
			change_variable = { which = energy_reserve value = 4 }
		}
		if = {
			limit = { energy > 1.999 }
			add_energy = -2
			change_variable = { which = energy_reserve value = 2 }
		}
		if = {
			limit = { energy > 0.999 }
			add_energy = -1
			change_variable = { which = energy_reserve value = 1 }
		}
	}
	if = {
		limit = { energy < 0 }
		if = {
			limit = { energy < -2097151.999 }
			add_energy = 2097152
			change_variable = { which = energy_reserve value = -2097152 }
		}
		if = {
			limit = { energy < -1048575.999 }
			add_energy = 1048576
			change_variable = { which = energy_reserve value = -1048576 }
		}
		if = {
			limit = { energy < -524287.999 }
			add_energy = 524288
			change_variable = { which = energy_reserve value = -524288 }
		}
		if = {
			limit = { energy < -262143.999 }
			add_energy = 262144
			change_variable = { which = energy_reserve value = -262144 }
		}
		if = {
			limit = { energy < -131071.999 }
			add_energy = 131072
			change_variable = { which = energy_reserve value = -131072 }
		}
		if = {
			limit = { energy < -65535.999 }
			add_energy = 65536
			change_variable = { which = energy_reserve value = -65536 }
		}
		if = {
			limit = { energy < -32767.999 }
			add_energy = 32768
			change_variable = { which = energy_reserve value = -32768 }
		}
		if = {
			limit = { energy < -16383.999 }
			add_energy = 16384
			change_variable = { which = energy_reserve value = -16384 }
		}
		if = {
			limit = { energy < -8191.999 }
			add_energy = 8192
			change_variable = { which = energy_reserve value = -8192 }
		}
		if = {
			limit = { energy < -4095.999 }
			add_energy = 4096
			change_variable = { which = energy_reserve value = -4096 }
		}
		if = {
			limit = { energy < -2047.999 }
			add_energy = 2048
			change_variable = { which = energy_reserve value = -2048 }
		}
		if = {
			limit = { energy < -1023.999 }
			add_energy = 1024
			change_variable = { which = energy_reserve value = -1024 }
		}
		if = {
			limit = { energy < -511.999 }
			add_energy = 512
			change_variable = { which = energy_reserve value = -512 }
		}
		if = {
			limit = { energy < -255.999 }
			add_energy = 256
			change_variable = { which = energy_reserve value = -256 }
		}
		if = {
			limit = { energy < -127.999 }
			add_energy = 128
			change_variable = { which = energy_reserve value = -128 }
		}
		if = {
			limit = { energy < -63.999 }
			add_energy = 64
			change_variable = { which = energy_reserve value = -64 }
		}
		if = {
			limit = { energy < -31.999 }
			add_energy = 32
			change_variable = { which = energy_reserve value = -32 }
		}
		if = {
			limit = { energy < -15.999 }
			add_energy = 16
			change_variable = { which = energy_reserve value = -16 }
		}
		if = {
			limit = { energy < -7.999 }
			add_energy = 8
			change_variable = { which = energy_reserve value = -8 }
		}
		if = {
			limit = { energy < -3.999 }
			add_energy = 4
			change_variable = { which = energy_reserve value = -4 }
		}
		if = {
			limit = { energy < -1.999 }
			add_energy = 2
			change_variable = { which = energy_reserve value = -2 }
		}
		if = {
			limit = { energy < -0.999 }
			add_energy = 1
			change_variable = { which = energy_reserve value = -1 }
		}
	}
}
restore_energy_reserve = {
	set_variable = { which = reserve_transport value = energy_reserve }
	if = {
		limit = {
			check_variable = { which = reserve_transport value > 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2097151.999 }
			}
			add_energy = 2097152
			change_variable = { which = reserve_transport value = -2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1048575.999 }
			}
			add_energy = 1048576
			change_variable = { which = reserve_transport value = -1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 524287.999 }
			}
			add_energy = 524288
			change_variable = { which = reserve_transport value = -524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 262143.999 }
			}
			add_energy = 262144
			change_variable = { which = reserve_transport value = -262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 131071.999 }
			}
			add_energy = 131072
			change_variable = { which = reserve_transport value = -131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 65535.999 }
			}
			add_energy = 65536
			change_variable = { which = reserve_transport value = -65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 32767.999 }
			}
			add_energy = 32768
			change_variable = { which = reserve_transport value = -32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 16383.999 }
			}
			add_energy = 16384
			change_variable = { which = reserve_transport value = -16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 8191.999 }
			}
			add_energy = 8192
			change_variable = { which = reserve_transport value = -8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 4095.999 }
			}
			add_energy = 4096
			change_variable = { which = reserve_transport value = -4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2047.999 }
			}
			add_energy = 2048
			change_variable = { which = reserve_transport value = -2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1023.999 }
			}
			add_energy = 1024
			change_variable = { which = reserve_transport value = -1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 511.999 }
			}
			add_energy = 512
			change_variable = { which = reserve_transport value = -512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 255.999 }
			}
			add_energy = 256
			change_variable = { which = reserve_transport value = -256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 127.999 }
			}
			add_energy = 128
			change_variable = { which = reserve_transport value = -128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 63.999 }
			}
			add_energy = 64
			change_variable = { which = reserve_transport value = -64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 31.999 }
			}
			add_energy = 32
			change_variable = { which = reserve_transport value = -32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 15.999 }
			}
			add_energy = 16
			change_variable = { which = reserve_transport value = -16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 7.999 }
			}
			add_energy = 8
			change_variable = { which = reserve_transport value = -8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 3.999 }
			}
			add_energy = 4
			change_variable = { which = reserve_transport value = -4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1.999 }
			}
			add_energy = 2
			change_variable = { which = reserve_transport value = -2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 0.999 }
			}
			add_energy = 1
			change_variable = { which = reserve_transport value = -1 }
		}
	}
	if = {
		limit = {
			check_variable = { which = reserve_transport value < 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2097151.999 }
			}
			add_energy = -2097152
			change_variable = { which = reserve_transport value = 2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1048575.999 }
			}
			add_energy = -1048576
			change_variable = { which = reserve_transport value = 1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -524287.999 }
			}
			add_energy = -524288
			change_variable = { which = reserve_transport value = 524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -262143.999 }
			}
			add_energy = -262144
			change_variable = { which = reserve_transport value = 262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -131071.999 }
			}
			add_energy = -131072
			change_variable = { which = reserve_transport value = 131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -65535.999 }
			}
			add_energy = -65536
			change_variable = { which = reserve_transport value = 65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -32767.999 }
			}
			add_energy = -32768
			change_variable = { which = reserve_transport value = 32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -16383.999 }
			}
			add_energy = -16384
			change_variable = { which = reserve_transport value = 16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -8191.999 }
			}
			add_energy = -8192
			change_variable = { which = reserve_transport value = 8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -4095.999 }
			}
			add_energy = -4096
			change_variable = { which = reserve_transport value = 4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2047.999 }
			}
			add_energy = -2048
			change_variable = { which = reserve_transport value = 2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1023.999 }
			}
			add_energy = -1024
			change_variable = { which = reserve_transport value = 1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -511.999 }
			}
			add_energy = -512
			change_variable = { which = reserve_transport value = 512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -255.999 }
			}
			add_energy = -256
			change_variable = { which = reserve_transport value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -127.999 }
			}
			add_energy = -128
			change_variable = { which = reserve_transport value = 128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -63.999 }
			}
			add_energy = -64
			change_variable = { which = reserve_transport value = 64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -31.999 }
			}
			add_energy = -32
			change_variable = { which = reserve_transport value = 32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -15.999 }
			}
			add_energy = -16
			change_variable = { which = reserve_transport value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -7.999 }
			}
			add_energy = -8
			change_variable = { which = reserve_transport value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -3.999 }
			}
			add_energy = -4
			change_variable = { which = reserve_transport value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1.999 }
			}
			add_energy = -2
			change_variable = { which = reserve_transport value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -0.999 }
			}
			add_energy = -1
			change_variable = { which = reserve_transport value = 1 }
		}
	}
}
count_minerals_reserve = {
	if = {
		limit = { minerals > 0 }
		if = {
			limit = { minerals > 2097151.999 }
			add_minerals = -2097152
			change_variable = { which = minerals_reserve value = 2097152 }
		}
		if = {
			limit = { minerals > 1048575.999 }
			add_minerals = -1048576
			change_variable = { which = minerals_reserve value = 1048576 }
		}
		if = {
			limit = { minerals > 524287.999 }
			add_minerals = -524288
			change_variable = { which = minerals_reserve value = 524288 }
		}
		if = {
			limit = { minerals > 262143.999 }
			add_minerals = -262144
			change_variable = { which = minerals_reserve value = 262144 }
		}
		if = {
			limit = { minerals > 131071.999 }
			add_minerals = -131072
			change_variable = { which = minerals_reserve value = 131072 }
		}
		if = {
			limit = { minerals > 65535.999 }
			add_minerals = -65536
			change_variable = { which = minerals_reserve value = 65536 }
		}
		if = {
			limit = { minerals > 32767.999 }
			add_minerals = -32768
			change_variable = { which = minerals_reserve value = 32768 }
		}
		if = {
			limit = { minerals > 16383.999 }
			add_minerals = -16384
			change_variable = { which = minerals_reserve value = 16384 }
		}
		if = {
			limit = { minerals > 8191.999 }
			add_minerals = -8192
			change_variable = { which = minerals_reserve value = 8192 }
		}
		if = {
			limit = { minerals > 4095.999 }
			add_minerals = -4096
			change_variable = { which = minerals_reserve value = 4096 }
		}
		if = {
			limit = { minerals > 2047.999 }
			add_minerals = -2048
			change_variable = { which = minerals_reserve value = 2048 }
		}
		if = {
			limit = { minerals > 1023.999 }
			add_minerals = -1024
			change_variable = { which = minerals_reserve value = 1024 }
		}
		if = {
			limit = { minerals > 511.999 }
			add_minerals = -512
			change_variable = { which = minerals_reserve value = 512 }
		}
		if = {
			limit = { minerals > 255.999 }
			add_minerals = -256
			change_variable = { which = minerals_reserve value = 256 }
		}
		if = {
			limit = { minerals > 127.999 }
			add_minerals = -128
			change_variable = { which = minerals_reserve value = 128 }
		}
		if = {
			limit = { minerals > 63.999 }
			add_minerals = -64
			change_variable = { which = minerals_reserve value = 64 }
		}
		if = {
			limit = { minerals > 31.999 }
			add_minerals = -32
			change_variable = { which = minerals_reserve value = 32 }
		}
		if = {
			limit = { minerals > 15.999 }
			add_minerals = -16
			change_variable = { which = minerals_reserve value = 16 }
		}
		if = {
			limit = { minerals > 7.999 }
			add_minerals = -8
			change_variable = { which = minerals_reserve value = 8 }
		}
		if = {
			limit = { minerals > 3.999 }
			add_minerals = -4
			change_variable = { which = minerals_reserve value = 4 }
		}
		if = {
			limit = { minerals > 1.999 }
			add_minerals = -2
			change_variable = { which = minerals_reserve value = 2 }
		}
		if = {
			limit = { minerals > 0.999 }
			add_minerals = -1
			change_variable = { which = minerals_reserve value = 1 }
		}
	}
	if = {
		limit = { minerals < 0 }
		if = {
			limit = { minerals < -2097151.999 }
			add_minerals = 2097152
			change_variable = { which = minerals_reserve value = -2097152 }
		}
		if = {
			limit = { minerals < -1048575.999 }
			add_minerals = 1048576
			change_variable = { which = minerals_reserve value = -1048576 }
		}
		if = {
			limit = { minerals < -524287.999 }
			add_minerals = 524288
			change_variable = { which = minerals_reserve value = -524288 }
		}
		if = {
			limit = { minerals < -262143.999 }
			add_minerals = 262144
			change_variable = { which = minerals_reserve value = -262144 }
		}
		if = {
			limit = { minerals < -131071.999 }
			add_minerals = 131072
			change_variable = { which = minerals_reserve value = -131072 }
		}
		if = {
			limit = { minerals < -65535.999 }
			add_minerals = 65536
			change_variable = { which = minerals_reserve value = -65536 }
		}
		if = {
			limit = { minerals < -32767.999 }
			add_minerals = 32768
			change_variable = { which = minerals_reserve value = -32768 }
		}
		if = {
			limit = { minerals < -16383.999 }
			add_minerals = 16384
			change_variable = { which = minerals_reserve value = -16384 }
		}
		if = {
			limit = { minerals < -8191.999 }
			add_minerals = 8192
			change_variable = { which = minerals_reserve value = -8192 }
		}
		if = {
			limit = { minerals < -4095.999 }
			add_minerals = 4096
			change_variable = { which = minerals_reserve value = -4096 }
		}
		if = {
			limit = { minerals < -2047.999 }
			add_minerals = 2048
			change_variable = { which = minerals_reserve value = -2048 }
		}
		if = {
			limit = { minerals < -1023.999 }
			add_minerals = 1024
			change_variable = { which = minerals_reserve value = -1024 }
		}
		if = {
			limit = { minerals < -511.999 }
			add_minerals = 512
			change_variable = { which = minerals_reserve value = -512 }
		}
		if = {
			limit = { minerals < -255.999 }
			add_minerals = 256
			change_variable = { which = minerals_reserve value = -256 }
		}
		if = {
			limit = { minerals < -127.999 }
			add_minerals = 128
			change_variable = { which = minerals_reserve value = -128 }
		}
		if = {
			limit = { minerals < -63.999 }
			add_minerals = 64
			change_variable = { which = minerals_reserve value = -64 }
		}
		if = {
			limit = { minerals < -31.999 }
			add_minerals = 32
			change_variable = { which = minerals_reserve value = -32 }
		}
		if = {
			limit = { minerals < -15.999 }
			add_minerals = 16
			change_variable = { which = minerals_reserve value = -16 }
		}
		if = {
			limit = { minerals < -7.999 }
			add_minerals = 8
			change_variable = { which = minerals_reserve value = -8 }
		}
		if = {
			limit = { minerals < -3.999 }
			add_minerals = 4
			change_variable = { which = minerals_reserve value = -4 }
		}
		if = {
			limit = { minerals < -1.999 }
			add_minerals = 2
			change_variable = { which = minerals_reserve value = -2 }
		}
		if = {
			limit = { minerals < -0.999 }
			add_minerals = 1
			change_variable = { which = minerals_reserve value = -1 }
		}
	}
}
restore_minerals_reserve = {
	set_variable = { which = reserve_transport value = minerals_reserve }
	if = {
		limit = {
			check_variable = { which = reserve_transport value > 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2097151.999 }
			}
			add_minerals = 2097152
			change_variable = { which = reserve_transport value = -2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1048575.999 }
			}
			add_minerals = 1048576
			change_variable = { which = reserve_transport value = -1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 524287.999 }
			}
			add_minerals = 524288
			change_variable = { which = reserve_transport value = -524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 262143.999 }
			}
			add_minerals = 262144
			change_variable = { which = reserve_transport value = -262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 131071.999 }
			}
			add_minerals = 131072
			change_variable = { which = reserve_transport value = -131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 65535.999 }
			}
			add_minerals = 65536
			change_variable = { which = reserve_transport value = -65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 32767.999 }
			}
			add_minerals = 32768
			change_variable = { which = reserve_transport value = -32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 16383.999 }
			}
			add_minerals = 16384
			change_variable = { which = reserve_transport value = -16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 8191.999 }
			}
			add_minerals = 8192
			change_variable = { which = reserve_transport value = -8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 4095.999 }
			}
			add_minerals = 4096
			change_variable = { which = reserve_transport value = -4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2047.999 }
			}
			add_minerals = 2048
			change_variable = { which = reserve_transport value = -2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1023.999 }
			}
			add_minerals = 1024
			change_variable = { which = reserve_transport value = -1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 511.999 }
			}
			add_minerals = 512
			change_variable = { which = reserve_transport value = -512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 255.999 }
			}
			add_minerals = 256
			change_variable = { which = reserve_transport value = -256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 127.999 }
			}
			add_minerals = 128
			change_variable = { which = reserve_transport value = -128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 63.999 }
			}
			add_minerals = 64
			change_variable = { which = reserve_transport value = -64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 31.999 }
			}
			add_minerals = 32
			change_variable = { which = reserve_transport value = -32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 15.999 }
			}
			add_minerals = 16
			change_variable = { which = reserve_transport value = -16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 7.999 }
			}
			add_minerals = 8
			change_variable = { which = reserve_transport value = -8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 3.999 }
			}
			add_minerals = 4
			change_variable = { which = reserve_transport value = -4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1.999 }
			}
			add_minerals = 2
			change_variable = { which = reserve_transport value = -2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 0.999 }
			}
			add_minerals = 1
			change_variable = { which = reserve_transport value = -1 }
		}
	}
	if = {
		limit = {
			check_variable = { which = reserve_transport value < 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2097151.999 }
			}
			add_minerals = -2097152
			change_variable = { which = reserve_transport value = 2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1048575.999 }
			}
			add_minerals = -1048576
			change_variable = { which = reserve_transport value = 1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -524287.999 }
			}
			add_minerals = -524288
			change_variable = { which = reserve_transport value = 524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -262143.999 }
			}
			add_minerals = -262144
			change_variable = { which = reserve_transport value = 262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -131071.999 }
			}
			add_minerals = -131072
			change_variable = { which = reserve_transport value = 131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -65535.999 }
			}
			add_minerals = -65536
			change_variable = { which = reserve_transport value = 65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -32767.999 }
			}
			add_minerals = -32768
			change_variable = { which = reserve_transport value = 32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -16383.999 }
			}
			add_minerals = -16384
			change_variable = { which = reserve_transport value = 16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -8191.999 }
			}
			add_minerals = -8192
			change_variable = { which = reserve_transport value = 8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -4095.999 }
			}
			add_minerals = -4096
			change_variable = { which = reserve_transport value = 4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2047.999 }
			}
			add_minerals = -2048
			change_variable = { which = reserve_transport value = 2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1023.999 }
			}
			add_minerals = -1024
			change_variable = { which = reserve_transport value = 1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -511.999 }
			}
			add_minerals = -512
			change_variable = { which = reserve_transport value = 512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -255.999 }
			}
			add_minerals = -256
			change_variable = { which = reserve_transport value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -127.999 }
			}
			add_minerals = -128
			change_variable = { which = reserve_transport value = 128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -63.999 }
			}
			add_minerals = -64
			change_variable = { which = reserve_transport value = 64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -31.999 }
			}
			add_minerals = -32
			change_variable = { which = reserve_transport value = 32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -15.999 }
			}
			add_minerals = -16
			change_variable = { which = reserve_transport value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -7.999 }
			}
			add_minerals = -8
			change_variable = { which = reserve_transport value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -3.999 }
			}
			add_minerals = -4
			change_variable = { which = reserve_transport value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1.999 }
			}
			add_minerals = -2
			change_variable = { which = reserve_transport value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -0.999 }
			}
			add_minerals = -1
			change_variable = { which = reserve_transport value = 1 }
		}
	}
}
count_society_research_reserve = {
	if = {
		limit = { stored_society_points > 0 }
		if = {
			limit = { stored_society_points > 2097151.999 }
			add_society_research = -2097152
			change_variable = { which = society_research_reserve value = 2097152 }
		}
		if = {
			limit = { stored_society_points > 1048575.999 }
			add_society_research = -1048576
			change_variable = { which = society_research_reserve value = 1048576 }
		}
		if = {
			limit = { stored_society_points > 524287.999 }
			add_society_research = -524288
			change_variable = { which = society_research_reserve value = 524288 }
		}
		if = {
			limit = { stored_society_points > 262143.999 }
			add_society_research = -262144
			change_variable = { which = society_research_reserve value = 262144 }
		}
		if = {
			limit = { stored_society_points > 131071.999 }
			add_society_research = -131072
			change_variable = { which = society_research_reserve value = 131072 }
		}
		if = {
			limit = { stored_society_points > 65535.999 }
			add_society_research = -65536
			change_variable = { which = society_research_reserve value = 65536 }
		}
		if = {
			limit = { stored_society_points > 32767.999 }
			add_society_research = -32768
			change_variable = { which = society_research_reserve value = 32768 }
		}
		if = {
			limit = { stored_society_points > 16383.999 }
			add_society_research = -16384
			change_variable = { which = society_research_reserve value = 16384 }
		}
		if = {
			limit = { stored_society_points > 8191.999 }
			add_society_research = -8192
			change_variable = { which = society_research_reserve value = 8192 }
		}
		if = {
			limit = { stored_society_points > 4095.999 }
			add_society_research = -4096
			change_variable = { which = society_research_reserve value = 4096 }
		}
		if = {
			limit = { stored_society_points > 2047.999 }
			add_society_research = -2048
			change_variable = { which = society_research_reserve value = 2048 }
		}
		if = {
			limit = { stored_society_points > 1023.999 }
			add_society_research = -1024
			change_variable = { which = society_research_reserve value = 1024 }
		}
		if = {
			limit = { stored_society_points > 511.999 }
			add_society_research = -512
			change_variable = { which = society_research_reserve value = 512 }
		}
		if = {
			limit = { stored_society_points > 255.999 }
			add_society_research = -256
			change_variable = { which = society_research_reserve value = 256 }
		}
		if = {
			limit = { stored_society_points > 127.999 }
			add_society_research = -128
			change_variable = { which = society_research_reserve value = 128 }
		}
		if = {
			limit = { stored_society_points > 63.999 }
			add_society_research = -64
			change_variable = { which = society_research_reserve value = 64 }
		}
		if = {
			limit = { stored_society_points > 31.999 }
			add_society_research = -32
			change_variable = { which = society_research_reserve value = 32 }
		}
		if = {
			limit = { stored_society_points > 15.999 }
			add_society_research = -16
			change_variable = { which = society_research_reserve value = 16 }
		}
		if = {
			limit = { stored_society_points > 7.999 }
			add_society_research = -8
			change_variable = { which = society_research_reserve value = 8 }
		}
		if = {
			limit = { stored_society_points > 3.999 }
			add_society_research = -4
			change_variable = { which = society_research_reserve value = 4 }
		}
		if = {
			limit = { stored_society_points > 1.999 }
			add_society_research = -2
			change_variable = { which = society_research_reserve value = 2 }
		}
		if = {
			limit = { stored_society_points > 0.999 }
			add_society_research = -1
			change_variable = { which = society_research_reserve value = 1 }
		}
	}
	if = {
		limit = { stored_society_points < 0 }
		if = {
			limit = { stored_society_points < -2097151.999 }
			add_society_research = 2097152
			change_variable = { which = society_research_reserve value = -2097152 }
		}
		if = {
			limit = { stored_society_points < -1048575.999 }
			add_society_research = 1048576
			change_variable = { which = society_research_reserve value = -1048576 }
		}
		if = {
			limit = { stored_society_points < -524287.999 }
			add_society_research = 524288
			change_variable = { which = society_research_reserve value = -524288 }
		}
		if = {
			limit = { stored_society_points < -262143.999 }
			add_society_research = 262144
			change_variable = { which = society_research_reserve value = -262144 }
		}
		if = {
			limit = { stored_society_points < -131071.999 }
			add_society_research = 131072
			change_variable = { which = society_research_reserve value = -131072 }
		}
		if = {
			limit = { stored_society_points < -65535.999 }
			add_society_research = 65536
			change_variable = { which = society_research_reserve value = -65536 }
		}
		if = {
			limit = { stored_society_points < -32767.999 }
			add_society_research = 32768
			change_variable = { which = society_research_reserve value = -32768 }
		}
		if = {
			limit = { stored_society_points < -16383.999 }
			add_society_research = 16384
			change_variable = { which = society_research_reserve value = -16384 }
		}
		if = {
			limit = { stored_society_points < -8191.999 }
			add_society_research = 8192
			change_variable = { which = society_research_reserve value = -8192 }
		}
		if = {
			limit = { stored_society_points < -4095.999 }
			add_society_research = 4096
			change_variable = { which = society_research_reserve value = -4096 }
		}
		if = {
			limit = { stored_society_points < -2047.999 }
			add_society_research = 2048
			change_variable = { which = society_research_reserve value = -2048 }
		}
		if = {
			limit = { stored_society_points < -1023.999 }
			add_society_research = 1024
			change_variable = { which = society_research_reserve value = -1024 }
		}
		if = {
			limit = { stored_society_points < -511.999 }
			add_society_research = 512
			change_variable = { which = society_research_reserve value = -512 }
		}
		if = {
			limit = { stored_society_points < -255.999 }
			add_society_research = 256
			change_variable = { which = society_research_reserve value = -256 }
		}
		if = {
			limit = { stored_society_points < -127.999 }
			add_society_research = 128
			change_variable = { which = society_research_reserve value = -128 }
		}
		if = {
			limit = { stored_society_points < -63.999 }
			add_society_research = 64
			change_variable = { which = society_research_reserve value = -64 }
		}
		if = {
			limit = { stored_society_points < -31.999 }
			add_society_research = 32
			change_variable = { which = society_research_reserve value = -32 }
		}
		if = {
			limit = { stored_society_points < -15.999 }
			add_society_research = 16
			change_variable = { which = society_research_reserve value = -16 }
		}
		if = {
			limit = { stored_society_points < -7.999 }
			add_society_research = 8
			change_variable = { which = society_research_reserve value = -8 }
		}
		if = {
			limit = { stored_society_points < -3.999 }
			add_society_research = 4
			change_variable = { which = society_research_reserve value = -4 }
		}
		if = {
			limit = { stored_society_points < -1.999 }
			add_society_research = 2
			change_variable = { which = society_research_reserve value = -2 }
		}
		if = {
			limit = { stored_society_points < -0.999 }
			add_society_research = 1
			change_variable = { which = society_research_reserve value = -1 }
		}
	}
}
restore_society_research_reserve = {
	set_variable = { which = reserve_transport value = society_research_reserve }
	if = {
		limit = {
			check_variable = { which = reserve_transport value > 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2097151.999 }
			}
			add_society_research = 2097152
			change_variable = { which = reserve_transport value = -2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1048575.999 }
			}
			add_society_research = 1048576
			change_variable = { which = reserve_transport value = -1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 524287.999 }
			}
			add_society_research = 524288
			change_variable = { which = reserve_transport value = -524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 262143.999 }
			}
			add_society_research = 262144
			change_variable = { which = reserve_transport value = -262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 131071.999 }
			}
			add_society_research = 131072
			change_variable = { which = reserve_transport value = -131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 65535.999 }
			}
			add_society_research = 65536
			change_variable = { which = reserve_transport value = -65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 32767.999 }
			}
			add_society_research = 32768
			change_variable = { which = reserve_transport value = -32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 16383.999 }
			}
			add_society_research = 16384
			change_variable = { which = reserve_transport value = -16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 8191.999 }
			}
			add_society_research = 8192
			change_variable = { which = reserve_transport value = -8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 4095.999 }
			}
			add_society_research = 4096
			change_variable = { which = reserve_transport value = -4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2047.999 }
			}
			add_society_research = 2048
			change_variable = { which = reserve_transport value = -2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1023.999 }
			}
			add_society_research = 1024
			change_variable = { which = reserve_transport value = -1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 511.999 }
			}
			add_society_research = 512
			change_variable = { which = reserve_transport value = -512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 255.999 }
			}
			add_society_research = 256
			change_variable = { which = reserve_transport value = -256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 127.999 }
			}
			add_society_research = 128
			change_variable = { which = reserve_transport value = -128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 63.999 }
			}
			add_society_research = 64
			change_variable = { which = reserve_transport value = -64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 31.999 }
			}
			add_society_research = 32
			change_variable = { which = reserve_transport value = -32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 15.999 }
			}
			add_society_research = 16
			change_variable = { which = reserve_transport value = -16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 7.999 }
			}
			add_society_research = 8
			change_variable = { which = reserve_transport value = -8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 3.999 }
			}
			add_society_research = 4
			change_variable = { which = reserve_transport value = -4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1.999 }
			}
			add_society_research = 2
			change_variable = { which = reserve_transport value = -2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 0.999 }
			}
			add_society_research = 1
			change_variable = { which = reserve_transport value = -1 }
		}
	}
	if = {
		limit = {
			check_variable = { which = reserve_transport value < 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2097151.999 }
			}
			add_society_research = -2097152
			change_variable = { which = reserve_transport value = 2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1048575.999 }
			}
			add_society_research = -1048576
			change_variable = { which = reserve_transport value = 1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -524287.999 }
			}
			add_society_research = -524288
			change_variable = { which = reserve_transport value = 524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -262143.999 }
			}
			add_society_research = -262144
			change_variable = { which = reserve_transport value = 262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -131071.999 }
			}
			add_society_research = -131072
			change_variable = { which = reserve_transport value = 131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -65535.999 }
			}
			add_society_research = -65536
			change_variable = { which = reserve_transport value = 65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -32767.999 }
			}
			add_society_research = -32768
			change_variable = { which = reserve_transport value = 32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -16383.999 }
			}
			add_society_research = -16384
			change_variable = { which = reserve_transport value = 16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -8191.999 }
			}
			add_society_research = -8192
			change_variable = { which = reserve_transport value = 8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -4095.999 }
			}
			add_society_research = -4096
			change_variable = { which = reserve_transport value = 4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2047.999 }
			}
			add_society_research = -2048
			change_variable = { which = reserve_transport value = 2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1023.999 }
			}
			add_society_research = -1024
			change_variable = { which = reserve_transport value = 1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -511.999 }
			}
			add_society_research = -512
			change_variable = { which = reserve_transport value = 512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -255.999 }
			}
			add_society_research = -256
			change_variable = { which = reserve_transport value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -127.999 }
			}
			add_society_research = -128
			change_variable = { which = reserve_transport value = 128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -63.999 }
			}
			add_society_research = -64
			change_variable = { which = reserve_transport value = 64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -31.999 }
			}
			add_society_research = -32
			change_variable = { which = reserve_transport value = 32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -15.999 }
			}
			add_society_research = -16
			change_variable = { which = reserve_transport value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -7.999 }
			}
			add_society_research = -8
			change_variable = { which = reserve_transport value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -3.999 }
			}
			add_society_research = -4
			change_variable = { which = reserve_transport value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1.999 }
			}
			add_society_research = -2
			change_variable = { which = reserve_transport value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -0.999 }
			}
			add_society_research = -1
			change_variable = { which = reserve_transport value = 1 }
		}
	}
}
count_physics_research_reserve = {
	if = {
		limit = { stored_physics_points > 0 }
		if = {
			limit = { stored_physics_points > 2097151.999 }
			add_physics_research = -2097152
			change_variable = { which = physics_research_reserve value = 2097152 }
		}
		if = {
			limit = { stored_physics_points > 1048575.999 }
			add_physics_research = -1048576
			change_variable = { which = physics_research_reserve value = 1048576 }
		}
		if = {
			limit = { stored_physics_points > 524287.999 }
			add_physics_research = -524288
			change_variable = { which = physics_research_reserve value = 524288 }
		}
		if = {
			limit = { stored_physics_points > 262143.999 }
			add_physics_research = -262144
			change_variable = { which = physics_research_reserve value = 262144 }
		}
		if = {
			limit = { stored_physics_points > 131071.999 }
			add_physics_research = -131072
			change_variable = { which = physics_research_reserve value = 131072 }
		}
		if = {
			limit = { stored_physics_points > 65535.999 }
			add_physics_research = -65536
			change_variable = { which = physics_research_reserve value = 65536 }
		}
		if = {
			limit = { stored_physics_points > 32767.999 }
			add_physics_research = -32768
			change_variable = { which = physics_research_reserve value = 32768 }
		}
		if = {
			limit = { stored_physics_points > 16383.999 }
			add_physics_research = -16384
			change_variable = { which = physics_research_reserve value = 16384 }
		}
		if = {
			limit = { stored_physics_points > 8191.999 }
			add_physics_research = -8192
			change_variable = { which = physics_research_reserve value = 8192 }
		}
		if = {
			limit = { stored_physics_points > 4095.999 }
			add_physics_research = -4096
			change_variable = { which = physics_research_reserve value = 4096 }
		}
		if = {
			limit = { stored_physics_points > 2047.999 }
			add_physics_research = -2048
			change_variable = { which = physics_research_reserve value = 2048 }
		}
		if = {
			limit = { stored_physics_points > 1023.999 }
			add_physics_research = -1024
			change_variable = { which = physics_research_reserve value = 1024 }
		}
		if = {
			limit = { stored_physics_points > 511.999 }
			add_physics_research = -512
			change_variable = { which = physics_research_reserve value = 512 }
		}
		if = {
			limit = { stored_physics_points > 255.999 }
			add_physics_research = -256
			change_variable = { which = physics_research_reserve value = 256 }
		}
		if = {
			limit = { stored_physics_points > 127.999 }
			add_physics_research = -128
			change_variable = { which = physics_research_reserve value = 128 }
		}
		if = {
			limit = { stored_physics_points > 63.999 }
			add_physics_research = -64
			change_variable = { which = physics_research_reserve value = 64 }
		}
		if = {
			limit = { stored_physics_points > 31.999 }
			add_physics_research = -32
			change_variable = { which = physics_research_reserve value = 32 }
		}
		if = {
			limit = { stored_physics_points > 15.999 }
			add_physics_research = -16
			change_variable = { which = physics_research_reserve value = 16 }
		}
		if = {
			limit = { stored_physics_points > 7.999 }
			add_physics_research = -8
			change_variable = { which = physics_research_reserve value = 8 }
		}
		if = {
			limit = { stored_physics_points > 3.999 }
			add_physics_research = -4
			change_variable = { which = physics_research_reserve value = 4 }
		}
		if = {
			limit = { stored_physics_points > 1.999 }
			add_physics_research = -2
			change_variable = { which = physics_research_reserve value = 2 }
		}
		if = {
			limit = { stored_physics_points > 0.999 }
			add_physics_research = -1
			change_variable = { which = physics_research_reserve value = 1 }
		}
	}
	if = {
		limit = { stored_physics_points < 0 }
		if = {
			limit = { stored_physics_points < -2097151.999 }
			add_physics_research = 2097152
			change_variable = { which = physics_research_reserve value = -2097152 }
		}
		if = {
			limit = { stored_physics_points < -1048575.999 }
			add_physics_research = 1048576
			change_variable = { which = physics_research_reserve value = -1048576 }
		}
		if = {
			limit = { stored_physics_points < -524287.999 }
			add_physics_research = 524288
			change_variable = { which = physics_research_reserve value = -524288 }
		}
		if = {
			limit = { stored_physics_points < -262143.999 }
			add_physics_research = 262144
			change_variable = { which = physics_research_reserve value = -262144 }
		}
		if = {
			limit = { stored_physics_points < -131071.999 }
			add_physics_research = 131072
			change_variable = { which = physics_research_reserve value = -131072 }
		}
		if = {
			limit = { stored_physics_points < -65535.999 }
			add_physics_research = 65536
			change_variable = { which = physics_research_reserve value = -65536 }
		}
		if = {
			limit = { stored_physics_points < -32767.999 }
			add_physics_research = 32768
			change_variable = { which = physics_research_reserve value = -32768 }
		}
		if = {
			limit = { stored_physics_points < -16383.999 }
			add_physics_research = 16384
			change_variable = { which = physics_research_reserve value = -16384 }
		}
		if = {
			limit = { stored_physics_points < -8191.999 }
			add_physics_research = 8192
			change_variable = { which = physics_research_reserve value = -8192 }
		}
		if = {
			limit = { stored_physics_points < -4095.999 }
			add_physics_research = 4096
			change_variable = { which = physics_research_reserve value = -4096 }
		}
		if = {
			limit = { stored_physics_points < -2047.999 }
			add_physics_research = 2048
			change_variable = { which = physics_research_reserve value = -2048 }
		}
		if = {
			limit = { stored_physics_points < -1023.999 }
			add_physics_research = 1024
			change_variable = { which = physics_research_reserve value = -1024 }
		}
		if = {
			limit = { stored_physics_points < -511.999 }
			add_physics_research = 512
			change_variable = { which = physics_research_reserve value = -512 }
		}
		if = {
			limit = { stored_physics_points < -255.999 }
			add_physics_research = 256
			change_variable = { which = physics_research_reserve value = -256 }
		}
		if = {
			limit = { stored_physics_points < -127.999 }
			add_physics_research = 128
			change_variable = { which = physics_research_reserve value = -128 }
		}
		if = {
			limit = { stored_physics_points < -63.999 }
			add_physics_research = 64
			change_variable = { which = physics_research_reserve value = -64 }
		}
		if = {
			limit = { stored_physics_points < -31.999 }
			add_physics_research = 32
			change_variable = { which = physics_research_reserve value = -32 }
		}
		if = {
			limit = { stored_physics_points < -15.999 }
			add_physics_research = 16
			change_variable = { which = physics_research_reserve value = -16 }
		}
		if = {
			limit = { stored_physics_points < -7.999 }
			add_physics_research = 8
			change_variable = { which = physics_research_reserve value = -8 }
		}
		if = {
			limit = { stored_physics_points < -3.999 }
			add_physics_research = 4
			change_variable = { which = physics_research_reserve value = -4 }
		}
		if = {
			limit = { stored_physics_points < -1.999 }
			add_physics_research = 2
			change_variable = { which = physics_research_reserve value = -2 }
		}
		if = {
			limit = { stored_physics_points < -0.999 }
			add_physics_research = 1
			change_variable = { which = physics_research_reserve value = -1 }
		}
	}
}
restore_physics_research_reserve = {
	set_variable = { which = reserve_transport value = physics_research_reserve }
	if = {
		limit = {
			check_variable = { which = reserve_transport value > 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2097151.999 }
			}
			add_physics_research = 2097152
			change_variable = { which = reserve_transport value = -2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1048575.999 }
			}
			add_physics_research = 1048576
			change_variable = { which = reserve_transport value = -1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 524287.999 }
			}
			add_physics_research = 524288
			change_variable = { which = reserve_transport value = -524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 262143.999 }
			}
			add_physics_research = 262144
			change_variable = { which = reserve_transport value = -262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 131071.999 }
			}
			add_physics_research = 131072
			change_variable = { which = reserve_transport value = -131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 65535.999 }
			}
			add_physics_research = 65536
			change_variable = { which = reserve_transport value = -65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 32767.999 }
			}
			add_physics_research = 32768
			change_variable = { which = reserve_transport value = -32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 16383.999 }
			}
			add_physics_research = 16384
			change_variable = { which = reserve_transport value = -16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 8191.999 }
			}
			add_physics_research = 8192
			change_variable = { which = reserve_transport value = -8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 4095.999 }
			}
			add_physics_research = 4096
			change_variable = { which = reserve_transport value = -4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2047.999 }
			}
			add_physics_research = 2048
			change_variable = { which = reserve_transport value = -2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1023.999 }
			}
			add_physics_research = 1024
			change_variable = { which = reserve_transport value = -1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 511.999 }
			}
			add_physics_research = 512
			change_variable = { which = reserve_transport value = -512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 255.999 }
			}
			add_physics_research = 256
			change_variable = { which = reserve_transport value = -256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 127.999 }
			}
			add_physics_research = 128
			change_variable = { which = reserve_transport value = -128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 63.999 }
			}
			add_physics_research = 64
			change_variable = { which = reserve_transport value = -64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 31.999 }
			}
			add_physics_research = 32
			change_variable = { which = reserve_transport value = -32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 15.999 }
			}
			add_physics_research = 16
			change_variable = { which = reserve_transport value = -16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 7.999 }
			}
			add_physics_research = 8
			change_variable = { which = reserve_transport value = -8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 3.999 }
			}
			add_physics_research = 4
			change_variable = { which = reserve_transport value = -4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1.999 }
			}
			add_physics_research = 2
			change_variable = { which = reserve_transport value = -2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 0.999 }
			}
			add_physics_research = 1
			change_variable = { which = reserve_transport value = -1 }
		}
	}
	if = {
		limit = {
			check_variable = { which = reserve_transport value < 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2097151.999 }
			}
			add_physics_research = -2097152
			change_variable = { which = reserve_transport value = 2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1048575.999 }
			}
			add_physics_research = -1048576
			change_variable = { which = reserve_transport value = 1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -524287.999 }
			}
			add_physics_research = -524288
			change_variable = { which = reserve_transport value = 524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -262143.999 }
			}
			add_physics_research = -262144
			change_variable = { which = reserve_transport value = 262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -131071.999 }
			}
			add_physics_research = -131072
			change_variable = { which = reserve_transport value = 131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -65535.999 }
			}
			add_physics_research = -65536
			change_variable = { which = reserve_transport value = 65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -32767.999 }
			}
			add_physics_research = -32768
			change_variable = { which = reserve_transport value = 32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -16383.999 }
			}
			add_physics_research = -16384
			change_variable = { which = reserve_transport value = 16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -8191.999 }
			}
			add_physics_research = -8192
			change_variable = { which = reserve_transport value = 8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -4095.999 }
			}
			add_physics_research = -4096
			change_variable = { which = reserve_transport value = 4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2047.999 }
			}
			add_physics_research = -2048
			change_variable = { which = reserve_transport value = 2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1023.999 }
			}
			add_physics_research = -1024
			change_variable = { which = reserve_transport value = 1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -511.999 }
			}
			add_physics_research = -512
			change_variable = { which = reserve_transport value = 512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -255.999 }
			}
			add_physics_research = -256
			change_variable = { which = reserve_transport value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -127.999 }
			}
			add_physics_research = -128
			change_variable = { which = reserve_transport value = 128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -63.999 }
			}
			add_physics_research = -64
			change_variable = { which = reserve_transport value = 64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -31.999 }
			}
			add_physics_research = -32
			change_variable = { which = reserve_transport value = 32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -15.999 }
			}
			add_physics_research = -16
			change_variable = { which = reserve_transport value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -7.999 }
			}
			add_physics_research = -8
			change_variable = { which = reserve_transport value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -3.999 }
			}
			add_physics_research = -4
			change_variable = { which = reserve_transport value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1.999 }
			}
			add_physics_research = -2
			change_variable = { which = reserve_transport value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -0.999 }
			}
			add_physics_research = -1
			change_variable = { which = reserve_transport value = 1 }
		}
	}
}
count_engineering_research_reserve = {
	if = {
		limit = { stored_engineering_points > 0 }
		if = {
			limit = { stored_engineering_points > 2097151.999 }
			add_engineering_research = -2097152
			change_variable = { which = engineering_research_reserve value = 2097152 }
		}
		if = {
			limit = { stored_engineering_points > 1048575.999 }
			add_engineering_research = -1048576
			change_variable = { which = engineering_research_reserve value = 1048576 }
		}
		if = {
			limit = { stored_engineering_points > 524287.999 }
			add_engineering_research = -524288
			change_variable = { which = engineering_research_reserve value = 524288 }
		}
		if = {
			limit = { stored_engineering_points > 262143.999 }
			add_engineering_research = -262144
			change_variable = { which = engineering_research_reserve value = 262144 }
		}
		if = {
			limit = { stored_engineering_points > 131071.999 }
			add_engineering_research = -131072
			change_variable = { which = engineering_research_reserve value = 131072 }
		}
		if = {
			limit = { stored_engineering_points > 65535.999 }
			add_engineering_research = -65536
			change_variable = { which = engineering_research_reserve value = 65536 }
		}
		if = {
			limit = { stored_engineering_points > 32767.999 }
			add_engineering_research = -32768
			change_variable = { which = engineering_research_reserve value = 32768 }
		}
		if = {
			limit = { stored_engineering_points > 16383.999 }
			add_engineering_research = -16384
			change_variable = { which = engineering_research_reserve value = 16384 }
		}
		if = {
			limit = { stored_engineering_points > 8191.999 }
			add_engineering_research = -8192
			change_variable = { which = engineering_research_reserve value = 8192 }
		}
		if = {
			limit = { stored_engineering_points > 4095.999 }
			add_engineering_research = -4096
			change_variable = { which = engineering_research_reserve value = 4096 }
		}
		if = {
			limit = { stored_engineering_points > 2047.999 }
			add_engineering_research = -2048
			change_variable = { which = engineering_research_reserve value = 2048 }
		}
		if = {
			limit = { stored_engineering_points > 1023.999 }
			add_engineering_research = -1024
			change_variable = { which = engineering_research_reserve value = 1024 }
		}
		if = {
			limit = { stored_engineering_points > 511.999 }
			add_engineering_research = -512
			change_variable = { which = engineering_research_reserve value = 512 }
		}
		if = {
			limit = { stored_engineering_points > 255.999 }
			add_engineering_research = -256
			change_variable = { which = engineering_research_reserve value = 256 }
		}
		if = {
			limit = { stored_engineering_points > 127.999 }
			add_engineering_research = -128
			change_variable = { which = engineering_research_reserve value = 128 }
		}
		if = {
			limit = { stored_engineering_points > 63.999 }
			add_engineering_research = -64
			change_variable = { which = engineering_research_reserve value = 64 }
		}
		if = {
			limit = { stored_engineering_points > 31.999 }
			add_engineering_research = -32
			change_variable = { which = engineering_research_reserve value = 32 }
		}
		if = {
			limit = { stored_engineering_points > 15.999 }
			add_engineering_research = -16
			change_variable = { which = engineering_research_reserve value = 16 }
		}
		if = {
			limit = { stored_engineering_points > 7.999 }
			add_engineering_research = -8
			change_variable = { which = engineering_research_reserve value = 8 }
		}
		if = {
			limit = { stored_engineering_points > 3.999 }
			add_engineering_research = -4
			change_variable = { which = engineering_research_reserve value = 4 }
		}
		if = {
			limit = { stored_engineering_points > 1.999 }
			add_engineering_research = -2
			change_variable = { which = engineering_research_reserve value = 2 }
		}
		if = {
			limit = { stored_engineering_points > 0.999 }
			add_engineering_research = -1
			change_variable = { which = engineering_research_reserve value = 1 }
		}
	}
	if = {
		limit = { stored_engineering_points < 0 }
		if = {
			limit = { stored_engineering_points < -2097151.999 }
			add_engineering_research = 2097152
			change_variable = { which = engineering_research_reserve value = -2097152 }
		}
		if = {
			limit = { stored_engineering_points < -1048575.999 }
			add_engineering_research = 1048576
			change_variable = { which = engineering_research_reserve value = -1048576 }
		}
		if = {
			limit = { stored_engineering_points < -524287.999 }
			add_engineering_research = 524288
			change_variable = { which = engineering_research_reserve value = -524288 }
		}
		if = {
			limit = { stored_engineering_points < -262143.999 }
			add_engineering_research = 262144
			change_variable = { which = engineering_research_reserve value = -262144 }
		}
		if = {
			limit = { stored_engineering_points < -131071.999 }
			add_engineering_research = 131072
			change_variable = { which = engineering_research_reserve value = -131072 }
		}
		if = {
			limit = { stored_engineering_points < -65535.999 }
			add_engineering_research = 65536
			change_variable = { which = engineering_research_reserve value = -65536 }
		}
		if = {
			limit = { stored_engineering_points < -32767.999 }
			add_engineering_research = 32768
			change_variable = { which = engineering_research_reserve value = -32768 }
		}
		if = {
			limit = { stored_engineering_points < -16383.999 }
			add_engineering_research = 16384
			change_variable = { which = engineering_research_reserve value = -16384 }
		}
		if = {
			limit = { stored_engineering_points < -8191.999 }
			add_engineering_research = 8192
			change_variable = { which = engineering_research_reserve value = -8192 }
		}
		if = {
			limit = { stored_engineering_points < -4095.999 }
			add_engineering_research = 4096
			change_variable = { which = engineering_research_reserve value = -4096 }
		}
		if = {
			limit = { stored_engineering_points < -2047.999 }
			add_engineering_research = 2048
			change_variable = { which = engineering_research_reserve value = -2048 }
		}
		if = {
			limit = { stored_engineering_points < -1023.999 }
			add_engineering_research = 1024
			change_variable = { which = engineering_research_reserve value = -1024 }
		}
		if = {
			limit = { stored_engineering_points < -511.999 }
			add_engineering_research = 512
			change_variable = { which = engineering_research_reserve value = -512 }
		}
		if = {
			limit = { stored_engineering_points < -255.999 }
			add_engineering_research = 256
			change_variable = { which = engineering_research_reserve value = -256 }
		}
		if = {
			limit = { stored_engineering_points < -127.999 }
			add_engineering_research = 128
			change_variable = { which = engineering_research_reserve value = -128 }
		}
		if = {
			limit = { stored_engineering_points < -63.999 }
			add_engineering_research = 64
			change_variable = { which = engineering_research_reserve value = -64 }
		}
		if = {
			limit = { stored_engineering_points < -31.999 }
			add_engineering_research = 32
			change_variable = { which = engineering_research_reserve value = -32 }
		}
		if = {
			limit = { stored_engineering_points < -15.999 }
			add_engineering_research = 16
			change_variable = { which = engineering_research_reserve value = -16 }
		}
		if = {
			limit = { stored_engineering_points < -7.999 }
			add_engineering_research = 8
			change_variable = { which = engineering_research_reserve value = -8 }
		}
		if = {
			limit = { stored_engineering_points < -3.999 }
			add_engineering_research = 4
			change_variable = { which = engineering_research_reserve value = -4 }
		}
		if = {
			limit = { stored_engineering_points < -1.999 }
			add_engineering_research = 2
			change_variable = { which = engineering_research_reserve value = -2 }
		}
		if = {
			limit = { stored_engineering_points < -0.999 }
			add_engineering_research = 1
			change_variable = { which = engineering_research_reserve value = -1 }
		}
	}
}
restore_engineering_research_reserve = {
	set_variable = { which = reserve_transport value = engineering_research_reserve }
	if = {
		limit = {
			check_variable = { which = reserve_transport value > 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2097151.999 }
			}
			add_engineering_research = 2097152
			change_variable = { which = reserve_transport value = -2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1048575.999 }
			}
			add_engineering_research = 1048576
			change_variable = { which = reserve_transport value = -1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 524287.999 }
			}
			add_engineering_research = 524288
			change_variable = { which = reserve_transport value = -524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 262143.999 }
			}
			add_engineering_research = 262144
			change_variable = { which = reserve_transport value = -262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 131071.999 }
			}
			add_engineering_research = 131072
			change_variable = { which = reserve_transport value = -131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 65535.999 }
			}
			add_engineering_research = 65536
			change_variable = { which = reserve_transport value = -65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 32767.999 }
			}
			add_engineering_research = 32768
			change_variable = { which = reserve_transport value = -32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 16383.999 }
			}
			add_engineering_research = 16384
			change_variable = { which = reserve_transport value = -16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 8191.999 }
			}
			add_engineering_research = 8192
			change_variable = { which = reserve_transport value = -8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 4095.999 }
			}
			add_engineering_research = 4096
			change_variable = { which = reserve_transport value = -4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 2047.999 }
			}
			add_engineering_research = 2048
			change_variable = { which = reserve_transport value = -2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1023.999 }
			}
			add_engineering_research = 1024
			change_variable = { which = reserve_transport value = -1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 511.999 }
			}
			add_engineering_research = 512
			change_variable = { which = reserve_transport value = -512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 255.999 }
			}
			add_engineering_research = 256
			change_variable = { which = reserve_transport value = -256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 127.999 }
			}
			add_engineering_research = 128
			change_variable = { which = reserve_transport value = -128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 63.999 }
			}
			add_engineering_research = 64
			change_variable = { which = reserve_transport value = -64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 31.999 }
			}
			add_engineering_research = 32
			change_variable = { which = reserve_transport value = -32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 15.999 }
			}
			add_engineering_research = 16
			change_variable = { which = reserve_transport value = -16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 7.999 }
			}
			add_engineering_research = 8
			change_variable = { which = reserve_transport value = -8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 3.999 }
			}
			add_engineering_research = 4
			change_variable = { which = reserve_transport value = -4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 1.999 }
			}
			add_engineering_research = 2
			change_variable = { which = reserve_transport value = -2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value > 0.999 }
			}
			add_engineering_research = 1
			change_variable = { which = reserve_transport value = -1 }
		}
	}
	if = {
		limit = {
			check_variable = { which = reserve_transport value < 0 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2097151.999 }
			}
			add_engineering_research = -2097152
			change_variable = { which = reserve_transport value = 2097152 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1048575.999 }
			}
			add_engineering_research = -1048576
			change_variable = { which = reserve_transport value = 1048576 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -524287.999 }
			}
			add_engineering_research = -524288
			change_variable = { which = reserve_transport value = 524288 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -262143.999 }
			}
			add_engineering_research = -262144
			change_variable = { which = reserve_transport value = 262144 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -131071.999 }
			}
			add_engineering_research = -131072
			change_variable = { which = reserve_transport value = 131072 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -65535.999 }
			}
			add_engineering_research = -65536
			change_variable = { which = reserve_transport value = 65536 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -32767.999 }
			}
			add_engineering_research = -32768
			change_variable = { which = reserve_transport value = 32768 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -16383.999 }
			}
			add_engineering_research = -16384
			change_variable = { which = reserve_transport value = 16384 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -8191.999 }
			}
			add_engineering_research = -8192
			change_variable = { which = reserve_transport value = 8192 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -4095.999 }
			}
			add_engineering_research = -4096
			change_variable = { which = reserve_transport value = 4096 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -2047.999 }
			}
			add_engineering_research = -2048
			change_variable = { which = reserve_transport value = 2048 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1023.999 }
			}
			add_engineering_research = -1024
			change_variable = { which = reserve_transport value = 1024 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -511.999 }
			}
			add_engineering_research = -512
			change_variable = { which = reserve_transport value = 512 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -255.999 }
			}
			add_engineering_research = -256
			change_variable = { which = reserve_transport value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -127.999 }
			}
			add_engineering_research = -128
			change_variable = { which = reserve_transport value = 128 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -63.999 }
			}
			add_engineering_research = -64
			change_variable = { which = reserve_transport value = 64 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -31.999 }
			}
			add_engineering_research = -32
			change_variable = { which = reserve_transport value = 32 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -15.999 }
			}
			add_engineering_research = -16
			change_variable = { which = reserve_transport value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -7.999 }
			}
			add_engineering_research = -8
			change_variable = { which = reserve_transport value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -3.999 }
			}
			add_engineering_research = -4
			change_variable = { which = reserve_transport value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -1.999 }
			}
			add_engineering_research = -2
			change_variable = { which = reserve_transport value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = reserve_transport value < -0.999 }
			}
			add_engineering_research = -1
			change_variable = { which = reserve_transport value = 1 }
		}
	}
}
