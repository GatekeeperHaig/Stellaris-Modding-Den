namespace = pdengine

country_event = {
	id = pdengine.01
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	#Continental
	immediate = {

		#Wet Planets
		every_planet = { 				
			limit = { is_planet_class = pc_continental is_homeworld = no not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			12 = { change_pc = pc_continental reroll_planet = yes}
			12 = { change_pc = pc_cascadian reroll_planet = yes }	
			12 = { change_pc = pc_ocean reroll_planet = yes	}	
			12 = { change_pc = pc_desertislands	reroll_planet = yes	}	
			12 = { change_pc = pc_subarctic reroll_planet = yes }	
			12 = { change_pc = pc_tropical reroll_planet = yes }		
			12 = { change_pc = pc_mangrove reroll_planet = yes }	
			12 = { change_pc = pc_hajungle reroll_planet = yes }	
			4 = { change_pc = pc_biolumen reroll_planet = yes }			
			}
		}
		every_planet = { 				
			limit = { is_planet_class = pc_ocean is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			12 = { change_pc = pc_continental reroll_planet = yes }
			12 = { change_pc = pc_cascadian reroll_planet = yes }	
			12 = { change_pc = pc_ocean reroll_planet = yes	}	
			12 = { change_pc = pc_desertislands	reroll_planet = yes	}	
			12 = { change_pc = pc_subarctic reroll_planet = yes }	
			12 = { change_pc = pc_tropical reroll_planet = yes }		
			12 = { change_pc = pc_mangrove reroll_planet = yes }	
			12 = { change_pc = pc_hajungle reroll_planet = yes }	
			4 = { change_pc = pc_biolumen reroll_planet = yes }			
			}
		}
		every_planet = { 				
			limit = { is_planet_class = pc_tropical is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			12 = { change_pc = pc_continental reroll_planet = yes }
			12 = { change_pc = pc_cascadian reroll_planet = yes }	
			12 = { change_pc = pc_ocean reroll_planet = yes	}	
			12 = { change_pc = pc_desertislands	reroll_planet = yes	}	
			12 = { change_pc = pc_subarctic reroll_planet = yes }	
			12 = { change_pc = pc_tropical reroll_planet = yes }		
			12 = { change_pc = pc_mangrove reroll_planet = yes }	
			12 = { change_pc = pc_hajungle reroll_planet = yes }	
			4 = { change_pc = pc_biolumen reroll_planet = yes }			
			}
		}

		#Dry Planets
		every_planet = { 				
			limit = { is_planet_class = pc_desert is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			15 = { change_pc = pc_desert reroll_planet = yes }
			15 = { change_pc = pc_desert reroll_planet = yes change_pc = pc_sandsea  }	
			14 = { change_pc = pc_desert reroll_planet = yes change_pc = pc_oasis  }	
			14 = { change_pc = pc_arid reroll_planet = yes	}	
			14 = { change_pc = pc_arid	reroll_planet = yes	change_pc = pc_mesa  }
			14 = { change_pc = pc_savannah reroll_planet = yes }		
			14 = { change_pc = pc_savannah reroll_planet = yes change_pc = pc_steppe  }			
			}
		}
		every_planet = { 				
			limit = { is_planet_class = pc_arid is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			15 = { change_pc = pc_desert reroll_planet = yes }
			15 = { change_pc = pc_desert reroll_planet = yes change_pc = pc_sandsea  }	
			14 = { change_pc = pc_desert reroll_planet = yes change_pc = pc_oasis  }	
			14 = { change_pc = pc_arid reroll_planet = yes	}	
			14 = { change_pc = pc_arid	reroll_planet = yes	change_pc = pc_mesa  }
			14 = { change_pc = pc_savannah reroll_planet = yes }		
			14 = { change_pc = pc_savannah reroll_planet = yes change_pc = pc_steppe  }			
			}
		}
		every_planet = { 				
			limit = { is_planet_class = pc_savannah is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			15 = { change_pc = pc_desert reroll_planet = yes }
			15 = { change_pc = pc_desert reroll_planet = yes change_pc = pc_sandsea  }	
			14 = { change_pc = pc_desert reroll_planet = yes change_pc = pc_oasis  }	
			14 = { change_pc = pc_arid reroll_planet = yes	}	
			14 = { change_pc = pc_arid	reroll_planet = yes	change_pc = pc_mesa  }
			14 = { change_pc = pc_savannah reroll_planet = yes }		
			14 = { change_pc = pc_savannah reroll_planet = yes change_pc = pc_steppe  }			
			}
		}

		#Cold Planets
		every_planet = { 				
			limit = { is_planet_class = pc_arctic is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			12 = { change_pc = pc_arctic reroll_planet = yes }
			12 = { change_pc = pc_arctic reroll_planet = yes change_pc = pc_frozen_desert  }	
			12 = { change_pc = pc_arctic reroll_planet = yes change_pc = pc_glacial  }	
			12 = { change_pc = pc_alpine reroll_planet = yes }	
			12 = { change_pc = pc_alpine reroll_planet = yes change_pc = pc_hadesert  }	
			12 = { change_pc = pc_alpine reroll_planet = yes change_pc = pc_boreal  }	
			12 = { change_pc = pc_tundra reroll_planet = yes }		
			12 = { change_pc = pc_tundra reroll_planet = yes change_pc = pc_swamp  }	
			4 = { change_pc = pc_tundra reroll_planet = yes change_pc = pc_mushroom 	}			
			}
		}
		every_planet = { 				
			limit = { is_planet_class = pc_alpine is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			12 = { change_pc = pc_arctic reroll_planet = yes }
			12 = { change_pc = pc_arctic reroll_planet = yes change_pc = pc_frozen_desert  }	
			12 = { change_pc = pc_arctic reroll_planet = yes change_pc = pc_glacial  }	
			12 = { change_pc = pc_alpine reroll_planet = yes }	
			12 = { change_pc = pc_alpine reroll_planet = yes change_pc = pc_hadesert  }	
			12 = { change_pc = pc_alpine reroll_planet = yes change_pc = pc_boreal  }	
			12 = { change_pc = pc_tundra reroll_planet = yes }		
			12 = { change_pc = pc_tundra reroll_planet = yes change_pc = pc_swamp  }	
			4 = { change_pc = pc_tundra reroll_planet = yes change_pc = pc_mushroom 	}			
			}
		}
		every_planet = { 				
			limit = { is_planet_class = pc_tundra is_homeworld = no  not = { has_planet_flag = prescripted_ideal } }
			random_list = {
			12 = { change_pc = pc_arctic reroll_planet = yes }
			12 = { change_pc = pc_arctic reroll_planet = yes change_pc = pc_frozen_desert  }	
			12 = { change_pc = pc_arctic reroll_planet = yes change_pc = pc_glacial  }	
			12 = { change_pc = pc_alpine reroll_planet = yes }	
			12 = { change_pc = pc_alpine reroll_planet = yes change_pc = pc_hadesert  }	
			12 = { change_pc = pc_alpine reroll_planet = yes change_pc = pc_boreal  }	
			12 = { change_pc = pc_tundra reroll_planet = yes }		
			12 = { change_pc = pc_tundra reroll_planet = yes change_pc = pc_swamp  }	
			4 = { change_pc = pc_tundra reroll_planet = yes change_pc = pc_mushroom 	}			
			}
		}

	}
}

country_event = {
	id = pdengine.02
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	#Hothouse
	immediate = {
			every_planet = { 
				limit = {  
					is_planet_class = pc_toxic
				}	
			random_list = {
			40 = {
				change_pc = pc_hothouse
			}
			60 = {}	
			}
		}
	}
}

#Player Start Homeworld Spawning
country_event = {
	id = pdengine.03
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
		immediate = {

		#Cascadian
		every_planet = { limit = { is_planet_class = pc_cascadian is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Atoll
		every_planet = { limit = { is_planet_class = pc_desertislands is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Crag
		every_planet = { limit = { is_planet_class = pc_subarctic is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Mangrove
		every_planet = { limit = { is_planet_class = pc_mangrove is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Tepui
		every_planet = { limit = { is_planet_class = pc_hajungle is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Biolumen
		every_planet = { limit = { is_planet_class = pc_biolumen is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Steppe
		every_planet = { limit = { is_planet_class = pc_steppe is_homeworld = yes }	generate_pd_start_deposits_and_blockers = yes }
		#Dune
		every_planet = { limit = { is_planet_class = pc_sandsea is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Oasis
		every_planet = { limit = { is_planet_class = pc_oasis is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Mesa
		every_planet = { limit = { is_planet_class = pc_mesa is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Bog
		every_planet = { limit = { is_planet_class = pc_swamp is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Frigid
		every_planet = { limit = { is_planet_class = pc_frozen_desert is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Glacial
		every_planet = { limit = { is_planet_class = pc_glacial is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Atacama
		every_planet = { limit = { is_planet_class = pc_hadesert is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Boreal
		every_planet = { limit = { is_planet_class = pc_boreal is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Mushroom
		every_planet = { limit = { is_planet_class = pc_mushroom is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Floating
		every_planet = { limit = { is_planet_class = pc_floating is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Crystal
		every_planet = { limit = { is_planet_class = pc_crystal is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Techno-Organic Player Start
		every_planet = { limit = { is_planet_class = pc_technoorganic is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Graveyard
		every_planet = { limit = { is_planet_class = pc_graveyard is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Methane
		every_planet = { limit = { is_planet_class = pc_methane is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Ammonia
		every_planet = { limit = { is_planet_class = pc_ammonia is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes }
		#Superhabitable
		every_planet = { limit = { is_planet_class = pc_superhabitable is_homeworld = yes } change_planet_size = +9 generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "superhabitable" days = -1} }
		#Geothermal
		every_planet = { limit = { is_planet_class = pc_geothermal is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "geothermal" days = -1} }
		#Tidally Locked
		every_planet = { limit = { is_planet_class = pc_tidallylocked is_homeworld = yes is_moon = no } generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "tidal_locked2" days = -1} }
		#Crystal
		every_planet = { limit = { is_planet_class = pc_crystal is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "crystal" days = -1} }
		#Floating
		every_planet = { limit = { is_planet_class = pc_floating is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "floating" days = -1} }
		#Graveyard
		every_planet = { limit = { is_planet_class = pc_graveyard is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "graveyard" days = -1} }
		#Techno-Organic
		every_planet = { limit = { is_planet_class = pc_technoorganic is_homeworld = yes } generate_pd_start_deposits_and_blockers = yes add_modifier = { modifier = "technoorganic" days = -1} }
		}
}


country_event = {
	id = pdengine.04
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	#Hothouse
	immediate = {
			every_planet = { 
				remove_modifier = "tidal_locked"	
		}
	}
}


#PD Rare Classes Species Start Nearby Planets
country_event = {
	id = pdengine.05
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
		immediate = {

		#Tidally-Locked Player Start
		every_planet = {
		limit = { is_planet_class = pc_tidallylocked  is_homeworld = no has_planet_flag = prescripted_ideal }
		random_list = {
			34 = { change_pc = pc_continental reroll_planet = yes }
			33 = { change_pc = pc_desert reroll_planet = yes }
			33 = { change_pc = pc_arctic reroll_planet = yes }
			}
		}
		#Superhabitable Player Start
		every_planet = { 				
			limit = { is_planet_class = pc_superhabitable is_homeworld = no has_planet_flag = prescripted_ideal }
			random_list = {
				4.50 = { change_pc = pc_continental reroll_planet = yes }
				4.50 = { change_pc = pc_cascadian reroll_planet = yes }	
				4.50 = { change_pc = pc_ocean reroll_planet = yes }	
				4.50 = { change_pc = pc_desertislands	reroll_planet = yes	}	
				4.50 = { change_pc = pc_subarctic reroll_planet = yes }	
				4.50 = { change_pc = pc_tropical reroll_planet = yes }		
				4.50 = { change_pc = pc_mangrove reroll_planet = yes }	
				4.50 = { change_pc = pc_hajungle reroll_planet = yes }	
				4.50 = { change_pc = pc_desert reroll_planet = yes }
				4.25 = { change_pc = pc_sandsea reroll_planet = yes }	
				4.25 = { change_pc = pc_oasis reroll_planet = yes }	
				4.25 = { change_pc = pc_arid reroll_planet = yes }	
				4.25 = { change_pc = pc_mesa reroll_planet = yes }
				4.25 = { change_pc = pc_savannah reroll_planet = yes }		
				4.25 = { change_pc = pc_steppe reroll_planet = yes }
				4.25 = { change_pc = pc_arctic reroll_planet = yes }
				4.25 = { change_pc = pc_frozen_desert reroll_planet = yes }	
				4.25 = { change_pc = pc_glacial reroll_planet = yes }	
				4.25 = { change_pc = pc_alpine reroll_planet = yes }	
				4.25 = { change_pc = pc_hadesert reroll_planet = yes }	
				4.25 = { change_pc = pc_boreal reroll_planet = yes }	
				4.25 = { change_pc = pc_tundra reroll_planet = yes }		
				4.25 = { change_pc = pc_swamp reroll_planet = yes }	
			}
		}
		#Geothermal Player Start
		every_planet = { 				
			limit = { is_planet_class = pc_geothermal is_homeworld = no has_planet_flag = prescripted_ideal }
			random_list = {
				50 = { change_pc = pc_tropical reroll_planet = yes }	
				50 = { change_pc = pc_glacial reroll_planet = yes }
			}
		}
		#Biolumen Player Start
		every_planet = { 				
			limit = { is_planet_class = pc_biolumen is_homeworld = no has_planet_flag = prescripted_ideal }
			random_list = {
				25 = { change_pc = pc_tropical reroll_planet = yes }	
				25 = { change_pc = pc_hajungle reroll_planet = yes }	
				25 = { change_pc = pc_mangrove reroll_planet = yes }	
				25 = {}	
			}
		}
		#Mushroom Player Start
		every_planet = { 				
			limit = { is_planet_class = pc_mushroom is_homeworld = no has_planet_flag = prescripted_ideal }
			random_list = {
				38 = { change_pc = pc_tundra reroll_planet = yes }	
				38 = { change_pc = pc_swamp reroll_planet = yes }		
				24 = {}	
			}
		}
	}	
}


country_event = {
	id = pdengine.06
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
		immediate = {
			every_planet = {
				limit = { is_planet_class = pc_tidallylocked  is_homeworld = yes is_moon = yes }
 				ROOT = { set_country_flag = tidallylockedhomeworldmoon }
			}
		}
}

country_event = {
	id = pdengine.07
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
		
	trigger	 = { has_country_flag = tidallylockedhomeworldmoon }

		immediate = {
			random_planet_within_border = {
				limit = { is_capital = no is_moon = no is_star = no is_asteroid = no NOT = { is_planet_class = pc_gas_giant } }
				set_planet_size = 20
				change_pc = pc_tidallylocked
				generate_pd_start_deposits_and_blockers = yes
				add_modifier = {
					modifier = "tidal_locked2"
					days = -1
				}
				set_owner = ROOT
				set_planet_flag = tidallylockedhomeworld
				#All other pop types
				create_pop = { 
					species = owner_species
					ethos = random
				}	
				set_capital = yes
				generate_start_buildings_and_districts = yes
				generate_start_pops = yes
			}
			every_owned_pop = {
				modify_species = {
					species = this
					ideal_planet_class = pc_tidallylocked
					base = none # makes this replace parent species
				}
			}			
			random_owned_planet = {
				limit = { is_capital = no }
				change_pc = pc_barren
				reset_planet = yes
			}
		}
	} 

planet_event = {
	id = pdengine.08
	hide_window = yes
	is_triggered_only = yes
	immediate = {
	if = {
		limit = { is_planet_class = pc_cascadian }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_desertislands }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_mangrove }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_subarctic }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_hajungle }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_biolumen }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_steppe }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_sandsea }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_oasis }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_mesa }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_swamp }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_frozen_desert }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_glacial }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_hadesert }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_boreal }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_mushroom }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_methane }
		reroll_planet = yes
		}
	if = {
		limit = { is_planet_class = pc_ammonia }
		reroll_planet = yes
		}

	}
}