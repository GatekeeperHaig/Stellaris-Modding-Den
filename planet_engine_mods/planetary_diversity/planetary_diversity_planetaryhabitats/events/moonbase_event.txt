
namespace = moonbase

# Habitat Complete Notification
country_event = {
	id = "moonbase.00"
	title = "moonbase.00.name"
	desc = {
		trigger = {
			NOT = { has_country_flag = already_built_pd_habitat }
		}
		text = "moonbase.00.desc.a"
	}

	desc = {
		trigger = {
			has_country_flag = already_built_pd_habitat
		}
		text = "moonbase.00.desc.b"
	}
	show_sound = event_mystic_reveal
	picture = GFX_evt_colony_settlement
	is_triggered_only = yes
	location = FromFromFrom.Planet

	option = {
		name = EXCELLENT
		hidden_effect = { set_country_flag = already_built_pd_habitat }
	}
}

event = {
	id = moonbase.01
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = { set_global_flag = planetarydiversityhabitats }
}

country_event = {
	id = moonbase.02
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	#Planets get underground cave

	#trigger = {	owner = { has_trait = trait_pc_sulfur_preference }}

	immediate = {
		every_galaxy_planet = { 
			limit = {  
				OR = {
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
				}
				not = { has_modifier = pdhabcavesystem }	
				planet_size > 9
				planet_size < 26	
				solar_system = {
					NOR = {
						is_star_class = sc_black_hole
						is_star_class = sc_neutron_star
						is_star_class = sc_pulsar
					}
				}
			}	
			random_list = {
				30 = { 
					add_modifier = { modifier = pdhabcavesystem days = -1	} 
				}
				70 = { }	
			}
		}
		every_galaxy_planet = { 
			limit = {  
				OR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_hothouse
					is_planet_class = pc_toxic
				}
				not = { has_modifier = pdhabcalmwinds }	
				planet_size > 9
				planet_size < 26	
				solar_system = {
					NOR = {
						is_star_class = sc_black_hole
						is_star_class = sc_neutron_star
						is_star_class = sc_pulsar
					}
				}
			}	
			random_list = {
				30 = { 
					add_modifier = { modifier = pdhabcalmwinds days = -1	} 
				}
				70 = { }	
			}
		}
		every_galaxy_planet = { 
			limit = {  
				is_planet_class = pc_subglacial
				not = { has_modifier = pdhabsubglacialocean }	
				planet_size > 9
				planet_size < 26	
				solar_system = {
					NOR = {
						is_star_class = sc_black_hole
						is_star_class = sc_neutron_star
						is_star_class = sc_pulsar
					}
				}
			}	
		}
		every_galaxy_planet = { 
			limit = {  
				is_planet_class = pc_frozen
				not = { has_modifier = pdhabsubglacialocean }	
				planet_size > 9
				planet_size < 26	
				solar_system = {
					NOR = {
						is_star_class = sc_black_hole
						is_star_class = sc_neutron_star
						is_star_class = sc_pulsar
					}
				}
			}	
			random_list = {
				30 = { 
					add_modifier = { modifier = pdhabsubglacialocean days = -1	} 
				}
				70 = { }	
			}
		}
		every_galaxy_planet = { 
			limit = {  
				is_planet_class = pc_molten
				not = { has_modifier = pdhabvolcanicminerals }	
				planet_size > 9
				planet_size < 26	
				solar_system = {
					NOR = {
						is_star_class = sc_black_hole
						is_star_class = sc_neutron_star
						is_star_class = sc_pulsar
					}
				}
			}	
			random_list = {
				30 = { 
					add_modifier = { modifier = pdhabvolcanicminerals days = -1	} 
				}
				70 = { }	
			}
		}
	}
}