namespace = ex_combat_game_start

event = {
	id = ex_combat_game_start.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			if = { #cloaking (+evasion): highest priority on corvettes
				limit = { 
					is_country_type = default
				}				
				random_list = { # you can use any name for the flag
					20 = { set_country_flag = component_cloak_pref_1 modifier = { factor = 0.5 is_high_aggression_personality = yes } modifier = { factor = 0.5 is_low_aggression_personality = yes } }
					10 = { set_country_flag = component_cloak_pref_2 modifier = { factor = 0.25 is_high_aggression_personality = yes } modifier = { factor = 0.25 is_low_aggression_personality = yes } }
					5  = { set_country_flag = component_cloak_pref_3 modifier = { factor = 0.125 is_high_aggression_personality = yes } modifier = { factor = 0.125 is_low_aggression_personality = yes } }
					65 = { } # this mean no flag will be added
				}	
			}	# there are two options here - either do a bunch of other if fields, or use else = { }
			if = { #marauder (+dmg): highest priority on BB and cruiser
				limit = { 
					is_country_type = default
				}				
				random_list = { # you can use any name for the flag
					20 = { set_country_flag = component_marauder_pref_1 modifier = { factor = 0.5 is_high_aggression_personality = yes } modifier = { factor = 0.5 is_low_aggression_personality = yes } }
					10 = { set_country_flag = component_marauder_pref_2 modifier = { factor = 0.25 is_high_aggression_personality = yes } modifier = { factor = 0.25 is_low_aggression_personality = yes } }
					5  = { set_country_flag = component_marauder_pref_3 modifier = { factor = 0.125 is_high_aggression_personality = yes } modifier = { factor = 0.125 is_low_aggression_personality = yes } }
					65 = { } # this mean no flag will be added
				}	
			}	# there are two options here - either do a bunch of other if fields, or use else = { }
			if = { #integrity (+hull): highest priority on destroyer and dreadnought
				limit = { 
					is_country_type = default
				}				
				random_list = { # you can use any name for the flag
					20 = { set_country_flag = component_integrity_pref_1 modifier = { factor = 0.5 is_high_aggression_personality = yes } modifier = { factor = 0.5 is_low_aggression_personality = yes } }
					10 = { set_country_flag = component_integrity_pref_2 modifier = { factor = 0.25 is_high_aggression_personality = yes } modifier = { factor = 0.25 is_low_aggression_personality = yes } }
					5  = { set_country_flag = component_integrity_pref_3 modifier = { factor = 0.125 is_high_aggression_personality = yes } modifier = { factor = 0.125 is_low_aggression_personality = yes } }
					65 = { } # this mean no flag will be added
				}	
			}	# there are two options here - either do a bunch of other if fields, or use else = { }
			
			if = { #non aggression/shield specific: If they didn't get anything above (or not high enough level depending on ship, they still go for aggression/shield, this decides which one)
				limit = { 
					is_country_type = default
					is_low_aggression_personality = no # there are three triggers here: is_high/medium/low_aggression_personality
					is_high_aggression_personality = no # there are three triggers here: is_high/medium/low_aggression_personality
				}				
				random_list = { # you can use any name for the flag
					50 = { set_country_flag = component_aggression_pref }
					50 = { set_country_flag = component_shield_pref }
				}	
			} 
		}
	}
}
